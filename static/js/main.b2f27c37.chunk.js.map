{"version":3,"sources":["backend/src/DBManager.js","pages/Components/CalendarPopover.jsx","pages/Components/Sortable.jsx","pages/Home.jsx","pages/Upcoming.jsx","pages/Calendar.jsx","pages/Components/CalendarTasklistPopover.jsx","pages/Completed.jsx","pages/Perspectives.jsx","pages/Components/PerspectiveEditor.jsx","pages/Projects.jsx","pages/WorkspaceWelcome.jsx","pages/Components/FloatingActionButton.jsx","pages/Components/ReleaseNotesModal.jsx","pages/Components/QuickSwitcher.jsx","pages/Components/KeybindManager.jsx","pages/Components/TagsInput.jsx","pages/Components/WorkspaceModal.jsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","pages/Components/Repeat.jsx","pages/Components/TagEditor.jsx","pages/Components/Task.jsx","backend/src/ObjectManager.js","backend/src/PerspectiveManager.js","backend/CondutionEngine.js","gruntman.js","pages/Auth.jsx","pages/Loader.jsx","pages/Onboarding.jsx","App.jsx","serviceWorker.ts","index.jsx"],"names":["storageType","memoryDB","firebaseDB","fsRef","requestRefresh","readiness","require","FilesystemDirectory","FilesystemEncoding","Plugins","Filesystem","Device","cache","Map","unsubscribeCallbacks","getFirebaseRef","path","ref","console","assert","includes","collectionGroup","collection","slice","nav","DocumentReference","Query","Error","toString","doc","Array","isArray","where","generateRandomString","Math","random","substring","a","TODOstring","JSON","stringify","has","set","get","onSnapshot","error","trace","next","snap","diskJSONDB","dbRoot","Data","read","readFile","directory","encoding","UTF8","contents","data","parse","write","writeFile","pointer","some","i","undefined","parsed","docRefs","docID","push","id","Object","assign","exists","docs","payload","forEach","key","Date","seconds","round","getTime","task","pop","cacheRef","cachedRead","TODO","storageRef","add","storageAdd","storageRead","storageSet","update","storageUpdate","delete","storageDel","cRef","flush","__init__","loaders","features","obj","firebase","initializeApp","dbkeys","deploy","firestore","enablePersistence","synchronizeTabs","catch","Promise","resolve","getInfo","platform","isMobile","process","resourcesPath","sqliteDB","dbPath","all","useDb","db","refresher","CalendarUnit","props","useState","initialDate","dateSelected","setDateSelected","currentMonth","getMonth","currentYear","getFullYear","firstDayMonth","lastDayMonth","lastDayLastMonth","firstDayDayname","getDay","__util_calculate_gradient","left","right","gradientAmount","color1","color2","ratio","hex","x","length","r","ceil","parseInt","g","b","daysBefore","map","_","type","content","getDate","daysAfter","contentDays","heat","setHeat","prototype","max","apply","this","useEffect","hm","engine","selectTasksInRange","uid","val","date","due","setHours","time","values","from","style","getComputedStyle","document","body","hexes","e","getPropertyValue","trim","keys","display","className","backgroundColor","border","onClick","onDateSelected","disableOnclick","toLocaleString","gruntman","localizations","getLanguage","weekday","month","useTime","defaultValue","toLocaleTimeString","onKeyPress","d","chrono","target","value","newDate","getHours","getMinutes","getSeconds","clbtd","marginRight","float","onDidDismiss","CalendarPopover","reference","isOpen","isShown","borderRadius","cssClass","SortableTaskList","activelyDragging","setActivelyDragging","order","useRef","moveApplied","currentIndex","dragEnvelope","dragEnabled","setDragEnabled","objRefs","list","React","createRef","getAnimationDestinationFromIndex","activeIndex","mY","currentOrder","noAnim","down","indx","y","indexOf","zIndex","config","tension","friction","mass","clamp","immediate","useSprings","current","springs","bind","useDrag","args","index","movement","movementY","first","last","tap","onSortStart","sorted","sortedID","moveBy","floor","abs","newIndex","splice","setTimeout","filter","do","items","onSortEnd","newOrder","drag","delay","filterTaps","enabled","anim","div","position","cursor","transform","interpolate","onClickCapture","stopPropagation","tid","prefix","datapack","availability","envelope","SortableProjectList","item","activeTaskID","activeTaskRef","opacity","paginate","history","possibleProjects","autoBind","isPlatform","createHashHistory","createBrowserHistory","Home","switch","workspaceType","workspaceify","userlandify","setState","isWorkspace","workspace","to","itemSelected","state","projects","perspectives","authType","isWorkspaceRequestShown","registerGlobalRefresher","refresh","abtibRef","menu","url","URL","uri","pathname","split","hash","prevProps","prevState","snapshot","sends","getTopLevelProjects","tlp","getPerspectives","psp","getInvitations","email","invites","top","sort","lockUpdates","getWorkspaces","newWorkspaces","updateWorkspaces","resolveInvitation","getWorkspace","meta","name","unlockUpdates","Router","IonReactHashRouter","IonReactRouter","keybindRef","abtib","noBounce","forceOverscroll","contentId","mode","window","navigator","fontSize","icon","chevronForwardCircle","upcoming","checkmarkCircle","completed","calendar","close","npid","pid","f","paddingRight","proj","listOutline","dispatch","operation","logout","message","buttons","text","role","handler","render","exact","displayName","actualUID","match","params","menuRefresh","options","create","Component","Upcoming","tomorrow","setDate","greetings","greetings_setA","inbox","dueSoon","possibleTags","possibleProjectsRev","possibleTagsRev","projectSelects","tagSelects","projectDB","timeline","timelineShown","greeting","workspaces","workspacesPopoverShown","workspaceModalShown","currentlyEditedWorkspace","currentWorkspace","personal_workspace","updatePrefix","workspaceButton","registerRefresher","getItemAvailability","avail","getInboxandDS","pandt","getProjectsandTags","pPandT","projectList","tagsList","label","views","pdb","topLevels","getProjectStructure","buildSelectString","p","level","children","isSameDateAs","pDate","refrenceDate","tcontent","n","workspaceNames","halt","overflow","getUserByEmail","onTouchMove","preventDefault","marginLeft","color","background","width","height","fontWeight","nativeEvent","showBackdrop","event","dismiss","borderTop","generateWorkspace","new_workspace","overflowY","flexGrow","unsorted","ds","marginTop","hide","show","timelineItem","toLocaleDateString","year","day","paddingLeft","paddingTop","refreshed","CalPageBigOllendar","isPopoverShown","setIsPopoverShown","shownList","setShownList","names","ids","nameList","idList","currentDate","marginBottom","Calendar","today","taskList","popoverIsVisible","repeater","showEdit","endDate","effect","offset","class","withGetScreen","mobileLimit","tabletLimit","shouldListenOnResize","CalendarTasklistPopover","refs","onModal","then","result","TaskObject","Completed","tasksShown","taskCats","rendering","taskArr","getCompletedTasks","full","cat","startingCompleted","handleFetchMore","Perspectives","perspectiveName","perspectiveQuery","perspectiveAvail","perspectiveTord","possiblePerspectives","perspectiveObject","perspective","calc","query","tord","registerScheduler","hideEdit","updateName","startHighlighted","onChange","persist","data-tip","borderColor","margin","handleDelete","withRouter","PerspectiveEdit","inputEvent","expanded","inited","selected","inputValue","currentlySelected","focus","log","subs","entries","searchTerm","toLowerCase","open","handleQueryChange","keyname","selectedItem","filterItems","handleAppend","idx","len","ctrlKey","scrollIntoView","behavior","block","onWillPresent","getItems","alignItems","whiteSpace","perspective_build_callout","minWidth","placeholder","perspective_include","interface","onIonChange","detail","psp_rem","psp_avil","psp_flg","perspective_order","psp_abd","psp_dbd","psp_abe","psp_dbe","psp_alpha","handleHelp","autoFocus","animated","spellcheck","debounce","onKeyDown","handleKeydown","onMouseEnter","Projects","parent","is_sequential","currentProject","activeTask","cProject","parentProj","overflowX","_explode","nb_at","nb_ap","WorkspaceWelcome","loaded","wsp","nahman","where_workspace","workspace_forbidden","workspace_welcome","workspace_explanation","ABTIB","qa_content","isExpanded","setisExpanded","isSaving","setisSaving","useSpring","input","readOnly","onFocus","onBlur","onKeyUp","taskName","dateInfo","defer","end","start","replace","npobj","blur","Storage","ReleaseNotesModal","setIsShown","res","href","QuickSwitcher","filteredList","direction","prop_store","projs","searcher","processItems","getProjs","mod","setFocus","o","slicedSelectedItem","updateIdx","goBack","goForward","qs_show","onDidPresent","focusRef","Keybinds","bindings","sidebar_switcher","sidebar_list","sidebar_incrimentor","focusElement","globalBindings","manageQs","sidebar_index","that","num","loca","sidebarItem","arraysAreIdentical","arr1","arr2","combo","Mousetrap","bindGlobal","unbind","setSidebarIndex","defaultInputProps","TagsInput","tag","isFocused","tagDisplayProp","concat","changed","hasControlledInput","onChangeInput","tags","onValidationReject","onlyUnique","maxTags","arr","out","uniq","every","currentTag","_getTagDisplayValue","rejectedTags","_validate","tagDisplayValue","remainingLimit","newValue","indexes","_clearInput","validate","validationRegex","test","added","empty","keyCode","preventSubmit","handleOnFocus","handleOnBlur","_tag","_makeTag","_addTags","addOnPaste","pasteSplit","clipboardData","getData","getClipboardData","defaultPrevented","removeKeys","addKeys","remove","accept","_shouldPreventDefaultEventOnAdd","_removeTag","inputProps","addOnBlur","otherInputProps","disabled","currentValue","tagProps","renderLayout","renderTag","renderInput","focusedClassName","tagComponents","onRemove","handleRemove","getTagDisplayValue","inputComponent","onPaste","handlePaste","handleKeyDown","handleChange","addTag","handleClick","defaultProps","other","classNameRemove","autosizingRenderInput","WorkspaceModal","workspaceName","setWorkspaceName","workspaceEditors","setWorkspaceEditors","isPublic","setIsPublic","editors","is_public","editWorkspace","isValid","newAccount","inviteToWorkspace","removedAccount","revokeToWorkspace","workspace_email","webpackAsyncContext","req","__webpack_require__","code","module","exports","Repeat","rule","advanced","on","getTaskInformation","taskInfo","repeat","loadTask","repeat_word","repeat_every_day","repeat_every_week","repeat_every_month","repeat_every_year","repeat_datework_weekname_m","repeat_datework_weekname_tu","repeat_datework_weekname_w","repeat_datework_weekname_th","repeat_datework_weekname_f","repeat_datework_weekname_sa","repeat_datework_weekname_su","newOn","elem","oldOn","TagEditor","tagList","getTags","setTagState","tagClicked","parseFromTimeZone","AnimationFactory","Keyframes","Spring","taskHeight","taskMargin","taskBackground","taskPadding","taskEditOpacity","taskEditMaxHeight","taskOpacity","taskNameDecoration","taskPosition","taskDisplay","taskMaxHeight","reset","complete","Task","componentWillUnmount","removeEventListener","detectOutsideClick","toggleTask","deferDate","dueDate","desc","isFlagged","isFloating","project","decoration","isComplete","showRepeat","showTagEditor","deferPopoverShown","duePopoverShown","haveBeenExpanded","startOpen","notificationPopoverShown","notificationCalendarShown","hasNotification","initialRenderDone","me","checkbox","TagEditorRef","actualCheck","duePopover","deferPopover","notificationPopover","notificationCalender","showTageEditor","toISOString","timeZone","timezone","checkNotification","refreshDecorations","addEventListener","contains","getElementById","closeTask","getPlatforms","openTask","native","animatedProps","freeze","minHeight","maxHeight","padding","hideRepeat","defaultChecked","htmlFor","autoComplete","nt","textDecoration","tabIndex","cancelNotification","scheduleNotification","notifPermissionGranted","showNotificationPopover","Intl","DateTimeFormat","resolvedOptions","DateInput","TimeInput","portalId","showTimeInput","dateFormat","customTimeInput","customInput","isClearable","classNamePrefix","styles","menuPortal","provided","menuPortalTarget","option","oldProject","isMulti","base","actionMeta","view","tids","__isNew__","tagID","originalTags","tagIDs","dbManager","util","select","compare","lhs","cmp","rhs","TypeError","requirements","dat","any","atLeast","threshold","counter","atMost","debug","arg","setWorkspaceMode","workspaceMode","userID","userEmail","oldWorkspaces","workspaceID","merge","userData","inviteeEmail","inviteID","err","getTasksWithQuery","taskDocs","getInboxTasks","inboxDocs","getDSTasks","available","wrt","dsTime","dsDocs","dueTasks","min","returnFull","tasks","avaliable","warn","ibt","dsTasks","prev","dst","avalibility","dstWithoutIbt","taskID","paramName","ti","projectIdByName","projectNameById","projectsSorted","top_level","projElem","sortOrder","ret","tagIdByName","tagNameById","pInfobyName","pInfobyID","ps","pstp","projectID","updateQuery","modifyTask","newTask","taskObj","ibtL","projL","newProject","projObj","size","hasOwnProperty","newPerspective","pstObj","newTag","tagName","dissociateTask","dump","t","originalChildren","associateTask","assosProjID","willDissociateTask","taskData","perspectiveID","deleteProject","struct","cpLtTasks","cpLt","recursive","itemID","recursivelyGetBlocks","bstat","projStruct","child","tlps","blockstatus","blocks","completedTasks","taskItems","tsk","cpSorted","taskA","taskB","completeDate","yesterday","thisWeek","thisMonth","setMonth","tasksToday","tsks","tasksYesterday","tasksWeek","tasksMonth","evenBefore","tz","username","cdyrslf","npd","od","odid","dsID","nice","sequential","blocked","click","pspDir","pspsp","specific","sp","promotion","online","dis","patreon","yiipee","getTasks","removeParamFromTask","modifyProject","modifyPerspective","completeTask","associateProject","dissociateProject","deleteTask","deletePerspective","getDSRow","deleteTag","onBoard","perspectiveHandler","cgs","taskFilter","taskCaptureGroup","logicCaptureGroup","globalCaptureGroup","clear","lastIndex","getCaptureGroups","str","parseTaskCaptureGroup","parseSpecialVariables","vr","compileTask","pPaT","additionalFilter","queries","taskCache","antiCache","dbObj","pS","compileLogicCaptureGroup","ltr","taskCompValues","util_datesequal","dateA","dateB","pStr","pRes","fquery","logicSort","exec","Set","flat","taskObjs","aval","it","dbRefObj","use","dbFuncs","pspObj","LocalNotifications","Permissions","Gruntman","requestPermission","granted","platforms","addListener","handleNotificationAction","hashCode","s","reduce","charCodeAt","globalRefresher","callbackRefresherReleased","conflictResolution","releaseTimeout","doers","macro","applyOrder","ntObject","ntID","tInfo","update__project","update__uncomplete","update__complete","rRule","defDistance","rOn","dow","oDow","setFullYear","update__name","projectName","update__pstate","associate","dissociate","pObj","npspid","update__perspective","delete__perspective","undoers","backlog","undolog","taskLog","canUndo","schedulers","updateLock","updateInterval","secretLocalizedStrings","clearTimeout","interval","title","schedule","notifications","at","sound","attachments","extra","action","notification","actionId","cancel","expectedID","getPending","pending","needed","callback","identifier","wait","actionName","bypassUpdates","isUndo","unsafe_FORCE_UPDATES","actionID","nodes","shift","resources","Auth","greetings_setB","authMode","showExtra","setPersistence","Persistence","LOCAL","signInWithEmailAndPassword","$","currentUser","emailVerified","service","addClass","problem","createUserWithEmailAndPassword","html","sendEmailVerification","updateProfile","reload","sendPasswordResetEmail","welcome_auth_msg","nowirres","greeting_auth_normal","what_should_we","password","doLogin","doCreate","doRecover","dispatchCreate","need_and_do","need_verify","need_and_login","remembered","rec_pswd","login","newuser","lds","verifem","lerec","proceed","doLocal","ulac","LoadSpinner","defaultOptions","loop","autoplay","animationData","rendererSettings","preserveAspectRatio","Loader","justifyContent","isStopped","isPaused","bottom","Onboarding","maxWidth","setupConfig","swipeBackEnabled","App","LocalizedStrings","en","zh","de","matchMedia","matches","removeClass","Engine","dbType","onAuthStateChanged","user","authDispatch","onboarding_content","signOut","isError","Boolean","location","hostname","ReactDOM","serviceWorker","ready","registration","unregister"],"mappings":"yHAKIA,EAEAC,EACAC,EAAYC,EACZC,EAKAC,E,iDAHyDC,EAAQ,IAA7DC,E,EAAAA,oBAAqBC,E,EAAAA,mBAAoBC,E,EAAAA,QACjCC,GAAeD,EAAvBE,OAAuBF,EAAfC,Y,EAgFO,WAInB,IAAIE,EAAQ,IAAIC,IACZC,EAAuB,IAAID,IAgB/B,SAASE,EAAeC,GAcpB,IAAIC,EAAMf,EAEVgB,QAAQC,OAA0B,kBAAZH,EAAK,IAEvBC,EADAD,EAAK,GAAGI,SAAS,KACXH,EAAII,gBAAgBL,EAAK,IAEzBC,EAAIK,WAAWN,EAAK,IApBJ,oBAsBVA,EAAKO,MAAM,IAtBD,IAsB1B,2BAA+B,CAAC,IAAvBC,EAAsB,QAC3B,GAAmB,kBAARA,EACP,GAAIP,aAAed,EAAMsB,kBACrBR,EAAMA,EAAIK,WAAWE,OAClB,MAAIP,aAAed,EAAMuB,OAG5B,MAAM,IAAIC,MAAM,oBAAqBV,EAAIW,YAFzCX,EAAMA,EAAIY,IAAIL,OAIf,KAAIM,MAAMC,QAAQP,GAQrB,MAAM,IAAIG,MAAM,eAAgBH,EAAII,YAPpC,KAAIX,aAAed,EAAMuB,OAGrB,MAAM,IAAIC,MAAM,oBAAqBH,EAAII,YAHZ,IAAD,EAC5BX,GAAM,EAAAA,GAAIe,MAAJ,oBAAaR,IAIvBN,QAAQC,OAAOF,aAAed,EAAMuB,SArClB,8BA0C1B,OAAOT,EAGX,SAASgB,IASL,OAAOC,KAAKC,SAASP,SAAS,IAAIQ,UAAU,GAAGF,KAAKC,SAASP,SAAS,IAAIQ,UAAU,GAAGF,KAAKC,SAASP,SAAS,IAAIQ,UAAU,GA3EvG,4CA8EzB,WAA0BpB,GAA1B,iBAAAqB,EAAA,6DAYUC,EAAaC,KAAKC,UAAUxB,GAC7BJ,EAAM6B,IAAIH,KAELrB,EAAMF,EAAeC,GAC3BJ,EAAM8B,IAAIJ,EAAYrB,EAAI0B,OAC1B7B,EAAqB4B,IAAIJ,EACrBrB,EAAI2B,WAAW,CACXC,MAAO3B,QAAQ4B,MACfC,KAAM,SAACC,GACHpC,EAAM8B,IAAIJ,EAAYU,GACtB5C,SAtBpB,SA2BiBQ,EAAM+B,IAAIL,GA3B3B,oFA9EyB,sBA4GzB,IAAIW,EAAa,WACb,IAAMC,EAAS3C,EAAoB4C,KAoBnC,MAAO,CAACC,KAlBA,uCAAG,4BAAAf,EAAA,sEACe3B,EAAW2C,SAAS,CACtCrC,KAHO,iBAIPsC,UAAWJ,EACXK,SAAU/C,EAAmBgD,OAJ1B,OACHC,EADG,OAKHC,KACJzD,EAAWsC,KAAKoB,MAAMF,GANf,2CAAH,qDAkBMG,MATL,uCAAG,sBAAAvB,EAAA,sEACF3B,EAAWmD,UAAU,CACvB7C,KAZO,iBAaPsC,UAAWJ,EACXQ,KAAMnB,KAAKC,UAAUvC,GACrBsD,SAAU/C,EAAmBgD,OALzB,2CAAH,sDAZI,GA5GQ,4CAoIzB,WAA2BxC,GAA3B,iBAAAqB,EAAA,4DAWwB,YAAhBrC,EACAkB,QAAQ2B,MAAM,uBAQS,SAAhB7C,IACP8D,EAAU7D,EACVe,EAAK+C,MAAK,SAAAC,GAEN,YAAoBC,KADpBH,EAAUA,EAAQE,QAKtBE,EAAU,SAAsBJ,GAUhC,IAAIK,EAAU,GAV2B,WAW9BC,GACPD,EAAQE,KAAK,CAACC,GAAIF,EAAOV,KAAM,kBAAIa,OAAOC,OAAO,GAAIV,EAAQM,KAASK,QAAQ,KADlF,IAAK,IAAML,KAASN,EAApB,EAAWM,GAEX,MAAO,CAACM,KAAMP,GAbJ,CAcXL,GA1CP,kBA2CWI,GA3CX,4CApIyB,kEAkLzB,WAA0BlD,EAAM2D,GAAhC,mBAAAtC,EAAA,yDAYwB,YAAhBrC,EAZR,gBAaQkB,QAAQ2B,MAAM,uBAbtB,0BAqB+B,SAAhB7C,EArBf,iBA4BQ,IANA8D,EAAU7D,EACVe,EAAK4D,SAAQ,SAAAZ,GACLF,EAAQE,KAAIF,EAAQE,GAAK,IAC7BF,EAAUA,EAAQE,MAEtBM,EAAKrC,IACE6B,EAAQQ,IAAKA,EAAKrC,IACzB,IAAW4C,KAAOF,EACVA,EAAQE,aAAgBC,OACxBH,EAAQE,GAAO,CAACE,QAAS7C,KAAK8C,MAAML,EAAQE,GAAKI,UAAU,KAAM,IA/BjF,OAkCQnB,EAAQQ,GAAMK,EAlCtB,UAmCc1B,EAAWW,QAnCzB,iCAqCWW,OAAOC,OAAO,GAAI,CAACF,KAAIZ,KAAMiB,EAASF,QAAQ,KArCzD,6CAlLyB,kEA0NzB,WAA0BzD,GAA1B,iBAAAqB,EAAA,yDAWwB,YAAhBrC,EAXR,gBAYQkB,QAAQ2B,MAAM,uBAZtB,0BAoB+B,SAAhB7C,EApBf,wBAqBQ8D,EAAU7D,EACNiF,EAAOlE,EAAKmE,MAChBnE,EAAK4D,SAAQ,SAAAZ,GACLF,EAAQE,KAAIF,EAAQE,GAAK,IAC7BF,EAAUA,EAAQE,aAEfF,EAAQoB,GA3BvB,UA4BcjC,EAAWW,QA5BzB,6CA1NyB,kEA0PzB,WAA0B5C,EAAM2D,GAAhC,mBAAAtC,EAAA,yDAYwB,YAAhBrC,EAZR,gBAaQkB,QAAQ2B,MAAM,uBAbtB,0BAqB+B,SAAhB7C,EArBf,iBA4BQ,IAAW6E,KANXf,EAAU7D,EACNiF,EAAOlE,EAAKmE,MAChBnE,EAAK4D,SAAQ,SAAAZ,GACLF,EAAQE,KAAIF,EAAQE,GAAK,IAC7BF,EAAUA,EAAQE,MAEJW,EACVA,EAAQE,aAAgBC,OACxBH,EAAQE,GAAO,CAACE,QAAS7C,KAAK8C,MAAML,EAAQE,GAAKI,UAAU,KAAM,IA9BjF,OAiCQnB,EAAQoB,GAAQP,EAjCxB,UAkCc1B,EAAWW,QAlCzB,iCAoCWW,OAAOC,OAAO,GAAI,CAACF,QApC9B,EAoCkCZ,KAAMiB,EAASF,QAAQ,KApCzD,6CA1PyB,kEAiSzB,WAA6BzD,EAAM2D,GAAnC,iBAAAtC,EAAA,yDAYwB,YAAhBrC,EAZR,gBAaQkB,QAAQ2B,MAAM,uBAbtB,0BAqB+B,SAAhB7C,EArBf,iBA2BQ,IAAW6E,KALXf,EAAU7D,EACVe,EAAK4D,SAAQ,SAAAZ,GACLF,EAAQE,KAAIF,EAAQE,GAAK,IAC7BF,EAAUA,EAAQE,MAEJW,EACVA,EAAQE,aAAgBC,OACxBH,EAAQE,GAAO,CAACE,QAAS7C,KAAK8C,MAAML,EAAQE,GAAKI,UAAU,KAAM,IA7BjF,OAgCQnB,EAAUS,OAAOC,OAAOV,EAASa,GAhCzC,UAiCc1B,EAAWW,QAjCzB,iCAmCWW,OAAOC,OAAOG,EAAS,CAACL,QAnCnC,EAmCuCZ,KAAMiB,EAASF,QAAQ,KAnC9D,6CAjSyB,sBA8VzB,SAASW,EAASpE,GAWd,OAAOuD,OAAOC,OACVzD,EAAeC,GACf,CAAE2B,IAAK,kBA3WU,2CA2WJ0C,CAAWrE,MAGhC,SAASsE,IAASpE,QAAQ2B,MAAM,kBAChC,SAAS0C,EAAWvE,GAQhB,MAAO,CACHsD,GAAIgB,EACJE,IAAK,SAACb,GAAD,OAzXY,6CAyXCc,CAAWzE,EAAM2D,IAGnChC,IAAK,kBA5XY,2CA4XN+C,CAAY1E,IACvB0B,IAAK,SAACiC,GAAD,OA7XY,6CA6XCgB,CAAW3E,EAAM2D,IACnCiB,OAAQ,SAACjB,GAAD,OA9XS,6CA8XIkB,CAAc7E,EAAM2D,IACzCmB,OAAQ,kBA/XS,2CA+XHC,CAAW/E,KAoBjC,MAAO,CAhBP,WAA4B,IAAD,uBAANA,EAAM,yBAANA,EAAM,gBAQvB,OAAQhB,GACJ,IAAK,WACD,OAAOoF,EAASpE,GACpB,QACI,OAAOuE,EAAWvE,KAvY9B,WASIJ,EAAQ,IAAIC,IACZC,EAAuB,IAAID,MAlBZ,G,mBAAhBmF,E,KAAMC,E,KAsZE,KAACC,SAleI,SAACvB,GAAyB,IAK1C,IAAIwB,EAAU,GAL4B,mBAAbC,EAAa,iCAAbA,EAAa,kBAO1C,GAAIA,EAAShF,SAAS,YAAa,CAC/B,IAAMiF,EAAM/F,EAAQ,KAIhBqE,EAAQ2B,SAASC,cAAcF,EAAIG,OAAOC,QALf,MAMP,CAAC9B,EAAQ2B,SAASI,YAAa/B,EAAQ2B,SAASI,WAAtExG,EAN6B,KAMjBC,EANiB,KAO/BD,EAAWyG,kBAAkB,CAACC,iBAAiB,IAAOC,MAAM3F,QAAQ2B,OACpEsD,EAAQ9B,KAAK,IAAIyC,SAAQ,SAASC,GAC9B,OAAOA,EAAQ5G,OAIvB,GAAIiG,EAAShF,SAAS,UAAW,CAC7BF,QAAQ2B,MAAM,gCACd3B,QAAQ2B,MAAM,gCACd3B,QAAQ2B,MAAM,gCACd3B,QAAQ2B,MAAM,gCACd3B,QAAQ2B,MAAM,gCACd3B,QAAQ2B,MAAM,gCACd3B,QAAQ2B,MAAM,gCAPe,MAUYvC,EAAQ,IAAzCC,EAVqB,EAUrBA,oBAAqBE,EAVA,EAUAA,QACrBE,EAAWF,EAAXE,OACRwF,EAAQ9B,KAAK,sBAAC,4BAAAhC,EAAA,sEACc1B,EAAOqG,UADrB,0BACgCC,SAApCC,EAAiD,QAD7C,KAEKA,EAAW3G,EAAoB4C,KAAOgE,EAAQC,cAC9C,gBAHL,uBA1ClBC,GA0CkB,0CAAD,IAmCjB,OA1BIjB,EAAShF,SAAS,SAClB+E,EAAQ9B,KAAK,sBAAC,gCAAAhC,EAAA,6DACJa,EAAS3C,EAAoB4C,KAC7BmE,EAAS,iBAFL,kBAKY5G,EAAW2C,SAAS,CAClCrC,KAAMsG,EACNhE,UAAWJ,EACXK,SAAU/C,EAAmBgD,OAR3B,OAKNC,EALM,OASFC,KATE,uDAWND,EAAW,KAXL,UAYA/C,EAAWmD,UAAU,CACvB7C,KAAMsG,EACNhE,UAAWJ,EACXQ,KAAMnB,KAAKC,UAAU,IACrBe,SAAU/C,EAAmBgD,OAhB3B,QAoBVvD,EAAWsC,KAAKoB,MAAMF,GApBZ,wDAAD,IAwBjBpD,EAAYyG,QAAQS,IAAIpB,IAgaUH,OAAMC,QAAOuB,MA5ZrC,SAACC,GAA0B,IAAtBC,EAAqB,uDAAX,aAGzB,OAFA1H,EAAcyH,EACdrH,EAAiBsH,EACVrH,M,sLC6GX,SAASsH,EAAaC,GAAQ,IAAD,EACaC,mBAASD,EAAME,YAAcF,EAAME,YAAc,IAAIhD,MADlE,mBACpBiD,EADoB,KACNC,EADM,KAGrBC,EAAeF,EAAaG,WAC5BC,EAAcJ,EAAaK,cAE3BC,EAAgB,IAAIvD,KAAKqD,EAAaF,EAAc,GACpDK,EAAe,IAAIxD,KAAKqD,EAAaF,EAAa,EAAG,GACrDM,EAAmB,IAAIzD,KAAKqD,EAAaF,EAAc,GAEvDO,EAAkBH,EAAcI,SAAS,EAE7C,SAASC,EAA0BC,EAAMC,EAAOC,GAC5C,IAAIC,EAASH,EACTI,EAASH,EACTI,EAAQH,EACRI,EAAM,SAASC,GAEf,OAAoB,IADpBA,EAAIA,EAAEtH,SAAS,KACLuH,OAAe,IAAMD,EAAIA,GAGnCE,EAAIlH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IACrGO,EAAIrH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IACrGQ,EAAItH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IAEzG,OAAOC,EAAIG,GAAKH,EAAIM,GAAKN,EAAIO,GAGjC,IAAIC,EAAa,YAAI,IAAI3H,MAAM0G,EAAgB,IAAIkB,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAM,MAAOC,QAAS7F,EAAEuE,EAAiBuB,WAAWtB,EAAgB,GAAG,MAE3IuB,EAAY,YAAI,IAAIjI,MAAO,EAAEwG,EAAaG,YAAY,EAAG,EAAE,EAAEH,EAAaG,WAAWiB,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAK,OAAQC,QAAQ7F,EAAE,MAEjIgG,EAAc,YAAI,IAAIlI,MAAMwG,EAAawB,YAAYJ,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAK,SAAUC,QAAQ7F,EAAE,MAhC9E,EAmCH6D,mBAAS,IAnCN,mBAmCpBoC,EAnCoB,KAmCdC,EAnCc,KAmEzB,OA7BApI,MAAMqI,UAAUC,IAAM,WAClB,OAAOlI,KAAKkI,IAAIC,MAAM,KAAMC,OAIhCC,qBAAU,WACN,sBAAC,sCAAAlI,EAAA,6DACOqH,EAAM,IAAI7I,IACV2J,EAAK,GAFZ,SAGwB5C,EAAM6C,OAAOhD,GAAGiD,mBAAmB9C,EAAM+C,IAAKtC,EAAeC,GAAc,GAHnG,cAIY1D,SAAQ,YAAa,IAAD,mBAAPgG,GAAO,WACrBC,EAAO,IAAI/F,KAAqB,IAAhB8F,EAAIE,IAAI/F,SAC5B8F,EAAKE,SAAS,EAAG,EAAG,EAAG,GACvB,IAAIC,EAAOH,EAAKf,UACbJ,EAAIjH,IAAIuI,GACPtB,EAAIhH,IAAIsI,EAAMtB,EAAI/G,IAAIqI,GAAM,GAE5BtB,EAAIhH,IAAIsI,EAAM,OAElBC,EAASnJ,MAAMoJ,KAAKxB,EAAIuB,WACjB9B,OAAS,IACZiB,EAAMa,EAAOb,MACbe,EAAQC,iBAAiBC,SAASC,MAClCC,EAAQN,EAAOvB,KAAI,SAAA8B,GAAC,OAAE9C,EAA0ByC,EAAMM,iBAAiB,qBAAqBC,OAAOnK,MAAM,GAAI4J,EAAMM,iBAAiB,sBAAsBC,OAAOnK,MAAM,GAAIiK,EAAEpB,MACjLtI,MAAMoJ,KAAKxB,EAAIiC,QAAQ/G,SAAQ,SAAC4G,EAAGxH,GAAKwG,EAAGgB,GAAGD,EAAMvH,OAExDkG,EAAQM,GApBX,0CAAD,KAsBF,CAACzC,EAAcH,EAAME,cAEnB,yBAAKxD,GAAG,iCAAiC6G,MAAK,aAAGS,QAAS,gBAAmBhE,EAAMuD,QAC/E,yBAAK7G,GAAG,4BACJ,yBAAKA,GAAG,oBACJ,0BAAMuH,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,QACA,0BAAMA,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,QAEJ,yBAAKvH,GAAG,sBACH,sBAAImF,GAAJ,YAAkBO,GAAlB,YAAiCD,IAAWL,KAAI,SAAA1F,GAAC,OAClD,0BAAM6H,UAAS,0DAAqD7H,EAAE4F,KAAvD,oCAAuF5F,EAAE6F,SAAWsB,MAAO,CACtHW,gBAAmB7B,EAAKjG,EAAE6F,UAAqB,WAAX7F,EAAE4F,KAApB,WACVK,EAAKjG,EAAE6F,UACX,UACJkC,OAAqB,WAAX/H,EAAE4F,MAAqB5F,EAAE6F,UAAY9B,EAAa+B,UAC5D,oCACA,KAEAkC,QAAS,SAACR,GAEN,IAAIX,EACW,QAAX7G,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKyD,EAAiBH,cAAeG,EAAiBL,WAAYlE,EAAE6F,UACpE,WAAX7F,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAYlE,EAAE6F,UAC9D,SAAX7F,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAGlE,EAAE6F,UAC/E7B,EAAgB6C,GACZjD,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAepB,KACzB7G,EAAE6F,aAGd,yBAAKvF,GAAG,sBACJ,yBAAKuH,UAAU,mCAAmC9D,EAAa+B,WAC/D,yBAAK+B,UAAU,+BAA+B9D,EAAaoE,eAAevE,EAAMwE,SAASC,cAAcC,cAAe,CAAGC,QAAS,UAClI,yBAAKV,UAAU,4BAA4B9D,EAAaoE,eAAevE,EAAMwE,SAASC,cAAcC,cAAe,CAAEE,MAAO,UAC5H,yBAAKX,UAAU,2BAA2B9D,EAAaK,gBAEzD,WACE,GAAIR,EAAM6E,QACN,OAAO,yBAAKZ,UAAU,qBAClB,0BAAMA,UAAU,iBAAhB,QAGA,2BACIA,UAAU,mBACVa,aAAc3E,EAAa4E,qBAC3BC,WAAY,SAAApB,GAGR,IAAIqB,EAAIC,YAAiBtB,EAAEuB,OAAOC,OAElC,GAAIH,GAAe,UAAVrB,EAAE3G,IAAiB,CACxB,IAAIoI,EAAU,IAAInI,KAAKiD,EAAaK,cAAeL,EAAaG,WAAYH,EAAa+B,UAAW+C,EAAEK,WAAYL,EAAEM,aAAcN,EAAEO,cACpIpF,EAAgBiF,GAChBzB,EAAEuB,OAAOC,MAAQC,EAAQN,qBACrB/E,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAegB,QAnB/C,GA0BF,yBAAK3I,GAAG,kBACJ,uBAAGuH,UAAU,oCAAoCG,QAAS,WACtD,IAAInB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAG,GAC7EF,EAAgB6C,GACZjD,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAepB,MAG7B,uBAAGgB,UAAU,qCAAqCG,QAAS,WACvD,IAAInB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAG,GAC7EF,EAAgB6C,GACZjD,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAepB,MAG7B,yBAAKgB,UAAU,iBAAiBG,QAAS,WACrChE,EAAgB,IAAIlD,MAChB8C,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAe,IAAInH,QAE7B8C,EAAMwE,SAASC,cAAcgB,OACjC,yBAAKxB,UAAU,iBAAiBV,MAAO,CAACmC,YAAa,GAAIC,MAAO,SAAUvB,QAAS,WAC3EjE,GACAH,EAAMqE,eAAelE,GACzBH,EAAM4F,iBAHV,WAcLC,IAvVf,SAAyB7F,GAAQ,IAAD,EACUC,mBAASD,EAAME,YAAcF,EAAME,YAAc,IAAIhD,MAD/D,mBACvBiD,EADuB,KACTC,EADS,KAGxBC,EAAeF,EAAaG,WAC5BC,EAAcJ,EAAaK,cAE3BC,EAAgB,IAAIvD,KAAKqD,EAAaF,EAAc,GACpDK,EAAe,IAAIxD,KAAKqD,EAAaF,EAAa,EAAG,GACrDM,EAAmB,IAAIzD,KAAKqD,EAAaF,EAAc,GAEvDO,EAAkBH,EAAcI,SAAS,EAE7C,SAASC,EAA0BC,EAAMC,EAAOC,GAC5C,IAAIC,EAASH,EACTI,EAASH,EACTI,EAAQH,EACRI,EAAM,SAASC,GAEf,OAAoB,IADpBA,EAAIA,EAAEtH,SAAS,KACLuH,OAAe,IAAMD,EAAIA,GAGnCE,EAAIlH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IACrGO,EAAIrH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IACrGQ,EAAItH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IAEzG,OAAOC,EAAIG,GAAKH,EAAIM,GAAKN,EAAIO,GAGjC,IAAIC,EAAa,YAAI,IAAI3H,MAAM0G,EAAgB,IAAIkB,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAM,MAAOC,QAAS7F,EAAEuE,EAAiBuB,WAAWtB,EAAgB,GAAG,MAE3IuB,EAAY,YAAI,IAAIjI,MAAO,EAAEwG,EAAaG,YAAY,EAAG,EAAE,EAAEH,EAAaG,WAAWiB,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAK,OAAQC,QAAQ7F,EAAE,MAEjIgG,EAAc,YAAI,IAAIlI,MAAMwG,EAAawB,YAAYJ,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAK,SAAUC,QAAQ7F,EAAE,MAhC3E,EAmCN6D,mBAAS,IAnCH,mBAmCvBoC,EAnCuB,KAmCjBC,EAnCiB,KAqE5B,OA/BApI,MAAMqI,UAAUC,IAAM,WAClB,OAAOlI,KAAKkI,IAAIC,MAAM,KAAMC,OAIhCC,qBAAU,WACN,sBAAC,sCAAAlI,EAAA,6DACOqH,EAAM,IAAI7I,IACV2J,EAAK,GAFZ,SAGwB5C,EAAM6C,OAAOhD,GAAGiD,mBAAmB9C,EAAM+C,IAAKtC,EAAeC,GAAc,GAHnG,cAIY1D,SAAQ,YAAa,IAAD,mBAAPgG,GAAO,WACrBC,EAAO,IAAI/F,KAAqB,IAAhB8F,EAAIE,IAAI/F,SAC5B8F,EAAKE,SAAS,EAAG,EAAG,EAAG,GACvB,IAAIC,EAAOH,EAAKf,UACbJ,EAAIjH,IAAIuI,GACPtB,EAAIhH,IAAIsI,EAAMtB,EAAI/G,IAAIqI,GAAM,GAE5BtB,EAAIhH,IAAIsI,EAAM,OAElBC,EAASnJ,MAAMoJ,KAAKxB,EAAIuB,WACjB9B,OAAS,IACZiB,EAAMa,EAAOb,MACbe,EAAQC,iBAAiBC,SAASC,MAClCC,EAAQN,EAAOvB,KAAI,SAAA8B,GAAC,OAAE9C,EAA0ByC,EAAMM,iBAAiB,qBAAqBC,OAAOnK,MAAM,GAAI4J,EAAMM,iBAAiB,sBAAsBC,OAAOnK,MAAM,GAAIiK,EAAEpB,MACjLtI,MAAMoJ,KAAKxB,EAAIiC,QAAQ/G,SAAQ,SAAC4G,EAAGxH,GAAKwG,EAAGgB,GAAGD,EAAMvH,OAExDkG,EAAQM,GApBX,0CAAD,KAsBF,CAACzC,EAAcH,EAAME,cAInB,kBAAC,IAAD,CAAU7G,IAAK2G,EAAM8F,UAAWC,OAAQ/F,EAAMgG,QAASJ,aAAc,WAAU5F,EAAM4F,cAAc5F,EAAM4F,gBAAiBrC,MAAO,CAAC0C,aAAc,GAAIC,SAAS,oBACzJ,yBAAKxJ,GAAG,iCAAiC6G,MAAK,aAAGS,QAAS,gBAAmBhE,EAAMuD,QAC/E,yBAAK7G,GAAG,4BACJ,yBAAKA,GAAG,oBACJ,0BAAMuH,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,QACA,0BAAMA,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,OACA,0BAAMA,UAAU,yBAAhB,QAEJ,yBAAKvH,GAAG,sBACH,sBAAImF,GAAJ,YAAkBO,GAAlB,YAAiCD,IAAWL,KAAI,SAAA1F,GAAC,OAClD,0BAAM6H,UAAS,0DAAqD7H,EAAE4F,KAAvD,oCAAuF5F,EAAE6F,SAAWsB,MAAO,CACtHW,gBAAmB7B,EAAKjG,EAAE6F,UAAqB,WAAX7F,EAAE4F,KAApB,WACVK,EAAKjG,EAAE6F,UACX,UACJkC,OAAqB,WAAX/H,EAAE4F,MAAqB5F,EAAE6F,UAAY9B,EAAa+B,UAC5D,oCACA,KAEAkC,QAAS,SAACR,GAEN,IAAIX,EACW,QAAX7G,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKyD,EAAiBH,cAAeG,EAAiBL,WAAYlE,EAAE6F,UACpE,WAAX7F,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAYlE,EAAE6F,UAC9D,SAAX7F,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAGlE,EAAE6F,UAC/E7B,EAAgB6C,GACZjD,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAepB,KACzB7G,EAAE6F,aAGd,yBAAKvF,GAAG,sBACR,yBAAKuH,UAAU,mCAAmC9D,EAAa+B,WAC/D,yBAAK+B,UAAU,+BAA+B9D,EAAaoE,eAAe,QAAS,CAAGI,QAAS,UAC/F,yBAAKV,UAAU,4BAA4B9D,EAAaoE,eAAe,QAAS,CAAEK,MAAO,UACzF,yBAAKX,UAAU,2BAA2B9D,EAAaK,gBAErD,WACE,GAAIR,EAAM6E,QACN,OAAO,yBAAKZ,UAAU,qBAClB,0BAAMA,UAAU,iBAAhB,QAGA,2BACIA,UAAU,mBACVa,aAAc3E,EAAa4E,qBAC3BC,WAAY,SAAApB,GAGR,IAAIqB,EAAIC,YAAiBtB,EAAEuB,OAAOC,OAElC,GAAIH,GAAe,UAAVrB,EAAE3G,IAAiB,CACxB,IAAIoI,EAAU,IAAInI,KAAKiD,EAAaK,cAAeL,EAAaG,WAAYH,EAAa+B,UAAW+C,EAAEK,WAAYL,EAAEM,aAAcN,EAAEO,cACpIpF,EAAgBiF,GAChBzB,EAAEuB,OAAOC,MAAQC,EAAQN,qBACrB/E,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAegB,QAnB/C,GA0BF,yBAAK3I,GAAG,kBACR,uBAAGuH,UAAU,oCAAoCG,QAAS,WACtD,IAAInB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAG,GAC7EF,EAAgB6C,GACZjD,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAepB,MAG7B,uBAAGgB,UAAU,qCAAqCG,QAAS,WACvD,IAAInB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAG,GAC7EF,EAAgB6C,GACZjD,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAepB,MAG7B,yBAAKgB,UAAU,iBAAiBG,QAAS,WACrChE,EAAgB,IAAIlD,MAChB8C,EAAMqE,iBAAmBrE,EAAMsE,gBAC/BtE,EAAMqE,eAAe,IAAInH,QAE7B8C,EAAMwE,SAASC,cAAcgB,OAC7B,yBAAKxB,UAAU,iBAAiBV,MAAO,CAACmC,YAAa,GAAIC,MAAO,SAAUvB,QAAS,WAC3EjE,GACAH,EAAMqE,eAAelE,GACzBH,EAAM4F,iBAHV,c,kMC9JlBO,EAAmB,SAACnG,GAEtB,IAF8B,EAIkBC,mBAAS,IAJ3B,mBAIvBmG,EAJuB,KAILC,EAJK,KAMxBC,EAAQC,mBACRC,EAAcD,mBACdE,EAAeF,mBACfG,EAAeH,mBATS,EAUQtG,oBAAS,GAVjB,mBAUvB0G,EAVuB,KAUVC,EAVU,KAa1BC,EAAU7G,EAAM8G,KAAKhF,KAAI,SAAAC,GAAC,OAAIgF,IAAMC,eAElCC,EAAmC,SAACC,EAAaC,EAAIC,EAAcC,EAAQC,GAAxC,OAAiD,SAACC,GACvF,OAAOL,IAAgBK,EAAQ,CACvBC,EAfO,MAe8B,IAAhCJ,EAAaK,QAAQF,GAAeH,EAAaK,QAAQF,GAAQA,GAAMA,IAAoBD,EAAOH,EAfhG,IAeqGC,EAAaK,QAAQF,GAAMA,GAAkB,GACzJG,OAAO,IACPC,OAAQ,CAACC,QAAS,IAAKC,SAAU,EAAGC,KAAM,EAAGC,OAAO,GACxDC,UAAUX,GACV,CACIG,EApBO,MAoB8B,IAAhCJ,EAAaK,QAAQF,GAAeH,EAAaK,QAAQF,GAAQA,GAAMA,GAC5EG,OAAO,EACXM,UAAUX,KAxBY,EA8BDY,YAAWjI,EAAM8G,KAAKvF,OAAQ0F,GAAkC,EAAG,EAAGX,EAAM4B,SAAS,IA9BpF,mBA8BvBC,EA9BuB,KA8BdrN,EA9Bc,UAiC9B6H,qBAAU,WACN2D,EAAM4B,QAAUlI,EAAM8G,KAAKhF,KAAI,SAACC,EAAG3F,GAAJ,OAAQA,KACvCoK,EAAY0B,QAAU,EACtBzB,EAAayB,QAAU,EACvBpN,EAAImM,GAAkC,EAAG,EAAGX,EAAM4B,SAAS,MAC5D,CAAClI,EAAM8G,KAAM9G,EAAM+C,MAGtB,IAAMqF,EAAOC,YAAS,uCAAC,6CAAA5N,EAAA,yEAAkB6N,KAAlB,GAAyBC,EAAzB,KAAiCjB,EAAjC,EAAiCA,KAAjC,gBAAuCkB,SAAvC,QAAqDC,EAArD,KAAkEC,EAAlE,EAAkEA,MAAOC,EAAzE,EAAyEA,KAAzE,EAA+EC,IAE9FF,IACAjC,EAAayB,QAAUK,EAElBnC,EAAiB5M,SAAS+O,IAC3BlC,EAAoB,GAAD,mBAAKD,GAAL,CAAuBmC,KAE1CvI,EAAM6I,aACN7I,EAAM6I,YAAY,CAACC,OAAQP,EAAOQ,SAAU/I,EAAM8G,KAAKyB,GAAQzB,KAAM9G,EAAM8G,QAInFkC,GADIA,EAAS1O,KAAK2O,MAAMR,EAnDT,OAoDKF,GAASA,EAASS,GAAWhJ,EAAM8G,KAAKvF,OAAOgH,EAASvI,EAAM8G,KAAKvF,OAAO,EAAIyH,EAE9F1O,KAAK4O,IAAIF,GAAU,GAAKA,IAASxC,EAAY0B,UAEzCiB,EAAWZ,EAAMS,EACrB1C,EAAM4B,QAAQkB,OAAO3C,EAAayB,QAAS,GAC3C5B,EAAM4B,QAAQkB,OAAOD,EAAU,EAAGZ,GAClC/B,EAAY0B,QAAUc,EACtBvC,EAAayB,QAAUiB,GAIvBrO,EAAImM,EAAiCsB,EAAOE,EAAWnC,EAAM4B,SAAS,EAAOZ,KAK7EqB,EA9Be,wBA+BfU,YAAW,kBAAKhD,EAAoBD,EAAiBkD,QAAO,SAAAhI,GAAC,OAAEA,IAAIiH,QAAS,KAC5E/B,EAAY0B,QAAU,EACtBzB,EAAayB,QAAU,EAjCR,UAkCTlI,EAAMwE,SAAS+E,GACjB,mBAAoB,CAChBxG,IAAK/C,EAAM+C,IACXuD,MAAOA,EAAM4B,QACbsB,MAAOxJ,EAAM8G,KAAKhF,KAAI,SAAA1F,GAAI,MAAO,CAAC4F,KAAK,OAAQC,QAAQ7F,QAtChD,QA0CX4D,EAAMyJ,WACNzJ,EAAMyJ,UAAU,CAACX,OAAQP,EAAOQ,SAAU/I,EAAM8G,KAAKyB,GAAQmB,SAAUpD,EAAM4B,QAASO,YAAWO,SAAQlC,KAAK9G,EAAM8G,OA3CzG,4CAAD,sDAgDnBsB,U,GAAY,CAACuB,KAAK,CAACC,MAAM,KAAMC,YAAY,EAAMC,QAASnD,IAE7D,OAAO3G,EAAM8G,KAAKhF,KAAI,SAACpF,EAAIN,GACvB,IAAI2N,EAAO5B,EAAQ/L,GACnB,OACI,yBAAK/C,IAAK,SAACuK,GAAK8C,EAAawB,QAAQtE,IACrC,kBAAC,IAASoG,IAAV,iBACQ5B,EAAKhM,GADb,CAEI6H,UAAWmC,EAAiB5M,SAAS4C,GAAK,yBAA2B,gBACrEmH,MAAO,CACH0C,aAAc,EACdgE,SAAU,WACVC,OAAQ,UACRxC,OAAQqC,EAAKrC,OACbyC,UAAWC,YAAY,CAACL,EAAKvC,IAAI,SAACA,GAAD,8BAAwBA,EAAxB,aAErC6C,eAAgB,SAACzG,GACTwC,EAAiB5M,SAAS4C,IAC1BwH,EAAE0G,qBAIV,kBAAC,IAAD,CAAMjR,IAAKwN,EAAQzK,GAAImO,IAAK7N,EAAIO,IAAKP,EAAG,IAAIsD,EAAMwK,OAAQC,SAAUzK,EAAMyK,SAAU1H,IAAK/C,EAAM+C,IAAKF,OAAQ7C,EAAM6C,OAAQ2B,SAAUxE,EAAMwE,SAAUkG,aAAc1K,EAAM0K,aAAahO,GAAKiO,SAAUjE,EAAcE,eAAgBA,UAO5OgE,EAAsB,SAAC5K,GAEzB,IAFiC,EAIeC,mBAAS,IAJxB,mBAI1BmG,EAJ0B,KAIRC,EAJQ,KAM3BC,EAAQC,mBACRC,EAAcD,mBACdE,EAAeF,mBACfG,EAAeH,mBATY,EAUKtG,oBAAS,GAVd,mBAU1B0G,EAV0B,KAUbC,EAVa,KAa7BC,EAAU7G,EAAM8G,KAAKhF,KAAI,SAAAC,GAAC,OAAIgF,IAAMC,eAElCC,EAAmC,SAACC,EAAaC,EAAIC,EAAcC,EAAQC,GAAxC,OAAiD,SAACC,GACvF,OAAOL,IAAgBK,EAAQ,CACvBC,EAfO,MAe8B,IAAhCJ,EAAaK,QAAQF,GAAeH,EAAaK,QAAQF,GAAQA,GAAMA,IAAoBD,EAAOH,EAfhG,IAeqGC,EAAaK,QAAQF,GAAMA,GAAkB,GACzJG,OAAO,IACPC,OAAQ,CAACC,QAAS,IAAKC,SAAU,EAAGC,KAAM,EAAGC,OAAO,GACxDC,UAAUX,GACV,CACIG,EApBO,MAoB8B,IAAhCJ,EAAaK,QAAQF,GAAeH,EAAaK,QAAQF,GAAQA,GAAMA,GAC5EG,OAAO,EACXM,UAAUX,KAxBe,EA8BJY,YAAWjI,EAAM8G,KAAKvF,OAAQ0F,GAAkC,EAAG,EAAGX,EAAM4B,SAAS,IA9BjF,mBA8B1BC,EA9B0B,KA8BjBrN,EA9BiB,UAiCjC6H,qBAAU,WACN2D,EAAM4B,QAAUlI,EAAM8G,KAAKhF,KAAI,SAACC,EAAG3F,GAAJ,OAAQA,KACvCoK,EAAY0B,QAAU,EACtBzB,EAAayB,QAAU,EACvBpN,EAAImM,GAAkC,EAAG,EAAGX,EAAM4B,SAAS,MAC5D,CAAClI,EAAM8G,KAAM9G,EAAM+C,MAGtB,IAAMqF,EAAOC,YAAS,uCAAC,6CAAA5N,EAAA,yEAAkB6N,KAAlB,GAAyBC,EAAzB,KAAiCjB,EAAjC,EAAiCA,KAAjC,gBAAuCkB,SAAvC,QAAqDC,EAArD,KAAkEC,EAAlE,EAAkEA,MAAOC,EAAzE,EAAyEA,KAAzE,EAA+EC,IAE9FF,IACAjC,EAAayB,QAAUK,EAElBnC,EAAiB5M,SAAS+O,IAC3BlC,EAAoB,GAAD,mBAAKD,GAAL,CAAuBmC,KAE1CvI,EAAM6I,aACN7I,EAAM6I,YAAY,CAACC,OAAQP,EAAOQ,SAAU/I,EAAM8G,KAAKyB,GAAQzB,KAAM9G,EAAM8G,QAInFkC,GADIA,EAAS1O,KAAK2O,MAAMR,EAnDT,OAoDKF,GAASA,EAASS,GAAWhJ,EAAM8G,KAAKvF,OAAOgH,EAASvI,EAAM8G,KAAKvF,OAAO,EAAIyH,EAE9F1O,KAAK4O,IAAIF,GAAU,GAAKA,IAASxC,EAAY0B,UAEzCiB,EAAWZ,EAAMS,EACrB1C,EAAM4B,QAAQkB,OAAO3C,EAAayB,QAAS,GAC3C5B,EAAM4B,QAAQkB,OAAOD,EAAU,EAAGZ,GAClC/B,EAAY0B,QAAUc,EACtBvC,EAAayB,QAAUiB,GAIvBrO,EAAImM,EAAiCsB,EAAOE,EAAWnC,EAAM4B,SAAS,EAAOZ,KAK7EqB,EA9Be,wBA+BfU,YAAW,kBAAKhD,EAAoBD,EAAiBkD,QAAO,SAAAhI,GAAC,OAAEA,IAAIiH,QAAS,KAC5E/B,EAAY0B,QAAU,EACtBzB,EAAayB,QAAU,EAjCR,UAkCTlI,EAAMwE,SAAS+E,GACjB,mBAAoB,CAChBxG,IAAK/C,EAAM+C,IACXuD,MAAOA,EAAM4B,QACbsB,MAAOxJ,EAAM8G,KAAKhF,KAAI,SAAA1F,GAAI,MAAO,CAAC4F,KAAK5F,EAAE4F,KAAMC,QAAiB,YAAT7F,EAAE4F,KAAiB5F,EAAE6F,QAAQvF,GAAGN,EAAE6F,cAtClF,QA0CXjC,EAAMyJ,WACNzJ,EAAMyJ,UAAU,CAACX,OAAQP,EAAOQ,SAAU/I,EAAM8G,KAAKyB,GAAQmB,SAAUpD,EAAM4B,QAASO,YAAWO,SAAQlC,KAAK9G,EAAM8G,OA3CzG,4CAAD,sDAgDnBsB,U,GAAY,CAACuB,KAAK,CAACC,MAAM,KAAMC,YAAY,EAAMC,QAASnD,IAE7D,OAAO3G,EAAM8G,KAAKhF,KAAI,SAAC+I,EAAMzO,GACzB,IAAI2N,EAAO5B,EAAQ/L,GACnB,MAAkB,SAAdyO,EAAK7I,KAED,yBAAK3I,IAAOqN,GACR,kBAAC,IAASsD,IAAV,iBACQ5B,EAAKhM,GADb,CAEI6H,UAAWmC,EAAiB5M,SAAS4C,GAAK,yBAA2B,gBACrEmH,MAAO,CACH0C,aAAc,EACdgE,SAAU,WACVC,OAAQ,UACRxC,OAAQqC,EAAKrC,OACbyC,UAAWC,YAAY,CAACL,EAAKvC,IAAI,SAACA,GAAD,8BAAwBA,EAAxB,aAErC6C,eAAgB,SAACzG,GACTwC,EAAiB5M,SAAS4C,IAC1BwH,EAAE0G,qBAIV,kBAAC,IAAD,CAAMjR,IAAK2G,EAAM8K,eAAeD,EAAK5I,QAAUjC,EAAM+K,cAAgBlE,EAAQzK,GAAImO,IAAKM,EAAK5I,QAAShF,IAAK4N,EAAK5I,QAAQ,IAAIjC,EAAMwK,OAAQC,SAAUzK,EAAMyK,SAAU1H,IAAK/C,EAAM+C,IAAKF,OAAQ7C,EAAM6C,OAAQ2B,SAAUxE,EAAMwE,SAAUkG,aAAc1K,EAAM0K,aAAaG,EAAK5I,SAAU0I,SAAUjE,EAAcE,eAAgBA,MAInT,YAAdiE,EAAK7I,KAEV,yBAAK3I,IAAKqN,GACN,kBAAC,IAASsD,IAAV,iBACQ5B,EAAKhM,GADb,CAEI6H,UAAWmC,EAAiB5M,SAAS4C,GAAK,yBAA2B,gBACrEmH,MAAO,CACH0C,aAAc,EACdgE,SAAU,WACVC,OAAQ,UACRxC,OAAQqC,EAAKrC,OACbyC,UAAWC,YAAY,CAACL,EAAKvC,IAAI,SAACA,GAAD,8BAAwBA,EAAxB,aAErC6C,eAAgB,SAACzG,GACTwC,EAAiB5M,SAAS4C,IAC1BwH,EAAE0G,qBAIV,uBAAGrG,UAAU,aAAaV,MAAO,CAACyH,QAAQhL,EAAM0K,aAAaG,EAAK5I,QAAQvF,IAAI,IAAI,QAAS0H,QAAS,WAAKpE,EAAMiL,SAAS,WAAYJ,EAAK5I,QAAQvF,IAAIsD,EAAMkL,QAAQzO,KAAd,oBAAgCoO,EAAK5I,QAAQvF,OAAQ,6BAAK,uBAAGuH,UAAU,kDAAiD,yBAAKV,MAAO,CAACS,QAAS,iBAAkBhE,EAAMmL,iBAAiBN,EAAK5I,QAAQvF,cAnBhW,O,wRCrOP0O,EAAW1S,EAAQ,IACnBwS,EAAUG,YAAW,YAAcC,cAAsBC,cAoBzDC,E,kDACF,WAAYxL,GAAQ,IAAD,8BACf,cAAMA,IA2BVyL,OAAS,SAACC,GAAsC,IAAvBhP,EAAsB,uDAAnB,EAAKsD,MAAM+C,IACb,cAAlB2I,EACA,EAAK1L,MAAM6C,OAAO8I,eAElB,EAAK3L,MAAM6C,OAAO+I,cACtB,EAAKC,SAAS,CAACC,YAA6B,cAAhBJ,EAA6BK,UAAUrP,KAjCpD,EAoCnBuO,SAAW,SAACe,EAAItP,GAAL,OAAY,EAAKmP,SAAS,CAACI,aAAa,CAACpB,KAAKmB,EAAItP,SAjCzD,EAAKwP,MAAQ,CACTC,SAAS,GACTC,aAAa,GACbH,aAAa,CAACpB,KAAK,WAAYnO,QAAGL,GAClCyP,aAAY,EACZC,UAAiC,cAAtB,EAAK/L,MAAMqM,SAAyB,EAAKrM,MAAM+L,UAAY,EAAK/L,MAAM+C,IACjFuJ,wBAAyB,EAAC,EAAO,OAGjC,EAAKJ,MAAMJ,aAAqC,cAAtB,EAAK9L,MAAMqM,SACrC,EAAKrM,MAAM6C,OAAO8I,eAElB,EAAK3L,MAAM6C,OAAO+I,cAGtB,EAAK5L,MAAMwE,SAAS+H,wBAAwB,EAAKC,QAAQpE,KAAb,iBAG5CgD,EAAS,gBAET,EAAKqB,SAAW1F,IAAMC,YAEtB,EAAK0F,KAAO3F,IAAMC,YAzBH,E,gEAyCf,IAAI2F,EAAO,IAAIC,IAAInJ,SAASmJ,KACxBC,EAAMF,EAAIG,SAASC,MAAM,KACzBC,EAAOL,EAAIK,KAAKD,MAAM,KACX,KAAXF,EAAI,GACJnK,KAAKmJ,SAAS,CAACI,aAAa,CAACpB,KAAK,WAAYnO,GAAG,MAC5C2O,YAAW,YAChB3I,KAAKmJ,SAAS,CAACI,aAAa,CAACpB,KAAKmC,EAAK,GAAItQ,GAAGsQ,EAAK,MAEnDtK,KAAKmJ,SAAS,CAACI,aAAa,CAACpB,KAAKgC,EAAI,GAAInQ,GAAGmQ,EAAI,MAErDnK,KAAK8J,Y,yCAGUS,EAAWC,EAAWC,GACjCD,EAAUlB,KAAOtJ,KAAKwJ,MAAMF,SAAwB3P,IAAlBqG,KAAKwJ,MAAMF,IAC7CtJ,KAAKmJ,SAAS,CAACuB,MAAM,CAACpB,QAAG3P,EAAWK,QAAGL,KAEvC6Q,EAAUnB,YAAcrJ,KAAKwJ,MAAMH,WACnCrJ,KAAK8J,Y,+KAWO9J,KAAK1C,MAAM6C,OAAOhD,GAAGwN,oBAAoB3K,KAAKwJ,MAAMH,W,cAAhEuB,E,gBACY5K,KAAK1C,MAAM6C,OAAOhD,GAAG0N,gBAAgB7K,KAAKwJ,MAAMH,W,UAA5DyB,E,OAEwB,aAAxB9K,KAAK1C,MAAMqM,S,iCACS3J,KAAK1C,MAAM6C,OAAOhD,GAAG4N,eAAe/K,KAAK1C,MAAM0N,O,UAA/DC,E,SACAC,EAAMD,EAAQE,MAAK,SAACpT,EAAGmH,GAAJ,OAAQnH,EAAE2I,KAAKjG,QAAQyE,EAAEwB,KAAKjG,WAASwQ,EAAQpM,OAAO,I,oBAEzEmB,KAAK1C,MAAMwE,SAASsJ,cACH,WAAbF,EAAI5L,K,kCACuBU,KAAK1C,MAAM6C,OAAOhD,GAAGkO,cAAcrL,KAAK1C,MAAM+C,K,eAArEiL,E,OAA2E1E,QAAO,SAAA1F,GAAC,OAAGA,GAAKgK,EAAI7B,a,UAC7FrJ,KAAK1C,MAAM6C,OAAOhD,GAAGoO,iBAAiBvL,KAAK1C,MAAM+C,IAAKiL,G,yBACtDL,EAAQrE,QAAO,SAAAlN,GAAC,OAAEA,EAAE2P,YAAY6B,EAAI7B,aAAW/O,SAAQ,SAAAZ,GAAC,OAAE,EAAK4D,MAAM6C,OAAOhD,GAAGqO,kBAAkB9R,EAAEM,GAAI,EAAKsD,MAAM0N,U,QACxHhL,KAAK+I,OAAO,Y,2BAEQ,WAAbmC,EAAI5L,K,6BACXU,K,KAAgDkL,EAAI7B,U,UAAmBrJ,KAAK1C,MAAM6C,OAAOhD,GAAGsO,aAAaP,EAAI7B,W,oBAAYqC,KAAKC,K,KAAMT,EAAIlR,G,6BAA/F,E,YAA1B4P,wB,WAAVT,S,wBACTnJ,KAAK1C,MAAMwE,SAAS8J,gB,QAI5B5L,KAAKmJ,SAAS,CAACM,SAAUmB,EAAI,GAAIlB,aAAaoB,EAAI,K,sIAM5C,IAAD,OACCe,EAASlD,YAAW,YAAcmD,IAAqBC,IAC7D,OACI,kBAAC,IAAD,KAEI,kBAACF,EAAD,CAAQrD,QAASA,GACb,kBAAC,IAAD,CACID,SAAUvI,KAAKuI,SACf5R,IAAKqJ,KAAKgM,WACVtC,aAAc1J,KAAKwJ,MAAME,aACzBD,SAAUzJ,KAAKwJ,MAAMC,SACrBwC,MAAOjM,KAAK+J,SACZ5J,OAAQH,KAAK1C,MAAM6C,OACnBE,IAAKL,KAAKwJ,MAAMH,UAChBvH,SAAU9B,KAAK1C,MAAMwE,WAGzB,kBAAC,IAAD,MAEA,kBAAC,IAAD,CAAYoK,UAAQ,EAACC,iBAAiB,GAElC,kBAAC,IAAD,CAAcnS,GAAG,aAAaoS,UAAU,OAAOC,KAAK,MAEhD,kBAAC,IAAD,CAASrS,GAAG,YAAYoS,UAAU,OAAOzV,IAAKqJ,KAAKgK,MAC/C,6BACA,kBAAC,IAAD,CAAYhQ,GAAG,eAAeuH,UACrBoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,UAUX,kBAAC,IAAD,CAAM2M,GAAG,YAAY5H,QAAS,kBAAI,EAAKyH,SAAS,CAACI,aAAa,CAACpB,KAAK,WAAYnO,QAAGL,OAAnF,IAEI,yBAAK4H,UAAW,cAA+C,aAAjCvB,KAAKwJ,MAAMD,aAAapB,KAAsB,qBAAuB,IAAKtH,MAAO,CAAC2L,SAAU,KAAK,kBAAC,IAAD,CAAS3L,MAAO,CAAC2L,SAAU,IAAKC,KAAMC,MAAyB1M,KAAK1C,MAAMyE,cAAc4K,WAI3N,kBAAC,IAAD,CAAMrD,GAAG,aAAa5H,QAAS,kBAAI,EAAKyH,SAAS,CAACI,aAAa,CAACpB,KAAK,YAAanO,QAAGL,OAArF,IAEI,yBAAK4H,UAAW,cAA+C,cAAjCvB,KAAKwJ,MAAMD,aAAapB,KAAuB,qBAAuB,IAAKtH,MAAO,CAAC2L,SAAU,KAAK,kBAAC,IAAD,CAAS3L,MAAO,CAAC2L,SAAU,GAAI/E,UAAW,qBAAsBgF,KAAMG,MAAoB5M,KAAK1C,MAAMyE,cAAc8K,YAIvP,kBAAC,IAAD,CAAMvD,GAAG,YAAY5H,QAAS,kBAAI,EAAKyH,SAAS,CAACI,aAAa,CAACpB,KAAK,WAAYnO,QAAGL,OAAnF,IAEI,yBAAK4H,UAAW,cAA+C,aAAjCvB,KAAKwJ,MAAMD,aAAapB,KAAsB,qBAAuB,IAAKtH,MAAO,CAAC2L,SAAU,KAAK,kBAAC,IAAD,CAAS3L,MAAO,CAAC2L,SAAU,GAAI/E,UAAW,qBAAsBgF,KAAMK,MAAa9M,KAAK1C,MAAMyE,cAAc+K,WAI/O,yBAAKvL,UAAU,iCAAiCvB,KAAK1C,MAAMyE,cAAc2H,aAAzE,IAAuF,uBAAGhI,QAAS,WAC3F,EAAKsI,KAAKxE,SACV,EAAKwE,KAAKxE,QAAQuH,QACd,sBAAC,4BAAAhV,EAAA,sEACaiI,KAAK1C,MAAMwE,SAAS+E,GAClC,qBAAsB,CAClBxG,IAAKL,KAAKwJ,MAAMH,YAHnB,OACD2D,EADC,OAKFC,IACHzE,EAAQzO,KAAR,wBAA8BiT,EAA9B,QACAhN,KAAKuI,SAAS,eAAgByE,GAC9BhN,KAAK8J,UARA,gDASNpE,KAAK,EACRwH,IAED3L,UAAU,oBAGZvB,KAAKwJ,MAAME,aAAatK,KAAI,SAAC0L,GAC1B,OACI,kBAAC,IAAD,CAAMvQ,IAAKuQ,EAAI9Q,GAAIsP,GAAE,wBAAmBwB,EAAI9Q,IAAM0H,QAAS,kBAAI,EAAKyH,SAAS,CAACI,aAAa,CAACpB,KAAK,eAAgBnO,GAAG8Q,EAAI9Q,QAAxH,IAEI,yBAAKuH,UAAW,cAA+C,iBAAjC,EAAKiI,MAAMD,aAAapB,MAA2B,EAAKqB,MAAMD,aAAavP,KAAO8Q,EAAI9Q,GAAK,qBAAuB,KAAK,uBAAGuH,UAAU,qBAAqBV,MAAO,CAACsM,aAAc,KAA7M,IAAuNrC,EAAIa,UAOvO,yBAAKpK,UAAU,iCAAiCvB,KAAK1C,MAAMyE,cAAc0H,SAAS,uBAAG/H,QAAS,WACtF,EAAKsI,KAAKxE,SACV,EAAKwE,KAAKxE,QAAQuH,QACd,sBAAC,4BAAAhV,EAAA,sEACaiI,KAAK1C,MAAMwE,SAAS+E,GAClC,iBAAkB,CACdxG,IAAKL,KAAKwJ,MAAMH,YAHnB,OACD2D,EADC,OAKFC,IACHzE,EAAQzO,KAAR,oBAA0BiT,EAA1B,QACAhN,KAAKuI,SAAS,WAAYyE,GAC1BhN,KAAK8J,UARA,gDASNpE,KAAK,EACRwH,IAED3L,UAAU,oBAEZvB,KAAKwJ,MAAMC,SAASrK,KAAI,SAACgO,GACtB,OACI,kBAAC,IAAD,CAAM7S,IAAK6S,EAAKpT,GAAIsP,GAAE,oBAAe8D,EAAKpT,IAAM0H,QAAS,kBAAI,EAAKyH,SAAS,CAACI,aAAa,CAACpB,KAAK,WAAYnO,GAAGoT,EAAKpT,QAAnH,IAEI,yBAAKuH,UAAW,cAA+C,aAAjC,EAAKiI,MAAMD,aAAapB,MAAuB,EAAKqB,MAAMD,aAAavP,KAAOoT,EAAKpT,GAAK,qBAAuB,KAAK,kBAAC,IAAD,CAASyS,KAAMY,MAAeD,EAAKzB,WAOrM,yBAAKpK,UAAU,YAAYvH,GAAG,SAAS0H,QAAS,WAAK8G,EAAQzO,KAAR,KAAkB,EAAKuD,MAAMgQ,SAAS,CAACC,UAAW,aAAa,uBAAGhM,UAAU,sBAAsBV,MAAO,CAACsM,aAAc,KAAOnN,KAAK1C,MAAMyE,cAAcyL,SAEjN,kBAAC,IAAD,CAASxT,GAAG,QAER,kBAAC,IAAD,CACIqS,KAAK,MACL7I,SAAS,kBACTH,OAAQrD,KAAKwJ,MAAMI,wBAAwB,GAC3C6D,QAAO,uCAAkCzN,KAAKwJ,MAAMI,wBAAwB,GAAG5J,KAAKwJ,MAAMI,wBAAwB,GAAG,GAAG,IACxHrC,SAAS,SACTmG,QAAS,CACL,CACIC,KAAM,SACFC,KAAM,SACNC,QAAU,sBAAC,sBAAA9V,EAAA,sEACDiI,KAAK1C,MAAM6C,OAAOhD,GAAGqO,kBAAkBxL,KAAKwJ,MAAMI,wBAAwB,GAAG,GAAI5J,KAAK1C,MAAM0N,OAD3F,OAEPhL,KAAKmJ,SAAS,CAACS,wBAAyB,EAAC,EAAO,QAFzC,gDAGRlE,KAAK1F,OAEhB,CACI2N,KAAM,SACNE,QAAS,sBAAC,8BAAA9V,EAAA,6DACFsR,EAAYrJ,KAAKwJ,MAAMI,wBAAwB,GAAG,GADhD,0BAEyB5J,KAAK1C,MAAM6C,OAAOhD,GAAGkO,cAAcrL,KAAK1C,MAAM+C,KAFvE,oDAE8EgJ,GAAhFiC,EAFE,2CAGAtL,KAAK1C,MAAM6C,OAAOhD,GAAGoO,iBAAiBvL,KAAK1C,MAAM+C,IAAKiL,GAHtD,yBAIAtL,KAAK1C,MAAM6C,OAAOhD,GAAGqO,kBAAkBxL,KAAKwJ,MAAMI,wBAAwB,GAAG,GAAI5J,KAAK1C,MAAM0N,OAJ5F,QAKNhL,KAAKmJ,SAAS,CAACS,wBAAyB,EAAC,EAAO,QAL1C,iDAMPlE,KAAK1F,UAKpB,kBAAC,IAAD,CAAOoD,UAAWpD,KAAK+J,SAAU1J,IAAKL,KAAKwJ,MAAMH,UAAWvH,SAAU9B,KAAK1C,MAAMwE,SAAUC,cAAe/B,KAAK1C,MAAMyE,gBACrH,kBAAC,IAAD,MAEA,yBAAK/H,GAAG,gBAER,kBAAC,IAAD,KAEI,kBAAC,IAAD,CAAO8T,OAAQ,kBAAM,kBAAC,IAAD,CAAUxE,GAAG,iBAElC,kBAAC,IAAD,CAAOyE,OAAK,EAACrX,KAAK,IAAIoX,OAAQ,kBAAM,kBAAC,IAAD,CAAUxE,GAAG,iBAEjD,kBAAC,IAAD,KAEI,kBAAC,IAAD,CAAO5S,KAAK,YAAYqX,OAAK,EAACD,OAAQ,kBAAI,kBAAC,IAAD,CAAU3N,OAAQ,EAAK7C,MAAM6C,OAAQE,IAAK,EAAKmJ,MAAMH,UAAWvH,SAAU,EAAKxE,MAAMwE,SAAUkM,YAAa,EAAK1Q,MAAM0Q,YAAajM,cAAe,EAAKzE,MAAMyE,cAAekM,UAAW,EAAK3Q,MAAM+C,IAAK0I,OAAQ,EAAKA,OAAQY,SAAU,EAAKrM,MAAMqM,SAAUqB,MAAO,EAAK1N,MAAM0N,WAExT,kBAAC,IAAD,CAAOtU,KAAK,YAAYqX,OAAK,EAACD,OAAQ,kBAAI,kBAAC,IAAD,CAAU3N,OAAQ,EAAK7C,MAAM6C,OAAQE,IAAK,EAAKmJ,MAAMH,UAAWvH,SAAU,EAAKxE,MAAMwE,YAAcC,cAAe/B,KAAK1C,MAAMyE,gBAEvK,kBAAC,IAAD,CAAOrL,KAAK,kBAAkBoX,OAAQ,gBAAEI,EAAF,EAAEA,MAAF,OAAW,kBAAC,IAAD,CAAkB/N,OAAQ,EAAK7C,MAAM6C,OAAQoI,SAAU,EAAKA,SAAUvO,GAAIkU,EAAMC,OAAOnU,GAAIqG,IAAK,EAAKmJ,MAAMH,UAAYvH,SAAU,EAAKxE,MAAMwE,SAAWsM,YAAa,EAAKtE,QAAS/H,cAAe,EAAKzE,MAAMyE,mBAE7P,kBAAC,IAAD,CAAOrL,KAAK,aAAaqX,OAAK,EAACD,OAAQ,kBAAI,kBAAC,IAAD,CAAW3N,OAAQ,EAAK7C,MAAM6C,OAAQE,IAAK,EAAKmJ,MAAMH,UAAWvH,SAAU,EAAKxE,MAAMwE,SAAUC,cAAe,EAAKzE,MAAMyE,mBAGrK,kBAAC,IAAD,CAAOrL,KAAK,6BAA6BoX,OAAQ,gBAAEI,EAAF,EAAEA,MAAF,OAAW,kBAAC,IAAD,CAAc/N,OAAQ,EAAK7C,MAAM6C,OAAQoI,SAAU,EAAKA,SAAUvO,GAAIkU,EAAMC,OAAOnU,GAAIqG,IAAK,EAAKmJ,MAAMH,UAAYvH,SAAU,EAAKxE,MAAMwE,SAAWsM,YAAa,EAAKtE,QAAUuE,QAASH,EAAMC,OAAOG,OAAQvM,cAAe,EAAKzE,MAAMyE,mBAGnS,kBAAC,IAAD,CAAOrL,KAAK,yBAAyBoX,OAAQ,gBAAEI,EAAF,EAAEA,MAAF,OAAW,kBAAC,IAAD,CAAU/N,OAAQ,EAAK7C,MAAM6C,OAAQnG,GAAIkU,EAAMC,OAAOnU,GAAIqG,IAAK,EAAKmJ,MAAMH,UAAYvH,SAAU,EAAKxE,MAAMwE,SAAWsM,YAAa,EAAKtE,QAASvB,SAAU,EAAKA,SAAU8F,QAASH,EAAMC,OAAOG,OAAQvM,cAAe,EAAKzE,MAAMyE,8B,GA1Q/SwM,aAuRJzF,Q,iYCjUTJ,EAAW1S,EAAQ,IAoBnBwY,E,kDACF,WAAYlR,GAAQ,IAAD,sBACf,cAAMA,GAEN,IAAImR,EAAW,IAAIjU,KACnBiU,EAASC,QAAQD,EAASjP,UAAU,GAEpC,IAAImP,EAAY,EAAKrR,MAAMyE,cAAc6M,eAN1B,OAQf,EAAKpF,MAAQ,CACTqF,MAAO,GACPC,QAAS,GACTrG,iBAAiB,GACjBsG,aAAa,GACbC,oBAAoB,GACpBC,gBAAgB,GAChBjH,aAAc,GACdkH,eAAe,GACfC,WAAY,GACZC,UAAW,GACXC,SAAU,GACVC,eAAe,EACfC,SAAUZ,EAAU/W,KAAK2O,MAAM3O,KAAKC,SAAW8W,EAAU9P,SACzD2Q,WAAY,GACZC,uBAAwB,EAAC,EAAO,MAChCC,qBAAqB,EACrBC,yBAA0B,KAC1BC,iBAAkB,EAAKtS,MAAMyE,cAAc8N,oBAG/C,EAAKC,aAAe,EAAKjY,SAEzB,EAAKkY,gBAAkB1L,IAAMC,YAE7B,EAAKhH,MAAMwE,SAASkO,kBAAmB,EAAKlG,QAASpE,KAAd,iBAEvCgD,EAAS,gBAnCM,E,0NAuCG1I,KAAK1C,MAAM6C,OAAOhD,GAAG8S,oBAAoBjQ,KAAK1C,MAAM+C,K,cAAlE6P,E,gBACclQ,KAAK1C,MAAM6C,OAAOhD,GAAGgT,cAAcnQ,KAAK1C,MAAM+C,IAAK6P,G,cAAjEE,E,gBACepQ,KAAK1C,MAAM6C,OAAOhD,GAAGkT,mBAAmBrQ,KAAK1C,MAAM+C,K,OAMtE,IAAS4M,KANLqD,E,OAGAC,EAAc,GACdC,EAAW,GAECF,EAAO,GAAG,GACtBE,EAASzW,KAAK,CAAC2I,MAAOuK,EAAKwD,MAAOH,EAAO,GAAG,GAAGrD,K,OAC/CyD,EAAQ1Q,K,UACW,cAAAjI,EAAA,sCAAAA,EAAA,6DACf4Y,EAAM,GADS,SAEID,EAAMpT,MAAM6C,OAAOhD,GAAGwN,oBAAoB+F,EAAMpT,MAAM+C,KAF1D,OAEfuQ,EAFe,OAEgE,GAFhE,OAAA7Y,EAAA,KAGH6Y,GAHG,qDAGVrW,EAHU,gBAIfoW,EAJe,UAIAD,EAAMpT,MAAM6C,OAAOhD,GAAG0T,oBAAoBH,EAAMpT,MAAM+C,IAAK9F,GAAK,GAJhE,yBAIXR,KAJW,gEAMZ4W,GANY,8C,eAAnBvB,E,OASA0B,EAAoB,SAApBA,EAA6BC,EAAGC,GAIhC,GAHKA,IACDA,EAAQ,IACZT,EAAYxW,KAAK,CAAC2I,MAAOqO,EAAE/W,GAAIyW,MAAOO,EAAMV,EAAO,GAAG,GAAGS,EAAE/W,MACvD+W,EAAEE,SAAN,qBACkBF,EAAEE,UADpB,IACI,gCAAS/P,EAAT,QACmB,YAAXA,EAAE5B,MACFwR,EAAkB5P,EAAE3B,QAASyR,EAAM,QAH/C,iCAKJ5B,EAAUhQ,KAAI,SAAAgO,GAAI,OAAE0D,EAAkB1D,MAEtCpN,KAAK8P,aAAe9P,KAAKnI,S,UAEJmI,KAAK1C,MAAM6C,OAAOhD,GAAGiD,mBAAmBJ,KAAK1C,MAAM+C,IAAK,IAAI7F,KAAQ,IAAIA,KAAK,KAAM,EAAG,IAAI,G,QAQ/G6U,GARIA,E,QAQgBzI,QAAO,SAAChI,GAAD,OAAMwR,EAAM,GAAGtZ,SAAS8H,EAAE,OACrDpE,KAAKqF,UAAUqR,aAAe,SAASC,GACrC,OACEnR,KAAKlC,gBAAkBqT,EAAMrT,eAC7BkC,KAAKpC,aAAeuT,EAAMvT,YAC1BoC,KAAKR,YAAc2R,EAAM3R,WAIzB4R,EAAe,IAAI5W,KACnB6W,EAAW,G,cACEhC,G,IAAjB,2BAASzU,EAAkB,SACnB4F,EAAM,IAAIhG,KAAyB,IAApBI,EAAK,GAAG4F,IAAI/F,UACtByW,aAAaE,KAClBC,EAAStX,KAAK,CAACuF,KAAK,QAASC,QAASiB,IACtC4Q,EAAe5Q,GAEnB6Q,EAAStX,KAAK,CAACuF,KAAK,OAAQC,QAAS3E,EAAK,K,iCAG1C0W,EAAItR,KAAK1C,MAAMyE,cAAc8N,mBAC7B0B,EAAiB,GAEO,aAAxBvR,KAAK1C,MAAMqM,S,kCACY3J,KAAK1C,MAAM6C,OAAOhD,GAAGkO,cAAcrL,KAAK1C,MAAM2Q,W,eAAjEuB,E,iBAEmBhT,QAAQS,IAAIuS,EAAWpQ,IAAX,uCAAe,WAAe8B,GAAf,eAAAnJ,EAAA,sEAC5B2Y,EAAMpT,MAAM6C,OAAOhD,GAAGsO,aAAavK,GADP,cAC1CyK,EAD0C,OACWD,KAAKC,KAC1DzK,IAAIwP,EAAMpT,MAAM+C,MAChBiR,EAAI3F,GAHsC,kBAIvC,CAACzK,EAAGyK,IAJmC,2CAAf,wD,QAAnC4F,E,eAQJvR,KAAKmJ,SAAS,CAAC0F,MAAOuB,EAAM,GAAItB,QAASsB,EAAM,GAAI3H,iBAAkB6H,EAAO,GAAG,GAAIvB,aAAcuB,EAAO,GAAG,GAAItB,oBAAqBsB,EAAO,GAAG,GAAIrB,gBAAiBqB,EAAO,GAAG,GAAItI,aAAckI,EAAOhB,eAAgBqB,EAAapB,WAAYqB,EAAUpB,YAAWC,SAAUgC,EAAU7B,WAAY+B,EAAgB3B,iBAAkB0B,I,iJAItUtR,KAAK8J,Y,yCAGUS,EAAWC,EAAWC,GACjCF,EAAUlK,KAAOL,KAAK1C,MAAM+C,KAC5BL,KAAK8J,Y,6CAIT9J,KAAK1C,MAAMwE,SAAS0P,S,+BAGb,OAA2B,OAAjB,EAAE5Z,KAAKC,UAAmB,GAAGP,SAAS,IAAI,KAAwB,OAAjB,EAAEM,KAAKC,UAAmB,GAAGP,SAAS,M,+BAGlG,IAAD,OACL,OACI,kBAAC,IAAD,KACI,yBAAKuJ,MAAO,CAAC4Q,SAAU,WACnB,yBAAKlQ,UAAW,oBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WAFf,QAUA,yBAAK4E,UAAW,iBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WAQX,kBAAC,IAAD,CAAgBwD,OAAQH,KAAK1C,MAAM6C,OAAQ2B,SAAU9B,KAAK1C,MAAMwE,SAAUwB,QAAStD,KAAKwJ,MAAMkG,oBAAqBE,iBAAkB5P,KAAKwJ,MAAMmG,yBAA0BzM,aAAc,kBAAI,EAAKiG,SAAS,CAACuG,qBAAqB,KAASgC,eAAgB1R,KAAK1C,MAAMoU,iBACpQ,yBAAKnQ,UAAU,mBAAmBoQ,YAAa,SAACzQ,GAAD,OAAKA,EAAE0Q,mBAClD,yBAAK/Q,MAAO,CAACS,QAAS,iBAClB,kBAAC,IAAD,KAAe,uBAAGC,UAAU,cAAcV,MAAO,CAACgR,WAAY,GAAIC,MAAO,kCAD7E,IACgI,wBAAIvQ,UAAU,cAAa,uBAAGV,MAAO,CAACsM,aAAc,IAAK5L,UAAU,gCAAmCvB,KAAK1C,MAAMyE,cAAc4K,UAE3P,yBAAK9L,MAAO,CAACS,QAAS,eAAgByQ,WAAY,0BAA2BC,MAAO,EAAGvK,UAAU,0BAA2BwK,OAAQ,KAApI,QACJ,yBAAK1Q,UAAU,uBACX,yBAAKV,MAAO,CAACS,QAAS,gBAAiBC,UAAU,kBAAkB,IAAI/G,MAAQgF,WAC/E,yBAAKqB,MAAO,CAACS,QAAS,gBAAiBC,UAAU,sBAAqB,IAAI/G,MAAOqH,eAAe7B,KAAK1C,MAAMyE,cAAcC,cAAe,CAAGC,QAAS,WAKpJ,yBAAKV,UAAU,sBAAqB,0BAAMvH,GAAG,YAAYgG,KAAKwJ,MAAM+F,UAApE,IAAqF,0BAAMvV,GAAG,gBAAgB6G,MAAO,CAACqR,WAAY,MAAOlS,KAAK1C,MAAM0Q,aAAmB,uBAAGzM,UAAU,iBAAkBV,MAAO,CAACS,QAA+B,aAAtBtB,KAAK1C,MAAMqM,SAAsB,eAAe,QAASjI,QAAS,SAACR,GAAD,OAAK,EAAKiI,SAAS,CAACsG,uBAAwB,EAAC,EAAMvO,EAAEiR,iBAAiBnS,KAAKwJ,MAAMoG,qBAGlX,kBAAC,IAAD,CACIwC,cAAc,EACdzb,IAAKqJ,KAAK+P,gBACV1M,OAAQrD,KAAKwJ,MAAMiG,uBAAuB,GAC1CjM,SAAS,qBACT6I,KAAK,KACLnJ,aAAc,SAAAhC,GAAC,OAAI,EAAKiI,SAAS,CAACsG,uBAAwB,EAAC,EAAO,SAClE4C,MAAOrS,KAAKwJ,MAAMiG,uBAAuB,IAEzC,6BAAK,yBAAKlO,UAAU,4BAChB,yBAAKA,UAAU,2BAA2BG,QAAS,WAC/C,EAAKqO,gBAAgBvK,QAAQ8M,UAC7B,EAAKhV,MAAMyL,OAAO,YAClB,EAAKI,SAAS,CAACyG,iBAAkB,EAAKtS,MAAMyE,cAAc8N,uBAC3D,uBAAGtO,UAAU,gBAAgBV,MAAO,CAACmC,YAAa,MAAQhD,KAAK1C,MAAMyE,cAAc8N,qBACrF7P,KAAKwJ,MAAMgG,WAAWpQ,KAAI,mCAAEpF,EAAF,KAAM2R,EAAN,YAAc,yBAAKpK,UAAU,4BAA2B,yBAAKG,QAAS,WAC7F,EAAKqO,gBAAgBvK,QAAQ8M,UAC7B,EAAKhV,MAAMyL,OAAO,YAAa/O,GAC/B,EAAKmP,SAAS,CAACyG,iBAAkBjE,KAClCpK,UAAU,4BAA2B,uBAAGA,UAAU,gBAAgBV,MAAO,CAACmC,YAAa,MAAQ2I,GAAW,uBAAGpK,UAAU,4BAA4BG,QAAS,WAC3J,EAAKqO,gBAAgBvK,QAAQ8M,UAC7B,EAAKnJ,SAAS,CAACwG,yBAA0B3V,EAAI0V,qBAAqB,WAEtE,yBAAKnO,UAAU,2BAA2BV,MAAO,CAAC0R,UAAW,oCAAqCL,WAAY,MAAM,yBAAK3Q,UAAU,2BAA2BG,QAAS,sBAAC,4BAAA3J,EAAA,sEACrJiI,KAAK1C,MAAM6C,OAAOhD,GAAGqV,kBAAkBxS,KAAK1C,MAAM2Q,UAAWjO,KAAK1C,MAAM0N,OAD6E,OAChKhR,EADgK,OAEpKgG,KAAK+P,gBAAgBvK,QAAQ8M,UAC7BtS,KAAK1C,MAAMyL,OAAO,YAAa/O,GAC/BgG,KAAKmJ,SAAS,CAACwG,yBAA0B3V,EAAI0V,qBAAqB,IAJkG,gDAKrKhK,KAAK1F,OAAO,uBAAGuB,UAAU,qBAAqBV,MAAO,CAACmC,YAAa,MAAQhD,KAAK1C,MAAMyE,cAAc0Q,kBAG3G,yBAAK5R,MAAO,CAACgR,WAAY,GAAI7O,YAAa,GAAI0P,UAAW,SAAUC,SAAU,IACzE,6BACM,WACE,GAAI,EAAKnJ,MAAMqF,MAAMhQ,OAAS,EAC1B,OAAO,yBAAK0C,UAAU,cAAc,EAAKjE,MAAMyE,cAAc6Q,SAAS,kBAAC,IAAD,CAAUrR,UAAU,eAAe,EAAKiI,MAAMqF,MAAMhQ,SAFhI,GAIN,kBAAC,IAAD,CAAkBuF,KAAMpE,KAAKwJ,MAAMqF,MAAO/G,OAAQ9H,KAAK8P,aAAczP,IAAKL,KAAK1C,MAAM+C,IAAKF,OAAQH,KAAK1C,MAAM6C,OAAQ2B,SAAU9B,KAAK1C,MAAMwE,SAAUkG,aAAchI,KAAKwJ,MAAMxB,aAAcD,SAAU,CAAC/H,KAAKwJ,MAAM2F,WAAYnP,KAAKwJ,MAAM0F,eAAgBlP,KAAKwJ,MAAMf,iBAAkBzI,KAAKwJ,MAAMwF,oBAAqBhP,KAAKwJ,MAAMuF,aAAc/O,KAAKwJ,MAAMyF,oBAE7V,6BACM,WACE,GAAI,EAAKzF,MAAMsF,QAAQjQ,OAAS,EAC5B,OAAO,yBAAK0C,UAAU,cAAc,EAAKjE,MAAMyE,cAAc8Q,GAAG,kBAAC,IAAD,CAAUtR,UAAU,eAAe,EAAKiI,MAAMsF,QAAQjQ,SAF5H,GAIDmB,KAAKwJ,MAAMsF,QAAQ1P,KAAI,SAAApF,GAAE,OACtB,kBAAC,IAAD,CAAM6N,IAAK7N,EAAIO,IAAKP,EAAG,IAAI,EAAK8V,aAAczP,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQ2B,SAAU,EAAKxE,MAAMwE,SAAUkG,aAAc,EAAKwB,MAAMxB,aAAahO,GAAK+N,SAAU,CAAC,EAAKyB,MAAM2F,WAAY,EAAK3F,MAAM0F,eAAgB,EAAK1F,MAAMf,iBAAkB,EAAKe,MAAMwF,oBAAqB,EAAKxF,MAAMuF,aAAc,EAAKvF,MAAMyF,uBAG9U,6BACI,yBAAK1N,UAAU,mBACX,uBACIG,QAAS,kBACD,EAAKyH,SAAS,CAACmG,eAAgB,EAAK9F,MAAM8F,iBAGlDzO,MAAO,CACHgR,WAAY,GACZiB,UAAW,GACXxR,QAAS,eACT4Q,WAAY,IACZ1F,SAAU,GAEVhF,OAAQ,YAEZ,uBACIjG,UAAU,uBACVV,MAAO,CAACsM,aAAc,KAhB9B,IAiBWnN,KAAKwJ,MAAM8F,cAAetP,KAAK1C,MAAMyE,cAAcgR,KAAO/S,KAAK1C,MAAMyE,cAAciR,KAjB9F,IAiBqGhT,KAAK1C,MAAMyE,cAAcsN,WAG7H,WACG,GAAI,EAAK7F,MAAM8F,cACX,OAAO,EAAK9F,MAAM6F,SAASjQ,KAAI,SAAA6T,GAC3B,MAA0B,SAAtBA,EAAa3T,KACN,kBAAC,IAAD,CAAMuI,IAAKoL,EAAa1T,QAAShF,IAAK0Y,EAAa1T,QAAQ,IAAI,EAAKuQ,aAAczP,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQ2B,SAAU,EAAKxE,MAAMwE,SAAUkG,aAAc,EAAKwB,MAAMxB,aAAaiL,EAAa1T,SAAUwI,SAAU,CAAC,EAAKyB,MAAM2F,WAAY,EAAK3F,MAAM0F,eAAgB,EAAK1F,MAAMf,iBAAkB,EAAKe,MAAMwF,oBAAqB,EAAKxF,MAAMuF,aAAc,EAAKvF,MAAMyF,mBAChW,UAAtBgE,EAAa3T,KACnB,yBAAKiC,UAAU,gBAAe,yBAAKA,UAAU,2BAA0B,yBAAKA,UAAU,iBAAf,SAAiD,yBAAKA,UAAU,iBAAgB,0BAAMA,UAAU,qBAAqB0R,EAAa1T,QAAQ2T,mBAAmB,EAAK5V,MAAMyE,cAAcC,cAAe,CAAEC,QAAS,OAAQkR,KAAM,UAAWjR,MAAO,OAAQkR,IAAK,oBADlU,KALxB,GAaA,WACO,GAAI,EAAK5J,MAAM8F,cACf,OAAO,0BAAMzO,MAAO,CAAC2L,SAAU,EAAGsF,MAAM,kBAAmBuB,YAAY,GAAIC,WAAW,KAA/E,cAAgGzW,4CAF9G,IAMT,yBAAK0E,UAAU,iBAAf,gB,GAvQLgN,aAoRRC,Q,kPCvST9F,EAAW1S,EAAQ,IA0BrBud,EAAY,EAEhB,SAASC,EAAmBlW,GAExB,SAASc,EAA0BC,EAAMC,EAAOC,GAC5C,IAAIC,EAASH,EACTI,EAASH,EACTI,EAAQH,EACRI,EAAM,SAASC,GAEf,OAAoB,IADpBA,EAAIA,EAAEtH,SAAS,KACLuH,OAAe,IAAMD,EAAIA,GAGnCE,EAAIlH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IACrGO,EAAIrH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IACrGQ,EAAItH,KAAKmH,KAAKC,SAASR,EAAO1G,UAAU,EAAE,GAAI,IAAM4G,EAAQM,SAASP,EAAO3G,UAAU,EAAE,GAAI,KAAO,EAAE4G,IAEzG,OAAOC,EAAIG,GAAKH,EAAIM,GAAKN,EAAIO,GAfF,MAkBO3B,mBAAS,IAAI/C,MAlBpB,mBAkB1BiD,EAlB0B,KAkBZC,EAlBY,KAoB3BC,EAAeF,EAAaG,WAC5BC,EAAcJ,EAAaK,cAE3BC,EAAgB,IAAIvD,KAAKqD,EAAaF,EAAc,GACpDK,EAAe,IAAIxD,KAAKqD,EAAaF,EAAa,EAAG,GACrDM,EAAmB,IAAIzD,KAAKqD,EAAaF,EAAc,GAEvDO,EAAkBH,EAAcI,SAAS,EAEzCgB,EAAa,YAAI,IAAI3H,MAAM0G,EAAgB,IAAIkB,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAM,MAAOC,QAAS7F,EAAEuE,EAAiBuB,WAAWtB,EAAgB,GAAG,MAE3IuB,EAAY,YAAI,IAAIjI,MAAO,EAAEwG,EAAaG,YAAY,EAAG,EAAE,EAAEH,EAAaG,WAAWiB,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAK,OAAQC,QAAQ7F,EAAE,MAEjIgG,EAAc,YAAI,IAAIlI,MAAMwG,EAAawB,YAAYJ,KAAI,SAACC,EAAG3F,GAAK,MAAO,CAAC4F,KAAK,SAAUC,QAAQ7F,EAAE,MAjCxE,EAmCT6D,mBAAS,IAnCA,mBAmC1BoC,EAnC0B,KAmCpBC,EAnCoB,OAqCWrC,oBAAS,GArCpB,mBAqC1BkW,EArC0B,KAqCVC,EArCU,OAuCCnW,mBAAS,IAvCV,mBAuC1BoW,EAvC0B,KAuCfC,EAvCe,KAyC/Bpc,MAAMqI,UAAUC,IAAM,WAClB,OAAOlI,KAAKkI,IAAIC,MAAM,KAAMC,OAGhC,IAAI8J,EAAO,uCAAI,8CAAA/R,EAAA,6DACHqH,EAAM,IAAI7I,IACVsd,EAAQ,IAAItd,IACZud,EAAM,IAAIvd,IACV2J,EAAK,GAJF,SAKc5C,EAAM6C,OAAOhD,GAAGiD,mBAAmB9C,EAAM+C,IAAKtC,EAAeC,GAAc,GALzF,cAME1D,SAAQ,YAAc,IAAD,mBAAXN,EAAW,KAAPsG,EAAO,KACtBC,EAAO,IAAI/F,KAAqB,IAAhB8F,EAAIE,IAAI/F,SAC5B8F,EAAKE,SAAS,EAAG,EAAG,EAAG,GACvB,IAAIC,EAAOH,EAAKf,UACbJ,EAAIjH,IAAIuI,GACPtB,EAAIhH,IAAIsI,EAAMtB,EAAI/G,IAAIqI,GAAM,GAE5BtB,EAAIhH,IAAIsI,EAAM,GACfmT,EAAM1b,IAAIuI,GACTmT,EAAMzb,IAAIsI,EAAV,sBAAoBmT,EAAMxb,IAAIqI,IAA9B,CAAqCJ,EAAIqL,QAEzCkI,EAAMzb,IAAIsI,EAAM,CAACJ,EAAIqL,OACtBmI,EAAI3b,IAAIuI,GACPoT,EAAI1b,IAAIsI,EAAR,sBAAkBoT,EAAIzb,IAAIqI,IAA1B,CAAiC1G,KAEjC8Z,EAAI1b,IAAIsI,EAAM,CAAC1G,OAGnB2G,EAASnJ,MAAMoJ,KAAKxB,EAAIuB,UACxBoT,EAAWvc,MAAMoJ,KAAKiT,EAAMlT,UAC5BqT,EAASxc,MAAMoJ,KAAKkT,EAAInT,UACxBA,EAAO9B,OAAS,IACZiB,EAAMa,EAAOb,MACbe,EAAQC,iBAAiBC,SAASC,MAClCC,EAAQN,EAAOvB,KAAI,SAAA8B,GAAC,OAAE9C,EAA0ByC,EAAMM,iBAAiB,qBAAqBC,OAAOnK,MAAM,GAAI4J,EAAMM,iBAAiB,sBAAsBC,OAAOnK,MAAM,GAAIiK,EAAEpB,MACjLtI,MAAMoJ,KAAKxB,EAAIiC,QAAQ/G,SAAQ,SAAC4G,EAAGxH,GAAKwG,EAAGgB,GAAG,CAAC4Q,MAAM7Q,EAAMvH,GAAIgJ,MAAM/B,EAAOjH,GAAIma,MAAME,EAASra,GAAIoa,IAAKE,EAAOta,QAEnHkG,EAAQM,GAjCD,4CAAJ,qDAwCX,OAJAD,qBAAU,WACN6J,MACF,CAACrM,EAAc8V,IAGb,yBAAKvZ,GAAG,uCAAuC6G,MAAK,aAAGS,QAAS,eAAgB2Q,OAAQ,MAAOD,MAAO,OAAU1U,EAAMuD,QAClH,kBAAC,IAAD,CAAyBR,IAAK/C,EAAM+C,IAAKF,OAAQ7C,EAAM6C,OAAQmD,QAASmQ,EAAgBvQ,aAAc,kBAAIwQ,GAAkB,IAAQtP,KAAMuP,EAAW3L,aAAc1K,EAAM0K,aAAcD,SAAUzK,EAAMyK,SAAUjG,SAAUxE,EAAMwE,SAAUmS,YAAaxW,IACxP,yBAAKzD,GAAG,0BACJ,yBAAKA,GAAG,0BACJ,0BAAMuH,UAAU,+BAAhB,OACA,0BAAMA,UAAU,+BAAhB,OACA,0BAAMA,UAAU,+BAAhB,QACA,0BAAMA,UAAU,+BAAhB,OACA,0BAAMA,UAAU,+BAAhB,OACA,0BAAMA,UAAU,+BAAhB,OACA,0BAAMA,UAAU,+BAAhB,QAEJ,yBAAKvH,GAAG,4BACH,sBAAImF,GAAJ,YAAkBO,GAAlB,YAAiCD,IAAWL,KAAI,SAAA1F,GAAC,OAClD,0BAAM6H,UAAS,gEAA2D7H,EAAE4F,KAA7D,oCAA6F5F,EAAE6F,SAAWsB,MAAO,CAC5HW,gBAAmB7B,EAAKjG,EAAE6F,UAAqB,WAAX7F,EAAE4F,KAApB,WACVK,EAAKjG,EAAE6F,SAASuS,OACpB,WAEJpQ,QAAS,SAACR,GACN,IAAIX,EACW,QAAX7G,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKyD,EAAiBH,cAAeG,EAAiBL,WAAYlE,EAAE6F,UACpE,WAAX7F,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAYlE,EAAE6F,UAC9D,SAAX7F,EAAE4F,OACFiB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAGlE,EAAE6F,UAC/E7B,EAAgB6C,GACZZ,EAAKjG,EAAE6F,SACPqU,EAAajU,EAAKjG,EAAE6F,SAASuU,KAE7BF,EAAa,IACjBF,GAAkB,GACdpW,EAAMqE,gBACNrE,EAAMqE,eAAepB,KAE7B,yBAAKgB,UAAU,sBACV7H,EAAE6F,QAAQ,0BAAMgC,UAAU,uBAAwB5B,EAAKjG,EAAE6F,UAAmB,WAAT7F,EAAE4F,KAApB,UAAwCK,EAAKjG,EAAE6F,SAASmD,MAAxD,UAAsE,OAAkB,yBAAK7B,MAAO,CAACgR,WAAY,EAAG7O,YAAa,EAAGkR,aAAc,KAAOvU,EAAKjG,EAAE6F,UAAmB,WAAT7F,EAAE4F,KAAiBK,EAAKjG,EAAE6F,SAASsU,MAAM,IAAIzU,KAAI,SAACuM,GAAD,OAAQ,0BAAMpK,UAAU,0BAAyB,yBAAKA,UAAU,wBAAf,QAAmDoK,YAI7X,yBAAK3R,GAAG,wBACJ,uBAAGuH,UAAU,oCAAoCG,QAAS,WACtD,IAAInB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAG,GAC7EF,EAAgB6C,GACZjD,EAAMqE,gBACNrE,EAAMqE,eAAepB,MAG7B,uBAAGgB,UAAU,qCAAqCG,QAAS,WACvD,IAAInB,EAAO,IAAI/F,KAAKuD,EAAcD,cAAeC,EAAcH,WAAW,EAAG,GAC7EF,EAAgB6C,GACZjD,EAAMqE,gBACNrE,EAAMqE,eAAepB,MAG7B,yBAAKgB,UAAU,iBAAiBG,QAAS,WACrChE,EAAgB,IAAIlD,MAChB8C,EAAMqE,gBACNrE,EAAMqE,eAAe,IAAInH,QAE7B8C,EAAMwE,SAASC,cAAcgB,QAKrC,yBAAK/I,GAAG,4BACJ,yBAAKA,GAAG,4BACJ,yBAAKuH,UAAU,yCAAyC9D,EAAa+B,WACrE,yBAAK+B,UAAU,qCAAqC9D,EAAaoE,eAAevE,EAAMwE,SAASC,cAAcC,cAAe,CAAGC,QAAS,UACxI,yBAAKV,UAAU,kCAAkC9D,EAAaoE,eAAevE,EAAMwE,SAASC,cAAcC,cAAe,CAAEE,MAAO,UAClI,yBAAKX,UAAU,iCAAiC9D,EAAaK,mB,IAU/EqW,E,kDAEF,WAAY7W,GAAQ,IAAD,sBACf,cAAMA,GAEN,IAAI8W,EAAQ,IAAI5Z,KAHD,OAIf4Z,EAAM3T,SAAS,EAAE,EAAE,EAAE,GAErB,EAAK+I,MAAQ,CACTf,iBAAiB,GACjBsG,aAAa,GACbC,oBAAoB,GACpBC,gBAAgB,GAChBjH,aAAc,GACdkH,eAAe,GACfC,WAAY,GACZC,UAAW,GACX6E,YAAcG,EACdC,SAAU,GACVC,kBAAkB,GAItB,EAAKxE,aAAe,EAAKjY,SACzB,EAAKyF,MAAMwE,SAASkO,kBAAmB,EAAKlG,QAASpE,KAAd,iBACvC,EAAK6O,SAAWlQ,IAAMC,YAGtBoE,EAAS,gBA1BM,E,uDA6Bf1I,KAAKmJ,SAAS,CAACqL,UAAU,M,iCAGzBxU,KAAKmJ,SAAS,CAACqL,UAAU,M,6CAIzBxU,KAAK1C,MAAMwE,SAAS0P,S,kLAIFxR,KAAK1C,MAAM6C,OAAOhD,GAAG8S,oBAAoBjQ,KAAK1C,MAAM+C,K,cAAlE6P,E,gBACelQ,KAAK1C,MAAM6C,OAAOhD,GAAGkT,mBAAmBrQ,KAAK1C,MAAM+C,K,OAMtE,IAAS4M,KANLqD,E,OAGAC,EAAc,GACdC,EAAW,GAECF,EAAO,GAAG,GACtBE,EAASzW,KAAK,CAAC2I,MAAOuK,EAAKwD,MAAOH,EAAO,GAAG,GAAGrD,K,OAC/CyD,EAAQ1Q,K,UACW,cAAAjI,EAAA,sCAAAA,EAAA,6DACf4Y,EAAM,GADS,SAEID,EAAMpT,MAAM6C,OAAOhD,GAAGwN,oBAAoB+F,EAAMpT,MAAM+C,KAF1D,OAEfuQ,EAFe,OAEgE,GAFhE,OAAA7Y,EAAA,KAGH6Y,GAHG,qDAGVrW,EAHU,gBAIfoW,EAJe,UAIAD,EAAMpT,MAAM6C,OAAOhD,GAAG0T,oBAAoBH,EAAMpT,MAAM+C,IAAK9F,GAAK,GAJhE,yBAIXR,KAJW,gEAMZ4W,GANY,8C,eAAnBvB,E,OASA0B,EAAoB,SAApBA,EAA6BC,EAAGC,GAIhC,GAHKA,IACDA,EAAQ,IACZT,EAAYxW,KAAK,CAAC2I,MAAOqO,EAAE/W,GAAIyW,MAAOO,EAAMV,EAAO,GAAG,GAAGS,EAAE/W,MACvD+W,EAAEE,SAAN,qBACkBF,EAAEE,UADpB,IACI,gCAAS/P,EAAT,QACmB,YAAXA,EAAE5B,MACFwR,EAAkB5P,EAAE3B,QAASyR,EAAM,QAH/C,iCAMJ5B,EAAUhQ,KAAI,SAAAgO,GAAI,OAAE0D,EAAkB1D,OAElCqH,EAAU,IAAIja,KAAKwF,KAAKwJ,MAAMyK,cAC1BxT,SAAS,GAAG,GAAG,GAAG,I,UACLT,KAAK1C,MAAM6C,OAAOhD,GAAGiD,mBAAmBJ,KAAK1C,MAAM+C,IAAKL,KAAKwJ,MAAMyK,YAAaQ,G,QAAjGJ,E,OAEJd,IAEAvT,KAAKmJ,SAAS,CACVV,iBAAkB6H,EAAO,GAAG,GAC5BvB,aAAcuB,EAAO,GAAG,GACxBtB,oBAAqBsB,EAAO,GAAG,GAC/BrB,gBAAiBqB,EAAO,GAAG,GAC3BtI,aAAckI,EACdhB,eAAgBqB,EAChBpB,WAAYqB,EACZpB,YACAiF,a,iJAKJrU,KAAK8J,Y,+BAGE,OAA2B,OAAjB,EAAElS,KAAKC,UAAmB,GAAGP,SAAS,IAAI,KAAwB,OAAjB,EAAEM,KAAKC,UAAmB,GAAGP,SAAS,M,+BAElG,IAAD,OACL,OACI,kBAAC,IAAD,KAEI,yBAAKiK,UAAW,oBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WAFf,QAUA,yBAAK4E,UAAW,iBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WASX,yBAAK4E,UAAU,oBACX,yBAAKV,MAAO,CAACS,QAAS,iBAClB,6BACI,kBAAC,IAAD,KACI,uBAAGC,UAAU,cACTV,MAAO,CAACgR,WAAY,GAAIC,MAAO,kCAEvC,wBAAIvQ,UAAU,cACV,uBAAGV,MAAO,CAACsM,aAAc,IACrB5L,UAAU,wBAEbvB,KAAK1C,MAAMwE,SAASC,cAAc+K,UAEvC,kBAAC,IAAD,CAAc4H,OAAO,QAAQC,OAAQ,CAACzJ,IAAK,GAAI1J,gBAAgB,QAAQD,UAAU,gBAI7F,yBAAKV,MAAO,CAACgR,WAAY,GAAI7O,YAAa,GAAI0P,UAAW,SAAUT,OAAQ,SACvE,yBAAKjY,GAAG,yBAEI,EAAKsD,MAAMV,WACJ,kBAAC,IAAD,CAAckF,SAAU,EAAKxE,MAAMwE,SAAUzB,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQmD,QAAS,EAAKkG,MAAM8K,iBAAkBpR,aAAc,kBAAI,EAAKiG,SAAS,CAACmL,kBAAkB,KAAU3S,eAAgB,uCAAC,WAAeY,GAAf,iBAAAxK,EAAA,6DAChN0c,EAAU,IAAIja,KAAK+H,EAAE5H,YACjB8F,SAAS,GAAG,GAAG,GAAG,IAF0L,SAG/LT,KAAK1C,MAAM6C,OAAOhD,GAAGiD,mBAAmBJ,KAAK1C,MAAM+C,IAAKkC,EAAGkS,GAHoI,OAGhNJ,EAHgN,OAIpNrU,KAAKmJ,SAAS,CAAC8K,YAAa1R,EAAG8R,aAJqL,gDAAD,sDAKpN3O,KAAK,KAED,kBAAC8N,EAAD,CAAoB1R,SAAU,EAAKxE,MAAMwE,SAAWzB,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQ6H,aAAc,EAAKwB,MAAMxB,aAAcD,SAAU,CAAC,EAAKyB,MAAM2F,WAAY,EAAK3F,MAAM0F,eAAgB,EAAK1F,MAAMf,iBAAkB,EAAKe,MAAMwF,oBAAqB,EAAKxF,MAAMuF,aAAc,EAAKvF,MAAMyF,mBAEtT,WACE,GAAI,EAAK3R,MAAMV,WACnB,OAAO,yBAAK5C,GAAG,kCACX,0BAAMA,GAAG,wBACL,yBAAK4a,MAAM,uBAAuB,EAAKpL,MAAM6K,SAASxV,QACtD,yBAAK+V,MAAM,uBAAX,gBACA,yBAAKA,MAAM,sBAAsB,EAAKpL,MAAMyK,YAAYpS,eAAe,QAAS,CAAGI,QAAS,OAAQkR,KAAM,UAAWjR,MAAO,OAAQkR,IAAK,cAE5I,EAAK5J,MAAM6K,SAASjV,KAAI,SAAApF,GAAE,OACvB,kBAAC,IAAD,CAAM6N,IAAK7N,EAAIO,IAAKP,EAAG,IAAI,EAAK8V,aAAczP,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQ2B,SAAU,EAAKxE,MAAMwE,SAAUkG,aAAc,EAAKwB,MAAMxB,aAAahO,GAAK+N,SAAU,CAAC,EAAKyB,MAAM2F,WAAY,EAAK3F,MAAM0F,eAAgB,EAAK1F,MAAMf,iBAAkB,EAAKe,MAAMwF,oBAAqB,EAAKxF,MAAMuF,aAAc,EAAKvF,MAAMyF,uBAT5U,GAaN,yBAAK1N,UAAU,iBAAf,gB,GAtKDgN,aA8KRsG,4BAAcV,EAAU,CAACW,YAAa,IAAKC,YAAY,IAAKC,sBAAsB,M,mDC9XjG,wDAgFeC,IArDf,SAAiC3X,GAE7B,IAAI4X,EAAOrR,iBAAO,IAMlB,OAJA5D,qBAAU,WACNiV,EAAK1P,QAAQlI,EAAM8G,KAAKhF,KAAI,SAACC,GAAD,OAAKiF,2BAClC,CAAChH,EAAM8G,OAGN,kBAAC,IAAD,CAAUzN,IAAK2G,EAAM8F,UAAWC,OAAQ/F,EAAMgG,QAASJ,aAAc,WAAU5F,EAAM4F,cAAc5F,EAAM4F,gBAAiBrC,MAAO,CAAC0C,aAAc,GAAIC,SAAS,yBACrJ,yBAAKxJ,GAAG,oBADhB,IAEI,yBAAKuH,UAAU,gBACX,0BAAMvH,GAAG,wBACL,yBAAK4a,MAAM,uBAAuBtX,EAAM8G,KAAKvF,QAC7C,yBAAK+V,MAAM,uBAAX,gBACA,yBAAKA,MAAM,sBAAuBtX,EAAM2W,YAAYpS,eAAe,QAAS,CAAGI,QAAS,OAAQkR,KAAM,UAAWjR,MAAO,OAAQkR,IAAK,cAGxI9V,EAAM8G,KAAKhF,KAAI,SAACpF,EAAIN,GAAL,OACZ,yBAAK/C,IAAKue,EAAK1P,QAAQ9L,IACnB,kBAAC,IAAD,CAAMmO,IAAK7N,EAAIO,IAAKP,EAAIqG,IAAK/C,EAAM+C,IAAKF,OAAQ7C,EAAM6C,OAAQ2B,SAAUxE,EAAMwE,SAAUkG,aAAc1K,EAAM0K,aAAahO,GAAK+N,SAAUzK,EAAMyK,SAAUE,SAAUiN,EAAK1P,QAAQ9L,GAAIyb,SAAS,QASlN,yBAAKtU,MAAO,CAACiS,UAAW,KACpB,uBAAGvR,UAAU,YAAYG,QAAS,WACrCpE,EAAMwE,SAAS+E,GACX,cAAe,CAClBxG,IAAK/C,EAAM+C,IACX4M,IAAK,GAGLtB,KAAM,KAELyJ,MAAK,SAACC,SAEF,6BAAK,uBAAG9T,UAAU,uCAAsC,yBAAKV,MAAO,CAACS,QAAS,eAAgB4Q,WAAY,MAAlD,WAE3D,yBAAK3Q,UAAU,iBAAf,SAIU,yBAAKA,UAAU,gBAAgBV,MAAO,CAACoR,OAAQ,MAA/C,Y,qKCpEVvJ,EAAW1S,EAAQ,IAezB,SAASsf,EAAWhW,EAAMnG,GACtB6G,KAAKV,KAAOA,EACZU,KAAK7G,SAAWA,E,IAIdoc,E,kDACF,WAAYjY,GAAQ,IAAD,8BACf,cAAMA,IAEDkM,MAAQ,CACT6K,SAAU,GACVmB,WAAY,EACZC,SAAU,CAAC,QAAS,YAAa,YAAa,aAAc,eAC5DC,WAAW,EACXjN,iBAAiB,GACjBsG,aAAa,GACbC,oBAAoB,GACpBC,gBAAgB,GAChBjH,aAAc,GACdkH,eAAe,GACfC,WAAY,GACZC,UAAW,IAGf,EAAKU,aAAe,EAAKjY,SACzB,EAAKyF,MAAMwE,SAASkO,kBAAmB,EAAKlG,QAASpE,KAAd,iBACvCgD,EAAS,gBApBM,E,mEAwBf1I,KAAK1C,MAAMwE,SAAS0P,S,gLAIhBmE,EAAU,G,SACG3V,KAAK1C,MAAM6C,OAAOhD,GAAGyY,kBAAkB5V,KAAK1C,MAAM+C,K,cAA/DwV,E,gBAEc7V,KAAK1C,MAAM6C,OAAOhD,GAAG8S,oBAAoBjQ,KAAK1C,MAAM+C,K,cAAlE6P,E,gBACelQ,KAAK1C,MAAM6C,OAAOhD,GAAGkT,mBAAmBrQ,KAAK1C,MAAM+C,K,OAYtE,IAAS4M,KAZLqD,E,OAEJuF,EAAKvb,SAAQ,SAACwb,EAAKpc,GACfic,EAAQ5b,KAAK,IAAIub,EAAW,QAAS,EAAK9L,MAAMiM,SAAS/b,KACzDoc,EAAIxb,SAAQ,SAAAM,GACR+a,EAAQ5b,KAAK,IAAIub,EAAW,OAAQ1a,UAIxC2V,EAAc,GACdC,EAAW,GAECF,EAAO,GAAG,GACtBE,EAASzW,KAAK,CAAC2I,MAAOuK,EAAKwD,MAAOH,EAAO,GAAG,GAAGrD,K,OAC/CyD,EAAQ1Q,K,UACW,cAAAjI,EAAA,sCAAAA,EAAA,6DACf4Y,EAAM,GADS,SAEID,EAAMpT,MAAM6C,OAAOhD,GAAGwN,oBAAoB+F,EAAMpT,MAAM+C,KAF1D,OAEfuQ,EAFe,OAEgE,GAFhE,OAAA7Y,EAAA,KAGH6Y,GAHG,qDAGVrW,EAHU,gBAIfoW,EAJe,UAIAD,EAAMpT,MAAM6C,OAAOhD,GAAG0T,oBAAoBH,EAAMpT,MAAM+C,IAAK9F,GAAK,GAJhE,yBAIXR,KAJW,gEAMZ4W,GANY,8C,QAAnBvB,E,OASA0B,EAAoB,SAApBA,EAA6BC,EAAGC,GAIhC,GAHKA,IACDA,EAAQ,IACZT,EAAYxW,KAAK,CAAC2I,MAAOqO,EAAE/W,GAAIyW,MAAOO,EAAMV,EAAO,GAAG,GAAGS,EAAE/W,MACvD+W,EAAEE,SAAN,qBACkBF,EAAEE,UADpB,IACI,gCAAS/P,EAAT,QACmB,YAAXA,EAAE5B,MACFwR,EAAkB5P,EAAE3B,QAASyR,EAAM,QAH/C,iCAKJ5B,EAAUhQ,KAAI,SAAAgO,GAAI,OAAE0D,EAAkB1D,MACtCpN,KAAKmJ,SAAS,CAACkL,SAAUsB,EAASD,WAAW,EAAOjN,iBAAkB6H,EAAO,GAAG,GAAIvB,aAAcuB,EAAO,GAAG,GAAItB,oBAAqBsB,EAAO,GAAG,GAAIrB,gBAAiBqB,EAAO,GAAG,GAAItI,aAAckI,EAAOhB,eAAgBqB,EAAapB,WAAYqB,EAAUpB,c,2PAM1PpP,KAAK8J,U,8IAGU,IAAD,OACd9J,KAAKmJ,SAAS,CAACuM,WAAW,IACV/O,YAAW,WACvB,EAAKwC,SAAS,CAACuM,WAAW,MAE3B,GAEkB/O,YAAW,WAC5B,EAAKwC,SAAS,CAACqM,WAAY,EAAKhM,MAAMgM,WAAW,IAGjD,EAAKrM,SAAS,CAACuM,WAAW,MAC3B,K,+BAMI,OAA2B,OAAjB,EAAE9d,KAAKC,UAAmB,GAAGP,SAAS,IAAI,KAAwB,OAAjB,EAAEM,KAAKC,UAAmB,GAAGP,SAAS,M,+BAElG,IAAD,OACL,OACI,kBAAC,IAAD,KACI,yBAAKuJ,MAAO,CAAC6R,UAAW,WACpB,yBAAKnR,UAAW,oBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WAFf,QAUA,yBAAK4E,UAAW,iBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WASX,yBAAK4E,UAAU,oBACX,yBAAKV,MAAO,CAACS,QAAS,iBAClB,kBAAC,IAAD,KACI,uBAAGsT,MAAM,cACL/T,MAAO,CAACgR,WAAY,GAAIC,MAAO,kCAEvC,wBAAIvQ,UAAU,cACV,uBAAGV,MAAO,CAACsM,aAAc,IACrB5L,UAAU,wBAFlB,eAaR,yBAAKV,MAAO,CAAC6R,UAAW,WACnB1S,KAAKwJ,MAAM6K,SAASpd,MAAM,EAAG,GAAG+I,KAAKwJ,MAAMgM,YAAYpW,KAAI,SAACG,EAAS7F,GAAV,OACxD,yBAAKmH,MAAO,CAACgR,WAAY,GAAI7O,YAAa,KACpB,SAAhBzD,EAAQD,KACD,EAAKkK,MAAM6K,SAAS3a,EAAE,GACgB,SAAjC,EAAK8P,MAAM6K,SAAS3a,EAAE,GAAG4F,MAAmB,EAAKkK,MAAM6K,SAASpd,MAAM,EAAG,GAAG,EAAKuS,MAAMgM,YAAY3W,QAAUnF,EAAE,EACjH,GAAK,uBAAG6H,UAAU,aAAaV,MAAO,CAACqT,aAAa,IAAK3U,EAAQpG,UAAiB,GAClF,kBAAC,IAAD,CACI0O,IAAKtI,EAAQpG,SACb4c,mBAAmB,EACnBxb,IAAKgF,EAAQpG,SAAS,IAAI,EAAK2W,aAC/BzP,IAAK,EAAK/C,MAAM+C,IAChBF,OAAQ,EAAK7C,MAAM6C,OACnB2B,SAAU,EAAKxE,MAAMwE,SACrBkG,aAAc,EAAKwB,MAAMxB,aAAazI,EAAQpG,UAC9C4O,SAAU,CAAC,EAAKyB,MAAM2F,WAClB,EAAK3F,MAAM0F,eACX,EAAK1F,MAAMf,iBACX,EAAKe,MAAMwF,oBACX,EAAKxF,MAAMuF,aACX,EAAKvF,MAAMyF,uBAM3C,yBAAK1N,UAAU,cAEVvB,KAAKwJ,MAAMkM,UAAW,uBAAGnU,UAAU,UAAb,cAAwC,uBAAGG,QAAS1B,KAAKgW,iBAAjB,kBAEvE,yBAAKzU,UAAU,iBAAf,gB,GA1KIgN,aAmLTgH,Q,gNCnMT7M,EAAW1S,EAAQ,IAqBnBigB,E,kDAEF,WAAY3Y,GAAQ,IAAD,8BACf,cAAMA,IAEDkM,MAAQ,CACT6K,SAAU,GACV6B,gBAAiB,GACxBC,iBAAkB,GAClBC,iBAAkB,GAClBC,gBAAiB,GAEV7B,SAAiC,OAAvB,EAAKlX,MAAM+Q,QACrB5F,iBAAiB,GACjBsG,aAAa,GACbC,oBAAoB,GACpBC,gBAAgB,GAChBjH,aAAc,GACdkH,eAAe,GACfC,WAAY,GACZC,UAAW,IAKf,EAAKU,aAAe,EAAKjY,SACzB,EAAKyF,MAAMwE,SAASkO,kBAAmB,EAAKlG,QAASpE,KAAd,iBACvC,EAAK6O,SAAWlQ,IAAMC,YAItBoE,EAAS,gBA7BM,E,uDAgCf1I,KAAKmJ,SAAS,CAACqL,UAAU,M,iCAGzBxU,KAAKmJ,SAAS,CAACqL,UAAU,M,6CAIzBxU,KAAK1C,MAAMwE,SAAS0P,S,oLAIaxR,KAAK1C,MAAM6C,OAAOhD,GAAG0N,gBAAgB7K,KAAK1C,MAAM+C,K,cAA7EiW,E,OACAC,EAAoBD,EAAqB,GAAGtW,KAAK1C,MAAMtD,I,SACtCgG,KAAK1C,MAAM6C,OAAOqW,YAAYC,KAAKzW,KAAK1C,MAAM+C,IAAKkW,EAAkBG,MAAOH,EAAkBrG,MAAOqG,EAAkBI,M,cAAxItC,E,gBAGcrU,KAAK1C,MAAM6C,OAAOhD,GAAG8S,oBAAoBjQ,KAAK1C,MAAM+C,K,cAAlE6P,E,iBACelQ,KAAK1C,MAAM6C,OAAOhD,GAAGkT,mBAAmBrQ,KAAK1C,MAAM+C,K,QAMtE,IAAS4M,KANLqD,E,OAGAC,EAAc,GACdC,EAAW,GAECF,EAAO,GAAG,GACtBE,EAASzW,KAAK,CAAC2I,MAAOuK,EAAKwD,MAAOH,EAAO,GAAG,GAAGrD,K,OAC/CyD,EAAQ1Q,K,UACW,cAAAjI,EAAA,sCAAAA,EAAA,6DACf4Y,EAAM,GADS,SAEID,EAAMpT,MAAM6C,OAAOhD,GAAGwN,oBAAoB+F,EAAMpT,MAAM+C,KAF1D,OAEfuQ,EAFe,OAEgE,GAFhE,OAAA7Y,EAAA,KAGH6Y,GAHG,qDAGVrW,EAHU,gBAIfoW,EAJe,UAIAD,EAAMpT,MAAM6C,OAAOhD,GAAG0T,oBAAoBH,EAAMpT,MAAM+C,IAAK9F,GAAK,GAJhE,yBAIXR,KAJW,gEAMZ4W,GANY,8C,QAAnBvB,E,OASA0B,EAAoB,SAApBA,EAA6BC,EAAGC,GAIhC,GAHKA,IACDA,EAAQ,IACZT,EAAYxW,KAAK,CAAC2I,MAAOqO,EAAE/W,GAAIyW,MAAOO,EAAMV,EAAO,GAAG,GAAGS,EAAE/W,MACvD+W,EAAEE,SAAN,qBACkBF,EAAEE,UADpB,IACI,gCAAS/P,EAAT,QACmB,YAAXA,EAAE5B,MACFwR,EAAkB5P,EAAE3B,QAASyR,EAAM,QAH/C,iCAMJ5B,EAAUhQ,KAAI,SAAAgO,GAAI,OAAE0D,EAAkB1D,MAEtCpN,KAAKmJ,SAAS,CACVkL,SAAUA,EACV6B,gBAAiBK,EAAkB5K,KAC1CwK,iBAAkBI,EAAkBG,MACpCN,iBAAkBG,EAAkBrG,MACpCmG,gBAAiBE,EAAkBI,KAC5BlO,iBAAkB6H,EAAO,GAAG,GAC5BvB,aAAcuB,EAAO,GAAG,GACxBtB,oBAAqBsB,EAAO,GAAG,GAC/BrB,gBAAiBqB,EAAO,GAAG,GAC3BtI,aAAckI,EACdhB,eAAgBqB,EAChBpB,WAAYqB,EACZpB,c,wIAIGlO,GAAI,IAAD,OACNA,IACAlB,KAAK1C,MAAMwE,SAAS8U,mBAAkB,WAGlC,EAAKtZ,MAAMwE,SAAS+E,GAChB,kCAAmC,CAE/BxG,IAAK,EAAK/C,MAAM+C,IAChBrG,GAAI,EAAKsD,MAAMtD,GACfK,QAAS,CAACsR,KAAMzK,EAAEuB,OAAOC,SAE/B0S,KAAK,EAAK9X,MAAM8Q,eAVtB,2BAWuBpO,KAAK1C,MAAMtD,GAXlC,YAYAgG,KAAKmJ,SAAS,CAAC+M,gBAAiBhV,EAAEuB,OAAOC,W,qCAKjC,IAAD,OACX1C,KAAK1C,MAAMkL,QAAQzO,KAAK,aACxBiG,KAAK1C,MAAMiL,SAAS,YACpBvI,KAAK1C,MAAMwE,SAAS+E,GAChB,kCAAmC,CAC/BxG,IAAKL,KAAK1C,MAAM+C,IAChBrG,GAAIgG,KAAK1C,MAAMtD,KAErBob,MAAK,WACH,EAAK9X,MAAM8Q,mB,0CAMfpO,KAAK8J,Y,yCAGUS,EAAWC,EAAWC,GAEjCF,EAAUvQ,KAAOgG,KAAK1C,MAAMtD,KAC5BgG,KAAKmJ,SAAS,CACVkL,SAAU,GACV6B,gBAAiB,GACjBC,iBAAkB,GAClBC,iBAAkB,GAClBC,gBAAiB,GAEjB7B,SAAiC,OAAvBxU,KAAK1C,MAAM+Q,QACrB5F,iBAAiB,GACjBsG,aAAa,GACbC,oBAAoB,GACpBC,gBAAgB,GAChBjH,aAAc,GACdkH,eAAe,GACfC,WAAY,GACZC,UAAW,KAIfpP,KAAK8J,WAGLS,EAAUvQ,KAAOgG,KAAK1C,MAAMtD,IAA6B,OAAvBgG,KAAK1C,MAAM+Q,SAC7CrO,KAAKmJ,SAAS,CAACqL,UAAU,M,+BAItB,OAA2B,OAAjB,EAAE5c,KAAKC,UAAmB,GAAGP,SAAS,IAAI,KAAwB,OAAjB,EAAEM,KAAKC,UAAmB,GAAGP,SAAS,M,+BAElG,IAAD,OACL,OACI,kBAAC,IAAD,KAEI,kBAAC,IAAD,CACI8L,UAAWpD,KAAKuU,SAChBjR,QAAStD,KAAKwJ,MAAMgL,SACpBtR,aAAclD,KAAK6W,SACnBxW,IAAKL,KAAK1C,MAAM+C,IAChBF,OAAQH,KAAK1C,MAAM6C,OACnB2B,SAAU9B,KAAK1C,MAAMwE,SACrB9H,GAAIgG,KAAK1C,MAAMtD,GACfkc,gBAAiBlW,KAAKwJ,MAAM0M,gBAC5BQ,MAAO1W,KAAKwJ,MAAM2M,iBAClBjG,MAAOlQ,KAAKwJ,MAAM4M,iBAClBO,KAAM3W,KAAKwJ,MAAM6M,gBACjBjI,YAAapO,KAAK1C,MAAM8Q,YACxB0I,WAAY9W,KAAK8W,WACjBC,iBAAyC,OAAvB/W,KAAK1C,MAAM+Q,UAEjC,yBAAK9M,UAAW,oBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WAFf,QAUA,yBAAK4E,UAAW,iBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WASzB,yBAAK4E,UAAU,oBACG,yBAAKV,MAAO,CAACS,QAAS,iBAClB,6BACI,kBAAC,IAAD,KACI,uBAAGC,UAAU,cACTV,MAAO,CAACgR,WAAY,GAAIC,MAAO,kCAEvC,wBAAIvQ,UAAU,cACV,uBAAGV,MAAO,CAACsM,aAAc,IACrB5L,UAAU,uBAEd,2BAAOA,UAAU,iBACbyV,SAAU,SAAC9V,GAAMA,EAAE+V,UAAW,EAAKH,WAAW5V,IAC9CwB,MAAO1C,KAAKwJ,MAAM0M,mBAG1B,kBAAC,IAAD,CAAcxB,OAAO,QAAQC,OAAQ,CAACzJ,IAAK,GAAI1J,gBAAgB,QAAQD,UAAU,aAEjF,yBAAKA,UAAU,qBAAqBV,MAAO,CAACgR,WAAY,GAAIiB,UAAW,EAAGoB,aAAc,IACpF,uBACIxS,QAAS1B,KAAKwU,SACd0C,WAAS,iBACT3V,UAAU,mBACVV,MAAO,CAACsW,YAAa,wBAAyB3P,OAAQ,YACtD,uBAAGjG,UAAU,cACTV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,wBACtBtF,SAAU,GACV/E,UAAW,2BAIvB,uBACI/F,QAAS1B,KAAKqX,aACdH,WAAS,mBACT3V,UAAU,mBACVV,MAAO,CAACsW,YAAa,wBACjB3P,OAAQ,UAAWqK,WAAY,IACnC,uBAAGtQ,UAAU,eACTV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,wBACtBtF,SAAU,GAAI/E,UAAW,+BASrD,yBAAK5G,MAAO,CAACgR,WAAY,GAAI7O,YAAa,GAAI0P,UAAW,WAEpD1S,KAAKwJ,MAAM6K,SAASjV,KAAI,SAAApF,GAAE,OACvB,kBAAC,IAAD,CACI6N,IAAK7N,EACLO,IAAKP,EAAG,IAAI,EAAK8V,aACjBzP,IAAK,EAAK/C,MAAM+C,IAChBF,OAAQ,EAAK7C,MAAM6C,OACnB2B,SAAU,EAAKxE,MAAMwE,SACrBkG,aAAc,EAAKwB,MAAMxB,aAAahO,GACtC+N,SAAU,CACN,EAAKyB,MAAM2F,WACX,EAAK3F,MAAM0F,eACX,EAAK1F,MAAMf,iBACX,EAAKe,MAAMwF,oBACX,EAAKxF,MAAMuF,aACX,EAAKvF,MAAMyF,sBAIvB,yBAAK1N,UAAU,iBAAf,e,GApRGgN,aA4RZ+I,gBAAWrB,K,2JClTpBvN,G,0BAAW1S,EAAQ,KAmBnBuhB,E,kDACF,WAAYja,GAAQ,IAAD,6BACf,cAAMA,GACNoL,EAAS,gBAET,EAAKc,MAAQ,CACTgO,WAAY,GACnBC,UAAU,EACV3Q,MAAO,GACP4Q,QAAQ,EACRhB,MAAO,GACPiB,SAAU,EACVC,WAAY,EAAKta,MAAMoZ,OAGpB,EAAK/K,KAAOtH,IAAMC,YACzB,EAAKuT,kBAAoBxT,IAAMC,YAfT,E,gEAoBXtE,KAAK1C,MAAMyZ,kBACX/W,KAAK2L,KAAKnG,QAAQsS,QAC7B9X,KAAKmJ,SAAS,CAACyO,WAAY5X,KAAK1C,MAAMoZ,QACtC9f,QAAQmhB,IAAI/X,KAAK1C,MAAMoZ,S,2CAInB1W,KAAK1C,MAAMoZ,OAAS1W,KAAKwJ,MAAMoO,YAAe5X,KAAKwJ,MAAMkO,QACzD1X,KAAKmJ,SAAS,CAACyO,WAAY5X,KAAK1C,MAAMoZ,MAAOgB,QAAQ,M,mKAKrC1X,KAAK1C,MAAM6C,OAAOhD,GAAGkT,mBAAmBrQ,KAAK1C,MAAM+C,K,OAAjE2X,E,QACFlR,EAAQ,IACN/M,KAAN,MAAA+M,EAAK,YAAS7M,OAAOge,QAAQD,EAAK,GAAG,IAAI5Y,KAAI,YAAmB,IAAD,mBAAhB7E,EAAgB,KAC3D,MAAO,CAAC,IADmD,KACtC,OAAQA,EAAK,oBAEtCuM,EAAM/M,KAAN,MAAA+M,EAAK,YAAS7M,OAAOge,QAAQD,EAAK,GAAG,IAAI5Y,KAAI,YAAmB,IAAD,mBAAhB7E,EAAgB,KAC3D,MAAO,CAAC,IADmD,KACtC,WAAYA,EAAK,qBAE1CyF,KAAKmJ,SAAS,CAACrC,MAAOA,EAAO4P,MAAO,K,wIAErBwB,GAIf,OAHoBlY,KAAKwJ,MAAM1C,MAAMF,QAAO,SAAAuB,GACxC,OAAOA,EAAK,GAAGgQ,cAAcpT,QAAQmT,EAAWC,gBAAkB,O,wCAMjDjX,GAAI,IAAD,OACxBlB,KAAK1C,MAAMwE,SAAS8U,mBAAkB,WAGlC,EAAKtZ,MAAMwE,SAAS+E,GACvB,kCAAmC,CAE/BxG,IAAK,EAAK/C,MAAM+C,IAChBrG,GAAI,EAAKsD,MAAMtD,GACfK,QAAS,CAACqc,MAAOxV,OARtB,2BAWuBlB,KAAK1C,MAAMtD,GAXlC,c,mCAeAsS,OAAO8L,KAAK,0H,mCAGIjQ,GAChB,IAAMzF,EAAK,WAAOyF,EAAK,GAAZ,KACXnI,KAAKmJ,SAAS,CAACyO,WAAY5X,KAAKwJ,MAAMoO,YAAclV,IACpD1C,KAAKqY,kBAAkBrY,KAAKwJ,MAAMoO,c,oCAEjB1W,GACjB,IAAMoX,EAAUpX,EAAE3G,IAClB,GAAe,SAAX+d,EAAoB,CACpB,IAAMC,EAAevY,KAAKwY,YAAYxY,KAAKwJ,MAAMkN,OAAO1W,KAAKwJ,MAAMmO,UACnE/gB,QAAQmhB,IAAIQ,GACZvY,KAAKyY,aAAaF,OACf,CACH,IAAMG,EAAM1Y,KAAKwJ,MAAMmO,SACjBgB,EAAM3Y,KAAKwY,YAAYxY,KAAKwJ,MAAMkN,OAAO7X,OAAO,EACvC,WAAXyZ,GAAyBpX,EAAE0X,SAAsB,KAAXN,GACzCI,EAAM,EACN1Y,KAAKmJ,SAAS,CAACwO,SAAUe,EAAI,IACxB1Y,KAAKmJ,SAAS,CAACwO,SAAUgB,IAC9B3Y,KAAK6X,mBAAoB7X,KAAK6X,kBAAkBrS,QAAQqT,eAAe,CACvEC,SAAU,SACVC,MAAO,UAEc,aAAXT,GAA2BpX,EAAE0X,SAAsB,KAAXN,KAClDI,GAAOC,EACP3Y,KAAKmJ,SAAS,CAACwO,SAAU,IACpB3X,KAAKmJ,SAAS,CAACwO,SAAUe,EAAI,IAClC1Y,KAAK6X,mBAAoB7X,KAAK6X,kBAAkBrS,QAAQqT,eAAe,CACvEC,SAAU,SACVC,MAAO,c,+BAOC,IAAD,OACL,OACI,kBAAC,IAAD,CACIpiB,IAAKqJ,KAAK1C,MAAM8F,UAChBC,OAAQrD,KAAK1C,MAAMgG,QACnB0V,cAAe,WAAO,EAAK1b,MAAMwE,SAASsJ,cAAe,EAAK6N,YAC9D/V,aAAc,WACV,EAAK5F,MAAMwE,SAAS8J,gBACpB,EAAKtO,MAAMwZ,WAAW,EAAKtN,MAAMgO,YAC7B,EAAKla,MAAM4F,cAAc,EAAK5F,MAAM4F,gBAAiBrC,MAAO,CAAC0C,aAAc,GAEnFC,SAAQ,4BAAuBxD,KAAKwJ,MAAMiO,SAAU,WAAa,KAE/E,kBAAC,IAAD,KACI,yBAAKlW,UAAU,iBAElB,6BAEI,yBAAKA,UAAU,sBAElB,0BAAMV,MAAO,CAACS,QAAS,OAAQ4X,WAAY,SAAUlH,MAAO,OAAQmH,WAAY,WAC5E,uBAAG5X,UAAU,eAAgBvB,KAAK1C,MAAMwE,SAASC,cAAcqX,2BAC/D,2BAAO7X,UAAU,gCACpB5K,IAAKqJ,KAAK2L,KACVvJ,aAAcpC,KAAK1C,MAAM4Y,gBACzBc,SAAU,SAAC9V,GAAMA,EAAE+V,UAAW,EAAK3Z,MAAMwZ,WAAW5V,GAAI,EAAKiI,SAAS,CAACqO,WAAYtW,KACnFL,MAAO,CAACwY,SAAU,GAClBC,YAAY,6BAGT,yBAAK/X,UAAU,oBAAoBvB,KAAKwJ,MAAMmC,OAGlD,uBAAGpK,UAAU,aAAaG,QAAS1B,KAAK1C,MAAM4F,aAC1CrC,MAAO,CAAC4G,UAAW,yBAAyB,uBAAGlG,UAAU,wBAG1D,yBAAKA,UAAU,eAClB,0BAAMA,UAAU,cAAcV,MAAO,CAACwY,SAAU,OAAQvG,UAAW,QAAnE,aADG,IAEH,2BACIvR,UAAU,mBAEVmB,MAAO1C,KAAKwJ,MAAMoO,WAElBZ,SAAU,SAAC9V,GACdA,EAAE+V,UACE/V,GAAK,EAAKmX,kBAAkBnX,EAAEuB,OAAOC,OACzC,EAAKyG,SAAS,CAACyO,WAAY1W,EAAEuB,OAAOC,SAGjC4W,YAAY,gCAGhB,uBACI/X,UAAU,2BACVV,MAAO,CAACiS,UAAW,OAAQjB,WAAY,OACvCnQ,QAAS,kBAAI,EAAKyH,SAAS,CAACsO,UAAW,EAAKjO,MAAMiO,eAKnD,yBAAKlW,UAAU,yBAClB,0BAAMA,UAAU,mBAAmBV,MAAO,CAACmC,YAAa,SACpD,8BACH,uBAAGzB,UAAU,qCACb,0BAAMA,UAAU,qBAAqBvB,KAAK1C,MAAMwE,SAASC,cAAcwX,sBAGpE,kBAAC,IAAD,CACHhY,UAAU,qBACViY,UAAU,UACV9W,MAAO1C,KAAK1C,MAAM4S,MAClB7D,KAAK,MACLoN,YAAa,SAAAvY,GACT,EAAK5D,MAAMwE,SAAS+E,GACvB,kCAAmC,CAC/BxG,IAAK,EAAK/C,MAAM+C,IAChBrG,GAAI,EAAKsD,MAAMtD,GACfK,QAAS,CAAC6V,MAAOhP,EAAEwY,OAAOhX,WAM/B,kBAAC,IAAD,CAAiBnB,UAAU,wBAAwBmB,MAAM,UAAU1C,KAAK1C,MAAMwE,SAASC,cAAc4X,SACrG,kBAAC,IAAD,CAAiBpY,UAAU,wBAAwBmB,MAAM,SAAS1C,KAAK1C,MAAMwE,SAASC,cAAc6X,UACpG,kBAAC,IAAD,CAAiBrY,UAAU,wBAAwBmB,MAAM,WAAW1C,KAAK1C,MAAMwE,SAASC,cAAc8X,WAIvG,0BAAMtY,UAAU,oBACZ,8BACH,uBAAGA,UAAU,6CACb,0BAAMA,UAAU,qBAAqBvB,KAAK1C,MAAMwE,SAASC,cAAc+X,oBAGpE,kBAAC,IAAD,CACHvY,UAAU,qBACViY,UAAU,UACV9W,MAAO1C,KAAK1C,MAAMqZ,KAClBtK,KAAK,MACLoN,YAAa,SAAAvY,GACT,EAAK5D,MAAMwE,SAAS+E,GACvB,kCAAmC,CAC/BxG,IAAK,EAAK/C,MAAM+C,IAChBrG,GAAI,EAAKsD,MAAMtD,GACfK,QAAS,CAACsc,KAAMzV,EAAEwY,OAAOhX,WAM9B,kBAAC,IAAD,CAAiBnB,UAAU,wBAAwBmB,MAAM,QAAQ1C,KAAK1C,MAAMwE,SAASC,cAAcgY,SACnG,kBAAC,IAAD,CAAiBxY,UAAU,wBAAwBmB,MAAM,QAAQ1C,KAAK1C,MAAMwE,SAASC,cAAciY,SACnG,kBAAC,IAAD,CAAiBzY,UAAU,wBAAwBmB,MAAM,QAAQ1C,KAAK1C,MAAMwE,SAASC,cAAckY,SACnG,kBAAC,IAAD,CAAiB1Y,UAAU,wBAAwBmB,MAAM,QAAQ1C,KAAK1C,MAAMwE,SAASC,cAAcmY,SACnG,kBAAC,IAAD,CAAiB3Y,UAAU,wBAAwBmB,MAAM,QAAQ1C,KAAK1C,MAAMwE,SAASC,cAAcoY,YAEhG,yBAAK5Y,UAAU,YAAYG,QAAS1B,KAAKoa,YAC5C,uBACI7Y,UAAU,+BAMhB,yBAAKA,UAAU,YACVvB,KAAKwJ,MAAMiO,SACf,yBAAK5W,MAAO,CAAC6R,UAAW,WACpB,yBAAKnR,UAAU,0BAClB,kBAAC,IAAD,CACI8Y,WAAW,EACXC,UAAU,EACVC,YAAY,EACZhZ,UAAU,aAIVkY,YAAa,SAAAvY,GAAC,OAAI,EAAKiI,SAAS,CAACuN,MAAOxV,EAAEwY,OAAOhX,MAAOiV,SAAU,KAClE6C,SAAU,EACVC,UAAWza,KAAK0a,gBAQpB,yBAAKnZ,UAAU,kBACVvB,KAAKwY,YAAYxY,KAAKwJ,MAAMkN,OAAOtX,KAAI,SAAC+I,EAAMzO,GAClD,OACI,yBACH6H,UAAS,uBAAoB,EAAKiI,MAAMmO,UAAYje,EAAI,qBAAuB,IAC/E/C,IAAM,EAAK6S,MAAMmO,UAAYje,EAAI,EAAKme,kBAAoB,KAC1D8C,aAAc,WACV,EAAKxR,SAAS,CAACwO,SAAUje,KAE7BgI,QAAS,WAAM,EAAK+W,aAAatQ,KAEjC,uBAAG5G,UAAS,UAAK4G,EAAK,GAAV,gBAA4BtH,MAAO,KAE/C,uBACIU,UAAS,eACX4G,EAAK,WAQE,a,GArRcoG,aAgSfgJ,O,8LC/ST7O,EAAW1S,EAAQ,IAEnB4kB,E,kDACF,WAAYtd,GAAQ,IAAD,8BACf,cAAMA,IAEDkM,MAAQ,CACTmC,KAAM,GACNlD,iBAAiB,GACjBsG,aAAa,GACbC,oBAAoB,GACpBC,gBAAgB,GAChBjH,aAAc,GACdkH,eAAe,GACfC,WAAY,GACZC,UAAW,GACXyL,OAAQ,GACRC,eAAe,EACfC,eAAgB,CAAC9J,SAAS,IAC1B+J,WAAY,IAGhB,EAAKlL,aAAe,EAAKjY,SAEzB,EAAKyF,MAAMwE,SAASkO,kBAAmB,EAAKlG,QAASpE,KAAd,iBAEvC,EAAKsV,WAAa3W,IAAMC,YAExB,EAAKqH,KAAOtH,IAAMC,YAElBoE,EAAS,gBA3BM,E,mEA+Bf1I,KAAK1C,MAAMwE,SAAS0P,S,yCAGLjH,EAAWC,EAAWC,GAEjCF,EAAUvQ,KAAOgG,KAAK1C,MAAMtD,IAC5BgG,KAAK8J,UAELS,EAAUvQ,KAAOgG,KAAK1C,MAAMtD,IAA6B,OAAvBgG,KAAK1C,MAAM+Q,SAC7CrO,KAAK2L,KAAKnG,QAAQsS,U,gLAIJ9X,KAAK1C,MAAM6C,OAAOhD,GAAG8S,oBAAoBjQ,KAAK1C,MAAM+C,K,cAAlE6P,E,gBACelQ,KAAK1C,MAAM6C,OAAOhD,GAAGkT,mBAAmBrQ,KAAK1C,MAAM+C,K,OAKtE,IAAS4M,KALLqD,E,OAEAC,EAAc,GACdC,EAAW,GAECF,EAAO,GAAG,GACtBE,EAASzW,KAAK,CAAC2I,MAAOuK,EAAKwD,MAAOH,EAAO,GAAG,GAAGrD,K,OAC/CyD,EAAQ1Q,K,UACW,cAAAjI,EAAA,sCAAAA,EAAA,6DACf4Y,EAAM,GADS,SAEID,EAAMpT,MAAM6C,OAAOhD,GAAGwN,oBAAoB+F,EAAMpT,MAAM+C,KAF1D,OAEfuQ,EAFe,OAEgE,GAFhE,OAAA7Y,EAAA,KAGH6Y,GAHG,qDAGVrW,EAHU,gBAIfoW,EAJe,UAIAD,EAAMpT,MAAM6C,OAAOhD,GAAG0T,oBAAoBH,EAAMpT,MAAM+C,IAAK9F,GAAK,GAJhE,yBAIXR,KAJW,gEAMZ4W,GANY,8C,eAAnBvB,E,OASA0B,EAAoB,SAApBA,EAA6BC,EAAGC,GAIhC,GAHKA,IACDA,EAAQ,IACZT,EAAYxW,KAAK,CAAC2I,MAAOqO,EAAE/W,GAAIyW,MAAOO,EAAMV,EAAO,GAAG,GAAGS,EAAE/W,MACvD+W,EAAEE,SAAN,qBACkBF,EAAEE,UADpB,IACI,gCAAS/P,EAAT,QACmB,YAAXA,EAAE5B,MACFwR,EAAkB5P,EAAE3B,QAASyR,EAAM,QAH/C,iCAKJ5B,EAAUhQ,KAAI,SAAAgO,GAAI,OAAE0D,EAAkB1D,MACtCpN,KAAK8P,aAAe9P,KAAKnI,S,UACH6Y,EAAMpT,MAAM6C,OAAOhD,GAAG0T,oBAAoB7Q,KAAK1C,MAAM+C,IAAKL,KAAK1C,MAAMtD,IAAI,G,QAA3FihB,E,OACJjb,KAAKmJ,SAAS,CAACwC,KAAK2E,EAAO,GAAG,GAAGtQ,KAAK1C,MAAMtD,IAAKyO,iBAAkB6H,EAAO,GAAG,GAAIvB,aAAcuB,EAAO,GAAG,GAAItB,oBAAqBsB,EAAO,GAAG,GAAIrB,gBAAiBqB,EAAO,GAAG,GAAItI,aAAckI,EAAOhB,eAAgBqB,EAAapB,WAAYqB,EAAUpB,YAAW2L,eAAgBE,EAAUH,cAAeG,EAASH,cAAeD,OAAQI,EAASC,a,iJAIpVlb,KAAK8J,UACsB,OAAvB9J,KAAK1C,MAAM+Q,SACXrO,KAAK2L,KAAKnG,QAAQsS,U,+BAGf,OAA2B,OAAjB,EAAElgB,KAAKC,UAAmB,GAAGP,SAAS,IAAI,KAAwB,OAAjB,EAAEM,KAAKC,UAAmB,GAAGP,SAAS,M,iCAEjG4J,GAAI,IAAD,OACNA,GACAlB,KAAK1C,MAAMwE,SAAS8U,mBAAkB,WAGlC,EAAKtZ,MAAMwE,SAAS+E,GAChB,uBAAwB,CACpBxG,IAAK,EAAK/C,MAAM+C,IAChBrG,GAAI,EAAKsD,MAAMtD,GACf2R,KAAMzK,EAAEuB,OAAOC,QAErB0S,KAAK,EAAK9X,MAAM8Q,eATtB,uBAUmBpO,KAAK1C,MAAMtD,GAV9B,YAWAgG,KAAKmJ,SAAS,CAACwC,KAAMzK,EAAEuB,OAAOC,SACzB9L,QAAQmhB,IAAI7W,K,+BAGf,IAAD,OACL,OACI,kBAAC,IAAD,KACI,yBAAKK,UAAW,oBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WAFf,QAUA,yBAAK4E,UAAW,iBACPoH,YAAW,YAEP2D,OAAOC,UAAU5P,SAAS7F,SAAS,OACjC,SAEmB,UAArB+F,EAAQF,SACN,eADN,EAJM,WASX,yBAAK4E,UAAU,oBACX,yBAAKV,MAAO,CAACS,QAAS,iBAClB,6BACI,kBAAC,IAAD,KACI,uBAAGC,UAAU,cACTV,MAAO,CAACgR,WAAY,GAAIC,MAAO,kCAEvC,wBAAIvQ,UAAU,cACR,WACE,GAA0B,KAAtB,EAAKiI,MAAMqR,OACX,OAAO,uBAAGtZ,UAAU,iCAAiCG,QAAS,WAAK,EAAKpE,MAAMiL,SAAS,WAAY,EAAKiB,MAAMqR,QAAQ,EAAKvd,MAAMkL,QAAQzO,KAAnB,oBAAqC,EAAKyP,MAAMqR,YAF5K,GAIF,uBAAGha,MAAO,CAACsM,aAAc,GACrB5L,UAAU,iBAEd,2BAAOA,UAAU,iBACbyV,SAAU,SAAC9V,GAAMA,EAAE+V,UAAW,EAAKH,WAAW5V,IAC9CwB,MAAO1C,KAAKwJ,MAAMmC,KAClB9K,MAAO,CAAC4G,UAAW,oBACnB9Q,IAAKqJ,KAAK2L,QAGlB,kBAAC,IAAD,CAAc+I,OAAO,QAAQC,OAAQ,CAACzJ,IAAK,GAAI1J,gBAAgB,QAAQD,UAAU,aACjF,yBAAKA,UAAU,qBAAqBV,MAAO,CAACgR,WAAY,EAAGiB,UAAW,EAAGoB,aAAc,IACnF,uBACIxS,QAAS,WACL,EAAKyH,SAAS,CAAC2R,eAAgB,EAAKtR,MAAMuR,eAAeD,gBAAgB,WACrE,EAAKxd,MAAMwE,SAAS+E,GAChB,yBAA0B,CACtBxG,IAAK,EAAK/C,MAAM+C,IAChBrG,GAAI,EAAKsD,MAAMtD,GACf8gB,cAAe,EAAKtR,MAAMsR,oBAK1C5D,WAAS,kCACT3V,UAAU,mBACVV,MAAO,CAACsW,YAAa,wBACjB3P,OAAQ,UAAWqK,WAAY,IACnC,uBAAGtQ,UAAWvB,KAAKwJ,MAAMsR,cAAgB,sBAAsB,sBAC3Dja,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,wBACtBtF,SAAU,GAAI/E,UAAWzH,KAAKwJ,MAAMsR,cAAgB,yBAA2B,8BAG3F,uBACI5D,WAAS,mBACT3V,UAAU,mBACVG,QAAS,WACL,EAAKpE,MAAMwE,SAAS+E,GAChB,iBAAkB,CACdxG,IAAK,EAAK/C,MAAM+C,IAChB4M,IAAK,EAAK3P,MAAMtD,GAChB6gB,OAA+B,KAAtB,EAAKrR,MAAMqR,aAAuClhB,IAAtB,EAAK6P,MAAMqR,YAAwBlhB,EAAY,EAAK6P,MAAMqR,SAErGzF,MAAK,WACH,EAAK9X,MAAM8Q,cACX,EAAK9Q,MAAMkL,QAAQzO,KAA4B,KAAtB,EAAKyP,MAAMqR,aAAuClhB,IAAtB,EAAK6P,MAAMqR,OAAwB,aAAhE,oBAA4F,EAAKrR,MAAMqR,SAC/H,EAAKvd,MAAMiL,SAAgC,KAAtB,EAAKiB,MAAMqR,aAAuClhB,IAAtB,EAAK6P,MAAMqR,OAAwB,WAAhE,WAAgH,KAAtB,EAAKrR,MAAMqR,aAAuClhB,IAAtB,EAAK6P,MAAMqR,YAAwBlhB,EAAY,EAAK6P,MAAMqR,YAG5Mha,MAAO,CAACsW,YAAa,wBACjB3P,OAAQ,UAAWqK,WAAY,IACnC,uBAAGtQ,UAAU,eACTV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,wBACtBtF,SAAU,GAAI/E,UAAW,+BAUrD,yBAAK5G,MAAO,CAACgR,WAAY,GAAI7O,YAAa,GAAI0P,UAAW,SAAUyI,UAAW,WAE1E,kBAAC,IAAD,CAAqB/W,KAAMpE,KAAKwJ,MAAMuR,eAAe9J,SAAUnJ,OAAQ9H,KAAK8P,aAAczP,IAAKL,KAAK1C,MAAM+C,IAAKF,OAAQH,KAAK1C,MAAM6C,OAAQ2B,SAAU9B,KAAK1C,MAAMwE,SAAUkG,aAAchI,KAAKwJ,MAAMxB,aAAcD,SAAU,CAAC/H,KAAKwJ,MAAM2F,WAAYnP,KAAKwJ,MAAM0F,eAAgBlP,KAAKwJ,MAAMf,iBAAkBzI,KAAKwJ,MAAMwF,oBAAqBhP,KAAKwJ,MAAMuF,aAAc/O,KAAKwJ,MAAMyF,iBAAkBxG,iBAAkBzI,KAAKwJ,MAAMf,iBAAkBD,QAASxI,KAAK1C,MAAMkL,QAASD,SAAUvI,KAAK1C,MAAMiL,SAAUF,cAAerI,KAAKgb,WAAY5S,aAAcpI,KAAKwJ,MAAMwR,aAEpiB,yBAAKna,MAAO,CAACiS,UAAW,KACpB,uBAAGvR,UAAU,YAAYG,QAAS,WAC9B,EAAKpE,MAAMwE,SAAS+E,GAChB,cAAe,CACXxG,IAAK,EAAK/C,MAAM+C,IAChB4M,IAAK,EAAK3P,MAAMtD,KAEpB,GACFob,MAAK,SAACC,GACJ,IAAI4F,EAAW,EAAKzR,MAAMuR,eACtB7K,EAAQ,EAAK1G,MAAMxB,aACvBkI,EAAMmF,EAAOxN,MAAO,EACpBoT,EAAShK,SAASlX,KAAK,CAACuF,KAAM,OAAQC,QAAQ8V,EAAOxN,MACrD,EAAKsB,SAAS,CAAC6R,WAAW3F,EAAOxN,IAAKkT,eAAgBE,EAAUjT,aAAckI,IAAQ,kBAAO,EAAK8K,WAAWxV,QAAQ4V,mBAE1H,6BAAK,uBAAG7Z,UAAU,uCAAsC,yBAAKV,MAAO,CAACS,QAAS,eAAgB4Q,WAAY,MAAOlS,KAAK1C,MAAMyE,cAAcsZ,SAC7I,uBAAG9Z,UAAU,YAAYG,QAAS,cAAA3J,EAAA,kCAAAA,EAAA,sEACZiI,KAAK1C,MAAMwE,SAAS+E,GAClC,iBAAkB,CACdxG,IAAKL,KAAK1C,MAAM+C,IAChBwa,OAAQ7a,KAAK1C,MAAMtD,KAJG,OAC1BgT,EAD0B,OAM3BC,IACHjN,KAAK1C,MAAMkL,QAAQzO,KAAnB,oBAAqCiT,EAArC,QAP8B,gDAQhCtH,KAAK1F,OAAO,6BAAK,uBAAGuB,UAAU,uCAAsC,yBAAKV,MAAO,CAACS,QAAS,eAAgB4Q,WAAY,MAAOlS,KAAK1C,MAAMyE,cAAcuZ,SACxJ,yBAAK/Z,UAAU,iBAAf,gB,GAvOLgN,aAiPR+I,gBAAWsD,K,wKCzPpBlS,EAAW1S,EAAQ,IAgBnBulB,E,kDACF,WAAYje,GAAQ,IAAD,8BACf,cAAMA,IAEDkM,MAAQ,CACTmC,KAAM,GACNpT,OAAO,EACPijB,QAAQ,GAGZ,EAAK1L,aAAe,EAAKjY,SACzB,EAAKyF,MAAMwE,SAASkO,kBAAmB,EAAKlG,QAASpE,KAAd,iBACvCgD,EAAS,gBAXM,E,+LAgBK1I,KAAK1C,MAAM6C,OAAOhD,GAAGsO,aAAazL,KAAK1C,MAAM+C,K,OAAzDob,E,OACJzb,KAAKmJ,SAAS,CAACwC,KAAM8P,EAAI/P,KAAKC,KAAM6P,QAAQ,I,gDAE5Cxb,KAAKmJ,SAAS,CAAC5Q,OAAO,EAAMijB,QAAQ,I,yJAKxCxb,KAAK8J,Y,6CAIL9J,KAAK1C,MAAMwE,SAAS0P,S,+BAEb,OAA2B,OAAjB,EAAE5Z,KAAKC,UAAmB,GAAGP,SAAS,IAAI,KAAwB,OAAjB,EAAEM,KAAKC,UAAmB,GAAGP,SAAS,M,+BAElG,IAAD,OACL,OACI,kBAAC,IAAD,KACI,yBAAKiK,UAAU,8BAA8BV,MAAO,CAAC6R,UAAW,WAC3D1S,KAAKwJ,MAAMgS,OACXxb,KAAKwJ,MAAMjR,MAST,yBAAKgJ,UAAU,mBACd,yBAAKV,MAAO,CAAC2L,SAAU,KAAvB,gBAA+B,2BAAIxM,KAAK1C,MAAMyE,cAAc2Z,QAA5D,IAAwE,0BAAM7a,MAAO,CAAC2L,SAAU,KAAMxM,KAAK1C,MAAMyE,cAAc4Z,kBAC/H,yBAAKpa,UAAU,uBAAuBvB,KAAK1C,MAAMyE,cAAc6Z,sBAVnE,yBAAK/a,MAAO,CAACuW,OAAQ,SAAUpF,MAAO,qBAC9B,wBAAIzQ,UAAU,mBAAmBvB,KAAK1C,MAAMyE,cAAc8Z,kBAAkB,0BAAMta,UAAU,iBAAiBV,MAAO,CAAC2L,SAAU,KAAMxM,KAAKwJ,MAAMmC,OACpJ,uBAAGpK,UAAU,sBAAsBvB,KAAK1C,MAAMyE,cAAc+Z,sBAA5D,KAEA,yBAAKva,UAAU,kBAAkBG,QAAS,WACtC,EAAKpE,MAAMkL,QAAQzO,KAAK,cACxB,EAAKuD,MAAMiL,SAAS,cACrB,uBAAGhH,UAAU,qCAHhB,mBAOK,W,GAlDEgN,aAyDhB+I,gBAAWiE,I,sFCuCXQ,IA5Ff,SAAeze,GACX,IAAM8E,EAAe9E,EAAMyE,cAAcia,WADvB,EAEkBze,oBAAS,GAF3B,mBAEX0e,EAFW,KAECC,EAFD,OAGc3e,oBAAS,GAHvB,mBAGX4e,EAHW,KAGDC,EAHC,KAKZ/U,EAAOgV,YAAU,CAC1B/S,GACK6S,EACJ,CACInK,MAAO,IACPF,MAAM,8BACNtQ,gBAAiB,2BAKrB,CACIwQ,MAAOiK,EAAa,IAAI,IACxBnK,MAAM,uBAENtQ,gBAAiB,qBAMnB,OAAO,kBAAC,IAAS8a,MAAV,CACTtiB,GAAG,QACHuiB,UAAU,EACVjd,KAAK,OACL8C,aAAc,GACdvB,MAAOwG,EACP9F,UAAU,QACV5K,IAAK2G,EAAM8F,UAELoZ,QACI,SAACnK,GACGA,EAAM5P,OAAOC,MAAQ,GACrBwZ,GAAc,IAGtBO,OAAQ,SAAAvb,GACJgb,GAAc,GACdE,GAAY,GACZlb,EAAEuB,OAAOC,MAAQ,IAErBga,QACI,SAACrK,GACG,GAAkB,UAAdA,EAAM9X,IAAiB,CACvB8X,EAAM4E,UACNmF,GAAY,GACZ,IAAIO,EAAWtK,EAAM5P,OAAOC,MACxBka,EAAWpa,QAAama,GACxBnc,OAAM7G,EACNkjB,OAAQljB,EACRijB,EAAS/d,OAAS,IAEd+d,EAAS,GAAGE,KAGZtc,EAAMoc,EAAS,GAAGE,IAAIvc,OACtBsc,EAAQD,EAAS,GAAGG,MAAMxc,OAE1Boc,EAAWA,EAASK,QAAQJ,EAAS,GAAGjP,KAAM,IAAIvM,SAKlDZ,EAAMoc,EAAS,GAAGG,MAAMxc,OAExBoc,EAAWA,EAASK,QAAQJ,EAAS,GAAGjP,KAAM,IAAIvM,SAG1D,IAAI6b,EAAQ,CACJ5c,IAAK/C,EAAM+C,IACX4M,IAAK,GACLzM,MACAqc,QACAlR,KAAMgR,GAEdrf,EAAMwE,SAAS+E,GACX,cAAeoW,GACjB7H,MAAK,WACH/C,EAAM5P,OAAOya,YAK7B5D,YAAclX,GAA+B,IAAdxK,KAAKC,SAAe,EAAK,OAAS,Q,4ECzGjEslB,G,OAAYhnB,UAAZgnB,SA0DOC,IA3Cf,SAA2B9f,GAAQ,IAAD,EACFC,oBAAS,GADP,mBACzB+F,EADyB,KAChB+Z,EADgB,KAW9B,OATApd,qBAAU,WACNkd,EAAQ9kB,IAAI,CAACkC,IAAK,sBAAsB6a,MAAK,SAACkI,GAC1B,gBAAZA,EAAI5a,QACJ2a,GAAW,GACXF,EAAQ/kB,IAAI,CAACmC,IAAK,oBAAqBmI,MAAO,sBAGvD,IAGC,kBAAC,IAAD,CAAU/L,IAAK2G,EAAM8F,UAAWC,OAAQC,EAASJ,aAAc,aAAUrC,MAAO,CAAC0C,aAAc,GAAIC,SAAS,mCACxG,yBAAKjC,UAAU,oCACX,yBAAKA,UAAU,qBAAoB,0BAAMA,UAAU,kBAAhB,aAAiD,0BAAMA,UAAU,gBAAhB,iBACpF,yBAAKA,UAAU,gBAAf,iBACA,wBAAIA,UAAU,UAAd,wCACA,uBAAGA,UAAU,WAAb,mIAAuJ,mDACvJ,uBAAGA,UAAU,WAAb,oLAAwM,uBAAGgc,KAAK,8BAAR,cAAxM,QAAgQ,uBAAGA,KAAK,gDAAR,aAAhQ,KACA,wBAAIhc,UAAU,UAAd,sBACA,uBAAGA,UAAU,WAAb,6LACA,uBAAGA,UAAU,WAAb,uDACA,yBAAKV,MAAO,CAAC0R,UAAW,sCAAuCP,MAAO,OAAQC,OAAQ,IAAtF,QACA,wBAAI1Q,UAAU,UAAd,kCACA,uBAAGA,UAAU,WAAb,+CAAmE,uBAAGA,UAAU,iBAAiBV,MAAO,CAACS,QAAS,eAAgB8V,OAAQ,IAAvE,sBAAnE,kFACA,uBAAG7V,UAAU,WAAb,oJACA,wBAAIA,UAAU,UAAd,+BACA,uBAAGA,UAAU,WAAb,6OACA,uBAAGA,UAAU,WAAb,gBAAoC,uBAAGA,UAAU,gBAAjD,8KACA,uBAAGA,UAAU,WAAb,gIACA,yBAAKV,MAAO,CAAC0R,UAAW,sCAAuCP,MAAO,OAAQC,OAAQ,IAAtF,QACA,wBAAI1Q,UAAU,UAAd,wBACA,uBAAGA,UAAU,WAAb,2IAA+J,uBAAGgc,KAAK,8BAAR,cAA/J,OAAsN,uBAAGA,KAAK,gDAAR,aAAtN,KACA,uBAAGhc,UAAU,WAAb,uGAA2H,uBAAGgc,KAAK,qCAAR,WAA3H,6EACA,uBAAGhc,UAAU,WAAb,mF,yLClDVmH,G,aAAW1S,EAAQ,KAwBnBwnB,E,kDACF,WAAYlgB,GAAQ,IAAD,6BACf,cAAMA,GACNoL,EAAS,gBAET,EAAKc,MAAQ,CAChB1C,MAAO,GACP2W,aAAc,GACd/G,MAAO,GACPgH,WAAW,EACX/F,SAAU,EACVgG,WAAY,GACZC,MAAO,IAEX,EAAKC,SAAWxZ,IAAMC,YACtB,EAAKuT,kBAAoBxT,IAAMC,YAdT,E,iEAkBlBtE,KAAKwJ,MAAMmU,YAAc3d,KAAK1C,OAC9B0C,KAAK8d,iB,0CAKT9d,KAAK8d,eACL9d,KAAKmJ,SAAS,CAACwU,WAAY3d,KAAK1C,QAChC0C,KAAK+d,a,mKAIe/d,KAAK1C,MAAM6C,OAAOhD,GAAGkT,mBAAmBrQ,KAAK1C,MAAM+C,K,OAAjE2X,E,OAAuE,GAAG,GAC1EgG,EAAM/jB,OAAOge,QAAQD,GAAM5Y,KAAI,YAAmB,IAAD,mBAAhB7E,EAAgB,KACnD,MAAO,CAAC,IAD2C,KAC9B,WAAYA,EAAK,mBAE1CyF,KAAKmJ,SAAS,CAACyU,MAAOI,I,uIAIlBhe,KAAK6d,SAASrY,SACPxF,KAAK6d,SAASrY,QAAQyY,WACjCje,KAAKmJ,SAAS,CAACuN,MAAO,GAAIiB,SAAU,IACpC3X,KAAK+d,a,kCAIU7F,GAIf,OAHoBlY,KAAKwJ,MAAM1C,MAAMF,QAAO,SAAAuB,GACxC,OAAOA,EAAK,GAAGgQ,cAAcpT,QAAQmT,EAAWC,gBAAkB,O,qCAOtEnY,KAAKmJ,SAAS,CAACrC,MAAM,CAEpB,CAAC,YAAa,WAAY,GAAI,+BAE9B,CAAC,aAAc,YAAa,GAAI,uBAChC,CAAC,YAAa,WAAY,GAAI,wBALX,mBAMhB9G,KAAK1C,MAAMwJ,MAAM,GAAG1H,KAAI,SAAA8e,GAAC,MAAI,CAAC,IAAIA,EAAEvS,KAAM,eAAgBuS,EAAElkB,GAAI,0BANhD,YAOhBgG,KAAKwJ,MAAMoU,QAEXD,WAAY3d,KAAK1C,U,oCAIJ4D,GACjB,IAAMoX,EAAUpX,EAAE3G,IAClB,GAAe,SAAX+d,EAAoB,CACpB,IAAIC,EAAevY,KAAKwY,YAAYxY,KAAKwJ,MAAMkN,OAAO1W,KAAKwJ,MAAMmO,UAGjE,GAAMY,GAAiBvY,KAAKwJ,MAAMkN,OAAiC,GAAvB1W,KAAKwJ,MAAMmO,SAOhD,CAAC,IAAD,EACJwG,EAAqB5F,EAAathB,MAAM,GAC9C+I,KAAK1C,MAAMkL,QAAQzO,KAAnB,WAA4Bwe,EAAa,GAAzC,YAA+CA,EAAa,MAC5D,EAAAvY,KAAK1C,OAAMiL,SAAX,oBAAuB4V,IACvBne,KAAK1C,MAAM8gB,UAAUD,QAVjBne,KAAKwJ,MAAMkU,WAAa1d,KAAK1C,MAAMkL,QAAQ3J,OAAS,EACpDmB,KAAK1C,MAAMkL,QAAQ6V,SAEdre,KAAK1C,MAAMkL,QAAQ3J,OAAS,GAAKmB,KAAK1C,MAAMkL,QAAQ8V,YAC7Dte,KAAKmJ,SAAS,CAACuU,WAAY1d,KAAKwJ,MAAMkU,YAQnC1d,KAAK1C,MAAMgV,cACR,CACH,IAAMoG,EAAM1Y,KAAKwJ,MAAMmO,SACjBgB,EAAM3Y,KAAKwY,YAAYxY,KAAKwJ,MAAMkN,OAAO7X,OAAO,EACvC,WAAXyZ,GAAyBpX,EAAE0X,SAAsB,KAAXN,GACzCI,EAAM,EACN1Y,KAAKmJ,SAAS,CAACwO,SAAUe,EAAI,IACxB1Y,KAAKmJ,SAAS,CAACwO,SAAUgB,IAC9B3Y,KAAK6X,mBAAoB7X,KAAK6X,kBAAkBrS,QAAQqT,eAAe,CACvEC,SAAU,SACVC,MAAO,UAEc,aAAXT,GAA2BpX,EAAE0X,SAAsB,KAAXN,KAClDI,GAAOC,EACP3Y,KAAKmJ,SAAS,CAACwO,SAAU,IACpB3X,KAAKmJ,SAAS,CAACwO,SAAUe,EAAI,IAClC1Y,KAAK6X,mBAAoB7X,KAAK6X,kBAAkBrS,QAAQqT,eAAe,CACvEC,SAAU,SACVC,MAAO,c,+BAQC,IAAD,OACZ,OACI,kBAAC,IAAD,CACH1V,OAAQrD,KAAK1C,MAAMihB,QACnBjE,UAAU,EACV9W,SAAS,WACT6W,WAAW,EACXmE,aAAcxe,KAAKye,SACnBvb,aAAclD,KAAK1C,MAAMgV,SAEzB,yBAAK/Q,UAAU,yBACX,kBAAC,IAAD,CACH8Y,WAAW,EACX1jB,IAAKqJ,KAAK6d,SACVvD,UAAU,EACVC,YAAY,EACZhZ,UAAU,aAEV+X,YAAW,uBAA0C,GAAvBtZ,KAAKwJ,MAAMmO,UAAqC,IAApB3X,KAAKwJ,MAAMkN,MAAa,kBAAoB,IAEtG+C,YAAa,SAAAvY,GAAC,OAAI,EAAKiI,SAAS,CAACuN,MAAOxV,EAAEwY,OAAOhX,MAAOiV,SAAU,KAClE6C,SAAU,EACVC,UAAWza,KAAK0a,gBAQb,yBAAKnZ,UAAU,kBACjBvB,KAAKwY,YAAYxY,KAAKwJ,MAAMkN,OAAOtX,KAAI,SAAC+I,EAAMzO,GAAO,IAAD,EACjD,OACH,4BACI6H,UAAU,eADd,gDAEgC,EAAKiI,MAAMmO,UAAYje,EAAI,oBAAsB,KAFjF,oBAGU,EAAK8P,MAAMmO,UAAYje,EAAI,EAAKme,kBAAoB,MAH9D,8BAIkB,WACjB,EAAK1O,SAAS,CAACwO,SAAUje,OAL1B,yBAOa,WAAK,IAAD,EAChB,EAAK4D,MAAMkL,QAAQzO,KAAnB,WAA4BoO,EAAK,GAAjC,YAAuCA,EAAK,MAC5C,IAAK7K,OAAMiL,SAAX,oBAAuBJ,EAAKlR,MAAM,KAClC,EAAKqG,MAAMgV,aAVZ,GAcI,uBAAG/Q,UAAS,UAAK4G,EAAK,GAAV,gBAA4BtH,MAAO,KAE/C,uBACHU,UAAS,eACJ4G,EAAK,e,GApKaoG,aAoLb+I,cAAWkG,GC7MpB9U,EAAW1S,EAAQ,IAGnB0oB,E,kDACF,WAAYphB,GAAQ,IAAD,8BACf,cAAMA,IAcVqhB,SAAW,CACd,CAAC,QAAS,WAAK,EAAKC,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,KAC3C,CAAC,QAAS,WAAK,EAAKA,iBAAL,eAA4B,EAAKpV,MAAMqV,aAAahgB,OAAO,KAC1E,CAAC,QAAS,WAAK,EAAKigB,oBAAL,eAA+B,KAC9C,CAAC,QAAS,WAAK,EAAKA,oBAAL,gBAAgC,KAC5C,CAAC,YAAa,WAAK,EAAKC,aAAa,EAAKzhB,MAAM2O,UA5B7B,EA+BnB+S,eAAiB,CACjB,CAAC,QAAS,WAAK,EAAKC,SAAL,mBA9BXvW,EAAS,gBAET,EAAKc,MAAQ,CAChBqV,aAAc,GACdK,cAAe,EACfvB,WAAY,GACZY,SAAS,GARS,E,6DAqCFY,EAAMC,GAAK,IAAD,EACxBC,EAAOrf,KAAKwJ,MAAMqV,aAAaO,GACrCD,EAAK7hB,MAAMkL,QAAQzO,KAAnB,WAA4BslB,EAAK,GAAjC,YAAuCA,EAAK,MAC5C,EAAAF,EAAK7hB,OAAMiL,SAAX,oBAAuB8W,IACvBrf,KAAKmJ,SAAS,CAAC+V,cAAeE,M,0CAGPD,EAAMC,GACXpf,KAAKwJ,MAAMqV,aAAa7e,KAAKwJ,MAAM0V,cAAcE,GAE/Dpf,KAAK4e,iBAAiBO,EAAMnf,KAAKwJ,MAAM0V,cAAcE,GAE9Cpf,KAAKwJ,MAAM0V,eAAiBlf,KAAKwJ,MAAMqV,aAAahgB,OAAO,EAClEmB,KAAK4e,iBAAiBO,EAAM,GAE5Bnf,KAAK4e,iBAAiBO,EAAMnf,KAAKwJ,MAAMqV,aAAahgB,OAAO,K,sCAI5CsJ,GAAO,IACtBuQ,EADqB,OAEzB1Y,KAAKwJ,MAAMqV,aAAavkB,SAAQ,SAACglB,EAAa5lB,GACtC,EAAK6lB,mBAAmBD,EAAanX,KAC5CuQ,EAAMhf,MAGPsG,KAAKmJ,SAAS,CAAC+V,cAAexG,M,yCAGR8G,EAAMC,GAC5B,IAAK,IAAI/lB,EAAI,EAAGif,EAAM6G,EAAK3gB,OAAQnF,EAAIif,EAAKjf,IACxC,GAAI8lB,EAAK9lB,KAAO+lB,EAAK/lB,GACxB,OAAO,EAGR,OAAO,I,+BAIKylB,GACZnf,KAAKmJ,SAAS,CAACoV,SAAUve,KAAKwJ,MAAM+U,Y,mCAGpB5nB,GACZA,GACAA,EAAI6O,QAAQsS,U,2CAOZ9X,KAAKwJ,MAAMmU,YAAc3d,KAAK1C,OAC9B0C,KAAKmJ,SAAS,CACjB0V,aAAa,CACT,CAAC,WAAY,IAEb,CAAC,YAAa,IACd,CAAC,WAAY,KAJL,mBAKL7e,KAAK1C,MAAMoM,aAAatK,KAAI,SAAA8e,GAAC,MAAI,CAAC,eAAgBA,EAAElkB,QAL/C,YAMLgG,KAAK1C,MAAMmM,SAASrK,KAAI,SAAA8e,GAAC,MAAI,CAAC,WAAYA,EAAElkB,SAEnD2jB,WAAY3d,KAAK1C,U,0CAalB0C,KAAKmJ,SAAS,CAACwU,WAAY3d,KAAK1C,QAEzB0C,KAAK2e,SAASvf,KAAI,SAAAsgB,GACxBC,IAAUja,KAAV,MAAAia,IAAS,YAASD,OAGnB1f,KAAKgf,eAAe5f,KAAI,SAAAsgB,GACvBC,IAAUC,WAAV,MAAAD,IAAS,YAAeD,S,6CAMlB1f,KAAK2e,SAASvf,KAAI,SAAAsgB,GACdC,IAAUE,OAAV,MAAAF,IAAS,YAAWD,S,+BAIlB,IAAD,OACZ,OACI,kBAAC,EAAD,CACHnB,QAASve,KAAKwJ,MAAM+U,QACpBjM,QAAS,kBAAK,EAAKnJ,SAAS,CAACoV,SAAS,KACtCzX,MAAO,CAAC9G,KAAK1C,MAAMoM,cACnBnB,SAAUvI,KAAK1C,MAAMiL,SACrB6V,UAAWpe,KAAK8f,gBAChB3f,OAAQH,KAAK1C,MAAM6C,OACnBE,IAAKL,KAAK1C,MAAM+C,IAChByB,SAAU9B,KAAK1C,MAAMwE,e,GA7IAyM,aAsJR+I,gBAAWoH,I,iKCvIpBhW,EAAW1S,EAAQ,IA0EzB,IAAM+pB,EAAoB,CACxBxe,UAAW,wBACX+X,YAAa,aAGT0G,E,kDAEJ,aAAgB,IAAD,6BACb,eACUtX,EAAS,gBAEnB,EAAKc,MAAQ,CAACyW,IAAK,GAAIC,WAAW,GAClC,EAAKpI,MAAQ,EAAKA,MAClB,EAAKoF,KAAO,EAAKA,KANJ,E,gEA+DM+C,GAAM,IAClBE,EAAkBngB,KAAK1C,MAAvB6iB,eAEP,OAAIA,EACKF,EAAIE,GAGNF,I,+BAGCA,GAAM,IACPE,EAAkBngB,KAAK1C,MAAvB6iB,eAEP,OAAIA,EACK,eACJA,EAAiBF,GAIfA,I,iCAGGpa,GACV,IAAInD,EAAQ1C,KAAK1C,MAAMoF,MAAM0d,OAAO,IACpC,GAAIva,GAAS,GAAKA,EAAQnD,EAAM7D,OAAQ,CACtC,IAAIwhB,EAAU3d,EAAMgE,OAAOb,EAAO,GAClC7F,KAAK1C,MAAM0Z,SAAStU,EAAO2d,EAAS,CAACxa,O,oCAKnC7F,KAAKsgB,qBACPtgB,KAAK1C,MAAMijB,cAAc,IAEzBvgB,KAAKmJ,SAAS,CAAC8W,IAAK,O,6BAKtB,OAAIjgB,KAAKsgB,qBACAtgB,KAAK1C,MAAMsa,WAGb5X,KAAKwJ,MAAMyW,M,+BAGVO,GAAO,IAAD,SACmDxgB,KAAK1C,MAAjE0Z,EADS,EACTA,SAAUyJ,EADD,EACCA,mBAAoBC,EADrB,EACqBA,WAAYC,EADjC,EACiCA,QAASje,EAD1C,EAC0CA,MAEpDge,IAEFF,GADAA,EA/LN,SAAeI,GAGb,IAFA,IAAIC,EAAM,GAEDnnB,EAAI,EAAGA,EAAIknB,EAAI/hB,OAAQnF,KACD,IAAzBmnB,EAAI9b,QAAQ6b,EAAIlnB,KAClBmnB,EAAI9mB,KAAK6mB,EAAIlnB,IAIjB,OAAOmnB,EAsLIC,CAAKN,IACA5Z,QAAO,SAAAqZ,GAAG,OAAIvd,EAAMqe,OAAM,SAAAC,GAAU,OAC9C,EAAKC,oBAAoBD,KAAgB,EAAKC,oBAAoBhB,UAItE,IAAMiB,EAAeV,EAAK5Z,QAAO,SAAAqZ,GAAG,OAAK,EAAKkB,UAAU,EAAKF,oBAAoBhB,OAWjF,GATAO,GADAA,EAAOA,EAAK5Z,QAAO,SAAAqZ,GAAG,OAAI,EAAKkB,UAAU,EAAKF,oBAAoBhB,QACtDrZ,QAAO,SAAAqZ,GACjB,IAAImB,EAAkB,EAAKH,oBAAoBhB,GAC/C,MAAoC,oBAAzBmB,EAAgBhgB,KAClBggB,EAAgBhgB,OAAOvC,OAAS,EAEhCuiB,KAIPT,GAAW,EAAG,CAChB,IAAIU,EAAiBzpB,KAAKkI,IAAI6gB,EAAUje,EAAM7D,OAAQ,GACtD2hB,EAAOA,EAAKvpB,MAAM,EAAGoqB,GAOvB,GAJIZ,GAAsBS,EAAariB,OAAS,GAC9C4hB,EAAmBS,GAGjBV,EAAK3hB,OAAS,EAAG,CAGnB,IAFA,IAAIyiB,EAAW5e,EAAM0d,OAAOI,GACxBe,EAAU,GACL7nB,EAAI,EAAGA,EAAI8mB,EAAK3hB,OAAQnF,IAC/B6nB,EAAQxnB,KAAK2I,EAAM7D,OAASnF,GAI9B,OAFAsd,EAASsK,EAAUd,EAAMe,GACzBvhB,KAAKwhB,eACE,EAGT,OAAIN,EAAariB,OAAS,GAI1BmB,KAAKwhB,eAHI,I,gCAOAvB,GAAM,IAAD,EACoBjgB,KAAK1C,MAAlCmkB,EADS,EACTA,SAAUC,EADD,EACCA,gBAEf,OAAOD,EAASxB,IAAQyB,EAAgBC,KAAK1B,K,sDAGd2B,EAAOC,EAAOC,GAC7C,QAAIF,GAIY,KAAZE,IACM9hB,KAAK1C,MAAMykB,gBAAkB/hB,KAAK1C,MAAMykB,gBAAkBF,K,8BAOhE7hB,KAAKsc,OAAqC,oBAArBtc,KAAKsc,MAAMxE,OAClC9X,KAAKsc,MAAMxE,QAGb9X,KAAKgiB,kB,6BAIDhiB,KAAKsc,OAAoC,oBAApBtc,KAAKsc,MAAMY,MAClCld,KAAKsc,MAAMY,OAGbld,KAAKiiB,iB,+BAIL,IAAIhC,EAAMjgB,KAAKkiB,OAEf,MAAY,KAARjC,IACFA,EAAMjgB,KAAKmiB,SAASlC,GACbjgB,KAAKoiB,SAAS,CAACnC,O,6BAMlBA,GACN,OAAOjgB,KAAKoiB,SAAS,CAACnC,M,mCAItBjgB,KAAKwhB,gB,kCAGMtgB,GAAI,IAAD,SACiBlB,KAAK1C,MAA/B+kB,EADS,EACTA,WAAYC,EADH,EACGA,WAEjB,GAAKD,EAAL,CAIAnhB,EAAE0Q,iBAEF,IACI4O,EAAO8B,EA9Rf,SAA2BphB,GACzB,OAAIoL,OAAOiW,cACFjW,OAAOiW,cAAcC,QAAQ,QAGlCthB,EAAEqhB,cACGrhB,EAAEqhB,cAAcC,QAAQ,cAG1B,GAoRMC,CAAiBvhB,IACA9B,KAAI,SAAA6gB,GAAG,OAAI,EAAKkC,SAASlC,MAErDjgB,KAAKoiB,SAAS5B,M,oCAGDtf,GACb,IAAIA,EAAEwhB,iBAAN,CADgB,MAKmB1iB,KAAK1C,MAAnCoF,EALW,EAKXA,MAAOigB,EALI,EAKJA,WAAYC,EALR,EAKQA,QAEpBf,EAAgB,KADR7hB,KAAKkiB,OAEbJ,EAAU5gB,EAAE4gB,QACZvnB,EAAM2G,EAAE3G,IACRW,GAAoC,IAA9B0nB,EAAQ7d,QAAQ+c,KAA6C,IAA1Bc,EAAQ7d,QAAQxK,GACzDsoB,GAA0C,IAAjCF,EAAW5d,QAAQ+c,KAAgD,IAA7Ba,EAAW5d,QAAQxK,GAEtE,GAAIW,EAAK,CACP,IAAI0mB,EAAQ5hB,KAAK8iB,SACb9iB,KAAK+iB,gCAAgCnB,EAAOC,EAAOC,IACrD5gB,EAAE0Q,iBAIFiR,GAAUngB,EAAM7D,OAAS,GAAKgjB,IAChC3gB,EAAE0Q,iBACF5R,KAAKgjB,WAAWtgB,EAAM7D,OAAS,O,kCAItBqC,GACPA,EAAEuB,SAAWzC,KAAKsH,KACpBtH,KAAK8X,U,mCAIK5W,GAAI,IACXqf,EAAiBvgB,KAAK1C,MAAtBijB,cACAvJ,EAAYhX,KAAK1C,MAAM2lB,WAAvBjM,SACDiJ,EAAM/e,EAAEuB,OAAOC,MAEfsU,GACFA,EAAS9V,GAGPlB,KAAKsgB,qBACPC,EAAcN,GAEdjgB,KAAKmJ,SAAS,CAAC8W,U,oCAIJ/e,GAAI,IACZsb,EAAWxc,KAAK1C,MAAM2lB,WAAtBzG,QAEDA,GACFA,EAAQtb,GAGVlB,KAAKmJ,SAAS,CAAC+W,WAAW,M,mCAGdhf,GAAI,IACXub,EAAUzc,KAAK1C,MAAM2lB,WAArBxG,OAIL,GAFAzc,KAAKmJ,SAAS,CAAC+W,WAAW,IAEjB,MAALhf,IAIAub,GACFA,EAAOvb,GAGLlB,KAAK1C,MAAM4lB,WAAW,CACxB,IAAMjD,EAAMjgB,KAAKmiB,SAASjhB,EAAEuB,OAAOC,OACnC1C,KAAKoiB,SAAS,CAACnC,O,mCAILA,GACZjgB,KAAKgjB,WAAW/C,K,mCAGJ,MAE0CjgB,KAAK1C,MAAM2lB,WAA9BE,GAFvB,EAEPnM,SAFO,EAEGwF,QAFH,EAEYC,OAFZ,gDAIRnf,EAAK,2BACJyiB,GACAoD,GAOL,OAJInjB,KAAK1C,MAAM8lB,WACb9lB,EAAM8lB,UAAW,GAGZ9lB,I,iCAGGA,GACV,OAAOA,EAAM+lB,cAAgB/lB,EAAMsa,YAAc,K,2CAG5B,IAAD,EACgB5X,KAAK1C,MAAlCsa,EADa,EACbA,WAEP,MAAgC,oBAHZ,EACD2I,eAEiD,kBAAf3I,I,0CAIjD5X,KAAKsgB,sBAITtgB,KAAKmJ,SAAS,CACZ8W,IAAKjgB,KAAK4X,WAAW5X,KAAK1C,W,yCAIViN,EAAWC,EAAWC,GAEpCzK,KAAKsgB,sBAIJtgB,KAAK4X,WAAW5X,KAAK1C,QAI1B0C,KAAKmJ,SAAS,CACZ8W,IAAKjgB,KAAK4X,WAAW5X,KAAK1C,W,+BAInB,IAAD,SA0BJ0C,KAAK1C,MAvBPoF,EAHM,EAGNA,MAEA4gB,GALM,EAINtM,SAJM,EAKNsM,UACAC,EANM,EAMNA,aACAC,EAPM,EAONA,UACAC,EARM,EAQNA,YAGAliB,GAXM,EASNqhB,QATM,EAUND,WAVM,EAWNphB,WACAmiB,EAZM,EAYNA,iBASAN,GArBM,EAaNF,UAbM,EAcNb,WAdM,EAeNY,WAfM,EAgBNX,WAhBM,EAiBN5B,WAjBM,EAkBNC,QAlBM,EAmBNc,SAnBM,EAoBNC,gBApBM,EAqBN0B,UArBM,EAsBNjD,eAtBM,EAuBNvI,WAvBM,EAwBN2I,cAxBM,8SA6BUvgB,KAAKwJ,MAAlB0W,YAGH3e,GAAa,IAAMmiB,GAGrB,IAAIC,EAAgBjhB,EAAMtD,KAAI,SAAC6gB,EAAKpa,GAClC,OAAO2d,EAAU,aACfjpB,IAAKsL,EACLoa,MACA2D,SAAU,EAAKC,aACfT,WACAU,mBAAoB,EAAK7C,qBACtBqC,OAIHS,EAAiBN,EAAY,aAC/B9sB,IAAK,SAAAmI,GAAO,EAAKwd,MAAQxd,GACzB4D,MAAO1C,KAAKkiB,OACZ8B,QAAShkB,KAAKikB,YACdxJ,UAAWza,KAAKkkB,cAChBlN,SAAUhX,KAAKmkB,aACf3H,QAASxc,KAAKgiB,cACdvF,OAAQzc,KAAKiiB,aACbmC,OAAQpkB,KAAKokB,QACVpkB,KAAKijB,eAGV,OACE,yBAAKtsB,IAAK,SAAAmI,GAAO,EAAKwI,IAAMxI,GAAK4C,QAAS1B,KAAKqkB,YAAa9iB,UAAWA,GACpEgiB,EAAaI,EAAeI,Q,GApab1f,IAAMkK,WAAxByR,EA2CGsE,aAAe,CACpB/iB,UAAW,kBACXmiB,iBAAkB,2BAClBd,QAAS,CAAC,EAAG,IACbM,WAAW,EACXb,YAAY,EACZY,WAAY,GACZN,WAAY,CAAC,GACbc,YAlFJ,YAAiD,EAAnBW,OAAoB,IAAT9mB,EAAQ,0BAC1C0Z,EAA6B1Z,EAA7B0Z,SAAUtU,EAAmBpF,EAAnBoF,MAAU6hB,EADsB,YACbjnB,EADa,sBAE/C,OACE,yCAAOgC,KAAK,OAAO0X,SAAUA,EAAUtU,MAAOA,GAAW6hB,KAgFzDf,UAvGJ,SAA2BlmB,GAAQ,IAC5B2iB,EAA+E3iB,EAA/E2iB,IAAK1lB,EAA0E+C,EAA1E/C,IAAK6oB,EAAqE9lB,EAArE8lB,SAAUQ,EAA2DtmB,EAA3DsmB,SAAUY,EAAiDlnB,EAAjDknB,gBAAiBV,EAAgCxmB,EAAhCwmB,mBAAuBS,EAD3C,YACoDjnB,EADpD,4EAEhC,OACE,wCAAM/C,IAAKA,GAASgqB,GACjBT,EAAmB7D,IAClBmD,GACA,uBAAG7hB,UAAWijB,EAAiB9iB,QAAS,SAACR,GAAD,OAAO0iB,EAASrpB,QAkG5DgpB,aAvEJ,SAA8BI,EAAeI,GAC3C,OACE,8BACGJ,EACAI,IAoEHzB,WA/DJ,SAA4BlpB,GAC1B,OAAOA,EAAKiR,MAAM,KAAKjL,KAAI,SAAAmD,GAAC,OAAIA,EAAEnB,WA+DhCkiB,SAAU,CAAC/hB,UAAW,sBAAuBijB,gBAAiB,0BAC9D9D,YAAY,EACZC,SAAU,EACVc,SAAU,kBAAM,GAChBC,gBAAiB,KACjB0B,UAAU,EACVjD,eAAgB,KAChB4B,eAAe,GA4WJ/B,Q,+BCxff,SAASyE,EAAT,GAAoD,EAAnBL,OAAoB,IAAT9mB,EAAQ,0BAC7C0Z,EAA6B1Z,EAA7B0Z,SAAUtU,EAAmBpF,EAAnBoF,MAAU6hB,EADyB,YAChBjnB,EADgB,sBAElD,OACI,kBAAC,IAAD,eAAeuD,MAAO,CAACY,OAAQ,GAAIkK,KAAK,8BAA8BrM,KAAK,OAAO0X,SAAUA,EAAUtU,MAAOA,GAAW6hB,IAoE/GG,IAhEf,SAAwBpnB,GAAQ,IAAD,EAEaC,mBAAS,IAFtB,mBAEtBonB,EAFsB,KAEPC,EAFO,OAGmBrnB,mBAAS,IAH5B,mBAGtBsnB,EAHsB,KAGJC,EAHI,OAIGvnB,oBAAS,GAJZ,mBAItBwnB,EAJsB,KAIZC,EAJY,KAOvB1pB,EAAM,uCAAI,4BAAAvD,EAAA,0DACFuF,EAAMsS,iBADJ,gCAEctS,EAAM6C,OAAOhD,GAAGsO,aAAanO,EAAMsS,kBAFjD,OAEE6L,EAFF,OAGFmJ,EAAiBnJ,EAAI/P,KAAKC,MAC1BmZ,EAAoBrJ,EAAI/P,KAAKuZ,SAC7BD,EAAYvJ,EAAI/P,KAAKwZ,WALnB,2CAAJ,qDAcV,OALAjlB,qBAAU,WACN3E,MACD,CAACgC,EAAMsS,mBAIN,kBAAC,IAAD,CAAUjZ,IAAK2G,EAAM8F,UAAWC,OAAQ/F,EAAMgG,QAASkb,aAAc,WAAKljB,KAAW4H,aAAc,WAAU5F,EAAM4F,cAAc5F,EAAM4F,gBAAiBrC,MAAO,CAAC0C,aAAc,GAAIC,SAAS,iCACvL,yBAAKjC,UAAU,kCACX,yBAAKA,UAAU,oBACX,0BAAMA,UAAU,qBAAqBjE,EAAMwE,SAASC,cAAcqX,2BAClE,2BAAO7X,UAAU,iCACbmB,MAAOiiB,EACP9jB,MAAO,CAACwY,SAAU,GAClBC,YAAY,2BACZtC,SAAU,SAAC9V,GACP0jB,EAAiB1jB,EAAEuB,OAAOC,OAC1BxB,EAAE+V,UACF3Z,EAAMwE,SAAS8U,mBAAkB,kBAAMtZ,EAAM6C,OAAOhD,GAAGgoB,cAAc7nB,EAAMsS,iBAAkB,CAAClE,KAAM,CAACuZ,QAASJ,EAAkBlZ,KAAMzK,EAAEuB,OAAOC,MAAOwiB,YAAWH,OAAjK,oBAA0MznB,EAAMsS,iBAAhN,gBAIZ,yBAAK/O,MAAO,CAACS,QAAS,OAAQ4X,WAAY,SAAUrH,WAAY,IAC5D,uBAAGtQ,UAAU,mBAAmBV,MAAO,CAACiR,MAAO,+BAC/C,kBAAC,EAAD,CAAWpP,MAAOmiB,EAAkB7N,SAAU,SAAC5S,GAC3C,IAAIghB,GAAU,EACdhhB,EAAKwC,QAAO,SAAA1F,GAAC,OAAG2jB,EAAiB/tB,SAASoK,MAAI5G,SAAQ,SAAA+qB,GAC9C,eAAe1D,KAAK0D,GACpB/nB,EAAM6C,OAAOhD,GAAGmoB,kBAAkBhoB,EAAMsS,iBAAkByV,GAE1DD,GAAU,KAElBP,EAAiBje,QAAO,SAAA1F,GAAC,OAAGkD,EAAKtN,SAASoK,MAAI5G,SAAQ,SAAAirB,GAClDjoB,EAAM6C,OAAOhD,GAAGqoB,kBAAkBloB,EAAMsS,iBAAkB2V,MAE1DH,IACA9nB,EAAM6C,OAAOhD,GAAGgoB,cAAc7nB,EAAMsS,iBAAkB,CAAClE,KAAM,CAACuZ,QAAS7gB,EAAMuH,KAAMgZ,EAAeO,YAAWH,KAC7GD,EAAoB1gB,KAEzBqf,YAAagB,EAAuBxB,WAAY,CAAC3J,YAAahc,EAAMwE,SAASC,cAAc0jB,wB,0DCzFlH,IAAIrmB,EAAM,CACT,8BAA+B,CAC9B,IACA,GAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,GAED,0BAA2B,CAC1B,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,sBAAuB,CACtB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,qBAAsB,CACrB,IACA,IAED,mCAAoC,CACnC,IACA,IAED,uBAAwB,CACvB,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,wBAAyB,CACxB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,uBAAwB,CACvB,IACA,GAED,uBAAwB,CACvB,IACA,IAED,yBAA0B,CACzB,IACA,GAED,8BAA+B,CAC9B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,uBAAwB,CACvB,IACA,IAED,6BAA8B,CAC7B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,+BAAgC,CAC/B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,yBAA0B,CACzB,IACA,IAED,yBAA0B,CACzB,IACA,IAED,4BAA6B,CAC5B,IACA,IAED,2BAA4B,CAC3B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,sBAAuB,CACtB,IACA,IAED,0BAA2B,CAC1B,IACA,IAED,uBAAwB,CACvB,IACA,IAED,wBAAyB,CACxB,IACA,IAED,gCAAiC,CAChC,IACA,KAGF,SAASsmB,EAAoBC,GAC5B,IAAIC,EAAoB1H,EAAE9e,EAAKumB,GAC9B,OAAOnpB,QAAQC,UAAU2Y,MAAK,WAC7B,IAAIlU,EAAI,IAAI7J,MAAM,uBAAyBsuB,EAAM,KAEjD,MADAzkB,EAAE2kB,KAAO,mBACH3kB,KAIR,IAAI4S,EAAM1U,EAAIumB,GAAM3rB,EAAK8Z,EAAI,GAC7B,OAAO8R,EAAoB1kB,EAAE4S,EAAI,IAAIsB,MAAK,WACzC,OAAOwQ,EAAoB5rB,MAG7B0rB,EAAoBrkB,KAAO,WAC1B,OAAOpH,OAAOoH,KAAKjC,IAEpBsmB,EAAoB1rB,GAAK,IACzB8rB,EAAOC,QAAUL,G,oBChMjB,IAAItmB,EAAM,CACT,sBAAuB,CACtB,IACA,KAGF,SAASsmB,EAAoBC,GAC5B,IAAIC,EAAoB1H,EAAE9e,EAAKumB,GAC9B,OAAOnpB,QAAQC,UAAU2Y,MAAK,WAC7B,IAAIlU,EAAI,IAAI7J,MAAM,uBAAyBsuB,EAAM,KAEjD,MADAzkB,EAAE2kB,KAAO,mBACH3kB,KAIR,IAAI4S,EAAM1U,EAAIumB,GAAM3rB,EAAK8Z,EAAI,GAC7B,OAAO8R,EAAoB1kB,EAAE4S,EAAI,IAAIsB,MAAK,WACzC,OAAOwQ,EAAoB5rB,MAG7B0rB,EAAoBrkB,KAAO,WAC1B,OAAOpH,OAAOoH,KAAKjC,IAEpBsmB,EAAoB1rB,GAAK,IACzB8rB,EAAOC,QAAUL,G,szKCCXhd,G,OAAW1S,EAAQ,KA+KVgwB,E,kDA5KX,WAAY1oB,GAAQ,IAAD,6BACf,cAAMA,GACNoL,EAAS,gBAET,EAAKc,MAAQ,CACTmC,KAAM,GACNsa,KAAM,OACNC,UAAU,EACVC,QAAIxsB,GARO,E,uLAaMqG,KAAK1C,MAAM6C,OAAOhD,GAAGipB,mBAAmBpmB,KAAK1C,MAAM+C,IAAKL,KAAK1C,MAAMuK,K,OAApFwe,E,OACJrmB,KAAKmJ,SAAS,CACVwC,KAAM0a,EAAS1a,KACfsa,KAAMI,EAASC,OAASD,EAASC,OAAOL,KAAO,OAC/CC,WAAUG,EAASC,aAAiC3sB,IAAvB0sB,EAASC,OAAOH,GAC7CA,GAAIE,EAASC,OAASD,EAASC,OAAOH,QAAKxsB,I,gJAK/CqG,KAAKumB,a,+BAGC,IAAD,OACL,OACI,kBAAC,IAAD,CAAU5vB,IAAKqJ,KAAK1C,MAAM8F,UAAWC,OAAQrD,KAAK1C,MAAMgG,QAASJ,aAAc,WAAU,EAAK5F,MAAM4F,cAAc,EAAK5F,MAAM4F,gBAAiBrC,MAAO,CAAC0C,aAAc,GAAIC,SAAU,eAAgB,WAE7L,OAAQ,EAAKgG,MAAMyc,MACd,IAAK,OAEL,IAAK,QACD,MAAO,uBACX,IAAK,SACD,OAAQ,EAAKzc,MAAM0c,SAAW,+BAAiC,uBACnE,IAAK,UACD,OAAQ,EAAK1c,MAAM0c,SAAW,gCAAkC,uBACpE,IAAK,SACD,MAAO,wBAZ6K,IAe9L,6BAEI,yBAAK3kB,UAAU,iBAEX,0BAAMV,MAAO,CAACS,QAAS,OAAQ4X,WAAY,SAAUlH,MAAO,SACjE,uBAAGzQ,UAAU,eAAgBvB,KAAK1C,MAAMwE,SAASC,cAAcykB,aAC/D,yBAAKjlB,UAAU,oBAAoBvB,KAAKwJ,MAAMmC,OAGzC,uBAAGpK,UAAU,eAAeG,QAAS1B,KAAK1C,MAAM4F,cAAc,uBAAG3B,UAAU,kBAE/E,6BACI,yBAAKA,UAAU,oBACX,yBAAKA,UAAU,wBACf,8BACI,uBAAGA,UAAU,4BACb,0BAAMA,UAAU,gBAAgBvB,KAAK1C,MAAMwE,SAASC,cAAcykB,cAGtE,kBAAC,IAAD,CAAWjlB,UAAU,gBAAgBiY,UAAU,UAAU9W,MAAO1C,KAAKwJ,MAAMyc,KAAM5Z,KAAK,MAAMoN,YAAa,SAAAvY,GAEjG,EAAK5D,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC4P,OAAQ,CAACL,KAAM/kB,EAAEwY,OAAOhX,UAI/E,EAAKyG,SAAS,CAAC8c,KAAM/kB,EAAEwY,OAAOhX,MAAOwjB,UAAU,EAAOC,QAAIxsB,MAG9D,kBAAC,IAAD,CAAiB4H,UAAU,wBAAwBmB,MAAM,QAAzD,iBACA,kBAAC,IAAD,CAAiBnB,UAAU,wBAAwBmB,MAAM,SAAS1C,KAAK1C,MAAMwE,SAASC,cAAc0kB,kBACpG,kBAAC,IAAD,CAAiBllB,UAAU,wBAAwBmB,MAAM,UAAU1C,KAAK1C,MAAMwE,SAASC,cAAc2kB,mBACrG,kBAAC,IAAD,CAAiBnlB,UAAU,wBAAwBmB,MAAM,WAAW1C,KAAK1C,MAAMwE,SAASC,cAAc4kB,oBACtG,kBAAC,IAAD,CAAiBplB,UAAU,wBAAwBmB,MAAM,UAAU1C,KAAK1C,MAAMwE,SAASC,cAAc6kB,qBAKrG,uBAAG/lB,MAAO,CAACiR,MAAO,8BAA+B7O,MAAO,QAASuE,OAAQ,UAAWlG,QAAS,CAAC,SAAU,WAAWxK,SAASkJ,KAAKwJ,MAAMyc,MAAQ,SAAW,QAAU1kB,UAAW,QAAUvB,KAAKwJ,MAAM0c,SAAW,gBAAgB,eAAgBxkB,QAAS,WAChP,EAAK8H,MAAM0c,UACX,EAAK5oB,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC4P,OAAQ,CAACL,KAAM,EAAKzc,MAAMyc,SAEjF,EAAK9c,SAAS,CAAC8c,KAAM,EAAKzc,MAAMyc,KAAMC,UAAU,EAAOC,QAAIxsB,MAE3D,EAAK2D,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC4P,OAAQ,CAACL,KAAM,EAAKzc,MAAMyc,KAAME,GAAI,OAE3F,EAAKhd,SAAS,CAAC8c,KAAM,EAAKzc,MAAMyc,KAAMC,UAAU,EAAMC,GAAI,WAM9E,yBAAKtlB,MAAO,CAACuW,OAAQ,YAAatF,MAAO,8BACnC,WACE,GAAI,EAAKtI,MAAM0c,SACX,OAAQ,EAAK1c,MAAMyc,MACf,IAAK,SACD,OACI,yBAAK1kB,UAAU,mBAGV,CAAC,CAAC,IAAK,EAAKjE,MAAMwE,SAASC,cAAc8kB,4BAA6B,CAAC,IAAK,EAAKvpB,MAAMwE,SAASC,cAAc+kB,6BAA8B,CAAC,IAAM,EAAKxpB,MAAMwE,SAASC,cAAcglB,4BAA6B,CAAC,KAAO,EAAKzpB,MAAMwE,SAASC,cAAcilB,6BAA8B,CAAC,IAAM,EAAK1pB,MAAMwE,SAASC,cAAcklB,4BAA6B,CAAC,IAAM,EAAK3pB,MAAMwE,SAASC,cAAcmlB,6BAA8B,CAAC,KAAO,EAAK5pB,MAAMwE,SAASC,cAAcolB,8BAA8B/nB,KAAI,SAAA8B,GAAC,OAAI,uBAAG3G,IAAK2G,EAAGK,UAAW,2BAAoC,EAAKiI,MAAM2c,IAAa,EAAK3c,MAAM2c,GAAGrvB,SAASoK,EAAE,IAAM,kCAAmD,IAAQQ,QAAS,WAC1qB,GAAI,EAAK8H,MAAM2c,GAAGrvB,SAASoK,EAAE,IAAK,CAC9B,IACIkmB,EADQ,EAAK5d,MAAM2c,GACLvf,QAAO,SAAAygB,GAAI,OAAEA,IAAOnmB,EAAE,MAExC,EAAK5D,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC4P,OAAQ,CAACL,KAAM,EAAKzc,MAAMyc,KAAME,GAAIiB,MAE3F,EAAKje,SAAS,CAACgd,GAAIiB,QACf,CACJ,IAAIE,EAAQ,EAAK9d,MAAM2c,GACvBmB,EAAMvtB,KAAKmH,EAAE,IACb,IAAIkmB,EAAQE,EAEZ,EAAKhqB,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC4P,OAAQ,CAACL,KAAM,EAAKzc,MAAMyc,KAAME,GAAIiB,MAE3F,EAAKje,SAAS,CAACgd,GAAIiB,OAEvBlmB,EAAE,QAGlB,IAAK,UACD,OACI,yBAAKK,UAAU,mBAEV,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,QAAQnC,KAAI,SAAA8B,GAAC,OAAI,uBAAG3G,IAAK2G,EAAGK,UAAW,2BAAoC,EAAKiI,MAAM2c,IAAa,EAAK3c,MAAM2c,GAAGrvB,SAASoK,EAAEiX,eAAiB,kCAAmD,IAAQzW,QAAS,WAChY,GAAI,EAAK8H,MAAM2c,GAAGrvB,SAASoK,EAAEiX,eAAgB,CACzC,IACIiP,EADQ,EAAK5d,MAAM2c,GACLvf,QAAO,SAAAygB,GAAI,OAAEA,IAAOnmB,EAAEiX,iBAExC,EAAK7a,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC4P,OAAQ,CAACL,KAAM,EAAKzc,MAAMyc,KAAME,GAAIiB,MAE3F,EAAKje,SAAS,CAACgd,GAAIiB,QACf,CACJ,IAAIE,EAAQ,EAAK9d,MAAM2c,GACvBmB,EAAMvtB,KAAKmH,EAAEiX,eACb,IAAIiP,EAAQE,EAEZ,EAAKhqB,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC4P,OAAQ,CAACL,KAAM,EAAKzc,MAAMyc,KAAME,GAAIiB,MAE3F,EAAKje,SAAS,CAACgd,GAAIiB,OAEvBlmB,QAzD1B,U,GAtGLqN,aC+DNgZ,G,OA5DEvxB,EAAQ,I,kDAGrB,WAAYsH,GAAQ,IAAD,8BACf,cAAMA,IACDkM,MAAQ,CACTge,QAAS,IAHE,E,oLAQYxnB,KAAK1C,MAAM6C,OAAOhD,GAAGsqB,QAAQznB,KAAK1C,MAAM+C,K,OAAnEL,KAAKwJ,MAAMge,Q,uJAIXxnB,KAAK0nB,gB,mCAIL9wB,QAAQmhB,IAAI,kB,+BAGN,IAAD,OACL,OACI,kBAAC,IAAD,CAAUphB,IAAKqJ,KAAK1C,MAAM8F,UAAWC,OAAQrD,KAAK1C,MAAMgG,QAASkb,aAAc,WAAO,EAAKkJ,eAAgBxkB,aAAc,WAAU,EAAK5F,MAAM4F,cAAc,EAAK5F,MAAM4F,gBAAiBrC,MAAO,CAAC0C,aAAc,EAAG9B,OAAQ,iBAAkB+B,SAAU,cAGjP,yBAAKjC,UAAU,oBACX,0BAAMV,MAAO,CAACS,QAAS,cAAe4X,WAAY,WACvD,uBAAG3X,UAAU,eAAb,SAIK,uBAAGA,UAAU,kBAAkBG,QAAS1B,KAAK1C,MAAM4F,cAAc,uBAAG3B,UAAU,kBAIlF,yBAAKA,UAAU,sBACX,yBAAKA,UAAU,YACVvB,KAAKwJ,MAAMge,QAAQpoB,KAAI,SAAA6gB,GACpB,OACI,yBAAK1e,UAAU,cAAcG,QAAS,WAAO,EAAKimB,eAC9C,yBAAKpmB,UAAU,YACV0e,EAAItU,MAET,uBAAGpK,UAAU,kBAAkBG,QAAS,SAACR,GACrCtK,QAAQmhB,IAAI,aACZ7W,EAAE0G,oBACH,uBAAGrG,UAAU,wBAKhC,yBAAKA,UAAU,uB,GAnDXgN,c,SCKhBqZ,G,aAAsB5xB,EAAQ,KAA9B4xB,mBAGFlf,EAAW1S,EAAQ,IAgBnB6xB,EAAmBC,YAAUC,OAAO,CAEtChV,KAAM,CACFzJ,GAAI,CACA0e,WAAW,GACXC,WAAY,UACZC,eAAe,GACfC,YAAa,EACbC,gBAAiB,EACjBC,kBAAmB,EACnBC,YAAa,EACbC,mBAAoB,GACpBC,aAAc,GACdC,YAAa,GACbC,cAAe,IAEnBzjB,OAAQ,CACJC,QAAS,IACTC,SAAU,GACVC,KAAM,GAEVujB,OAAO,GAIX3V,KAAM,CACF1J,GAAI,CACA0e,WAAW,GACXC,WAAW,YACXC,eAAe,uBACfC,YAAa,GACbC,gBAAiB,EACjBK,YAAa,GACbH,YAAa,EACbD,kBAAmB,IACnBE,mBAAoB,GACpBC,aAAc,GACdE,cAAe,KAEnBzjB,OAAQ,CACJC,QAAS,IACTC,SAAU,GACVC,KAAM,GAEVujB,OAAO,GAGXC,SAAU,CACN,CACItf,GAAI,CACA2e,WAAY,WACZM,mBAAoB,eACpBD,YAAa,EACbE,aAAc,IAElBvjB,OAAQ,CACJC,QAAS,IACTC,SAAU,GACVC,KAAM,IAId,CACIkE,GAAI,CACAof,cAAe,EACfV,WAAW,EACXM,YAAa,EACbL,WAAY,UACZE,YAAa,EACbK,aAAc,YAElBvjB,OAAQ,CACJC,QAAS,IACTC,SAAU,GACVC,KAAM,OAOhByjB,E,kDAEF,WAAYvrB,GAAQ,IAAD,8BAEf,cAAMA,IAuHVwrB,qBAAuB,kBAAM/nB,SAASgoB,oBAAoB,YAAa,EAAKC,oBAAoB,IAzH7E,EA2HnBC,WAAa,kBAAM,EAAK9f,UAAS,SAAAK,GAAK,MAAK,CAACiO,UAAWjO,EAAMiO,cAtHzD/O,EAAS,gBAET,EAAKc,MAAQ,CACTiO,UAAU,EACVyR,eAAWvvB,EACXwvB,aAASxvB,EACTgS,KAAM,GACNyd,KAAM,GACNC,WAAW,EACXC,YAAY,EACZC,QAAQ,GACR/I,KAAM,GACNgJ,WAAY,GACZxhB,cAAc,EACdyhB,YAAY,EACZC,YAAY,EACZC,eAAe,EACfC,mBAAmB,EACnBC,iBAAiB,EACjB9T,kBAAmB,EAAKzY,MAAMyY,kBAC9BhH,aAAc,EAAKzR,MAAMyK,SAAS,GAClC+hB,sBAA4CnwB,IAAzB,EAAK2D,MAAMysB,YAAoD,IAAzB,EAAKzsB,MAAMysB,UACpEC,yBAA0B,EAAC,EAAO,MAClCC,2BAA2B,EAC3BC,iBAAiB,GAErB,EAAKC,mBAAoB,EACzB,EAAKC,GAAK/lB,IAAMC,YAChB,EAAKiQ,SAAWlQ,IAAMC,YACtB,EAAK+lB,SAAWhmB,IAAMC,YACtB,EAAKgmB,aAAejmB,IAAMC,YAC1B,EAAKimB,YAAclmB,IAAMC,YACzB,EAAKkmB,WAAanmB,IAAMC,YACxB,EAAKmmB,aAAepmB,IAAMC,YAC1B,EAAKomB,oBAAsBrmB,IAAMC,YACjC,EAAKqmB,qBAAuBtmB,IAAMC,YAxCnB,E,yDA2CLtE,KAAKmJ,SAAS,CAACugB,YAAY,M,mCAC3B1pB,KAAKmJ,SAAS,CAACugB,YAAY,M,sCAExB1pB,KAAKmJ,SAAS,CAACwgB,eAAe,M,uCAC7B3pB,KAAKmJ,SAAS,CAACyhB,gBAAgB,M,8CAEzB1pB,GAChBlB,KAAKwJ,MAAM0gB,gBACXlqB,KAAKmJ,SAAS,CAAC6gB,yBAA0B,EAAC,EAAM9oB,EAAEiR,eAElDnS,KAAKmJ,SAAS,CAAC8gB,2BAA2B,M,iKAOzBjqB,KAAK1C,MAAM6C,OAAOhD,GAAGipB,mBAAmBpmB,KAAK1C,MAAM+C,IAAKL,KAAK1C,MAAMuK,K,cAApFwe,E,YAGJrmB,K,KACUqmB,EAAS1a,K,KACT0a,EAAS+C,K,KACN/C,EAASkD,Q,KACZlD,EAAS7F,K,KACH6F,EAASiD,W,KACVjD,EAASgD,U,KACRhD,EAASoD,W,KAEjBpD,EAAS7lB,IACR6lB,EAASiD,WACN,IAAI9uB,KAA0B,IAArB6rB,EAAS7lB,IAAI/F,SACtBmtB,EACK,IAAIptB,KAA0B,IAArB6rB,EAAS7lB,IAAI/F,SAAeowB,cACtC,CAACC,SAAUzE,EAAS0E,gBAG5BpxB,E,KAGA0sB,EAASxJ,MACRwJ,EAASiD,WACN,IAAI9uB,KAA4B,IAAvB6rB,EAASxJ,MAAMpiB,SACxBmtB,EACK,IAAIptB,KAA4B,IAAvB6rB,EAASxJ,MAAMpiB,SAAeowB,cACxC,CAACC,SAAUzE,EAAS0E,gBAEzBpxB,E,UAEgBqG,KAAK1C,MAAMwE,SAASkpB,kBAAkBhrB,KAAK1C,MAAMuK,K,4BA5BxE8D,K,KACAyd,K,KACAG,Q,KACA/I,K,KACA8I,W,KACAD,U,KACAI,W,KACAN,Q,KAWAD,U,KAUAgB,gB,YA7BC/gB,S,iBA+BLnJ,KAAKirB,qBACLjrB,KAAKmqB,mBAAoB,E,kJAIrBnqB,KAAKwJ,MAAM2f,UACPnpB,KAAKwJ,MAAM2f,QAAS,IAAI3uB,KAAU,EAClCwF,KAAKmJ,SAAS,CAACqgB,WAAY,OAC1BxpB,KAAKwJ,MAAM2f,QAAS,IAAI3uB,KAAU,MACvCwF,KAAKmJ,SAAS,CAACqgB,WAAY,OAE3BxpB,KAAKmJ,SAAS,CAACqgB,WAAY,MAE3BxpB,KAAKwJ,MAAM0f,YACPlpB,KAAKwJ,MAAM0f,UAAW,IAAI1uB,KAAU,EACpCwF,KAAKmJ,SAAS,CAACnB,cAAc,KACA,IAA5BhI,KAAK1C,MAAM0K,aAChBhI,KAAKmJ,SAAS,CAACnB,cAAc,IACvBhI,KAAK1C,MAAM0K,cACjBhI,KAAKmJ,SAAS,CAACnB,cAAc,O,0CAIjChI,KAAKumB,WACLxlB,SAASmqB,iBAAiB,YAAalrB,KAAKgpB,oBAAoB,K,kCAQhEhpB,KAAKmJ,SAAS,CAACsO,UAAU,M,iCAIjB,IAAD,OACHzX,KAAKwJ,MAAMsgB,iBACX9pB,KAAKmJ,SAAS,CAACsO,UAAU,IAEzBzX,KAAKmJ,SAAS,CAAC2gB,kBAAkB,IAAO,kBAAI,EAAK3gB,SAAS,CAACsO,UAAU,S,iCAGjE,IAAD,OAEPzX,KAAKmqB,mBAAoB,EACzBnqB,KAAKmJ,SAAS,CAAC2gB,kBAAkB,IAAO,kBAAI,EAAK3gB,SAAS,CAACsO,UAAU,S,yCAGtDvW,GAEXlB,KAAKoqB,GAAG5kB,SACJxF,KAAKoqB,GAAG5kB,QAAQ2lB,SAASjqB,EAAEuB,SAG/BzC,KAAKuU,SAAS/O,SACVxF,KAAKuU,SAAS/O,QAAQ2lB,SAASjqB,EAAEuB,SAGrCzC,KAAKwqB,WAAWhlB,SACZxF,KAAKwqB,WAAWhlB,QAAQ2lB,SAASjqB,EAAEuB,SAGvCzC,KAAKyqB,aAAajlB,SACdxF,KAAKyqB,aAAajlB,QAAQ2lB,SAASjqB,EAAEuB,SAGzCzC,KAAK0qB,oBAAoBllB,SACrBxF,KAAK0qB,oBAAoBllB,QAAQ2lB,SAASjqB,EAAEuB,SAGhDzC,KAAK2qB,qBAAqBnlB,SACtBxF,KAAK2qB,qBAAqBnlB,QAAQ2lB,SAASjqB,EAAEuB,SAGjDzC,KAAKsqB,aAAa9kB,SACdxF,KAAKsqB,aAAa9kB,QAAQ2lB,SAASjqB,EAAEuB,SAWzC1B,SAASqqB,eAAe,eAAeD,SAASjqB,EAAEuB,SAGlDzC,KAAK1C,MAAM6X,SACPpU,SAASqqB,eAAe,mBAAmBD,SAASjqB,EAAEuB,SAG1DzC,KAAKwJ,MAAMkgB,YAGX1pB,KAAKwJ,MAAMmgB,eAIf3pB,KAAKqrB,c,yCAGU9gB,EAAWC,EAAWC,GAEjCD,EAAU0e,YAAclpB,KAAKwJ,MAAM0f,WACnClpB,KAAKirB,qBACLzgB,EAAU2e,UAAYnpB,KAAKwJ,MAAM2f,SACjCnpB,KAAKirB,qBACLzgB,EAAUiN,WAAazX,KAAKwJ,MAAMiO,WAAoC,IAAxBzX,KAAKwJ,MAAMiO,UACrD6T,cAAex0B,SAAS,YACxBiK,SAASqqB,eAAe,SAASvqB,MAAMS,QAAU,QACjDtB,KAAK1C,MAAM4G,gBACXlE,KAAK1C,MAAM4G,gBAAe,GAC9BlE,KAAK1C,MAAMwE,SAASsJ,eAEfZ,EAAUiN,WAAazX,KAAKwJ,MAAMiO,WAAoC,IAAxBzX,KAAKwJ,MAAMiO,WAC1D6T,cAAex0B,SAAS,YACxBiK,SAASqqB,eAAe,SAASvqB,MAAMS,QAAU,SACjDtB,KAAK1C,MAAM4G,gBACXlE,KAAK1C,MAAM4G,gBAAe,GAC9BlE,KAAK1C,MAAMwE,SAAS8J,iBAEpBrB,EAAUwf,YAAc/pB,KAAK1C,MAAMysB,WAAa/pB,KAAK1C,MAAMysB,WAC3D/pB,KAAKurB,a,+BAMH,IAAD,OAEL,OACI,6BAII,kBAAC1D,EAAD,CAEI2D,QAAM,EAENhiB,MACIxJ,KAAKmqB,kBACAnqB,KAAKwJ,MAAMigB,WACPzpB,KAAKwJ,MAAMuM,kBACP/V,KAAKwJ,MAAMiO,SACR,OAAO,OACN,WAETzX,KAAKwJ,MAAMuM,kBACX,WACC/V,KAAKwJ,MAAMiO,SAAU,OAAO,OAAS,SAIjD,SAAAgU,GACG,OAEI,kBAAC,WAASnkB,IAAV,CACI5F,QAAS,SAACR,GACF,EAAKsI,MAAMiO,UAAYvW,EAAEuB,SAAW,EAAK4nB,SAAS7kB,SAAWtE,EAAEuB,SAAW,EAAK8nB,YAAY/kB,SAAY,EAAKlI,MAAMouB,QAAY,EAAKliB,MAAMigB,aAAa,EAAKjgB,MAAMuM,mBACjK,EAAKwV,YAGbhqB,UAAW,SAAS,EAAKiI,MAAMiO,SAAS,WAAW,aAEnD9gB,IAAK,EAAKyzB,GAEVvpB,MAAO,CACH8qB,UAAWF,EAAczD,WACzB4D,UAAWH,EAAc/C,cACzBtR,OAAQqU,EAAcxD,WACtBlW,WAAW0Z,EAAcvD,eACzB5f,QAAQmjB,EAAcnD,YACtB7W,SAAU,SACVnQ,QAASmqB,EAAchD,YACvBlhB,SAAU+S,WAASkO,aACnBqD,QAASJ,EAActD,cAO3B,kBAAC,EAAD,CAAQtgB,IAAK,EAAKvK,MAAMuK,IAAKzE,UAAW,EAAKmR,SAAUjR,QAAS,EAAKkG,MAAMkgB,WAAYxmB,aAAc,EAAK4oB,WAAYzrB,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQ2B,SAAU,EAAKxE,MAAMwE,WAE3L,kBAAC,EAAD,CAAWsB,UAAW,EAAKknB,aAAchnB,QAAS,EAAKkG,MAAMmgB,cAAezmB,aAAc,kBAAI,EAAKiG,SAAS,CAACwgB,eAAe,KAAStpB,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQ2B,SAAU,EAAKxE,MAAMwE,WAI1M,yBAAKjB,MAAO,CAACS,QAAS,eAAgBmG,UAAW,qBAE7C,2BACInI,KAAK,WAExC3I,IAAK,EAAK4zB,YACyBvwB,GAAI,cAAc,EAAKsD,MAAMuK,IAC7BtG,UAAU,aACVwqB,eAAgB,EAAKzuB,MAAMyY,kBAC3BiB,SAAU,WAGF,EAAKxN,MAAMigB,YACX,EAAKnsB,MAAMwE,SAASsJ,cAEpB,EAAKjC,SAAS,CAACsgB,YAAY,IAE3B,EAAKnsB,MAAMwE,SAAS+E,GAAG,0BAA2B,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,MAAM,GAE/F,EAAKvK,MAAMwE,SAAS8J,cAAc,MAG5B,EAAKpC,MAAMigB,aAEjB,EAAKnsB,MAAMwE,SAASsJ,cAEpB,EAAKjC,SAAS,CAACsgB,YAAY,IAE3B,EAAKnsB,MAAMwE,SAAS+E,GAAG,wBAAyB,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,MAAM,GAE7F,EAAKvK,MAAMwE,SAAS8J,cAAc,OAG1C/K,MAAO,CAACyH,QAAS,EAAKkB,MAAMxB,aAAa,EAAE,OAK/C,2BAAOrR,IAAK,EAAK0zB,SAAU9oB,UAAW,oBAAoB,EAAKiI,MAAMggB,WAAYxvB,GAAI,oBAAoB,EAAKsD,MAAMuK,IAAKmkB,QAAS,cAAc,EAAK1uB,MAAMuK,KAA3J,WAIJ,kBAAC,WAASyU,MAAV,CACIla,aAAc,EAAKoH,MAAMmC,KACzBqL,SACI,SAAC9V,GAKGA,EAAE+V,UAKF,EAAK3Z,MAAMwE,SAAS8U,mBAAkB,kBAAM,EAAKtZ,MAAMwE,SAAS+E,GAC5D,cACA,CACIxG,IAAK,EAAK/C,MAAM+C,IAChBwH,IAAK,EAAKvK,MAAMuK,IAChB6O,MAAM,CAAC/K,KAAMzK,EAAEuB,OAAOC,WAL9B,oBAOgB,EAAKpF,MAAMuK,IAP3B,aAWR2U,QAAS,SAACtb,GAEF,EAAKsI,MAAMiO,UAEP6T,cAAex0B,SAAS,WAAWoK,EAAEuB,OAAOya,QAGxD3b,UAAW,cAAc,EAAKiI,MAAMiO,SAAS,GAAG,aAChD8E,UAAY,EAAK/S,MAAMiO,SACvBnY,KAAK,OACL2sB,aAAa,MACb3S,YAAa,EAAKhc,MAAMwE,SAASC,cAAcmqB,GAC/CrrB,MAAO,CAACyH,QAAS,EAAKkB,MAAMxB,aAAa,EAAE,IAAMmkB,eAAgBV,EAAclD,oBAC3G9N,UAAW,SAAAvZ,GAAC,MAAc,SAATA,EAAE3G,IAAiB,EAAK4O,SAAS,CAACsO,UAAU,SAAU9d,KAI7C,WACE,IAAkC,IAA9B,EAAK6P,MAAMsgB,iBACX,OACI,kBAAC,WAASxiB,IAAV,CAAc/F,UAAU,YAAYV,MAAO,CAACyH,QAASmjB,EAAcrD,gBAAiB3W,SAAU,SAASma,UAAWH,EAAcpD,oBAG5H,8BACtC+D,SAAS,IACiC9S,YAAa,EAAKhc,MAAMwE,SAASC,cAAcqnB,KAC/C7nB,UAAU,YACVV,MAAO,CAACqT,aAAc,IACtB9R,aAAc,EAAKoH,MAAM4f,KACzBpS,SACI,SAAC9V,GAGGA,EAAE+V,UACF,EAAK3Z,MAAMwE,SAAS8U,mBAAkB,kBAAM,EAAKtZ,MAAMwE,SAAS+E,GAC5D,cACA,CACIxG,IAAK,EAAK/C,MAAM+C,IAChBwH,IAAK,EAAKvK,MAAMuK,IAChB6O,MAAM,CAAC0S,KAAMloB,EAAEuB,OAAOC,WAL9B,oBAOgB,EAAKpF,MAAMuK,IAP3B,eAcZ,yBAAKhH,MAAO,CAACS,QAAS,eAAgB4S,aAAc,EAAGzM,UAAW,qBAE9D,uBAAGyP,WAAU,EAAK5Z,MAAMwE,SAAS+X,QAAStY,UAAU,YAAYV,MAAO,CAACsW,YAAa,EAAK3N,MAAM6f,UAAY,oCAAoC,wBAAyB7hB,OAAQ,WAAY9F,QAAS,WAGlM,EAAKpE,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC2S,WAAY,EAAK7f,MAAM6f,aAG9E,EAAKlgB,SAAS,CAACkgB,WAAY,EAAK7f,MAAM6f,cAEvC,uBAAG9nB,UAAU,cAAcV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,EAAKtI,MAAM6f,UAAY,+BAAiC,wBAAyB7c,SAAU,GAAI/E,UAAW,0BAGlK,uBAAGyP,WAAS,qBAAqB3V,UAAU,YAAYV,MAAO,CAACsW,YAAa,EAAK3N,MAAM8f,WAAY,oCAAoC,wBAAyB9hB,OAAQ,WAAY9F,QAAS,WAGzL,EAAKpE,MAAMwE,SAAS+E,GAChB,cACA,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAC4S,YAAa,EAAK9f,MAAM8f,cAG/E,EAAKngB,SAAS,CAACmgB,YAAa,EAAK9f,MAAM8f,eAExC,uBAAG/nB,UAAU,wBAAwBV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,EAAKtI,MAAM8f,WAAY,+BAAiC,wBAAyB9c,SAAU,GAAI/E,UAAW,0BAG5K,uBAAG/F,QAAS,EAAKgoB,WAAYnoB,UAAU,YAAYV,MAAO,CAACsW,YAAa,wBAAyB3P,OAAQ,WAAY0P,WAAS,oBAAmB,uBAAG3V,UAAU,cAAcV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,wBAAyBtF,SAAU,GAAI/E,UAAW,8BAGxP,kBAACtE,EAAA,EAAD,CAAkBrB,SAAU,EAAKxE,MAAMwE,SAAUsB,UAAW,EAAKunB,qBAAsBtqB,IAAK,EAAK/C,MAAM+C,IAAKuB,gBAAc,EAACzB,OAAQ,EAAK7C,MAAM6C,OAAQmD,QAAS,EAAKkG,MAAMygB,0BAA2B/mB,aAAc,kBAAI,EAAKiG,SAAS,CAAC8gB,2BAA2B,KAAS9nB,SAAO,EAAC3E,YAAa,EAAKgM,MAAM2f,QAASxnB,eAAgB,SAACY,GAChU,EAAKjF,MAAMwE,SAASuqB,mBAAmB,EAAK/uB,MAAMuK,KAAKuN,MAAK,WACxD,EAAK9X,MAAMwE,SAASwqB,qBAAqB,EAAKhvB,MAAMuK,IAAK,EAAKvK,MAAM+C,IAAK,EAAKmJ,MAAMmC,KAAM,EAAKnC,MAAM4f,KAAM7mB,GAC3G,EAAK4G,SAAS,CAAC+gB,iBAAiB,UAGxC,kBAAC,IAAD,CACI9X,cAAc,EACd/O,OAAQ,EAAKmG,MAAMwgB,yBAAyB,GAC5CxmB,SAAS,gBACT6I,KAAK,KACLnJ,aAAc,SAAAhC,GAAC,OAAI,EAAKiI,SAAS,CAAC6gB,yBAA0B,EAAC,EAAO,SACpE3X,MAAO,EAAK7I,MAAMwgB,yBAAyB,GAC3CrzB,IAAK,EAAK+zB,qBAEV,6BACI,yBAAKnpB,UAAU,4BAA4BG,QAAS,WAChD,EAAKpE,MAAMwE,SAASuqB,mBAAmB,EAAK/uB,MAAMuK,KAClD,EAAKsB,SAAS,CAAC+gB,iBAAiB,EAAOF,yBAA0B,EAAC,EAAO,UAF7E,uBAIA,yBAAKzoB,UAAU,4BAA4BG,QAAS,kBAAI,EAAKyH,SAAS,CAAC8gB,2BAA2B,EAAMD,yBAAyB,EAAC,EAAO,UAAzI,yBAGN,WACE,GAAI,EAAK1sB,MAAMwE,SAASyqB,yBAA4BjB,cAAex0B,SAAS,eAAgBw0B,cAAex0B,SAAS,WAChH,OAAO,uBAAG4K,QAAS,EAAK8qB,wBAAyBjrB,UAAU,YAAYV,MAAO,CAACsW,YAAa,wBAAyB3P,OAAQ,WAAY0P,WAAS,oBAAmB,uBAAG3V,UAAU,cAAcV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,wBAAyBtF,SAAU,GAAI/E,UAAW,4BAFlR,GAMF,uBAAG/F,QAAS,EAAKioB,cAAepoB,UAAU,YAAYV,MAAO,CAACsW,YAAa,wBAAyBnU,YAAa,GAAIwE,OAAQ,WAAY0P,WAAS,gCAA+B,uBAAG3V,UAAU,cAAcV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,wBAAyBtF,SAAU,GAAI/E,UAAW,+BAM5R,yBAAK5G,MAAO,CAACS,QAAS,eAAgB4S,aAAc,IAGhD,yBAAKrT,MAAO,CAACS,QAAS,eAAgB0B,YAAa,GAAIkR,aAAc,EAAGrC,WAAY,IAEhF,uBAAGtQ,UAAU,cAAc2V,WAAS,uBAAuBrW,MAAO,CAAC4G,UAAW,mBAAoBzE,YAAa,GAAI8O,MAAO,mBAAoBtF,SAAU,MACxJ,kBAACrJ,EAAA,EAAD,CAAkBrB,SAAU,EAAKxE,MAAMwE,SAAUsB,UAAW,EAAKqnB,aAAcpqB,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQmD,QAAS,EAAKkG,MAAMogB,kBAAmB1mB,aAAc,kBAAI,EAAKiG,SAAS,CAACygB,mBAAmB,KAASznB,SAAO,EAAC3E,YAAa,EAAKgM,MAAM0f,UAAWvnB,eAAgB,SAACY,GAC3R,EAAKjF,MAAMwE,SAAS+E,GAChB,cAAe,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAACmG,MAAMta,EAAGwoB,SAAU0B,KAAKC,iBAAiBC,kBAAkB7B,YAEjI,EAAK3hB,SAAS,CAAC+f,UAAW3mB,OAG5B,WAEE,IAAMqqB,EAAY,SAAC,GAAwB,IAAtBlqB,EAAqB,EAArBA,MAAOhB,EAAc,EAAdA,QACxB,OACI,2BAC3D0qB,SAAS,IACT7qB,UAAU,eACVgb,SAAW+O,cAAex0B,SAAS,UAAYsL,aAAcM,EAAQsU,SAAU,SAAC9V,GAKjBA,EAAE+V,UACF,EAAK3Z,MAAMwE,SAAS8U,mBAAkB,WAClC,IAAIrU,EAAIC,YAAiBtB,EAAEuB,OAAOC,OAC9BH,GAAG,EAAK4G,SAAS,CAAC+f,UAAW3mB,IAC7BA,GACA,EAAKjF,MAAMwE,SAAS+E,GAChB,cAAe,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAACmG,MAAMta,EAAGwoB,SAAU0B,KAAKC,iBAAiBC,kBAAkB7B,cALzI,qBAOiB,EAAKxtB,MAAMuK,IAP5B,aAQD2U,QAAS,SAACtb,GACLoqB,cAAex0B,SAAS,UACxB,EAAKqS,SAAS,CAACygB,mBAAmB,KAElCloB,IACAR,EAAEuB,OAAOqV,aAOnB+U,EAAY,SAAC,GAAyB,IAAvBnqB,EAAsB,EAAtBA,MAAOsU,EAAe,EAAfA,SAIxB,MAFkD,OAA9CtU,EAAMzL,MAAMyL,EAAM7D,OAAO,EAAG6D,EAAM7D,UAAkB6D,GAAgB,KAGpE,2BACInB,UAAU,eACVa,aAAcM,EACdJ,WAAY,SAAApB,GAGR,IAAIqB,EAAIC,YAAiBtB,EAAEuB,OAAOC,OAE9BH,GAAe,UAAVrB,EAAE3G,KAAiByc,EAASzU,EAAEK,WAAa,IAAML,EAAEM,aAAe,IAAMN,EAAEO,kBAInG,OACI,kBAAC,IAAD,CACI6U,SAAU,EAAKnO,MAAM0f,UACrB4D,SAAU,EAAKxvB,MAAM6X,QAAQ,kBAAkB,cAC/C6B,SAAU,SAAAzW,GAEN,EAAK4I,SAAS,CAAC+f,UAAW3oB,IAI1B,EAAKjD,MAAMwE,SAAS+E,GAChB,cAAe,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAACmG,MAAOtc,EAAMwqB,SAAU0B,KAAKC,iBAAiBC,kBAAkB7B,aAGzIiC,eAAa,EACbC,WAAW,qBACXC,gBAAiB,kBAACJ,EAAD,MACjBK,YAAa,kBAACN,EAAD,QAnEvB,IAyEN,yBAAK/rB,MAAO,CAACS,QAAS,eAAgB4S,aAAc,EAAGrC,WAAY,IAC/D,uBAAGtQ,UAAU,cAAc2V,WAAS,qBAAqBrW,MAAO,CAAC4G,UAAW,mBAAoBzE,YAAa,GAAI8O,MAAO,mBAAoBtF,SAAU,MAEtJ,kBAACrJ,EAAA,EAAD,CAAkBrB,SAAU,EAAKxE,MAAMwE,SAAUsB,UAAW,EAAKonB,WAAYnqB,IAAK,EAAK/C,MAAM+C,IAAKF,OAAQ,EAAK7C,MAAM6C,OAAQmD,QAAS,EAAKkG,MAAMqgB,gBAAiB3mB,aAAc,kBAAI,EAAKiG,SAAS,CAAC0gB,iBAAiB,KAAS1nB,SAAO,EAAC3E,YAAa,EAAKgM,MAAM2f,QAASxnB,eAAgB,SAACY,GACnR,EAAKjF,MAAMwE,SAAS+E,GAChB,cAAe,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAClW,IAAI+B,EAAGwoB,SAAU0B,KAAKC,iBAAiBC,kBAAkB7B,YAE/H,EAAK3hB,SAAS,CAACggB,QAAS5mB,OAG1B,WACE,IAAMqqB,EAAY,SAAC,GAAwB,IAAtBlqB,EAAqB,EAArBA,MAAOhB,EAAc,EAAdA,QACxB,OACI,2BAC3D0qB,SAAS,IACT7qB,UAAU,eAAegb,WAAW+O,cAAex0B,SAAS,UAA2BsL,aAAcM,EAAOsU,SAAU,SAAC9V,GAKxDA,EAAE+V,UACF,EAAK3Z,MAAMwE,SAAS8U,mBAAkB,WAClC,IAAIrU,EAAIC,YAAiBtB,EAAEuB,OAAOC,OAC9BH,GAAG,EAAK4G,SAAS,CAACggB,QAAS5mB,IAC3BA,GACA,EAAKjF,MAAMwE,SAAS+E,GAChB,cAAe,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAClW,IAAI+B,EAAGwoB,SAAU0B,KAAKC,iBAAiBC,kBAAkB7B,cALvI,mBAQe,EAAKxtB,MAAMuK,IAR1B,aAUE2U,QAAS,SAACtb,GACJoqB,cAAex0B,SAAS,UACxB,EAAKqS,SAAS,CAAC0gB,iBAAiB,KAEhCnoB,IACAR,EAAEuB,OAAOqV,aAMvB+U,EAAY,SAAC,GAAyB,IAAvBnqB,EAAsB,EAAtBA,MAAOsU,EAAe,EAAfA,SAIxB,MAFkD,OAA9CtU,EAAMzL,MAAMyL,EAAM7D,OAAO,EAAG6D,EAAM7D,UAAkB6D,GAAgB,KAGpE,2BACInB,UAAU,eACVa,aAAcM,EACdJ,WAAY,SAAApB,GAGR,IAAIqB,EAAIC,YAAiBtB,EAAEuB,OAAOC,OAE9BH,GAAe,UAAVrB,EAAE3G,KAAiByc,EAASzU,EAAEK,WAAa,IAAML,EAAEM,aAAe,IAAMN,EAAEO,kBAInG,OACI,kBAAC,IAAD,aACI6U,SAAU,EAAKnO,MAAM2f,QACrB2D,SAAU,EAAKxvB,MAAM6X,QAAQ,kBAAkB,cAC/C6B,SAAU,SAAAzW,GAAI,OAAI,EAAK4I,SAAS,CAACggB,QAAS5oB,KAC1CwsB,eAAa,EACbI,aAAW,EACXH,WAAW,qBACXC,gBAAiB,kBAACJ,EAAD,MACjBK,YAAa,kBAACN,EAAD,OARjB,YASc,SAAArsB,GAEN,EAAK4I,SAAS,CAACggB,QAAS5oB,IAGxB,EAAKjD,MAAMwE,SAAS+E,GAChB,cAAe,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6O,MAAM,CAAClW,IAAKD,EAAMwqB,SAAU0B,KAAKC,iBAAiBC,kBAAkB7B,gBAjEjJ,KAyEV,6BAEI,0BAAMvpB,UAAU,0BAEZ,uBAAGA,UAAU,iBAAiBV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,mBAAoBtF,SAAU,GAAIxJ,YAAa,EAAGyE,UAAW,qBAErH,kBAAC,IAAD,CACI4G,QAAS,EAAK/Q,MAAMyK,SAAS,GAC7BxG,UAAU,eACV6rB,gBAAgB,cAChBD,aAAW,EACXE,OAAQ,CAEJC,WAAY,SAAAC,GAAQ,kCAAUA,GAAV,IAAoBvoB,OAAQ,uBAEpDwoB,iBAAkBzsB,SAASC,KAC3B0B,MAAO,EAAKpF,MAAMyK,SAAS,GAAGnB,QAAO,SAAA6mB,GAAM,OAAIA,EAAO/qB,QAAU,EAAK8G,MAAM+f,WAC3EvS,SAAU,SAAC9V,GAGP,EAAK5D,MAAMwE,SAAS+E,GAAG,uBAAwB,CAAExG,IAAK,EAAK/C,MAAM+C,IAAKwH,IAAK,EAAKvK,MAAMuK,IAAK6lB,WAAiC,KAArB,EAAKlkB,MAAM+f,aAAa5vB,EAAU,EAAK6P,MAAM+f,QAASA,QAAUroB,EAAEA,EAAEwB,MAAM,KAEjL,EAAKyG,SAAS,CAACogB,QAASroB,EAAEA,EAAEwB,MAAM,SAK9C,0BAAMnB,UAAU,sBAEZ,uBAAGA,UAAU,cAAcV,MAAO,CAACuW,OAAQ,EAAGtF,MAAO,mBAAoBtF,SAAU,GAAI/E,UAAW,qBAElG,kBAAC,IAAD,CACI4G,QAAS,EAAK/Q,MAAMyK,SAAS,GAC7BxG,UAAU,WACV6rB,gBAAgB,cAChBD,aAAW,EACXQ,SAAO,EACPN,OAAQ,CAAEC,WAAY,SAAAM,GAAI,kCAAUA,GAAV,IAAgB5oB,OAAQ,uBAClDwoB,iBAAkBzsB,SAASC,KAC3B0B,MAAO,EAAKpF,MAAMyK,SAAS,GAAGnB,QAAO,SAAA6mB,GAAM,OAAI,EAAKjkB,MAAMgX,KAAK1pB,SAAS22B,EAAO/qB,UAC/EsU,SAAU,SAACsK,EAAUuM,GACjB,IAAIC,EAAO,EACPC,EAAOzM,EAASA,EAASliB,IAAT,uCAAa,WAAgB8B,GAAhB,iBAAAnJ,EAAA,0DACzBmJ,EAAE8sB,UADuB,iCAENF,EAAKxwB,MAAMwE,SAAS+E,GACnC,aACA,CACIxG,IAAKytB,EAAKxwB,MAAM+C,IAChBsL,KAAMzK,EAAEuP,QANS,cAErBwd,EAFqB,OAQtBj0B,IACCk0B,EAAeJ,EAAKtkB,MAAMuF,cACjBhV,KAAK,CAAC0W,MAAOvP,EAAEuP,MAAO/N,MAAOurB,IAC1CH,EAAK3kB,SAAS,CAAC4F,aAAcmf,IAXJ,kBAYlBD,GAZkB,iCAclB/sB,EAAEwB,OAdgB,4CAAb,uDAejB,GACHlG,QAAQS,IAAI8wB,GAAM3Y,MAAK,SAAA+Y,GACnB,EAAKhlB,SAAS,CAACqX,KAAM2N,IACrB,EAAK7wB,MAAMwE,SAAS+E,GAChB,cACA,CACIxG,IAAK,EAAK/C,MAAM+C,IAChBwH,IAAK,EAAKvK,MAAMuK,IAChB6O,MAAM,CAAC8J,KAAM2N,cA3UvD,Y,GAlXf5f,aAmtBJsa,O,i9uBC31BXntB,EAAO0yB,IAAU1yB,KAEf2yB,EAAO,CACTC,OAAQ,CACJC,QAAS,SAACC,EAAKC,EAAKC,GAChB,OAAQD,GACJ,IAAK,IACD,OAAOD,EAAME,EACjB,IAAK,IACD,OAAOF,EAAME,EACjB,IAAK,KACD,OAAOF,GAAOE,EAClB,IAAK,KACD,OAAOF,GAAOE,EAClB,IAAK,KACD,OAAOF,GAAOE,EAClB,IAAK,KACD,OAAOF,GAAOE,EAClB,IAAK,MACD,OAAOF,EAAI13B,SAAS43B,GACxB,IAAK,OACD,OAAQF,EAAI13B,SAAS43B,GACzB,QACI,MAAM,IAAIC,UAAU,qBAAuBF,KAGvDxxB,IAAK,sCAAI2xB,EAAJ,yBAAIA,EAAJ,uBAAqB,SAACr3B,GACvB,IAAIs3B,EAAMt3B,EAAI6B,OACVy1B,EAAIhS,QAAOgS,EAAIhS,MAAQgS,EAAIhS,MAAMpiB,SACjCo0B,EAAIruB,MAAKquB,EAAIruB,IAAMquB,EAAIruB,IAAI/F,SAHA,oBAIHm0B,GAJG,IAI/B,yDAAUJ,EAAV,KAAeC,EAAf,KAAoBC,EAApB,KACI,IAAKL,EAAKC,OAAOC,QAAQM,EAAIL,GAAMC,EAAKC,GACpC,OAAO,GANgB,8BAO/B,OAAO,IAEXI,IAAK,sCAAIF,EAAJ,yBAAIA,EAAJ,uBAAqB,SAACr3B,GACvB,IAAIs3B,EAAMt3B,EAAI6B,OACVy1B,EAAIhS,QAAOgS,EAAIhS,MAAQgS,EAAIhS,MAAMpiB,SACjCo0B,EAAIruB,MAAKquB,EAAIruB,IAAMquB,EAAIruB,IAAI/F,SAHA,oBAKHm0B,GALG,IAK/B,yDAAUJ,EAAV,KAAeC,EAAf,KAAoBC,EAApB,KACI,GAAIL,EAAKC,OAAOC,QAAQM,EAAIL,GAAMC,EAAKC,GACnC,OAAO,GAPgB,8BAQ/B,OAAO,IAEXK,QAAS,SAACC,GAAD,2BAAeJ,EAAf,iCAAeA,EAAf,yBAAgC,SAACr3B,GACtC,IAAIs3B,EAAMt3B,EAAI6B,OACVy1B,EAAIhS,QAAOgS,EAAIhS,MAAQgS,EAAIhS,MAAMpiB,SACjCo0B,EAAIruB,MAAKquB,EAAIruB,IAAMquB,EAAIruB,IAAI/F,SAC/B,IAJ8C,EAI1Cw0B,EAAU,EAJgC,cAKlBL,GALkB,IAK9C,yDAAUJ,EAAV,KAAeC,EAAf,KAAoBC,EAApB,KACI,GAAIL,EAAKC,OAAOC,QAAQM,EAAIL,GAAMC,EAAKC,MACjCO,GACaD,EACX,OAAO,GAT2B,8BAW9C,OAAO,IAEXE,OAAQ,SAACF,GAAD,2BAAeJ,EAAf,iCAAeA,EAAf,yBAAgC,SAACr3B,GACrC,IAAIs3B,EAAMt3B,EAAI6B,OACVy1B,EAAIhS,QAAOgS,EAAIhS,MAAQgS,EAAIhS,MAAMpiB,SACjCo0B,EAAIruB,MAAKquB,EAAIruB,IAAMquB,EAAIruB,IAAI/F,SAC/B,IAJ6C,EAIzCw0B,EAAU,EAJ+B,cAKjBL,GALiB,IAK7C,yDAAUJ,EAAV,KAAeC,EAAf,KAAoBC,EAApB,KACI,GAAIL,EAAKC,OAAOC,QAAQM,EAAIL,GAAMC,EAAKC,MACjCO,EACYD,EACV,OAAO,GAT0B,8BAW7C,OAAO,KAGfG,MAAO,CACHpX,IAAK,SAACqX,GAEF,OADAx4B,QAAQmhB,IAAIqX,GACLA,GAEX52B,MAAO,SAAC42B,GAEJ,OADAx4B,QAAQ4B,MAAM42B,GACPA,KAKfhmB,GAAc,EAElB,SAASimB,EAAiBC,GACtBlmB,EAAckmB,E,4CAGlB,WAAiCC,EAAQC,GAAzC,+BAAAz3B,EAAA,6DAAoD4T,EAApD,+BAAyD,GAAzD,SAC+BjQ,EAAK,QAAS6zB,GAAQl3B,MADrD,cAGIo3B,GADAA,GADIA,EADR,OAC4Dr2B,QACxBq2B,EAAcjgB,gBAAa7V,IACX,GAHpD,SAI6B+B,EAAK,cAAcR,IAAI,CAACwQ,KAAM,CAACuZ,QAAS,CAACuK,GAAY7jB,UAJlF,cAIQ+jB,EAJR,OAI2F11B,GAJ3F,UAKW0B,EAAK,QAAS6zB,GAAQn3B,IAAI,CAACoX,WAAW,GAAD,mBAAKigB,GAAL,CAAoBC,KAAe,CAACC,OAAM,IAL1F,iCAMWD,GANX,6C,kEASA,WAA6BH,GAA7B,eAAAx3B,EAAA,sEAC0B2D,EAAK,QAAS6zB,GAAQl3B,MADhD,YACQu3B,EADR,OACuDx2B,QADvD,yCAGew2B,EAAQ,WAAeA,EAAQ,WAAe,IAH7D,gCAKe,IALf,4C,kEAQA,WAAgCL,EAAQjkB,GAAxC,SAAAvT,EAAA,sEACkB2D,EAAK,QAAS6zB,GAAQn3B,IAAI,CAACoX,WAAYlE,GAAgB,CAACqkB,OAAM,IADhF,oF,kEAIA,WAA4BD,GAA5B,SAAA33B,EAAA,sEACkB2D,EAAK,aAAcg0B,GAAar3B,MADlD,uCACyDe,QADzD,4C,kEAIA,WAA6Bs2B,EAAahZ,GAA1C,SAAA3e,EAAA,+EACW2D,EAAK,aAAcg0B,GAAap0B,OAAOob,IADlD,4C,kEAIA,WAAiCgZ,EAAaG,GAA9C,SAAA93B,EAAA,sEACkB2D,EAAK,cAAem0B,EAAc,WAAW30B,IAAI,CAAC8P,MAAO6kB,EAAcxmB,UAAWqmB,EAAapwB,KAAM,SAAUoB,KAAM,IAAIlG,OAD3I,uCACqJR,IADrJ,4C,kEAKA,WAAiC01B,EAAaG,GAA9C,SAAA93B,EAAA,sEACkB2D,EAAK,cAAem0B,EAAc,WAAW30B,IAAI,CAAC8P,MAAO6kB,EAAcxmB,UAAWqmB,EAAapwB,KAAM,SAAUoB,KAAM,IAAIlG,OAD3I,uCACqJR,IADrJ,4C,kEAIA,WAA8Bw1B,GAA9B,SAAAz3B,EAAA,sEACkB2D,EAAK,cAAe8zB,EAAW,WAAWn3B,MAD5D,uCACmE+B,KAAKgF,KAAI,SAAA7H,GAAG,OAAE0C,OAAOC,OAAO3C,EAAI6B,OAAQ,CAACY,GAAIzC,EAAIyC,SADpH,4C,kEAIA,WAAiC81B,EAAUN,GAA3C,SAAAz3B,EAAA,+EACW2D,EAAK,cAAe8zB,EAAW,UAAWM,GAAUt0B,UAD/D,4C,kEAKA,WAAwB+zB,GAAxB,SAAAx3B,EAAA,+EACW2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,SAASl3B,MAC9D+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KACdgF,KAAI,SAAA7H,GAAG,OAAIA,EAAIyC,SAClBuC,OAAM,SAAAwzB,GACJn5B,QAAQ2B,MAAM,0BAA2Bw3B,OALjD,4C,+BASeC,E,gFAAf,WAAiCT,EAAQ7Y,GAAzC,eAAA3e,EAAA,sEACyB2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,SAC/Dl3B,MACA+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KACdwM,OAAO8P,MACVna,OAAM,SAAAwzB,GACJn5B,QAAQ2B,MAAM,0BAA2Bw3B,MANrD,cACQE,EADR,yBAQWA,EAAS7wB,KAAI,SAAA7H,GAAG,OAAIA,EAAIyC,OARnC,4C,+BAWek2B,E,8EAAf,WAA6BX,GAA7B,eAAAx3B,EAAA,sEAE0B2D,EAClB0N,EAAY,aAAa,QAASmmB,EAClC,SAGCl3B,MACA+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KACdwM,OAAOynB,EAAKC,OAAOrxB,IAAI,CAAC,UAAW,KAAM,IAAK,CAAC,aAAc,MAAM,KACnEkO,MAAK,SAACpT,EAAEmH,GAAH,OAASnH,EAAEqB,OAAOwK,MAAQ1E,EAAE9F,OAAOwK,YAC3CrH,OAAM,SAAAwzB,GACJn5B,QAAQ2B,MAAM,0BAA2Bw3B,MAZrD,cAEQI,EAFR,yBAcWA,EAAU/wB,KAAI,SAAA7H,GAAG,OAAIA,EAAIyC,OAdpC,4C,+BAiBeo2B,E,kFAAf,WAA0Bb,EAAQc,EAAWC,GAA7C,iBAAAv4B,EAAA,6DACQw4B,EAASD,GAAY,IAAI91B,MACtBiG,SAAS8vB,EAAO3tB,WAAa,IAFxC,SAIuBlH,EAAK0N,EAAY,aAAa,QAASmmB,EACtD,SAGCl3B,MACA+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KACdwM,QAAO,SAAArP,GAAG,QACNA,EAAI6B,OAAOoH,KAAOjJ,EAAI6B,OAAOoH,IAAI/F,SAAY81B,EAAO51B,UAAU,OAC9DpD,EAAI6B,OAAOyjB,OAAStlB,EAAI6B,OAAOyjB,MAAMpiB,SAAY,IAAID,MAAQG,UAAW,OAC9C,IAA1BpD,EAAI6B,OAAOqwB,YACX4G,EAAU94B,EAAIyC,OAElBmR,MAAK,SAACpT,EAAEmH,GAAH,OAASnH,EAAEqB,OAAOoH,IAAI/F,QAAUyE,EAAE9F,OAAOoH,IAAI/F,cACzD8B,MAAM3F,QAAQ2B,OAjBpB,cAIQi4B,EAJR,yBAkBWA,EAAOpxB,KAAI,SAAA7H,GAAG,OAAIA,EAAIyC,OAlBjC,4C,+BAqBey2B,E,kFAAf,WAAwBlB,EAAQc,EAAWC,GAA3C,iBAAAv4B,EAAA,6DACQw4B,EAASD,GAAY,IAAI91B,MACtBiG,SAAS,GAAG,GAAG,GAAG,KAF7B,SAIuB/E,EAAK0N,EAAY,aAAa,QAASmmB,EACtD,SAGCl3B,MACA+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KACdwM,QAAO,SAAArP,GAAG,QACNA,EAAI6B,OAAOoH,KAAOjJ,EAAI6B,OAAOoH,IAAI/F,SAAY81B,EAAO51B,UAAU,OAC9DpD,EAAI6B,OAAOyjB,OAAStlB,EAAI6B,OAAOyjB,MAAMpiB,SAAY,IAAID,MAAQG,UAAW,OAC9C,IAA1BpD,EAAI6B,OAAOqwB,YACX4G,EAAU94B,EAAIyC,OAElBmR,MAAK,SAACpT,EAAEmH,GAAH,OAASnH,EAAEqB,OAAOoH,IAAI/F,QAAUyE,EAAE9F,OAAOoH,IAAI/F,cACzD8B,MAAM3F,QAAQ2B,OAjBpB,cAIQi4B,EAJR,yBAkBWA,EAAOpxB,KAAI,SAAA7H,GAAG,OAAIA,EAAIyC,OAlBjC,4C,kEAqBA,WAAkCu1B,GAAlC,iCAAAx3B,EAAA,6DAA0C24B,EAA1C,+BAA+C,IAAIl2B,KAAK,KAAM,EAAG,GAAKsF,EAAtE,+BAA2E,IAAItF,KAAK,KAAM,EAAG,GAAKm2B,EAAlG,yCAKsBj1B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,SAChDl3B,MACA+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KACdwM,QAAO,SAAArP,GAAG,QACNA,EAAI6B,OAAOoH,QACPjJ,EAAI6B,OAAOyjB,QACP,IAAIriB,KAA4B,IAAvBjD,EAAI6B,OAAOoH,IAAI/F,UAAkBqF,GAAQ,IAAItF,KAA4B,IAAvBjD,EAAI6B,OAAOoH,IAAI/F,UAAkBi2B,GAAQ,IAAIl2B,MAAW,IAAIA,KAA8B,IAAzBjD,EAAI6B,OAAOyjB,MAAMpiB,cAIzJmM,QAAO,SAAArP,GAAG,OAAKA,EAAI6B,OAAOqwB,cAC1Bte,MAAK,SAACpT,EAAEmH,GAAH,OAASnH,EAAEqB,OAAOoH,IAAI/F,QAAUyE,EAAE9F,OAAOoH,IAAI/F,cACrD8B,MAAM3F,QAAQ2B,OAjBpC,cAKQq4B,EALR,yBAkBWD,EAAaC,EAAMxxB,KAAI,SAAA7H,GAAG,MAAI,CAACA,EAAIyC,GAAIzC,EAAI6B,WAASw3B,EAAMxxB,KAAI,SAAA7H,GAAG,OAAIA,EAAIyC,OAlBpF,4C,kEAqBA,WAAwBu1B,EAAQsB,GAAhC,2BAAA94B,EAAA,6DACInB,QAAQk6B,KAAK,8CADjB,SAEoBZ,EAAcX,GAFlC,OAEQwB,EAFR,OAGQxuB,EAAI,IAAI/H,KACRw2B,EAAU,GACVC,EAAO,GACFv3B,EAAE,EANf,YAMkBA,GAAG,GANrB,kCAO6B+2B,EAASlB,EAAQsB,EAAWtuB,GAPzD,QAOYhD,EAPZ,OAQYjJ,EAAQiJ,EACZyxB,EAAQj3B,KAAKwF,EAAQqH,QAAO,SAAAhI,GAAC,OAAKqyB,EAAKn6B,SAAS8H,OAChDqyB,EAAO36B,EACPiM,EAAEmM,QAAQnM,EAAE/C,UAAY,GAXhC,QAMwB9F,IANxB,gDAaWs3B,EAAQ5xB,KAAI,SAAA8xB,GAAG,OAAIA,EAAItqB,QAAO,SAAAhI,GAAC,OAAImyB,EAAIhsB,QAAQnG,GAAK,SAb/D,6C,kEAgBA,WAA6B2wB,EAAQ4B,GAArC,mBAAAp5B,EAAA,sEACoBm4B,EAAcX,GADlC,cACQwB,EADR,gBAEoBX,EAAWb,EAAQ4B,GAFvC,cAEQD,EAFR,OAGQE,EAAgBF,EAAItqB,QAAO,SAAAhI,GAAC,OAAImyB,EAAIhsB,QAAQnG,GAAK,KAHzD,kBAIW,CAACmyB,EAAKK,IAJjB,4C,+BAOehL,E,gFAAf,WAAkCmJ,EAAQ8B,GAA1C,eAAAt5B,EAAA,sEACqB2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,SAASl3B,MACpE+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KACdwM,QAAO,SAAArP,GAAG,OAAIA,EAAIyC,KAAOq3B,QAHtC,YACQxC,EADR,OAIM,IAJN,yCAKoBA,EAAIz1B,QALxB,4C,kEAQA,WAAmCm2B,EAAQ8B,EAAQC,GAAnD,eAAAv5B,EAAA,sEACmBquB,EAAmBmJ,EAAQ8B,GAD9C,qBACQE,EADR,QAEcD,GAFd,SAGU51B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,QAAS8B,GACzDj5B,IAAIm5B,GACJh1B,MAAM3F,QAAQ2B,OALvB,4C,+BAQeoS,E,8EAAf,WAAmC4kB,GAAnC,qBAAAx3B,EAAA,6DACQy5B,EAAkB,GAClBC,EAAkB,GAClBC,EAAiB,GAHzB,SAKsBh2B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAC5Dl3B,MANT,qBAQS+B,KAAKE,SAAQ,SAAA8S,GACd,GAAIA,EAAKjT,SAAoC,IAA1BiT,EAAKhU,OAAOu4B,UAAoB,CAC/CF,EAAgBrkB,EAAKpT,IAAMoT,EAAKhU,OAAOuS,KACvC6lB,EAAgBpkB,EAAKhU,OAAOuS,MAAQyB,EAAKpT,GACzC,IAAI43B,EAAW,GACfA,EAAS53B,GAAKoT,EAAKpT,GACnB43B,EAASjmB,KAAOyB,EAAKhU,OAAOuS,KAC5BimB,EAASC,UAAYzkB,EAAKhU,OAAOwK,MACjC8tB,EAAe33B,KAAK63B,OAI5BF,EAAevmB,MAAK,SAACpT,EAAEmH,GAAH,OAASnH,EAAE85B,UAAU3yB,EAAE2yB,aACvCC,EAAM,CAACL,EAAiBD,EAAiBE,GArBjD,kBAsBWI,GAtBX,6C,oEAyBA,WAAuBvC,GAAvB,eAAAx3B,EAAA,6DACQyoB,EAAO,GADf,SAGU9kB,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,QAAQl3B,MACxD+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KAAKE,SAAS,SAAA2lB,GACzBA,EAAI9lB,QACJqmB,EAAKzmB,KAAKkmB,EAAI7mB,cAGvBmD,MAAM3F,QAAQ2B,OATrB,gCAUWioB,GAVX,4C,oEAaA,WAAkC+O,GAAlC,qBAAAx3B,EAAA,6DAEQy5B,EAAkB,GAClBC,EAAkB,GAH1B,SAIU/1B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYl3B,MAC5D+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KAAKE,SAAQ,SAAA8S,GACxBA,EAAKjT,SACLs3B,EAAgBrkB,EAAKpT,IAAMoT,EAAKhU,OAAOuS,KACvC6lB,EAAgBpkB,EAAKhU,OAAOuS,MAAQyB,EAAKpT,UAGhDuC,MAAM3F,QAAQ2B,OAXvB,cAaQw5B,EAAc,GACdC,EAAc,GAdtB,SAeUt2B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,QAAQl3B,MACxD+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KAAKE,SAAQ,SAAA2lB,GACxBA,EAAI9lB,SACJ63B,EAAY/R,EAAIjmB,IAAMimB,EAAI7mB,OAAOuS,KACjComB,EAAY9R,EAAI7mB,OAAOuS,MAAQsU,EAAIjmB,UAG1CuC,MAAM3F,QAAQ2B,OAtBvB,gCAwBW,CAAC,CAACk5B,EAAiBD,GAAkB,CAACQ,EAAaD,KAxB9D,4C,+BA2BelnB,G,iFAAf,WAA+B0kB,GAA/B,mBAAAx3B,EAAA,6DACQk6B,EAAc,GACdC,EAAY,GACZC,EAAK,GAHb,SAIUz2B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,gBAAgBl3B,MAChE+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KAAKE,SAAQ,SAAA83B,GACxBA,EAAKj4B,SACL+3B,EAAUE,EAAKp4B,IAAM,CAAC2R,KAAMymB,EAAKh5B,OAAOuS,KAAM+K,MAAO0b,EAAKh5B,OAAOsd,MAAOxG,MAAOkiB,EAAKh5B,OAAO8W,MAAOyG,KAAMyb,EAAKh5B,OAAOud,MACpHsb,EAAYG,EAAKh5B,OAAOuS,MAAQ,CAAC3R,GAAIo4B,EAAKp4B,GAAI0c,MAAO0b,EAAKh5B,OAAOsd,MAAOxG,MAAOkiB,EAAKh5B,OAAO8W,MAAOyG,KAAMyb,EAAKh5B,OAAOud,MACpHwb,EAAGp4B,KAAH,aAASC,GAAIo4B,EAAKp4B,IAAOo4B,EAAKh5B,gBAGrCmD,MAAM3F,QAAQ2B,OAZvB,cAcI45B,EAAGhnB,MAAK,SAACpT,EAAEmH,GAAH,OAASnH,EAAE6L,MAAM1E,EAAE0E,SAd/B,kBAgBW,CAACsuB,EAAWD,EAAaE,IAhBpC,4C,oEAmBA,WAA6B5C,EAAQ8C,EAAWC,GAAhD,SAAAv6B,EAAA,sEACU2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,WAAY8C,GAC5D/2B,OAAOg3B,GACP/1B,MAAM3F,QAAQ2B,OAHvB,4C,+BAMeg6B,G,qFAAf,WAA0BhD,EAAQ8B,EAAQiB,GAA1C,SAAAv6B,EAAA,sEACU2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,QAAS8B,GACzD/1B,OAAOg3B,GACP/1B,MAAM3F,QAAQ2B,OAHvB,4C,oEAMA,WAAiCg3B,EAAQ8B,EAAQiB,GAAjD,SAAAv6B,EAAA,sEACU2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,eAAgB8B,GAChE/1B,OAAOg3B,GACP/1B,MAAM3F,QAAQ2B,OAHvB,4C,+BAMei6B,G,mFAAf,WAAuBjD,EAAQkD,GAA/B,mBAAA16B,EAAA,yDAG4B,KAApB06B,EAAQlJ,QAHhB,gCAI0B2G,EAAcX,GAJxC,OAIYmD,EAJZ,OAIiD7zB,OACzC4zB,EAAQ7uB,MAAQ8uB,EALxB,uCAO2B7hB,GAAoB0e,EAAQkD,EAAQlJ,SAP/D,OAOYoJ,EAPZ,OAOyE1hB,SAASpS,OAC1E4zB,EAAQ7uB,MAAQ+uB,EARxB,eAaSF,EAAQ5V,QACT4V,EAAQ5V,MAAQ,IAAIriB,MAd5B,UAgBwBkB,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,SAASr0B,IAAIu3B,GAhBpF,eAgBQpB,EAhBR,OAgB8Fr3B,GAhB9F,kBAkBWq3B,GAlBX,6C,+BAqBeuB,G,qFAAf,WAA0BrD,EAAQsD,EAAS3X,GAA3C,iBAAAnjB,EAAA,yDAKIkC,OAAO64B,KAAO,SAAS/2B,GACnB,IAAcxB,EAAVu4B,EAAO,EACX,IAAKv4B,KAAOwB,EACJA,EAAIg3B,eAAex4B,IAAMu4B,IAEjC,OAAOA,IAGP5X,EAbR,gCAcuBrK,GAAoB0e,EAAQrU,GAdnD,OAcQyX,EAdR,OAcgE1hB,SAASpS,OACjEg0B,EAAQhY,OAASK,EAfzB,mCAiBgBjhB,OAjBhB,UAiBmC0Q,EAAoB4kB,GAjBvD,oBAiBgE,GAAxDoD,EAjBR,KAiBuBG,KAjBvB,gBAkBQD,EAAQhY,OAAS,GAlBzB,eAoBIgY,EAAQjvB,MAAQ+uB,EAChBE,EAAQ5hB,SAAW,GArBvB,UAuBqBvV,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYr0B,IAAI23B,GAvBpF,eAuBQ5lB,EAvBR,OAuB8FjT,GAvB9F,kBAwBWiT,GAxBX,6C,+BA2Be+lB,G,mFAAf,WAA8BzD,EAAQ0D,GAAtC,SAAAl7B,EAAA,kEACkB2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,gBADjE,kBACoG1kB,GAAgB0kB,GADpH,0BAC6H,GAAG1wB,OADhI,MACsF+E,MADtF,WAC2IqvB,EAD3I,wCACiF/3B,IADjF,wDACqJlB,IADrJ,6C,+BAIek5B,G,mFAAf,WAAsB3D,EAAQ4D,GAA9B,SAAAp7B,EAAA,sEACkB2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,QAAQr0B,IAAI,CAACyQ,KAAMwnB,IADpF,uCAC+Fn5B,IAD/F,4C,oEAIA,WAA4Bu1B,EAAQ8B,GAApC,SAAAt5B,EAAA,sEACU2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,QAAS8B,GAAQ/1B,OAAO,CACzEmuB,YAAY,IAFpB,4C,+BAMe2J,G,qFAAf,WAA8B7D,EAAQ8B,EAAQgB,GAA9C,eAAAt6B,EAAA,sEACiC2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYl3B,MAAM+c,KAAKiZ,EAAKgF,MACnGje,MAAK,SAAA3K,GAAQ,OAAIA,EAASrQ,KAAKwM,QAAO,SAAAhI,GAAC,OAAIA,EAAE5E,KAAOq4B,QAAYjd,KAAKiZ,EAAKgF,MAAMje,MAAK,SAAAke,GAAC,OAAIA,EAAE,GAAGl6B,OAAO6X,YAF/G,qBACQsiB,EADR,QAI4BlC,GAJ5B,SAKU31B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,WAAY8C,GAC5D/2B,OAAO,CAAC2V,SAAUsiB,IAN3B,4C,+BASeC,G,qFAAf,WAA6BjE,EAAQ8B,EAAQgB,GAA7C,eAAAt6B,EAAA,sEACiC2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYl3B,MACnF+c,MAAK,SAAA3K,GAAQ,OAAIA,EAASrQ,KAAKwM,QAAO,SAAAhI,GAAC,OAAIA,EAAE5E,KAAOq4B,KAAW,GAC/Dj5B,OAAO6X,YAHhB,cACQsiB,EADR,QAKqBlC,GAAU,OAL/B,SAMU31B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,WAAY8C,GAC5D/2B,OAAO,CAAC2V,SAAUsiB,IAP3B,4C,oEAUA,WAAgChE,EAAQkE,EAAapB,GAArD,eAAAt6B,EAAA,sEACiC2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYl3B,MACnF+c,MAAK,SAAA3K,GAAQ,OAAIA,EAASrQ,KAAKwM,QAAO,SAAAhI,GAAC,OAAIA,EAAE5E,KAAOq4B,KAAW,GAC/Dj5B,OAAO6X,YAHhB,cACQsiB,EADR,QAKqBE,GAAe,UALpC,SAMU/3B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,WAAY8C,GAC5D/2B,OAAO,CAAC2V,SAAUsiB,IAP3B,4C,oEAUA,WAAiChE,EAAQkE,EAAapB,GAAtD,eAAAt6B,EAAA,sEACiC2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYl3B,MAAM+c,KAAKiZ,EAAKgF,MACnGje,MAAK,SAAA3K,GAAQ,OAAIA,EAASrQ,KAAKwM,QAAO,SAAAhI,GAAC,OAAIA,EAAE5E,KAAOq4B,QAAYjd,KAAKiZ,EAAKgF,MAAMje,MAAK,SAAAke,GAAC,OAAIA,EAAE,GAAGl6B,OAAO6X,YAF/G,qBACQsiB,EADR,QAI4BE,GAJ5B,SAKU/3B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,WAAY8C,GAC5D/2B,OAAO,CAAC2V,SAAUsiB,IAN3B,4C,oEASA,WAA0BhE,EAAQ8B,GAAlC,6BAAAt5B,EAAA,6DAA0C27B,IAA1C,0CACyBh4B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,SAASl3B,MACxE+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,KAAKwM,QAAO,SAAArP,GAAG,OAAIA,EAAIyC,KAAOq3B,KAAQ,GAAGj4B,UAFpE,UAI4B,MAHpBu6B,EADR,QAIiBpK,UAAiBmK,EAJlC,gCAKcN,GAAe7D,EAAQ8B,EAAQsC,EAASpK,SALtD,uBAOU7tB,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,QAAS8B,GAAQ71B,SACjEe,MAAM3F,QAAQ2B,OARvB,4C,oEAWA,WAAiCg3B,EAAQqE,GAAzC,SAAA77B,EAAA,sEACU2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,eAAgBqE,GAAep4B,SADxF,4C,+BAIeq4B,G,mFAAf,WAA6BtE,EAAQ8C,GAArC,iCAAAt6B,EAAA,sEACuB8Y,GAAoB0e,EAAQ8C,GADnD,OACQyB,EADR,qBAEkBA,EAAO7iB,UAFzB,IAEI,2BACmB,aADVvX,EAAsB,SACrB4F,KAAoBu0B,GAActE,EAAQ71B,EAAE6F,QAAQvF,IACrDu4B,GAAWhD,EAAQ71B,EAAE6F,QAAS,CAACgqB,QAAQ,KAJpD,8CAO0B3T,GAAkB2Z,GAP5C,OAOQwE,EAPR,OAQUC,GAAO,MAAG5T,OAAH,oBAAa2T,IAR9B,cASkBC,GATlB,kEASaV,EATb,kBAUmBlN,EAAmBmJ,EAAQ+D,GAV9C,uBAUkD/J,QAVlD,KAU8D8I,EAV9D,6BAWYE,GAAWhD,EAAQ+D,EAAG,CAAC/J,QAAQ,KAX3C,kKAaU7tB,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,WAAY8C,GAAW72B,SACvEe,MAAM3F,QAAQ2B,OAdvB,kE,oEAiBA,WAAyBg3B,EAAQtB,GAAjC,SAAAl2B,EAAA,sEACU2D,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,OAAQtB,GAAOzyB,SAC/De,MAAM3F,QAAQ2B,OAFvB,4C,+BAKesY,G,mFAAf,WAAmC0e,EAAQ8C,GAA3C,qCAAAt6B,EAAA,6DAAsDk8B,EAAtD,gCACQhjB,EAAW,GADnB,SAM0BvV,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYl3B,MAAM+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,QAN7G,UAMQmvB,EANR,OAMoH3iB,QAAO,SAAArP,GAAG,OAAEA,EAAIyC,KAAOq4B,KAAW,GANtJ,yCAQe,CAAEr4B,GAAIq4B,EAAWphB,SAAU,GAAI6J,eAAe,EAAO+W,UAAW,EAAG3W,WAAY,IAR9F,WAAAnjB,EAAA,4CAAAA,EAAA,+EAUcm8B,EAVd,KAWqB,UADC50B,EAVtB,sCAY6B8mB,EAAmBmJ,EAAQ2E,GAZxD,QAYgBt5B,EAZhB,UAcqBA,EAAK6uB,YACNxY,EAASlX,KAAK,CAACuF,KAAM,OAAQC,QAAS20B,EAAQrC,UAAWj3B,EAAKgJ,SAflF,0BAmB4B,YAATtE,EAnBnB,qBAoBgB20B,EApBhB,kCAqBoCpjB,GAAoB0e,EAAQ2E,GArBhE,SAqBoB3K,EArBpB,SAsB4BtY,EAASlX,KAAK,CAACuF,KAAM,UAAWC,QAASgqB,EAASzO,cAAeyO,EAAQzO,cAAe+W,UAAWtI,EAAQsI,YAtBvI,yCAwBsCn2B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYl3B,MAAM+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,QAxBzH,SAwBoBmvB,EAxBpB,OAwBgI3iB,QAAO,SAAArP,GAAG,OAAEA,EAAIyC,KAAOk6B,KAAQ,KACnIjjB,EAASlX,KAAK,CAACuF,KAAM,UAAWC,QAAS,CAACvF,GAAIk6B,GAASpZ,cAAeyO,EAAQnwB,OAAO0hB,cAAe+W,UAAWtI,EAAQnwB,OAAOwK,QAzB1J,iDAU+B3J,OAAOge,QAAQsR,EAAQnwB,OAAO6X,UAV7D,uHA6BIA,EAAS9F,MAAK,SAACpT,EAAEmH,GAAH,OAASnH,EAAE85B,UAAU3yB,EAAE2yB,aA7BzC,kBA8BW,CAAE73B,GAAIq4B,EAAWphB,SAAUA,EAAU6J,cAAeyO,EAAQnwB,OAAO0hB,cAAe+W,UAAWtI,EAAQnwB,OAAOwK,MAAOsX,WAAYqO,EAAQnwB,OAAOyhB,SA9BzJ,6C,oEAiCA,WAAmC0U,GAAnC,QAKmB4E,EALnB,WAAAp8B,EAAA,iGAAAA,EAAA,MAKI,WAAoCw3B,EAAQ8C,GAA5C,uBAAAt6B,EAAA,6DACQq8B,EAAQ,GADhB,SAEyB14B,EAAK0N,EAAY,aAAa,QAASmmB,EAAQ,YAAYl3B,MAAM+c,MAAK,SAAA1c,GAAI,OAAIA,EAAK0B,QAF5G,cAEQmvB,EAFR,OAEmH3iB,QAAO,SAAArP,GAAG,OAAEA,EAAIyC,KAAOq4B,KAAW,GAFrJ,SAG4BxhB,GAAoB0e,EAAQ8C,GAHxD,UAGQgC,EAHR,QAIQ9K,EAAQnwB,OAAO0hB,cAJvB,sBAKYwZ,EAAQD,EAAWpjB,SAAS,IALxC,oBAO+B,YAAfqjB,EAAMh1B,KAPtB,6BAQgBrF,OARhB,KAQ8Bm6B,EAR9B,UAQ4CD,EAAqB5E,EAAQ+E,EAAM/0B,QAAQvF,IARvF,yBAQuBE,OARvB,qBASgBk6B,EAAME,EAAM/0B,QAAQvF,KAAM,EAT1C,wBAUsC,SAAfs6B,EAAMh1B,OACb80B,EAAME,EAAM/0B,UAAW,GAXvC,uCAeY0R,EAAWojB,EAAWpjB,SAflC,UAgBczU,QAAQS,IAAIgU,EAAS7R,IAAT,uCAAa,WAAek1B,GAAf,SAAAv8B,EAAA,yDACR,YAAfu8B,EAAMh1B,KADiB,6BAEvBrF,OAFuB,KAETm6B,EAFS,SAEKD,EAAqB5E,EAAQ+E,EAAM/0B,QAAQvF,IAFhD,wBAEhBE,OAFgB,qBAGvBk6B,EAAME,EAAM/0B,QAAQvF,KAAM,EAHH,wBAID,SAAfs6B,EAAMh1B,OACb80B,EAAME,EAAM/0B,UAAW,GALA,4CAAb,wDAhB1B,iCAyBW60B,GAzBX,6CALJ,uBAKmBD,EALnB,8CACY,IAAI35B,KADhB,SAEsBmQ,EAAoB4kB,GAF1C,cAEQgF,EAFR,OAEmD,GAC3CC,EAAc,GACN,IAAIh6B,KAJpB,UAgCUgC,QAAQS,IAAIs3B,EAAKn1B,IAAL,uCAAS,WAAe2R,GAAf,eAAAhZ,EAAA,6DACvBy8B,EAAYzjB,EAAE/W,KAAM,EADG,SAEJm6B,EAAqB5E,EAAQxe,EAAE/W,IAF3B,OAEnBy6B,EAFmB,OAGvBx6B,OAAOC,OAAOs6B,EAAaC,GAHJ,2CAAT,wDAhCtB,yBAqCiBvE,EAAcX,GArC/B,gCAqCwCj1B,SAAQ,SAACN,GAAD,OAAQw6B,EAAYx6B,IAAM,KArC1E,iCAsCWw6B,GAtCX,6C,+BAyCe5e,G,iFAAf,WAAiC2Z,GAAjC,qCAAAx3B,EAAA,sEAC+Bi4B,EAAkBT,EAAQlB,EAAKC,OAAOrxB,IAAI,CAAC,aAAc,MAAM,KAD9F,cACQy3B,EADR,OAEQC,EAAY,GAFpB,SAGUn4B,QAAQS,IAAIy3B,EAAet1B,IAAf,uCAAmB,WAAew1B,GAAf,SAAA78B,EAAA,sEACVquB,EAAmBmJ,EAAQqF,GADjB,OACjCD,EAAUC,GADuB,kDAAnB,wDAHtB,cAMUC,EAAWH,EAAevpB,MAAK,SAASjM,EAAEnH,GAC5C,IAAI+8B,EAAQH,EAAU58B,GAClBg9B,EAAQJ,EAAUz1B,GACtB,OAAK41B,GAAUC,GAIVD,EAAME,aACFF,EAAME,aAAav6B,QACpB,IAEHs6B,EAAMC,aACFD,EAAOC,aAAav6B,QACrB,GATG,KAYX2Z,EAAQ,IAAI5Z,KACZy6B,EAAY,IAAIz6B,KAChB06B,EAAW,IAAI16B,KACf26B,EAAY,IAAI36B,KACpB4Z,EAAM3T,SAAS,EAAE,EAAE,EAAE,GACrBw0B,EAAUvmB,QAAQumB,EAAUz1B,UAAU,GACtCy1B,EAAUx0B,SAAS,EAAE,EAAE,EAAE,GACzBy0B,EAASxmB,QAAQwmB,EAAS11B,UAAU,GACpC01B,EAASz0B,SAAS,EAAE,EAAE,EAAE,GACxB00B,EAAUC,SAASD,EAAUv3B,WAAW,GACxCu3B,EAAU10B,SAAS,EAAE,EAAE,EAAE,GACrB40B,EAAaR,EAASjuB,QAAO,SAAU7O,GACvC,IAAIu9B,EAAOX,EAAU58B,GACrB,QAAOu9B,EAAKN,cAAe,IAAIx6B,KAAiC,IAA5B86B,EAAKN,aAAav6B,UAAmB2Z,KAEzEmhB,EAAiBV,EAASjuB,QAAO,SAAU7O,GAC3C,IAAIu9B,EAAOX,EAAU58B,GACrB,QAAOu9B,EAAKN,eAAe,IAAIx6B,KAAiC,IAA5B86B,EAAKN,aAAav6B,UAAmBw6B,GAAa,IAAIz6B,KAAiC,IAA5B86B,EAAKN,aAAav6B,SAAkB2Z,MAEnIohB,EAAYX,EAASjuB,QAAO,SAAU7O,GACtC,IAAIu9B,EAAOX,EAAU58B,GACrB,QAAOu9B,EAAKN,eAAe,IAAIx6B,KAAiC,IAA5B86B,EAAKN,aAAav6B,UAAmBy6B,GAAY,IAAI16B,KAAiC,IAA5B86B,EAAKN,aAAav6B,SAAkBw6B,MAElIQ,EAAaZ,EAASjuB,QAAO,SAAU7O,GACvC,IAAIu9B,EAAOX,EAAU58B,GACrB,QAAOu9B,EAAKN,eAAe,IAAIx6B,KAAiC,IAA5B86B,EAAKN,aAAav6B,UAAmB06B,GAAa,IAAI36B,KAAiC,IAA5B86B,EAAKN,aAAav6B,SAAkBy6B,MAEnIQ,EAAab,EAASjuB,QAAO,SAAU7O,GACvC,IAAIu9B,EAAOX,EAAU58B,GACrB,OAAOu9B,EAAKN,cAAe,IAAIx6B,KAAiC,IAA5B86B,EAAKN,aAAav6B,SAAkB06B,KAnDhF,kBAyDW,CAACE,EAAYE,EAAgBC,EAAWC,EAAYC,IAzD/D,6C,oEA4DA,WAAuBnG,EAAQoG,EAAIC,EAAUv7B,GAA7C,qDAAAtC,EAAA,sEAEUy6B,GAAQjD,EAAQ,CACd5jB,KAAMtR,EAAQ,GAAR,WAAiBu7B,EAAjB,MAAgCv7B,EAAQ,GAC9C+uB,KAAM/uB,EAAQ,GACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAAS,GACT/I,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAX3B,uBAcUuM,GAAQjD,EAAQ,CACd5jB,KAAMtR,EAAQ,GACd+uB,KAAM/uB,EAAQ,GACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAAS,GACT/I,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAvB3B,uBA0BUuM,GAAQjD,EAAQ,CACd5jB,KAAMtR,EAAQ,GACd+uB,KAAM/uB,EAAQ,GACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAAS,GACT/I,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAnC3B,uBAuCwB2M,GAAWrD,EAAQ,CAAC5jB,KAAMtR,EAAQ,GAAIs3B,WAAW,EAAM7W,eAAe,IAvC9F,cAuCQ+a,EAvCR,iBAwCoBjD,GAAWrD,EAAQ,CAAC5jB,KAAMtR,EAAQ,GAAIs3B,WAAW,EAAM7W,eAAe,IAxC1F,eAwCQgb,EAxCR,OAyCQC,EAAK,IAAIv7B,KACTqY,EAAK,IAAIrY,KACbu7B,EAAGt1B,SAASs1B,EAAGnzB,WAAa,IAC5BiQ,EAAGpS,SAASoS,EAAGjQ,WAAa,IA5ChC,UA6CqB4vB,GAAQjD,EAAQ,CACzB5jB,KAAMtR,EAAQ,GACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASuM,EACTtV,KAAM,GACNuK,SAAU4K,EACVn1B,IAAKu1B,EACLzP,OAAQ,CAACL,KAAM,UAvD3B,eA6CQ+P,EA7CR,iBA0DqBxD,GAAQjD,EAAQ,CACzB5jB,KAAMtR,EAAQ,IACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASuM,EACTtV,KAAM,GACNuK,SAAU4K,EACVn1B,IAAKqS,EACLyT,OAAQ,CAACL,KAAM,UApE3B,eA0DQgQ,EA1DR,iBAuEUzC,GAAcjE,EAAQyG,EAAMF,GAvEtC,yBAwEUtC,GAAcjE,EAAQ0G,EAAMH,GAxEtC,eAyEIjjB,EAAGpS,SAASoS,EAAGjQ,WAAa,GAzEhC,UA0E2B4vB,GAAQjD,EAAQ,CAC/B5jB,KAAMtR,EAAQ,IACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAAS,GACT/I,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAnF3B,gCAsFqBuM,GAAQjD,EAAQ,CACzB5jB,KAAMtR,EAAQ,IACd+uB,KAAM,GACNC,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASsM,EACTrV,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UA/F3B,eAsFQiQ,EAtFR,iBAkGU1C,GAAcjE,EAAQ2G,EAAML,GAlGtC,yBAmG2BrD,GAAQjD,EAAQ,CAC/B5jB,KAAMtR,EAAQ,IACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASsM,EACTrV,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UA5G3B,eAmGQkQ,EAnGR,iBA+GU3C,GAAcjE,EAAQ4G,EAAYN,GA/G5C,yBAgHwBrD,GAAQjD,EAAQ,CAC5B5jB,KAAMtR,EAAQ,IACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASsM,EACTrV,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAzH3B,eAgHQmQ,EAhHR,iBA4HU5C,GAAcjE,EAAQ6G,EAASP,GA5HzC,yBA6HsBrD,GAAQjD,EAAQ,CAC1B5jB,KAAMtR,EAAQ,IACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASsM,EACTrV,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAtI3B,eA6HQoQ,EA7HR,iBAyIU7C,GAAcjE,EAAQ8G,EAAOR,GAzIvC,yBA0IuBrD,GAAQjD,EAAQ,CAC3B5jB,KAAMtR,EAAQ,IACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASsM,EACTrV,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAnJ3B,eA0IQqQ,EA1IR,iBAsJU9C,GAAcjE,EAAQ+G,EAAQT,GAtJxC,yBAuJsBjD,GAAWrD,EAAQ,CAAC5jB,KAAMtR,EAAQ,IAAKs3B,WAAW,EAAM7W,eAAe,IAvJ7F,eAuJQyb,EAvJR,iBAwJqB/5B,QAAQS,IAAI,CAACi2B,GAAO3D,EAAQl1B,EAAQ,KAAM64B,GAAO3D,EAAQl1B,EAAQ,KAAM64B,GAAO3D,EAAQl1B,EAAQ,KAAM64B,GAAO3D,EAAQl1B,EAAQ,OAxJhJ,eAwJQmmB,EAxJR,iBAyJyBgS,GAAQjD,EAAQ,CAC7B5jB,KAAMtR,EAAQ,IACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASgN,EACT/V,KAAM,CAACA,EAAK,GAAIA,EAAK,IACrBuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAlK3B,eAyJQuQ,EAzJR,iBAqKUhD,GAAcjE,EAAQiH,EAAUD,GArK1C,yBAsKmB/D,GAAQjD,EAAQ,CACvB5jB,KAAMtR,EAAQ,IACd+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASgN,EACT/V,KAAM,CAACA,EAAK,IACZuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UA/K3B,eAsKQwQ,EAtKR,iBAkLUjD,GAAcjE,EAAQkH,EAAIF,GAlLpC,yBAmLUvD,GAAezD,EAAQ,CAAC5jB,KAAMtR,EAAQ,IAAKqc,MAAOrc,EAAQ,MAnLpE,yBAoL0Bu4B,GAAWrD,EAAQ,CAAC5jB,KAAMtR,EAAQ,IAAKs3B,WAAW,EAAM7W,eAAe,IApLjG,eAoLQ4b,EApLR,iBAqLuBlE,GAAQjD,EAAQ,CAC3B5jB,KAAMtR,EAAQ,IACd+uB,KAAM,GACNC,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASmN,EACTlW,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UA9L3B,eAqLQ0Q,EArLR,iBAiMUnD,GAAcjE,EAAQoH,EAAQD,GAjMxC,yBAkMoBlE,GAAQjD,EAAQ,CACxB5jB,KAAMtR,EAAQ,IACd+uB,KAAM,GACNC,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASmN,EACTlW,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UA3M3B,eAkMQ2Q,EAlMR,iBA8MUpD,GAAcjE,EAAQqH,EAAKF,GA9MrC,yBA+MwBlE,GAAQjD,EAAQ,CAChC5jB,KAAMtR,EAAQ,IACV+uB,KAAM,GACNC,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASmN,EACTlW,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UAxN3B,eA+MQ4Q,EA/MR,iBA2NUrD,GAAcjE,EAAQsH,EAASH,GA3NzC,yBA4NuBlE,GAAQjD,EAAQ,CAC/B5jB,KAAMtR,EAAQ,IACV+uB,KAAM/uB,EAAQ,IACdgvB,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASmN,EACTlW,KAAM,GACNuK,SAAU4K,EACVrP,OAAQ,CAACL,KAAM,UArO3B,eA4NQ6Q,EA5NR,iBAwOUtD,GAAcjE,EAAQuH,EAAQJ,GAxOxC,6C,sBA2Oe,QAACrI,OAAM0I,S,4CAAU/G,oBAAmBE,gBAAeE,aAAYjgB,c,8CAAe6mB,oB,gDAAqBrsB,sBAAqB0F,mB,6CAAoBxF,mBAAiBosB,c,iDAAe1E,cAAY2E,kB,iDAAmBtE,cAAYI,kBAAgBE,UAAQV,WAAS2E,a,+CAAc/D,kBAAgBI,iBAAe4D,iB,iDAAkBC,kB,iDAAmBC,W,+CAAYC,kB,+CAAmB1D,iBAAezzB,mB,4CAAoByQ,uBAAqBZ,oB,6CAAqBmW,qBAAoBoR,S,8CAAUC,U,+CAAW7hB,qBAAmB8hB,Q,mDAASjQ,Q,6CAASjV,kB,8CAAmB/G,a,4CAAcJ,c,4CAAe8Z,c,8CAAeG,kB,8CAAmBE,kB,8CAAmBza,e,4CAAgBS,kB,8CAAmBD,iB,+CC1sB5oBosB,GAzKY,WACvB,IAAIC,EAAM,CACNC,WAAY,8BACZC,iBAAkB,sCAClBC,kBAAmB,wBACnBC,mBAAoB,kEACpBC,MAAO,WACHj4B,KAAK63B,WAAWK,UAAY,EAC5Bl4B,KAAK83B,iBAAiBI,UAAY,EAClCl4B,KAAK+3B,kBAAkBG,UAAY,EACnCl4B,KAAKg4B,mBAAmBE,UAAY,IAIxCC,EAAmB,SAACC,GAAD,OAASA,EAAIlqB,MAAM0pB,EAAII,qBAE1CK,EAAwB,SAACD,GAAD,OAAUA,EAAI/tB,MAAM,KAAKjL,KAAI,SAAA1F,GAAC,OAAEA,EAAE0H,WAE1Dk3B,EAAwB,WACxB,IAAIC,EACJ,OAAO,UAAP,+BACG,IAAK,QACDA,EAAK,IAAI/9B,KAGhB,OAAO+9B,GAGPC,EAAW,uCAAG,WAAen4B,EAAK+3B,EAAKK,EAAMC,EAAkBtvB,GAAjD,qBAAArR,EAAA,6DACV4gC,EAAUD,EAAmB,CAACA,GAAoB,GAClDE,EAAY,GACZC,EAAY,GAHF,SAIRr8B,QAAQS,IAAIm7B,EAAIlqB,MAAM0pB,EAAIC,YAAYz4B,IAA1B,uCAA8B,WAAe8B,GAAf,iCAAAnJ,EAAA,yDAE/B,OADbmJ,EAAIA,EAAEE,QACA,GAFsC,sBAGhCF,EAAE,GAH8B,OAI/B,MAJ+B,OAY/B,MAZ+B,+BAK5B+L,EAAMwrB,EAAK,GAAG,GAAGv3B,EAAEjK,MAAM,EAAGiK,EAAErC,SAClC85B,EAAQ5+B,KAAK,CAAC,UAAW,KAAMkT,IANC,SAOjB6rB,GAAMjoB,oBAAoBxQ,EAAK4M,GAAK,EAAO7D,GAP1B,OAO5B2vB,EAP4B,qBAQlBA,EAAG9nB,UARe,8DASb,aADVvX,EARuB,SAStB4F,KATsB,iDAURs5B,GAVQ,mBAUaJ,EAAYn4B,EAAK+3B,EAAIpb,QAAQ9b,EAAEjK,MAAM,EAAGiK,EAAErC,QAAS45B,EAAK,GAAG,GAAG/+B,EAAE6F,QAAQvF,KAAMy+B,EAAMC,GAVjG,wCAUxBE,EAVwB,sNAahCD,EAAQ5+B,KAAK,CAAC,OAAQ,MAAQ0+B,EAAK,GAAG,GAAGv3B,EAAEjK,MAAM,EAAGiK,EAAErC,WAbtB,qCAgBhCqC,EAAE,GAhB8B,OAiB/B,MAjB+B,QA0B/B,MA1B+B,gCAkB5B+L,EAAMwrB,EAAK,GAAG,GAAGv3B,EAAEjK,MAAM,EAAGiK,EAAErC,SAClC85B,EAAQ5+B,KAAK,CAAC,UAAW,KAAMkT,IAnBC,UAqBjB6rB,GAAMjoB,oBAAoBxQ,EAAK4M,GAAK,EAAO7D,GArB1B,QAqB5B2vB,EArB4B,qBAsBlBA,EAAG9nB,UAtBe,8DAuBb,aADVvX,EAtBuB,SAuBtB4F,KAvBsB,iDAwBRu5B,GAxBQ,oBAwBaL,EAAYn4B,EAAK+3B,EAAIpb,QAAQ9b,EAAG,IAAIu3B,EAAK,GAAG,GAAG/+B,EAAE6F,QAAQvF,KAAMy+B,EAAMC,EAAkBtvB,GAxBpG,4CAwBxByvB,EAxBwB,yNA2BhCF,EAAQ5+B,KAAK,CAAC,OAAQ,OAAS0+B,EAAK,GAAG,GAAGv3B,EAAEjK,MAAM,EAAGiK,EAAErC,WA3BvB,QA8B5C85B,EAAQ5+B,KAAK,CAAC,aAAc,MAAM,IA9BU,+EAA9B,wDAJJ,uCAoCH6+B,GApCG,mBAoCkBE,GAAM9I,kBAAkB3vB,GAAK,EAAAy4B,GAAMzK,KAAKC,QAAOrxB,IAAlB,QAAyB07B,GAAUvvB,GApClF,kGAoCiGxC,QAAO,SAAAlN,GAAC,OAAIm/B,EAAU/hC,SAAS4C,OApChI,4CAAH,8DAuCXs/B,EAAwB,uCAAG,WAAe34B,EAAKuwB,EAAOnC,EAAK/rB,EAAOu2B,GAAvC,iCAAAlhC,EAAA,6DAA4CqR,EAA5C,yCACN5M,QAAQS,IAAI2zB,EAAM,GAAGxxB,IAAT,uCAAa,WAAek0B,GAAf,SAAAv7B,EAAA,sEAC5B+gC,GAAM1S,mBAAmB/lB,EAAKizB,EAAGlqB,GADL,+BACmBkqB,EADnB,0EAAb,wDADN,OACvBjN,EADuB,OAMvBuK,EAAM,GAAG95B,SAAS,OAClBoiC,EAAiB7S,EAASjnB,KAAI,SAAAk0B,GAAC,MAAI,CAACA,EAAE,GAAKA,EAAE,GAAG9yB,IAAM,IAAIhG,KAAwB,IAAlB84B,EAAE,GAAG9yB,IAAI/F,cAAiBd,MACnFi3B,EAAM,GAAG95B,SAAS,WACzBoiC,EAAiB7S,EAASjnB,KAAI,SAAAk0B,GAAC,MAAI,CAACA,EAAE,GAAKA,EAAE,GAAGzW,MAAQ,IAAIriB,KAA0B,IAApB84B,EAAE,GAAGzW,MAAMpiB,cAAiBd,OAG9Fw/B,EAAkB,SAASC,EAAOC,GAClC,OAAOD,EAAMt7B,gBAAkBu7B,EAAMv7B,eAAiBs7B,EAAMx7B,aAAey7B,EAAMz7B,YAAcw7B,EAAM55B,YAAc65B,EAAM75B,WAblG,KAenBivB,EAfmB,OAgBlB,MAhBkB,OAmBlB,MAnBkB,QAsBlB,MAtBkB,QAyBlB,OAzBkB,QA4BlB,OA5BkB,+BAiBnByK,EAAiBA,EAAetyB,QAAO,SAAA0sB,GAAC,OAAE6F,EAAgB7F,EAAE,GAAI5wB,MAjB7C,oCAoBbw2B,EAAND,EAAuBC,EAAetyB,QAAO,SAAA0sB,GAAC,OAAIA,EAAE,GAAK5wB,KAA0Bw2B,EAAetyB,QAAO,SAAA0sB,GAAC,OAAIA,EAAE,GAAK5wB,KApBlG,oCAuBbw2B,EAAND,EAAuBC,EAAetyB,QAAO,SAAA0sB,GAAC,OAAIA,EAAE,GAAK5wB,KAA0Bw2B,EAAetyB,QAAO,SAAA0sB,GAAC,OAAIA,EAAE,GAAK5wB,KAvBlG,oCA0Bbw2B,EAAND,EAAuBC,EAAetyB,QAAO,SAAA0sB,GAAC,OAAIA,EAAE,IAAM5wB,KAA0Bw2B,EAAetyB,QAAO,SAAA0sB,GAAC,OAAIA,EAAE,IAAM5wB,KA1BpG,oCA6Bbw2B,EAAND,EAAuBC,EAAetyB,QAAO,SAAA0sB,GAAC,OAAIA,EAAE,IAAM5wB,KAA0Bw2B,EAAetyB,QAAO,SAAA0sB,GAAC,OAAIA,EAAE,IAAM5wB,KA7BpG,sDAiCnBw2B,EAAe95B,KAAI,SAAAk0B,GAAC,OAAIA,EAAE,OAjCP,4CAAH,8DAmG5B,MAAO,CAAC7c,KA/DoB,uCAAG,WAAepW,EAAKi5B,EAAM1yB,EAAQhD,GAAlC,uCAAA7L,EAAA,6DAAyCqR,EAAzC,yCACV0vB,GAAMzoB,mBAAmBhQ,EAAK+I,GADpB,cACvBqvB,EADuB,gBAEVN,EAAiBmB,GAFP,UAEvBC,EAFuB,gDAIhB,IAJgB,YAOnB3yB,EAPmB,OAQlB,UARkB,QAWlB,YAXkB,gCASnB4yB,EAAS,CAAC,QAAS,KAAO,IAAIh/B,MAAQG,UAAW,KAT9B,oCAYnB6+B,EAAS,CAAC,YAAa,MAAM,GAZV,8CAeTh9B,QAAQS,IAAIs8B,EAAKn6B,IAAL,uCAAS,WAAe1F,GAAf,2BAAA3B,EAAA,yDACnC6/B,EAAIK,UACAwB,EAAY7B,EAAIG,kBAAkB2B,KAAKhgC,IAFR,kCAMP+/B,EANO,GAMxBjL,EANwB,KAMnBC,EANmB,KAMdC,EANc,OAOlB,CAAC2J,EAAsB7J,GAAM6J,EAAsB3J,IAA/DF,EAP8B,KAOzBE,EAPyB,MAQ3BkJ,EAAIE,iBAAiBnW,KAAK6M,GARC,kCASdgK,EAAYn4B,EAAKmuB,EAAI,GAAIiK,EAAMe,EAAQpwB,GATzB,gCASuColB,EAAI,GAAtEA,EAT2B,YAU3BE,EAAM4J,EAAsB5J,EAAI,IAVL,UAWhBsK,EAAyB34B,EAAKmuB,EAAKC,EAAKC,GAAK,EAAMtlB,GAXnC,QAW3BkqB,EAX2B,gDAadkF,EAAYn4B,EAAKquB,EAAI,GAAI+J,EAAMe,EAAQpwB,GAbzB,gCAauCslB,EAAI,GAAtEA,EAb2B,YAc3BF,EAAM8J,EAAsB9J,EAAI,IAdL,UAehBwK,EAAyB34B,EAAKquB,EAAKD,EAAKD,GAAK,EAAOplB,GAfpC,QAe3BkqB,EAf2B,wDAmBpBkF,EAAYn4B,EAAK3G,EAAG++B,EAAMe,EAAQpwB,GAnBd,QAmB/BkqB,EAnB+B,wCAqB5BA,GArB4B,4CAAT,wDAfH,eAevB1C,EAfuB,OAsC3BA,EAAK,YAAO,IAAI+I,IAAI/I,EAAMgJ,KAAK,KAtCJ,UAuCNp9B,QAAQS,IAAI2zB,EAAMxxB,IAAN,uCAAU,WAAek0B,GAAf,SAAAv7B,EAAA,4EAC/BiC,GAAIs5B,GAD2B,SACdwF,GAAM1S,mBAAmB/lB,EAAKizB,EAAGlqB,GADnB,4GAAV,wDAE7BgM,MAAK,SAAAzU,GAAM,OAAEA,KAzCU,QAuCvBk5B,EAvCuB,YA0CnBj2B,EA1CmB,OA2ClB,SA3CkB,QA8ClB,SA9CkB,QAiDlB,SAjDkB,QAoDlB,SApDkB,gCA4CnBi2B,EAAS1uB,MAAK,SAACpT,EAAEmH,GAAH,OAAQnH,EAAEyI,IAAIzI,EAAEyI,IAAI/F,QAAQ,OAAcyE,EAAEsB,IAAItB,EAAEsB,IAAI/F,QAAQ,SA5CzD,oCA+CnBo/B,EAAS1uB,MAAK,SAACpT,EAAEmH,GAAH,OAAQA,EAAEsB,IAAItB,EAAEsB,IAAI/F,QAAQ,IAAI1C,EAAEyI,IAAIzI,EAAEyI,IAAI/F,QAAQ,MA/C/C,oCAkDnBo/B,EAAS1uB,MAAK,SAACpT,EAAEmH,GAAH,OAAQnH,EAAE8kB,MAAM9kB,EAAE8kB,MAAMpiB,QAAQ,OAAcyE,EAAE2d,MAAM3d,EAAE2d,MAAMpiB,QAAQ,SAlDjE,oCAqDnBo/B,EAAS1uB,MAAK,SAACpT,EAAEmH,GAAH,OAAQA,EAAE2d,MAAM3d,EAAE2d,MAAMpiB,QAAQ,IAAI1C,EAAE8kB,MAAM9kB,EAAE8kB,MAAMpiB,QAAQ,MArDvD,8CA0DVq+B,GAAM7oB,oBAAoB5P,EAAK+I,GA1DrB,eA0DvB0wB,EA1DuB,OA2DZ,UAAXlzB,IAAoBizB,EAAWA,EAASjzB,QAAO,SAAAmzB,GAAE,YAAqBpgC,IAAhBmgC,EAAKC,EAAG//B,QA3DvC,kBA4DpB6/B,EAASz6B,KAAI,SAAAk0B,GAAC,OAAEA,EAAEt5B,OA5DE,4CAAH,6DAvGL,GCGZ,IAAC+iB,MAAMid,IAASp+B,SAAUq+B,IAAID,IAAS98B,MAAOC,GAAI+8B,GAAS1jB,YAAa2jB,GAAQx+B,MAAOq+B,IAASr+B,MAAOsN,aAAc,kBAAIomB,GAAiB,IAAOnmB,YAAa,kBAAImmB,GAAiB,KCF1LzH,GAAsB5xB,EAAQ,KAA9B4xB,kBAEAwS,GAAoCjkC,UAApCikC,mBAAoBC,GAAgBlkC,UAAhBkkC,YAGtB3xB,GAAW1S,EAAQ,IAqhBVskC,G,WA9fX,WAAYn6B,GAAS,oBACjBH,KAAKusB,wBAAyB,EAC9B8N,GAAY3jB,MAAM,CAAC/K,KAAM,kBAAkByJ,KAAK,uCAAC,WAAgBlU,GAAhB,eAAAnJ,EAAA,yDAC7B,WAAZmJ,EAAEsI,MADuC,gCAEJ4wB,GAAmBG,oBAFf,OAEzCv6B,KAAKusB,uBAFoC,OAEoCiO,QAFpC,sBAGxB,YAAZt5B,EAAEsI,QACPxJ,KAAKusB,wBAAyB,GAJW,OAMzCkO,EAAYnP,cACZtrB,KAAKusB,yBAA2BkO,EAAU3jC,SAAS,cAAiB2jC,EAAU3jC,SAAS,WAQ3FsjC,GAAmBM,YAAY,mCAAoC16B,KAAK26B,0BAf3B,iDAAD,sDAgB7Cj1B,KAAK1F,OAERA,KAAK46B,SAAW,SAAAC,GAAC,OAAIjjC,KAAK4O,IAAIq0B,EAAExwB,MAAM,IAAIywB,QAAO,SAAC/iC,EAAEmH,GAAkC,OAA7BnH,GAAIA,GAAG,GAAGA,EAAGmH,EAAE67B,WAAW,IAAYhjC,IAAG,KAElGiI,KAAKkB,EAAIf,EACTH,KAAK5C,UAAY,aACjB4C,KAAKg7B,gBAAkB,aACvBh7B,KAAKi7B,2BAA4B,EACjCj7B,KAAKk7B,mBAAqB,IAC1Bl7B,KAAKm7B,oBAAiBxhC,EAEtBqG,KAAKo7B,MAAQ,CACTC,MAAO,CACHC,WAAW,WAAD,4BAAE,WAAgBjtB,GAAhB,SAAAtW,EAAA,6DAEJsW,EAAQvH,MAAMjI,SAAWwP,EAAQzK,MAAM/E,QACvCjI,QAAQ2B,MAAM,sDAHV,SAIFiE,QAAQS,IAAIoR,EAAQzK,MAAMxE,KAAI,SAAC8B,EAAExH,GACnC,IAAIyO,EAAOkG,EAAQvH,MAAM5F,GACzB,MAAkB,SAAdiH,EAAK7I,KACEa,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAK8H,EAAK5I,QAAS,CAACqE,MAAOlK,IAC5C,YAAdyO,EAAK7I,KACHa,EAAOhD,GAAG85B,cAAc5oB,EAAQhO,IAAK8H,EAAK5I,QAAS,CAACqE,MAAOlK,SADjE,MARD,gCAYD,CAAC2G,IAAIgO,EAAQhO,MAZZ,2CAAF,mDAAC,IAef4f,IAAK,CACD3R,OAAO,WAAD,4BAAE,WAAgBD,GAAhB,eAAAtW,EAAA,sEACeoI,EAAOhD,GAAG+1B,OAAO7kB,EAAQhO,IAAKgO,EAAQ1C,MADrD,cACAunB,EADA,yBAEG,CAAC7yB,IAAKgO,EAAQhO,IAAKrG,GAAIk5B,IAF1B,2CAAF,mDAAC,IAKXt4B,KAAM,CACF0T,OAAO,WAAD,4BAAE,WAAgBD,GAAhB,iBAAAtW,EAAA,6DACAwjC,EAAW,CACXnS,KAAM,GACNC,WAAW,EACXC,YAAY,EACZG,YAAY,EACZF,QAASlb,EAAQpB,IAAIoB,EAAQpB,IAAI,GACjCuT,KAAM,GACNuK,SAAU0B,KAAKC,iBAAiBC,kBAAkB7B,SAClDxE,OAAQ,CAACL,KAAM,QACfta,KAAM0C,EAAQ1C,KAAK0C,EAAQ1C,KAAK,IAGhC0C,EAAQ7N,MACR+6B,EAAS/6B,IAAM6N,EAAQ7N,KACvB6N,EAAQwO,QACR0e,EAAS1e,MAAQxO,EAAQwO,OAhBzB,SAkBa1c,EAAOhD,GAAGq1B,QAAQnkB,EAAQhO,IAAKk7B,GAlB5C,cAkBAC,EAlBA,OAoBAntB,EAAQpB,KAAsB,IAAfoB,EAAQpB,KACvB9M,EAAOhD,GAAGq2B,cAAcnlB,EAAQhO,IAAKm7B,EAAMntB,EAAQpB,KArBnD,kBAuBG,CAAC5M,IAAKgO,EAAQhO,IAAKwH,IAAK2zB,IAvB3B,2CAAF,mDAAC,GAyBPlgC,OAAO,WAAD,4BAAE,WAAgB+S,GAAhB,eAAAtW,EAAA,sEACcoI,EAAOhD,GAAGipB,mBAAmB/X,EAAQhO,IAAKgO,EAAQxG,KADhE,cACA4zB,EADA,gBAEEt7B,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAKwG,EAAQqI,OAFzD,gCAIG,CAACrW,IAAKgO,EAAQhO,IAAKwH,IAAKwG,EAAQxG,IAAK4zB,UAJxC,2CAAF,mDAAC,GAMPC,gBAAgB,WAAD,4BAAG,WAAgBrtB,GAAhB,eAAAtW,EAAA,sEACIoI,EAAOhD,GAAGipB,mBAAmB/X,EAAQhO,IAAKgO,EAAQxG,KADtD,cACV4zB,EADU,gBAERt7B,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC0hB,QAASlb,EAAQkb,UAFzD,WAIVlb,EAAQqf,WAJE,gCAKJvtB,EAAOhD,GAAGi2B,eAAe/kB,EAAQhO,IAAKgO,EAAQxG,IAAKwG,EAAQqf,YALvD,UAOU,KAApBrf,EAAQkb,QAPE,kCAQJppB,EAAOhD,GAAGq2B,cAAcnlB,EAAQhO,IAAKgO,EAAQxG,IAAKwG,EAAQkb,SARtD,iCAUP,CAAClpB,IAAKgO,EAAQhO,IAAKwH,IAAKwG,EAAQxG,IAAK4zB,UAV9B,4CAAH,mDAAC,GAYhBE,mBAAmB,WAAD,4BAAE,WAAgBttB,GAAhB,eAAAtW,EAAA,sEACKoI,EAAOhD,GAAGipB,mBAAmB/X,EAAQhO,IAAKgO,EAAQxG,KADvD,cACZwe,EADY,gBAEVlmB,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOuL,aAAc,IAAIx6B,OAF3E,gCAGT,CAAC6F,IAAKgO,EAAQhO,IAAKwH,IAAKwG,EAAQxG,IAAKwe,aAH5B,2CAAF,mDAAC,GAKnBuV,iBAAiB,WAAD,4BAAE,WAAgBvtB,GAAhB,uDAAAtW,EAAA,sEACRoI,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAMuL,aAAc,IAAIx6B,OAD5E,uBAEO2F,EAAOhD,GAAGipB,mBAAmB/X,EAAQhO,IAAKgO,EAAQxG,KAFzD,UAEVwe,EAFU,OAGV7lB,EACA6lB,EAAS7lB,IACR6lB,EAASiD,WACN,IAAI9uB,KAA0B,IAArB6rB,EAAS7lB,IAAI/F,SACtBmtB,GACK,IAAIptB,KAA0B,IAArB6rB,EAAS7lB,IAAI/F,SAAeowB,cACtC,CAACC,SAAUzE,EAAS0E,gBAG5BpxB,EAEAkjB,EACAwJ,EAASxJ,MACRwJ,EAASiD,WACN,IAAI9uB,KAA4B,IAAvB6rB,EAASxJ,MAAMpiB,SACxBmtB,GACK,IAAIptB,KAA4B,IAAvB6rB,EAASxJ,MAAMpiB,SAAeowB,cACxC,CAACC,SAAUzE,EAAS0E,gBAEzBpxB,EAGa,UADhB2sB,EAASD,EAASC,QACXL,OAAmBzlB,EAzBhB,oBA2BI,WADVq7B,EAAQvV,EAAOL,MA1BT,iBA4BFpJ,GACIif,EAAct7B,EAAIqc,EACtBrc,EAAIkO,QAAQlO,EAAIhB,UAAY,GAC5BW,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOjpB,IAAIA,EAAKqc,MAAO,IAAIriB,KAAKgG,EAAIs7B,OAEhGt7B,EAAIkO,QAAQlO,EAAIhB,UAAY,GAC5BW,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOjpB,IAAIA,KAlCrE,2BAqCW,WAAVq7B,EArCD,qBAsCFhf,EAtCE,oBAuCEkf,EAAMzV,EAAOH,GACb3gB,EAAU,GACVs2B,EAAct7B,EAAIqc,GAClBkf,EA1CF,4BA2CUA,EAAIjlC,SAAS0O,GA3CvB,iBA4CMhF,EAAIkO,QAAQlO,EAAIhB,UAAY,GACxBw8B,EAAMx7B,EAAIrC,SA7CpB,KA8Cc69B,EA9Cd,OA+Ce,IA/Cf,QAkDe,IAlDf,QAqDe,IArDf,QAwDe,IAxDf,QA2De,IA3Df,QA8De,IA9Df,QAiEe,IAjEf,gCAgDcx2B,EAAU,IAhDxB,oCAmDcA,EAAU,IAnDxB,oCAsDcA,EAAU,IAtDxB,oCAyDcA,EAAU,KAzDxB,oCA4DcA,EAAU,IA5DxB,oCA+DcA,EAAU,IA/DxB,oCAkEcA,EAAU,KAlExB,6EAuEEhF,EAAIkO,QAAQlO,EAAIhB,UAAU,GAC1Bqd,EAAMnO,QAAQmO,EAAMrd,UAAU,GAxEhC,QA0EFW,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOjpB,IAAIA,EAAKqc,MAAO,IAAIriB,KAAKgG,EAAIs7B,KA1E9F,6BA4EEC,EAAMzV,EAAOH,IA5Ef,iBA8EM3gB,EAAU,GA9EhB,WA+EUu2B,EAAIjlC,SAAS0O,GA/EvB,iBAgFMhF,EAAIkO,QAAQlO,EAAIhB,UAAY,GACxBw8B,EAAMx7B,EAAIrC,SAjFpB,KAkFc69B,EAlFd,OAmFe,IAnFf,QAsFe,IAtFf,QAyFe,IAzFf,QA4Fe,IA5Ff,QA+Fe,IA/Ff,QAkGe,IAlGf,QAqGe,IArGf,gCAoFcx2B,EAAU,IApFxB,oCAuFcA,EAAU,IAvFxB,oCA0FcA,EAAU,IA1FxB,oCA6FcA,EAAU,KA7FxB,oCAgGcA,EAAU,IAhGxB,oCAmGcA,EAAU,IAnGxB,oCAsGcA,EAAU,KAtGxB,6EA2GEhF,EAAIkO,QAAQlO,EAAIhB,UAAU,GA3G5B,QA6GFW,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOjpB,IAAIA,IA7GrE,gCA+GH,GAAc,YAAVq7B,EACP,GAAIhf,EAAO,CAKP,GAJIkf,EAAMzV,EAAOH,GACb6V,EAAMx7B,EAAIhB,UACVy8B,EAAOz7B,EAAIhB,UACXs8B,EAAct7B,EAAIqc,EAClBkf,EACA,MAASA,EAAIjlC,SAASklC,EAAI1kC,eAAiBykC,EAAIjlC,SAAS,SAAY,IAAI0D,KAAKgG,EAAI1C,cAAe0C,EAAI5C,WAAY4C,EAAIhB,WAAWA,YAAc,IAAIhF,KAAKgG,EAAI1C,cAAe0C,EAAI5C,WAAW,EAAG,GAAG4B,YAAiBy8B,IAASD,GACpNx7B,EAAIkO,QAAQlO,EAAIhB,UAAY,GAC5Bw8B,EAAMx7B,EAAIhB,eAGdgB,EAAI40B,SAAS50B,EAAI5C,WAAW,GAEhCuC,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOjpB,IAAIA,EAAKqc,MAAO,IAAIriB,KAAKgG,EAAIs7B,SAC7F,CAEH,GADIC,EAAMzV,EAAOH,GAIb,IAFI6V,EAAMx7B,EAAIhB,UACVy8B,EAAOz7B,EAAIhB,WACNu8B,EAAIjlC,SAASklC,EAAI1kC,eAAiBykC,EAAIjlC,SAAS,SAAY,IAAI0D,KAAKgG,EAAI1C,cAAe0C,EAAI5C,WAAY4C,EAAIhB,WAAWA,YAAc,IAAIhF,KAAKgG,EAAI1C,cAAe0C,EAAI5C,WAAW,EAAG,GAAG4B,YAAiBy8B,IAASD,GACpNx7B,EAAIkO,QAAQlO,EAAIhB,UAAY,GAC5Bw8B,EAAMx7B,EAAIhB,eAGdgB,EAAI40B,SAAS50B,EAAI5C,WAAW,GAEhCuC,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOjpB,IAAIA,QAE1D,WAAVq7B,IACHhf,GACIif,EAAct7B,EAAIqc,EACtBrc,EAAI07B,YAAY17B,EAAI1C,cAAgB,GACpCqC,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOjpB,IAAIA,EAAKqc,MAAO,IAAIriB,KAAKgG,EAAIs7B,OAEhGt7B,EAAI07B,YAAY17B,EAAI1C,cAAgB,GACpCqC,EAAOhD,GAAGo1B,WAAWlkB,EAAQhO,IAAKgO,EAAQxG,IAAK,CAAC4hB,YAAY,EAAOjpB,IAAIA,MAnJrE,iCAwJP,CAACiN,QAAS,oCAxJH,4CAAF,mDAAC,IA2JrB8b,QAAS,CACLjb,OAAO,WAAD,4BAAE,WAAgBD,GAAhB,iBAAAtW,EAAA,yDACA86B,EAAU,CACVlnB,KAAM,GACNgmB,eAA8Bh4B,IAAnB0U,EAAQwM,OACnBC,eAAe,IAERzM,EAAQwM,OANf,gCAM8B1a,EAAOhD,GAAGy1B,WAAWvkB,EAAQhO,IAAKwyB,EAASxkB,EAAQwM,QANjF,0DAMiG1a,EAAOhD,GAAGy1B,WAAWvkB,EAAQhO,IAAKwyB,GANnI,kCAMA7lB,EANA,KAOAqB,EAAQwM,QACR1a,EAAOhD,GAAGi6B,iBAAiB/oB,EAAQhO,IAAK2M,EAAMqB,EAAQwM,QARtD,kBAUG,CAACxa,IAAKgO,EAAQhO,IAAK4M,IAAKD,IAV3B,4CAAF,mDAAC,GAYPxR,OAAO,WAAD,4BAAE,WAAgB6S,GAAhB,SAAAtW,EAAA,sEACEoI,EAAOhD,GAAG02B,cAAcxlB,EAAQhO,IAAKgO,EAAQpB,KAD/C,cAEAoB,EAAQwM,QACR1a,EAAOhD,GAAGk6B,kBAAkBhpB,EAAQhO,IAAKgO,EAAQpB,IAAKoB,EAAQwM,QAH9D,kBAKG,CAACxa,IAAKgO,EAAQhO,IAAKrF,KAAM,SAL5B,2CAAF,mDAAC,GAOPmhC,aAAa,WAAD,4BAAE,WAAgB9tB,GAAhB,iBAAAtW,EAAA,sEACmBoI,EAAOhD,GAAGkT,mBAAmBhC,EAAQhO,KADxD,cACNoI,EADM,OAGN2zB,EAAc3zB,EAAiB,GAAG,GAAG4F,EAAQrU,IAHvC,SAOJmG,EAAOhD,GAAG85B,cAAc5oB,EAAQhO,IAAKgO,EAAQrU,GAAI,CAAC2R,KAAM0C,EAAQ1C,OAP5D,gCASH,CAACywB,cAAa/7B,IAAKgO,EAAQhO,MATxB,2CAAF,mDAAC,GAWbg8B,eAAe,WAAD,4BAAE,WAAgBhuB,GAAhB,iBAAAtW,EAAA,sEACeoI,EAAOhD,GAAG0T,oBAAoBxC,EAAQhO,IAAKgO,EAAQrU,IAAI,GADtE,cACR+gB,EADQ,OAGRD,EAAgBC,EAHR,SAON5a,EAAOhD,GAAG85B,cAAc5oB,EAAQhO,IAAKgO,EAAQrU,GAAI,CAAC8gB,cAAezM,EAAQyM,gBAPnE,gCASL,CAACA,gBAAeza,IAAKgO,EAAQhO,MATxB,2CAAF,mDAAC,GAWfi8B,UAAU,WAAD,4BAAG,WAAgBjuB,GAAhB,SAAAtW,EAAA,sEAEFoI,EAAOhD,GAAGq2B,cAAcnlB,EAAQhO,IAAKgO,EAAQxG,IAAKwG,EAAQpB,KAFxD,gCAGD,CAAC5M,IAAKgO,EAAQhO,IAAKwH,IAAKwG,EAAQxG,MAH/B,2CAAH,mDAAC,GAKV00B,WAAW,WAAD,4BAAG,WAAgBluB,GAAhB,SAAAtW,EAAA,sEAEHoI,EAAOhD,GAAGi2B,eAAe/kB,EAAQhO,IAAKgO,EAAQxG,IAAKwG,EAAQpB,KAFxD,gCAGF,CAAC5M,IAAKgO,EAAQhO,IAAKwH,IAAKwG,EAAQxG,MAH9B,2CAAH,mDAAC,IAMf2O,YAAa,CACTlI,OAAO,WAAD,4BAAE,WAAeD,GAAf,iBAAAtW,EAAA,6DACAykC,EAAO,CACP7wB,KAAM,GACNuE,MAAO,SACPyG,KAAM,OACND,MAAO,IALP,SAOevW,EAAOhD,GAAG61B,eAAe3kB,EAAQhO,IAAKm8B,GAPrD,cAOAC,EAPA,yBAQG,CAACp8B,IAAKgO,EAAQhO,IAAK4M,IAAKwvB,IAR3B,2CAAF,mDAAC,GAUPC,oBAAoB,WAAD,4BAAE,WAAgBruB,GAAhB,iBAAAtW,EAAA,sEACgBoI,EAAOhD,GAAG0N,gBAAgBwD,EAAQhO,KADlD,cACbiW,EADa,OAGbC,EAAoBD,EAAqB,GAAGjI,EAAQrU,IAHvC,SAOXmG,EAAOhD,GAAG+5B,kBAAkB7oB,EAAQhO,IAAKgO,EAAQrU,GAAIqU,EAAQhU,SAPlD,gCAUV,CAACkc,oBAAmBlW,IAAKgO,EAAQhO,MAVvB,2CAAF,mDAAC,GAapBs8B,oBAAoB,WAAD,4BAAE,WAAgBtuB,GAAhB,SAAAtW,EAAA,6DACjBnB,QAAQmhB,IAAI,oCADK,SAGX5X,EAAOhD,GAAGo6B,kBAAkBlpB,EAAQhO,IAAKgO,EAAQrU,IAHtC,2CAAF,mDAAC,KAO5BgG,KAAK48B,QAAU,CACXhiC,KAAM,CACFU,OAAQ,aAGhB0E,KAAK68B,QAAU,GACf78B,KAAK88B,QAAU,GACf98B,KAAK+8B,QAAU,GAEf/8B,KAAKg9B,QAAU,CACXpiC,KAAM,CACFU,QAAQ,IAGhB0E,KAAKi9B,WAAa,GAElBj9B,KAAKk9B,YAAa,EAClBl9B,KAAKm9B,oBAAiBxjC,EAItBqG,KAAKo9B,uBAAyB,GAG9B10B,GAAS1I,M,mDAYT,IAAK,IAAIzF,KAAOyF,KAAKi9B,WACjBI,aAAar9B,KAAKi9B,WAAW1iC,IAE7ByF,KAAKm9B,gBACLE,aAAar9B,KAAKm9B,gBACtBn9B,KAAKm9B,oBAAiBxjC,I,oCAItBqG,KAAKk9B,YAAa,EACdl9B,KAAKm9B,gBACLE,aAAar9B,KAAKm9B,gBACtBn9B,KAAKm9B,oBAAiBxjC,I,sCAGG,IAAf2jC,EAAc,uDAAL,IACnBt9B,KAAKk9B,YAAa,EAClBl9B,KAAKm9B,eAAiBx2B,WAAW3G,KAAK5C,UAAWkgC,K,wCAI5Ct9B,KAAKk9B,YAAcl9B,KAAKi7B,4BACzBj7B,KAAK5C,YACL4C,KAAKg7B,qB,oFAIchhC,EAAIqG,EAAKk9B,EAAOnU,EAAM1oB,G,iFAChC05B,GAAmBoD,SAAS,CACrCC,cAAe,CACX,CACIF,MAAOA,EACPv8B,KAAMooB,EACNoU,SAAU,CAAEE,GAAIh9B,GAChBi9B,MAAO,KACP3jC,GAAIgG,KAAK46B,SAAS5gC,GAClB4jC,YAAa,CAAC,GAAD,OAAI5jC,GAAJ,UAAaqG,IAC1Bw9B,MAAOx9B,M,+OAMQy9B,G,yFACJA,EAAOC,aAAaH,Y,GAAtCvM,E,KAAQ9B,E,UACLuO,EAAOE,S,OACN,a,OAIA,W,6BAFDh+B,KAAK6G,GAAG,wBAAyB,CAAExG,IAAKkvB,EAAQ1nB,IAAKwpB,IAAS,G,kCAI9DA,EAASyM,EAAOC,aAAaH,YAC7BrO,EAASuO,EAAOC,aAAaF,M,6MAKhB7jC,G,iFACRogC,GAAmB6D,OAAO,CAACR,cAAe,CAAC,CAACzjC,GAAG,GAAD,OAAIgG,KAAK46B,SAAS5gC,Q,gOAGzDA,G,kFAChBkkC,EAAal+B,KAAK46B,SAAS5gC,G,SACXogC,GAAmB+D,a,cAAnCC,E,OACAC,EAASD,EAAQX,cAAcr+B,KAAI,SAAA8B,GAAC,OAAEA,EAAElH,MAAI4M,QAAO,SAAA1F,GAAC,OAAEA,GAAGg9B,K,kBACtDG,EAAOx/B,OAAS,G,qJAGHC,GAAI,IAAD,OACvBkB,KAAKg7B,gBAAgBl8B,EACrBkB,KAAKi7B,2BAA2B,EAChCj7B,KAAKm7B,eAAiBx0B,YAAW,WAAK,EAAKs0B,2BAA0B,EAAM,EAAKE,oBAAexhC,IAAYqG,KAAKk7B,sB,wCAQlGp8B,GAAI,IAAD,OACjBkB,KAAK5C,UAAY0B,EAEdkB,KAAKm7B,gBAAgBkC,aAAar9B,KAAKm7B,gBAC1Cn7B,KAAKi7B,2BAA2B,EAChCj7B,KAAKm7B,eAAiBx0B,YAAW,WAAK,EAAKs0B,2BAA0B,EAAM,EAAKE,oBAAexhC,IAAYqG,KAAKk7B,sB,wCAGlGoD,EAAUC,GAAuB,IAAXC,EAAU,uDAAL,IACrCx+B,KAAKi9B,WAAWsB,IAChBlB,aAAar9B,KAAKi9B,WAAWsB,IACjCv+B,KAAKi9B,WAAWsB,GAAc53B,WAAW23B,EAAUE,K,kEAG9CC,EAAYpwB,EAASqwB,EAAeC,EAAQC,G,oFAiBjD,IATG5+B,KAAKm7B,gBAAgBkC,aAAar9B,KAAKm7B,gBAC1Cn7B,KAAKi7B,2BAA2B,EAChCj7B,KAAKm7B,eAAiBx0B,YAAW,WAAK,EAAKs0B,2BAA0B,EAAM,EAAKE,oBAAexhC,IAAYqG,KAAKk7B,oBAE5G2D,EAAW7+B,KAAKnI,SAEhBinC,EAAQL,EAAWp0B,MAAM,KAEzByzB,EAAS99B,KAAKo7B,MACX0D,EAAMjgC,OAAS,GAClBi/B,EAASA,EAAOgB,EAAMC,S,OAGtBJ,EAAQ3+B,KAAK88B,QAAQ/iC,KAAK8kC,GACzB7+B,KAAK68B,QAAQ9iC,KAAK8kC,G,UAEDf,EAAOzvB,G,eAAzB2wB,E,OAEJh/B,KAAK+8B,QAAQ8B,GAAY,CAACJ,EAAYO,GAEjCh/B,KAAKk9B,YAAewB,GACrB1+B,KAAK5C,YAELwhC,GACA5+B,KAAK5C,Y,UAEI4hC,E,wLAGN,OAA2B,OAAjB,EAAEpnC,KAAKC,UAAmB,GAAGP,SAAS,IAAI,KAAwB,OAAjB,EAAEM,KAAKC,UAAmB,GAAGP,SAAS,M,oCA3IxG,OAAO0I,KAAKo9B,wB,aAGE16B,GACd1C,KAAKo9B,uBAAyB16B,M,cC9XhCgG,I,qBAAW1S,EAAQ,KAmOVipC,IAhOK9oC,UAAZgnB,Q,kDAGJ,WAAY7f,GAAQ,IAAD,sBAGf,IAAIqR,GAFJ,cAAMrR,IAEeA,MAAMyE,cAAcm9B,eAH1B,OAef,EAAK11B,MAAQ,CACT21B,SAAU,EACVC,WAAW,EACX7vB,SAAUZ,EAAU/W,KAAK2O,MAAM3O,KAAKC,SAAW8W,EAAU9P,UAG7D6J,GAAS,gBArBM,E,sDAyBf,IAAIolB,EAAO9tB,KACXhE,UAAgBqjC,eAAerjC,QAAcijC,KAAKK,YAAYC,OAAOnqB,MAAK,WACtEpZ,UAAgBwjC,2BAA2BC,IAAE,UAAUn/B,MAAOm/B,IAAE,aAAan/B,OAAO8U,MAAK,WACjFpZ,UAAgB0jC,YAAYC,cAC3B7R,EAAKxwB,MAAMgQ,SAAS,CAACsyB,QAAS,WAAYryB,UAAW,UAEtDugB,EAAK3kB,SAAS,CAACg2B,SAAU,OAC9B5iC,OAAM,SAAShE,GAEQA,EAAMstB,KACHttB,EAAMkV,QAC3B7W,QAAQmhB,IAAIxf,GACZknC,IAAE,aAAaI,SAAS,iB,iCAOpC,IAAI/R,EAAO9tB,KACP8/B,GAAU,EACd9jC,UAAgB+jC,+BAA+BN,IAAE,UAAUn/B,MAAOm/B,IAAE,aAAan/B,OAAO/D,OAAM,SAAShE,GACnGu1B,EAAK3kB,SAAS,CAACi2B,WAAW,IAAO,kBAAIK,IAAE,gBAAgBO,KAAKznC,EAAMkV,YAClEqyB,GAAQ,KACT1qB,MAAK,WACC0qB,IACD9jC,UAAgB0jC,YAAYO,wBAC5BjkC,UAAgB0jC,YAAYQ,cAAc,CAAClyB,YAAayxB,IAAE,SAASn/B,QACnEwtB,EAAK3kB,SAAS,CAACg2B,SAAU,EAAGC,WAAW,U,uCAKjC,IAAD,OACbpjC,UAAgB0jC,YAAYS,SAAS/qB,MAAK,WAClCpZ,UAAgB0jC,YAAYC,cAC5B,EAAKriC,MAAMgQ,SAAS,CAACsyB,QAAS,WAAYryB,UAAW,WAErDkyB,IAAE,gBAAgBO,KAAK,iF,kCAK/B,IAAIF,GAAU,EACVhS,EAAO9tB,KACXhE,UAAgBokC,uBAAuBX,IAAE,UAAUn/B,OAAO/D,OAAM,SAAShE,GACrEu1B,EAAK3kB,SAAS,CAACi2B,WAAW,IAC1BK,IAAE,gBAAgBO,KAAKznC,EAAMkV,SAC7BqyB,GAAQ,KACT1qB,MAAK,WACC0qB,GACDhS,EAAK3kB,SAAS,CAACg2B,SAAU,S,gCAOjCn/B,KAAK1C,MAAMgQ,SAAS,CAACsyB,QAAS,OAAQryB,UAAW,Y,+BAG3C,IAAD,OACL,OACI,yBAAKvT,GAAG,wBACJ,yBAAKA,GAAG,kBACJ,yBAAKuH,UAAU,YAAYV,MAAO,CAACoR,OAAO,SACtC,yBAAK1Q,UAAU,mBACf,yBAAKA,UAAU,mBACf,0BAAMvH,GAAG,qBAAT,YAAsC,0BAAM6G,MAAO,CAACqR,WAAY,MAA1B,+CAG9C,yBAAKlY,GAAG,YACJ,wBAAIA,GAAG,iBAAiBgG,KAAKwJ,MAAM+F,UAAc,0BAAMvV,GAAG,oBAAoBgG,KAAK1C,MAAMyE,cAAcs+B,kBACvG,wBAAI9+B,UAAU,yBAAyBvH,GAAG,wBAAyB,WAC/D,OAAQ,EAAKwP,MAAM21B,UACf,KAAK,EACD,OAAO,EAAK7hC,MAAMyE,cAAcu+B,SACpC,QACI,OAAO,EAAKhjC,MAAMyE,cAAcw+B,sBALuB,IASnE,2BAAOh/B,UAAU,WAAWvH,GAAG,OAAOsF,KAAK,OAAO2sB,aAAa,MAAM7pB,aAAa,GAAGkX,YAAatZ,KAAK1C,MAAMyE,cAAcy+B,eAAgB3/B,MAAO,CAACS,QAAiC,IAAxBtB,KAAKwJ,MAAM21B,SAAiB,QAAU,UAClM,2BAAO59B,UAAU,WAAWvH,GAAG,QAAQsF,KAAK,QAAQ2sB,aAAa,MAAM7pB,aAAa,GAAGkX,YAAatZ,KAAK1C,MAAMyE,cAAciJ,QAC7H,2BAAOzJ,UAAU,WAAWvH,GAAG,WAAWsF,KAAK,WAAW2sB,aAAa,MAAM7pB,aAAa,GAAGkX,YAAatZ,KAAK1C,MAAMyE,cAAc0+B,SAAU5/B,MAAO,CAACS,QAAiC,IAAxBtB,KAAKwJ,MAAM21B,SAAiB,QAAU,QAAS78B,WAAY,SAAC+P,GACtN,GAAkB,UAAdA,EAAM9X,IACN,OAAQ,EAAKiP,MAAM21B,UACf,KAAK,EACD,EAAKuB,UACL,MACJ,KAAK,EACD,EAAKC,WACL,MACJ,KAAK,EACD,EAAKC,YACL,MACJ,KAAK,EACD,EAAKC,iBACL,MACJ,KAAK,EACD,EAAKH,cAKnB,WACE,GAA4B,IAAxB,EAAKl3B,MAAM21B,UAA2C,IAAzB,EAAK31B,MAAM21B,UAA2C,IAAxB,EAAK31B,MAAM21B,UAAkB,EAAK31B,MAAM41B,UAAW,OAAO,0BAAMplC,GAAG,eAC5H,WACE,OAAO,EAAKwP,MAAM21B,UACd,KAAK,EACD,OAAO,EAAK7hC,MAAMyE,cAAc++B,YACpC,KAAK,EACD,OAAO,EAAKxjC,MAAMyE,cAAcg/B,YACpC,KAAK,EACD,OAAO,EAAKzjC,MAAMyE,cAAci/B,gBAP1C,IAFR,GAcF,0BAAMhnC,GAAG,mBAAmB6G,MAAO,CAACS,QAAiC,IAAxBtB,KAAKwJ,MAAM21B,SAAiB,OAAS,SAAUz9B,QAAS,WAC7F,OAAQ,EAAK8H,MAAM21B,UACf,KAAK,EACD,OAAO,EAAKh2B,SAAS,CAACg2B,SAAU,IACpC,QACI,OAAO,EAAKh2B,SAAS,CAACg2B,SAAU,OAGvC,WACD,OAAQ,EAAK31B,MAAM21B,UACf,KAAK,EACD,OAAO,EAAK7hC,MAAMyE,cAAck/B,WACpC,QACI,OAAO,EAAK3jC,MAAMyE,cAAcm/B,UALvC,IAST,yBAAKlnC,GAAG,oBACJ,yBAAKA,GAAG,UAAU0H,QAAS,WACvB,OAAQ,EAAK8H,MAAM21B,UACf,KAAK,EACD,OAAO,EAAKh2B,SAAS,CAACg2B,SAAU,IACpC,QACI,OAAO,EAAKh2B,SAAS,CAACg2B,SAAU,OAGvC,WACD,OAAQ,EAAK31B,MAAM21B,UACf,KAAK,EACD,OAAO,EAAK7hC,MAAMyE,cAAco/B,MACpC,QACI,OAAO,EAAK7jC,MAAMyE,cAAcq/B,SALvC,IASL,yBAAKpnC,GAAG,QAAQ0H,QAAS,WACrB,OAAQ,EAAK8H,MAAM21B,UACf,KAAK,EACD,EAAKuB,UACL,MACJ,KAAK,EACD,EAAKC,WACL,MACJ,KAAK,EACD,EAAKC,YACL,MACJ,KAAK,EACD,EAAKC,oBAIb,uBAAGt/B,UAAU,sBAAsBV,MAAO,CAACsM,aAAc,SAAY,0BAAMnT,GAAG,cAAe,WACzF,OAAO,EAAKwP,MAAM21B,UACd,KAAK,EACL,KAAK,EACD,OAAO,EAAK7hC,MAAMyE,cAAcs/B,IACpC,KAAK,EACD,OAAO,EAAK/jC,MAAMyE,cAAcu/B,QACpC,KAAK,EACD,OAAO,EAAKhkC,MAAMyE,cAAcw/B,MACpC,KAAK,EAEL,KAAK,EACD,OAAO,EAAKjkC,MAAMyE,cAAcy/B,SAZiD,KAgB/F,WACE,GAA4B,IAAxB,EAAKh4B,MAAM21B,SAAgB,OAAO,yBAAK59B,UAAU,cAAcvH,GAAG,OAAO0H,QAAS,EAAK+/B,SAAU,EAAKnkC,MAAMyE,cAAc2/B,MADhI,U,GApNPnzB,c,qBCpBbozB,I,MAAc3rC,EAAQ,MAE5BY,QAAQmhB,IAAI4pB,IAEK3rC,EAAQ,IAAzB,IAEM4rC,GAAiB,CACnBC,MAAM,EACNC,UAAU,EACVC,cAAeJ,GACfK,iBAAkB,CACdC,oBAAqB,mBAoBdC,OAhBf,SAAgB5kC,GACZ,OACI,yBAAKuD,MAAO,CAACmR,MAAO,OAAQC,OAAQ,OAAQ1K,SAAU,WAAYjG,QAAS,OAAQ6gC,eAAgB,SAAUjpB,WAAY,WACrH,kBAAC,KAAD,CAAQ7K,QAASuzB,GACb3vB,OAAQ,GACRD,MAAO,GACPowB,WAAW,EACXC,UAAU,IAEd,yBAAKxhC,MAAO,CAAC0G,SAAU,WAAY+6B,OAAQ,GAAIxwB,MAAO,8BAA+BtF,SAAU,GAAI6G,YAAY,GAAIlG,aAAa,KAAhI,sGCzBKnX,EAAQ,IAsCVusC,OApCf,SAAoBjlC,GAChB,OACI,yBAAKuD,MAAO,CAACmR,MAAO,OAAQC,OAAQ,OAAQ1K,SAAU,WAAYjG,QAAS,OAAQ6gC,eAAgB,SAAUjpB,WAAY,SAAUpH,MAAM,iCACrI,yBAAKjR,MAAO,CAACmC,YAAa,GAAIw/B,SAAU,MACpC,uDADJ,IACoC,6BAChC,yDAFJ,IAEsC,6BAClC,qEAHJ,IAGqD,6BACjD,4DAJJ,IAI4C,8BAE5C,yBAAK3hC,MAAO,CAACgR,WAAY,GAAI2wB,SAAU,MACnC,6BAEA,yBAAK3hC,MAAO,CAAC2L,SAAU,GAAIsF,MAAM,8BAAjC,yuB,+BC0CVpJ,GAAW1S,EAAQ,IAIjBmnB,GAAYhnB,UAAZgnB,QAwBRslB,YAAY,CAAEC,kBAAkB,I,IA8LjBC,G,kDA1LX,WAAYrlC,GAAQ,IAAD,sBACf,cAAMA,GAEN,IAAIyE,EAAgB,IAAI6gC,KAAiB,CACrCC,GAAI7sC,EAAQ,KACZ8sC,GAAI9sC,EAAQ,KACZ+sC,GAAI/sC,EAAQ,OAND,OAaX,EAAKwT,MAAQ,CAAC21B,SAAU,SAAU9+B,IAAK,GAAI2N,YAAa,GAAIjM,gBAAesH,UAAW,MAGlFiD,OAAO02B,WAAW,+BAA+BC,SACjDxD,IAAE,QAAQyD,cACVzD,IAAE,QAAQI,SAAS,iCAGnBJ,IAAE,QAAQyD,cACVzD,IAAE,QAAQI,SAAS,iCAIvB,EAAK/9B,SAAW,IAAIw4B,GAAS6I,IAC7B,EAAKrhC,SAASC,cAAgBA,EAE9B2G,GAAS,gBA7BE,E,2LAkCPolB,EAAO9tB,K,SAKLmjC,GAAOpmB,MAAM,CAAC/gB,aAAW,WAAY,Q,OAEvCiO,EAAO,IAAIC,IAAInJ,SAASmJ,KACxBC,EAAMF,EAAIG,SAASC,MAAM,KAI7B8S,GAAQ9kB,IAAI,CAACkC,IAAK,sBAAsB6a,KAAK,uCAAC,WAAeguB,GAAf,SAAArrC,EAAA,2DAClCqrC,EAAO1gC,MAD2B,OAGjC,aAHiC,OAiBrC,SAjBqC,OAwBrC,cAxBqC,8BAKlC1G,UAAgBqnC,oBAAmB,SAASC,GACnCA,GAIDH,GAAOlJ,IAAI,WAAYnM,EAAKhsB,SAAShM,gBAErCg4B,EAAK3kB,SAAS,CAACg2B,SAAU,WAAY9+B,IAAKijC,EAAKjjC,IAAK2N,YAAas1B,EAAKt1B,eALtE8f,EAAKyV,aAAa,CAACh2B,UAAU,cAPH,mCAmBtC41B,GAAOlJ,IAAI,OAAQnM,EAAKhsB,SAAShM,gBAEjCkK,KAAKmJ,SAAS,CAACg2B,SAAU,OAAQ9+B,IAAI,sBArBC,+BAyBvB,eAAX8J,EAAI,GAzB8B,wBA0BlCg5B,GAAOlJ,IAAI,WAAYnM,EAAKhsB,SAAShM,gBA1BH,KA2BlCkK,KA3BkC,UA2BqBmd,GAAQ9kB,IAAI,CAACkC,IAAK,wBA3BvC,2BA2BgEmI,MA3BhE,MA2BnBy8B,SAAU,YAAa91B,UA3BJ,WA2B7BF,SA3B6B,mDAgCvB,eAAXgB,EAAI,GACJnK,KAAKmJ,SAAS,CAACg2B,SAAU,OAAQ9+B,SAAI1G,KAErCwpC,GAAOlJ,IAAI,WAAYnM,EAAKhsB,SAAShM,gBACrCqnB,GAAQ/kB,IAAI,CAACmC,IAAK,oBAAqBmI,MAAO,cAC9Cya,GAAQ/kB,IAAI,CAACmC,IAAK,sBAAuBmI,MAAOyH,EAAI,KACpDnK,KAAKmJ,SAAS,CAACg2B,SAAU,YAAa91B,UAAUc,EAAI,MAtClB,sEAAD,sDA0C9CzE,KAAK1F,O,yIAICqM,GAAO,IAEZhM,EACAsL,EAHW,OAIf,OAAQU,EAAKkB,WAET,IAAK,QAOD,OALA41B,GAAOlJ,IAAI5tB,EAAKuzB,QAAS5/B,KAAK8B,SAAShM,gBAEvCqnB,GAAQ/kB,IAAI,CAACmC,IAAK,oBAAqBmI,MAAO2J,EAAKuzB,UAG3CvzB,EAAKuzB,SAET,IAAK,WAEDv/B,EAAMrE,UAAgB0jC,YAAYr/B,IAClCsL,EAAO3P,UAAgB0jC,YAAY1xB,YACnC,MACJ,QAEI3N,EAAM,oBACNsL,EAAO,GAIf3L,KAAKmJ,SAAS,CAACg2B,SAAU9yB,EAAKuzB,QAASv/B,MAAK2N,YAAarC,IACzD,MAEJ,IAAK,SAID,OAFAw3B,GAAOlJ,IAAI5tB,EAAKuzB,QAAS5/B,KAAK8B,SAAShM,gBACvCqnB,GAAQ/kB,IAAI,CAACmC,IAAK,oBAAqBmI,MAAO2J,EAAKuzB,UAC3CvzB,EAAKuzB,SAET,IAAK,WAEDv/B,EAAMrE,UAAgB0jC,YAAYr/B,IAClCsL,EAAO3P,UAAgB0jC,YAAY1xB,YACnC,MACJ,QAEI3N,EAAM,oBACNsL,EAAO,GAKf3L,KAAKmJ,SAAS,CAACg2B,SAAU,aAAc9+B,MAAK2N,YAAarC,IACzDw3B,GAAOhmC,GAAGu6B,QAAQr3B,EAAKosB,KAAKC,iBAAiBC,kBAAkB7B,SAAsD,OAA5C9qB,KAAK8B,SAASC,cAAcC,cAAuB,QAAS,GAAIhC,KAAK8B,SAASC,cAAcyhC,oBAAoBpuB,MAAK,SAAAlU,GAAC,OAAE,EAAKiI,SAAS,CAACg2B,SAAU9yB,EAAKuzB,QAASv/B,MAAK2N,YAAarC,OAI1P,MACJ,IAAK,SAEDwR,GAAQ/kB,IAAI,CAACmC,IAAK,oBAAqBmI,MAAO,SAE9C1G,UAAgBynC,UAEhBzjC,KAAKmJ,SAAS,CAACg2B,SAAU,OAAQxzB,KAAM,Q,+BAS/C,OAAQ3L,KAAKwJ,MAAM21B,UAEf,IAAK,SACD,OAAO,kBAAC,GAAD,MAEX,IAAK,OACD,OAAO,kBAAC,GAAD,CAAM7xB,SAAUtN,KAAKujC,aAAcxhC,cAAe/B,KAAKwJ,MAAMzH,gBAExE,IAAK,WACD,OAAO,kBAAC+G,GAAA,EAAD,CAAM3I,OAAQgjC,GAAQ9iC,IAAKL,KAAKwJ,MAAMnJ,IAAKiN,SAAUtN,KAAKujC,aAAczhC,SAAU9B,KAAK8B,SAAUkM,YAAahO,KAAKwJ,MAAMwE,YAAajM,cAAe/B,KAAKwJ,MAAMzH,cAAe4H,SAAU3J,KAAKwJ,MAAM21B,SAAUn0B,MAAOhP,UAAgB0jC,YAAY10B,QAC5P,IAAK,YACD,OAAO,kBAAClC,GAAA,EAAD,CAAM3I,OAAQgjC,GAAQ9iC,IAAKL,KAAKwJ,MAAMnJ,IAAKiN,SAAUtN,KAAKujC,aAAczhC,SAAU9B,KAAK8B,SAAUkM,YAAahO,KAAKwJ,MAAMwE,YAAajM,cAAe/B,KAAKwJ,MAAMzH,cAAe4H,SAAU3J,KAAKwJ,MAAM21B,SAAU91B,UAAWrJ,KAAKwJ,MAAMH,YAC/O,IAAK,OACD,OAAO,kBAACP,GAAA,EAAD,CAAM3I,OAAQgjC,GAAQ9iC,IAAKL,KAAKwJ,MAAMnJ,IAAKiN,SAAUtN,KAAKujC,aAAczhC,SAAU9B,KAAK8B,SAAUkM,YAAahO,KAAKwJ,MAAMwE,YAAajM,cAAe/B,KAAKwJ,MAAMzH,cAAe4H,SAAU3J,KAAKwJ,MAAM21B,WAE/M,IAAK,aACD,OAAO,kBAAC,GAAD,MACX,QAEI,OADAvoC,QAAQ2B,MAAR,yCAAgDyH,KAAKwJ,MAAM21B,WACpD,kBAAC,GAAD,CAAQuE,SAAS,EAAMnrC,MAAOyH,KAAKwJ,MAAM21B,gB,GAtL9C5wB,aChFEo1B,QACW,cAA7Br3B,OAAOs3B,SAASC,UAEe,UAA7Bv3B,OAAOs3B,SAASC,UAEhBv3B,OAAOs3B,SAASC,SAAS31B,MACvB,2DCbN41B,IAASh2B,OAAO,kBAAC,GAAD,MAAS/M,SAASqqB,eAAe,SDsI3C,kBAAmB7e,WACrBA,UAAUw3B,cAAcC,MAAM5uB,MAAK,SAAA6uB,GACjCA,EAAaC,iB","file":"static/js/main.b2f27c37.chunk.js","sourcesContent":["//\"use strict\";\n\n// Initialize Firebase Application\n// TODO TODO TODO !!!! Change this on deploy\n\nlet storageType;\nlet sqliteDB;\nlet memoryDB;\nlet firebaseDB, fsRef;\nlet requestRefresh;\n\nconst { FilesystemDirectory, FilesystemEncoding, Plugins } = require('@capacitor/core');\nconst { Device, Filesystem } = Plugins;\n\nlet readiness;\n\nconst initStorage = (payload, ...features) => {\n /*   // Firebase App (the core Firebase SDK) is always required and*/\n    //// must be listed before other Firebase SDKs\n    // const firebase = require(\"firebase/app\");\n\n    let loaders = [];\n\n    if (features.includes(\"firebase\")) {\n        const obj = require(\"./../secrets.json\");\n        if (process.env.NODE_ENV === \"development\")\n            payload.firebase.initializeApp(obj.dbkeys.debug);\n        else if (process.env.NODE_ENV === \"production\")\n            payload.firebase.initializeApp(obj.dbkeys.deploy);\n        [ firebaseDB, fsRef ] = [payload.firebase.firestore(), payload.firebase.firestore];\n        firebaseDB.enablePersistence({synchronizeTabs: true}).catch(console.error);\n        loaders.push(new Promise(function(resolve) {\n            return resolve(fsRef);\n        }));\n    } \n\n    if (features.includes(\"sqlite\")) {\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        // TODO: TODO: SQLITE 3!!\n        //const sqlite3 = require('sqlite3').verbose();   // see https://www.sqlitetutorial.net/sqlite-nodejs/connect/\n        const { FilesystemDirectory, Plugins } = require('@capacitor/core');\n        const { Device } = Plugins;\n        loaders.push((async function() {\n            const isMobile = (await Device.getInfo()).platform !== \"web\";\n            const dbRoot = isMobile ? FilesystemDirectory.Data : process.resourcesPath;\n            const dbPath = '/condution.db'; // TODO: use capacitor storage api\n            //sqliteDB = new sqlite3.Database(dbRoot+dbPath, (e)=>{if(e) console.error(e)});\n            return sqliteDB;\n        })());\n    } \n\n    if (features.includes(\"json\")) {\n        loaders.push((async function() {\n            const dbRoot = FilesystemDirectory.Data;\n            const dbPath = 'condution.json'; // TODO: use capacitor storage api\n            let contents;\n            try {\n                contents = (await Filesystem.readFile({\n                    path: dbPath,\n                    directory: dbRoot,\n                    encoding: FilesystemEncoding.UTF8\n                })).data;\n            } catch(e) {\n                contents = \"{}\";\n                await Filesystem.writeFile({\n                    path: dbPath,\n                    directory: dbRoot,\n                    data: JSON.stringify({}),\n                    encoding: FilesystemEncoding.UTF8\n                })\n            }\n            //contents = `{\"users\":{\"hard-storage-user\":{\"projects\":{\"asenuoth239p8\":{\"name\":\"bontehu\",\"is_sequential\":false,\"order\":0,\"parent\":\"\",\"top_level\":true, \"children\": []}}}}}`;\n            memoryDB = JSON.parse(contents);\n        })());\n    }\n\n    readiness = Promise.all(loaders);\n    return readiness;\n};\n\nconst useDb = (db, refresher=()=>{}) => {\n    storageType = db;\n    requestRefresh = refresher; // generate fresh refresher\n    return readiness;\n};\n\nconst [cRef, flush] = (() => {\n    //const { Plugins } = require('@capacitor/core');\n    //const { Network } = Plugins;\n\n    let cache = new Map();\n    let unsubscribeCallbacks = new Map();\n\n\n    function flush() {\n        /*\n         * Nukes the cache\n         *\n         * Used to log people out\n         *\n         * @return none\n         *\n         */\n        cache = new Map();\n        unsubscribeCallbacks = new Map();\n    }\n\n    function getFirebaseRef(path) {\n        /*\n         * Get a database reference.\n         *\n         * @param   path        A valid path array, see below.\n         * @return  reference   The generated reference\n         *\n         * Examples of valid path arrays:\n         *  [`collection/${docName}`] => DocumentReference\n         *  [\"collection\", \"docName\"] => DocumentReference\n         *  [\"collection\", \"docName\", \"collection\"] => CollectionReference\n         *  [\"collection\", [\"query\", \"params\"], [\"more\", \"params\"]] => Query\n         *  [\"collection\", [\"query\", \"params\"], \"docname\"] => DocumentReference\n         */\n        let ref = firebaseDB;\n        // special handling for first collection from root\n        console.assert(typeof path[0] === 'string');\n        if (path[0].includes('/'))\n            ref = ref.collectionGroup(path[0]);\n        else\n            ref = ref.collection(path[0]);\n        // generic handling\n        for (let nav of path.slice(1)) {\n            if (typeof nav === 'string') {\n                if (ref instanceof fsRef.DocumentReference) {\n                    ref = ref.collection(nav);\n                } else if (ref instanceof fsRef.Query) {\n                    ref = ref.doc(nav);\n                } else {\n                    throw new Error(\"Unknown reference\", ref.toString());\n                }\n            } else if (Array.isArray(nav)) {                // query, TODO shouldn't need to query\n                if (ref instanceof fsRef.Query) {\n                    ref = ref.where(...nav);\n                } else {\n                    throw new Error(\"Cannot query with\", nav.toString());\n                }\n                console.assert(ref instanceof fsRef.Query)\n            } else {\n                throw new Error(\"Cannot parse\", nav.toString());\n            }\n        }\n        return ref;\n    }\n\n    function generateRandomString() {\n        /*\n         * Generates a random string. Used for Ids.\n         * THIS IS NOT CRYPTOGRAPHICALLY SECURE\n         *\n         * @return  string  The random string\n         *\n         */\n\n        return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);\n    }\n\n    async function cachedRead(path) {   // TODO: make this also use hard storage, dupe for cachedSet\n        /*\n         * Get a snapshot from the cache.\n         *\n         * @param   path    The valid path to the reference\n         * @return  any     The result of calling `.get()` on the database reference\n         *\n         * Logic:\n         *  If the path is cached, return from cache.\n         *  Else, register a snapshot listener to update the cache\n         *      and return the newly cached value.\n         */\n        const TODOstring = JSON.stringify(path);        //  strigify to hash array\n        if (!cache.has(TODOstring)) {                   //  if path string isn't cached\n            // TODO: comment this out someday \\/\n            const ref = getFirebaseRef(path);           //  get the reference from the database\n            cache.set(TODOstring, ref.get());           //  save result in cache\n            unsubscribeCallbacks.set(TODOstring,        //  TODO: comment this code, someday\n                ref.onSnapshot({\n                    error: console.trace,\n                    next: (snap) => {\n                        cache.set(TODOstring, snap);\n                        requestRefresh();\n                    }\n                })\n            );\n        }\n        return await cache.get(TODOstring);\n    }\n\n    let diskJSONDB = function() {\n        const dbRoot = FilesystemDirectory.Data;\n        const dbPath = 'condution.json'; // TODO: use capacitor storage api\n        let read = async function() {\n            let contents = (await Filesystem.readFile({\n                path: dbPath,\n                directory: dbRoot,\n                encoding: FilesystemEncoding.UTF8\n            })).data;\n            memoryDB = JSON.parse(contents);\n        }\n\n        let write = async function() {\n            await Filesystem.writeFile({\n                path: dbPath,\n                directory: dbRoot,\n                data: JSON.stringify(memoryDB),\n                encoding: FilesystemEncoding.UTF8\n            })\n        }\n\n        return {read, write};\n    }()\n\n    async function storageRead(path) { \n        /*\n         * Read value in storage\n         *\n         * @param   path    The path to a reference\n         * @return  DocumentSnapshot    A snapshot of documents\n         *\n         */\n\n\n        let pointer;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Get an object pointer that's an option that\n             * looks like a noSQL object.  See JSON implimentation \n             * for tips and tricks.\n             *\n             */\n\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.some(i => {\n                pointer = pointer[i];\n                return (pointer === undefined); // https://stackoverflow.com/questions/2641347/short-circuit-array-foreach-like-calling-break\n            });\n        }\n\n        let parsed = (function parsePointer(pointer) {\n            /*\n             * Parse a dbPointerObject\n             *\n             * @param    pointer   A Javascript Object containing data\n             * @return   DocumentSnapshot   A Firebase-like Doc Snapshot\n             *\n             * TODO: also make this work for single documents, not just collections\n             */\n\n            let docRefs = [];\n            for (const docID in pointer) \n                docRefs.push({id: docID, data: ()=>Object.assign({}, pointer[docID]), exists: true}); // TODO TODO Better way to make JS objects immutable?\n            return {docs: docRefs}\n        })(pointer)\n        return parsed;\n    }\n\n    async function storageAdd(path, payload) {\n        /* \n         * Add a value\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            id = generateRandomString();\n            while (pointer[id]) id = generateRandomString();\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer[id] = payload;\n            await diskJSONDB.write();\n        }\n        return Object.assign({}, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n    async function storageDel(path) {\n        /* \n         * Sets the value of a document\n         *\n         * @param   path   Document Path\n         * @return  none\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            let task = path.pop();\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            delete pointer[task];\n            await diskJSONDB.write();\n        }\n    }\n\n    async function storageSet(path, payload) {\n        /* \n         * Sets the value of a document\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            let task = path.pop();\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer[task] = payload;\n            await diskJSONDB.write();\n        }\n        return Object.assign({}, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n    async function storageUpdate(path, payload) {\n        /* \n         * Object.assigns the value of a document\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer = Object.assign(pointer, payload);\n            await diskJSONDB.write();\n        }\n        return Object.assign(payload, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n\n\n    //async function storageSet(path, value) {\n        /*\n         * Set a value in the storage.\n         *\n         * @param   path    The valid path to reference\n         * @param   value   The value to set it to\n         * @return  none\n         */\n    //    const TODOstring = JSON.stringify(path);    // stringify array, please change someday\n    //    // update storage\n    //    if (decideWhetherToUseHardStorage())\n    //\n    //    // maintain the cache\n    //    if (!cache.has(TODOstring)) {\n    //        cache.set();\n    //    }\n    //    const ref = getFirebaseRef(path);\n    //    ref.set(value);\n    //    cache.set(stringPath, value)\n    //}\n\n    function cacheRef(path) {\n        /*\n         * Get a reference wrapper that forces cache hits.\n         * This function will be exposed to the outside world.\n         *\n         * @param   path    A valid path array.\n         * @return  wrapper A wrapper object around the expected reference.\n         */\n        //console.log(getFirebaseRef(path));\n        \n        \n        return Object.assign(\n            getFirebaseRef(path),               //  default methods from firebase reference\n            { get: () => cachedRead(path) }     //  read on get, read from cache if available\n        );\n    }\n    function TODO() { console.error('bad news bears'); }\n    function storageRef(path) {\n        /*\n         * Get a reference wrapper that acts as a database blackbox.\n         *\n         * @param   path    A valid path array.\n         * @return  wrapper A wrapper object around the expected reference.\n         */\n        //console.log(ref.add, ref.doc, ref.docs);\n        return {\n            id: TODO,\n            add: (payload) => storageAdd(path, payload),\n            //doc: not here, right?,\n            //docs: not here, rgiht?, // TODO: docs.filter\n            get: () => storageRead(path),\n            set: (payload) => storageSet(path, payload),\n            update: (payload) => storageUpdate(path, payload),\n            delete: () => storageDel(path),\n        };\n    }\n\n    function dispatch(...path) {\n        /* \n         * Get the currently initialized storageRef\n         *\n         * @return  storageRef/CacheRef\n         *\n         */\n\n        switch (storageType) {\n            case \"firebase\":\n                return cacheRef(path);\n            default:\n                return storageRef(path);\n        }\n    }\n\n    return [dispatch, flush];\n})();\n\nexport default {__init__:initStorage, cRef, flush, useDb};\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component, useState, useEffect } from 'react';\nimport '../Calendar.css';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the repeat UI\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\n\nfunction CalendarPopover(props) {\n    let [dateSelected, setDateSelected] = useState(props.initialDate ? props.initialDate : new Date());\n\n    let currentMonth = dateSelected.getMonth();\n    let currentYear = dateSelected.getFullYear();\n\n    let firstDayMonth = new Date(currentYear, currentMonth, 1);\n    let lastDayMonth = new Date(currentYear, currentMonth+1, 0);\n    let lastDayLastMonth = new Date(currentYear, currentMonth, 0);\n\n    let firstDayDayname = firstDayMonth.getDay()+1;\n\n    function __util_calculate_gradient(left, right, gradientAmount) {\n        let color1 = left;\n        let color2 = right;\n        let ratio = gradientAmount;\n        let hex = function(x) {\n            x = x.toString(16);\n            return (x.length == 1) ? '0' + x : x;\n        };\n\n        let r = Math.ceil(parseInt(color1.substring(0,2), 16) * ratio + parseInt(color2.substring(0,2), 16) * (1-ratio));\n        let g = Math.ceil(parseInt(color1.substring(2,4), 16) * ratio + parseInt(color2.substring(2,4), 16) * (1-ratio));\n        let b = Math.ceil(parseInt(color1.substring(4,6), 16) * ratio + parseInt(color2.substring(4,6), 16) * (1-ratio));\n\n        return hex(r) + hex(g) + hex(b);\n    }\n\n    let daysBefore = [...new Array(firstDayDayname-1)].map((_, i)=>{return {type: \"pre\", content: i+lastDayLastMonth.getDate()-(firstDayDayname-1)+1}});\n\n    let daysAfter = [...new Array((6-lastDayMonth.getDay()===-1)?6:6-lastDayMonth.getDay())].map((_, i)=>{return {type:\"post\", content:i+1}});\n\n    let contentDays = [...new Array(lastDayMonth.getDate())].map((_, i)=>{return {type:\"actual\", content:i+1}});\n\n    \n    let [heat, setHeat] = useState({});\n    \n \n    Array.prototype.max = function() {\n        return Math.max.apply(null, this);\n    };\n\n    \n    useEffect(()=>{\n        (async function() {\n            let map = new Map();\n            let hm = {};\n            let taskList = await props.engine.db.selectTasksInRange(props.uid, firstDayMonth, lastDayMonth, true);\n            taskList.forEach(([_, val])=>{\n                let date = new Date(val.due.seconds*1000);\n                date.setHours(0, 0, 0, 0);\n                let time = date.getDate();\n                if(map.has(time))\n                    map.set(time, map.get(time)+1);\n                else\n                    map.set(time, 1);\n            });\n            let values = Array.from(map.values());\n            if (values.length > 0) {\n                let max = values.max();\n                let style = getComputedStyle(document.body);\n                let hexes = values.map(e=>__util_calculate_gradient(style.getPropertyValue('--heatmap-darkest').trim().slice(1), style.getPropertyValue('--heatmap-lightest').trim().slice(1), e/max));\n                Array.from(map.keys()).forEach((e, i)=>{hm[e]=hexes[i]});\n            }\n            setHeat(hm);\n        })();\n    },[dateSelected, props.initialDate]);\n\n    // @NEEDLOC days of the week\n    return (\n        <IonModal ref={props.reference} isOpen={props.isShown} onDidDismiss={() => {if(props.onDidDismiss) props.onDidDismiss()}} style={{borderRadius: 5}} cssClass=\"calendar-popover\">\n            <div id=\"calendar-page-calendar-wrapper\" style={{display: \"inline-block\", ...props.style}}>\n                <div id=\"calendar-wrapper-popover\">\n                    <div id=\"calendar-daterow\">\n                        <span className=\"calendar-daterow-item\">Sun</span>\n                        <span className=\"calendar-daterow-item\">Mon</span>\n                        <span className=\"calendar-daterow-item\">Tues</span>\n                        <span className=\"calendar-daterow-item\">Wed</span>\n                        <span className=\"calendar-daterow-item\">Thu</span>\n                        <span className=\"calendar-daterow-item\">Fri</span>\n                        <span className=\"calendar-daterow-item\">Sat</span>\n                    </div>\n                    <div id=\"calendar-container\">\n                        {[...daysBefore,...contentDays,...daysAfter].map(i =>\n                        <span className={`calendar-container-item calendar-container-item-${i.type} calendar-container-item-${i.content}`} style={{\n                            backgroundColor: ((heat[i.content]&&i.type === \"actual\") ? \n                                `#${heat[i.content]}` :\n                                \"inherit\"),\n                            border:  (i.type === \"actual\" && i.content === dateSelected.getDate()) ? \n                            \"2px solid var(--decorative-light)\" :\n                            \"0\"}} \n\n                            onClick={(e)=>{\n\n                                let date;\n                                if (i.type === \"pre\")\n                                    date = new Date(lastDayLastMonth.getFullYear(), lastDayLastMonth.getMonth(), i.content);\n                                if (i.type === \"actual\") \n                                    date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth(), i.content);\n                                if (i.type === \"post\") \n                                    date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, i.content);\n                                setDateSelected(date);\n                                if (props.onDateSelected && !props.disableOnclick)\n                                    props.onDateSelected(date);\n                            }}>{i.content}</span>\n                        )}\n                    </div>\n                    <div id=\"calendar-infopanel\">\n                    <div className=\"calendar-infopanel-dateselected\">{dateSelected.getDate()}</div>\n                    <div className=\"calendar-infopanel-datename\">{dateSelected.toLocaleString('en-us', {  weekday: 'long' })}</div>\n                    <div className=\"calendar-infopanel-month\">{dateSelected.toLocaleString('en-us', { month: 'long' })}</div>\n                    <div className=\"calendar-infopanel-year\">{dateSelected.getFullYear()}</div>\n                    </div>\n                    {(()=>{\n                        if (props.useTime)\n                            return <div className=\"calendar-timeunit\">   \n                                <span className=\"calendar-time\">\n                                    Time\n                                </span>\n                                <input\n                                    className=\"calendar-timebox\"\n                                    defaultValue={dateSelected.toLocaleTimeString()}\n                                    onKeyPress={e => {\n                                        // TIMEHANDLING is here. If you are searching for that, it's here.\n                                        // But anyway, on change, parse the time\n                                        let d = chrono.parseDate(e.target.value); //TODO bad?\n                                        // ...and throw away the date \n                                        if (d && e.key === \"Enter\") {\n                                            let newDate = new Date(dateSelected.getFullYear(), dateSelected.getMonth(), dateSelected.getDate(), d.getHours(), d.getMinutes(), d.getSeconds());\n                                            setDateSelected(newDate); // TODO make this with the onChange API\n                                            e.target.value = newDate.toLocaleTimeString();\n                                            if (props.onDateSelected && !props.disableOnclick)\n                                                props.onDateSelected(newDate);\n\n                                        }\n                                    }}\n                                />\n                            </div>\n                    })()}\n                    <div id=\"calendar-tools\">\n                    <a className=\"fas fa-caret-left calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()-1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <a className=\"fas fa-caret-right calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <div className=\"calendar-today\" onClick={()=>{\n                        setDateSelected(new Date());\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(new Date());\n\n                    }}>{props.gruntman.localizations.clbtd}</div>\n                        <div className=\"calendar-today\" style={{marginRight: 10, float: \"right\"}} onClick={()=>{\n                            if (dateSelected)\n                                props.onDateSelected(dateSelected);\n                            props.onDidDismiss()\n                        }}>Done</div>\n                </div>\n                </div>\n            </div>\n        </IonModal>\n    )\n}\n\nfunction CalendarUnit(props) {\n    let [dateSelected, setDateSelected] = useState(props.initialDate ? props.initialDate : new Date());\n\n    let currentMonth = dateSelected.getMonth();\n    let currentYear = dateSelected.getFullYear();\n\n    let firstDayMonth = new Date(currentYear, currentMonth, 1);\n    let lastDayMonth = new Date(currentYear, currentMonth+1, 0);\n    let lastDayLastMonth = new Date(currentYear, currentMonth, 0);\n\n    let firstDayDayname = firstDayMonth.getDay()+1;\n\n    function __util_calculate_gradient(left, right, gradientAmount) {\n        let color1 = left;\n        let color2 = right;\n        let ratio = gradientAmount;\n        let hex = function(x) {\n            x = x.toString(16);\n            return (x.length == 1) ? '0' + x : x;\n        };\n\n        let r = Math.ceil(parseInt(color1.substring(0,2), 16) * ratio + parseInt(color2.substring(0,2), 16) * (1-ratio));\n        let g = Math.ceil(parseInt(color1.substring(2,4), 16) * ratio + parseInt(color2.substring(2,4), 16) * (1-ratio));\n        let b = Math.ceil(parseInt(color1.substring(4,6), 16) * ratio + parseInt(color2.substring(4,6), 16) * (1-ratio));\n\n        return hex(r) + hex(g) + hex(b);\n    }\n\n    let daysBefore = [...new Array(firstDayDayname-1)].map((_, i)=>{return {type: \"pre\", content: i+lastDayLastMonth.getDate()-(firstDayDayname-1)+1}});\n\n    let daysAfter = [...new Array((6-lastDayMonth.getDay()===-1)?6:6-lastDayMonth.getDay())].map((_, i)=>{return {type:\"post\", content:i+1}});\n\n    let contentDays = [...new Array(lastDayMonth.getDate())].map((_, i)=>{return {type:\"actual\", content:i+1}});\n\n    \n    let [heat, setHeat] = useState({});\n    \n \n    Array.prototype.max = function() {\n        return Math.max.apply(null, this);\n    };\n\n    \n    useEffect(()=>{\n        (async function() {\n            let map = new Map();\n            let hm = {};\n            let taskList = await props.engine.db.selectTasksInRange(props.uid, firstDayMonth, lastDayMonth, true);\n            taskList.forEach(([_, val])=>{\n                let date = new Date(val.due.seconds*1000);\n                date.setHours(0, 0, 0, 0);\n                let time = date.getDate();\n                if(map.has(time))\n                    map.set(time, map.get(time)+1);\n                else\n                    map.set(time, 1);\n            });\n            let values = Array.from(map.values());\n            if (values.length > 0) {\n                let max = values.max();\n                let style = getComputedStyle(document.body);\n                let hexes = values.map(e=>__util_calculate_gradient(style.getPropertyValue('--heatmap-darkest').trim().slice(1), style.getPropertyValue('--heatmap-lightest').trim().slice(1), e/max));\n                Array.from(map.keys()).forEach((e, i)=>{hm[e]=hexes[i]});\n            }\n            setHeat(hm);\n        })();\n    },[dateSelected, props.initialDate]);\n    return (\n        <div id=\"calendar-page-calendar-wrapper\" style={{display: \"inline-block\", ...props.style}}>\n            <div id=\"calendar-wrapper-popover\">\n                <div id=\"calendar-daterow\">\n                    <span className=\"calendar-daterow-item\">Sun</span>\n                    <span className=\"calendar-daterow-item\">Mon</span>\n                    <span className=\"calendar-daterow-item\">Tues</span>\n                    <span className=\"calendar-daterow-item\">Wed</span>\n                    <span className=\"calendar-daterow-item\">Thu</span>\n                    <span className=\"calendar-daterow-item\">Fri</span>\n                    <span className=\"calendar-daterow-item\">Sat</span>\n                </div>\n                <div id=\"calendar-container\">\n                    {[...daysBefore,...contentDays,...daysAfter].map(i =>\n                    <span className={`calendar-container-item calendar-container-item-${i.type} calendar-container-item-${i.content}`} style={{\n                        backgroundColor: ((heat[i.content]&&i.type === \"actual\") ? \n                            `#${heat[i.content]}` :\n                            \"inherit\"),\n                        border:  (i.type === \"actual\" && i.content === dateSelected.getDate()) ? \n                        \"2px solid var(--decorative-light)\" :\n                        \"0\"}} \n\n                        onClick={(e)=>{\n\n                            let date;\n                            if (i.type === \"pre\")\n                                date = new Date(lastDayLastMonth.getFullYear(), lastDayLastMonth.getMonth(), i.content);\n                            if (i.type === \"actual\") \n                                date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth(), i.content);\n                            if (i.type === \"post\") \n                                date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, i.content);\n                            setDateSelected(date);\n                            if (props.onDateSelected && !props.disableOnclick)\n                                props.onDateSelected(date);\n                        }}>{i.content}</span>\n                    )}\n                </div>\n                <div id=\"calendar-infopanel\">\n                    <div className=\"calendar-infopanel-dateselected\">{dateSelected.getDate()}</div>\n                    <div className=\"calendar-infopanel-datename\">{dateSelected.toLocaleString(props.gruntman.localizations.getLanguage(), {  weekday: 'long' })}</div>\n                    <div className=\"calendar-infopanel-month\">{dateSelected.toLocaleString(props.gruntman.localizations.getLanguage(), { month: 'long' })}</div>\n                    <div className=\"calendar-infopanel-year\">{dateSelected.getFullYear()}</div>\n                </div>\n                {(()=>{\n                    if (props.useTime)\n                        return <div className=\"calendar-timeunit\">   \n                            <span className=\"calendar-time\">\n                                Time\n                            </span>\n                            <input\n                                className=\"calendar-timebox\"\n                                defaultValue={dateSelected.toLocaleTimeString()}\n                                onKeyPress={e => {\n                                    // TIMEHANDLING is here. If you are searching for that, it's here.\n                                    // But anyway, on change, parse the time\n                                    let d = chrono.parseDate(e.target.value); //TODO bad?\n                                    // ...and throw away the date \n                                    if (d && e.key === \"Enter\") {\n                                        let newDate = new Date(dateSelected.getFullYear(), dateSelected.getMonth(), dateSelected.getDate(), d.getHours(), d.getMinutes(), d.getSeconds());\n                                        setDateSelected(newDate); // TODO make this with the onChange API\n                                        e.target.value = newDate.toLocaleTimeString();\n                                        if (props.onDateSelected && !props.disableOnclick)\n                                            props.onDateSelected(newDate);\n\n                                    }\n                                }}\n                            />\n                        </div>\n                })()}\n                <div id=\"calendar-tools\">\n                    <a className=\"fas fa-caret-left calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()-1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <a className=\"fas fa-caret-right calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <div className=\"calendar-today\" onClick={()=>{\n                        setDateSelected(new Date());\n                        if (props.onDateSelected && !props.disableOnclick)\n                            props.onDateSelected(new Date());\n\n                    }}>{props.gruntman.localizations.clbtd}</div>\n                    <div className=\"calendar-today\" style={{marginRight: 10, float: \"right\"}} onClick={()=>{\n                        if (dateSelected)\n                            props.onDateSelected(dateSelected);\n                        props.onDidDismiss()\n                    }}>Done</div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\n\nexport default CalendarPopover;\nexport { CalendarUnit };\n\n","import React, { useState, useRef, useEffect } from 'react';\nimport { useDrag } from 'react-use-gesture'\nimport { useSprings, animated, interpolate } from 'react-spring'\n\nimport '../Projects.css';\n\nimport Task from './Task';\n\n\n\n/*\n *\n * Hello human,\n * good afternoon.\n *\n * I am clumsy sortable!\n *\n * Use me to sort things\n * and make sortable task lists\n *\n * TODO => put actual documentation here\n *\n * So there.\n *\n * @jemoka\n *\n */\n\nconst SortableTaskList = (props)=>{\n\n    const itemHeight = 42; // height of single item to calculate animation\n\n    const [activelyDragging, setActivelyDragging] = useState([]); // we are actively dragging...\n\n    const order = useRef();\n    const moveApplied = useRef();\n    const currentIndex = useRef();\n    const dragEnvelope = useRef();\n    const [dragEnabled, setDragEnabled] = useState(true);\n\n\n    let objRefs = props.list.map(_ => React.createRef());\n\n    const getAnimationDestinationFromIndex = (activeIndex, mY, currentOrder, noAnim, down) => (indx) => {\n        return activeIndex === indx ?  {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight + (down ? mY-((currentOrder.indexOf(indx)-indx)*itemHeight):0), // number of tasks the index is out of place * height of task + cursor movement => correct dragged position offset\n                zIndex:1000, \n                config: {tension: 100, friction: 2, mass: 1, clamp: true},\n            immediate:noAnim\n        } : {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight,  // number of tasks the index is out of place * height of task => correct adjustment to position\n                zIndex:0, \n            immediate:noAnim\n        }; // if the index is the one that's being dragged, move up by howevermuch needed\n    }\n\n\n    //const [{ x, y }, set] = useSpring(() => ({ x: 0, y: 0 }))\n    const [springs, set, stop] = useSprings(props.list.length, getAnimationDestinationFromIndex(-1, 0, order.current, true))\n\n    // initialize presistant refs\n    useEffect(() => {\n        order.current = props.list.map((_, i)=>i);\n        moveApplied.current = 0; // moves applied\n        currentIndex.current = 0; // currentIndex\n        set(getAnimationDestinationFromIndex(-1, 0, order.current, true)) // initialize the animation function\n    }, [props.list, props.uid]);\n\n    // Set the drag hook and define component movement based on gesture data\n    const bind = useDrag( (async function ({ args: [index], down, movement: [_, movementY] , first, last, tap}) {\n\n        if (first) {\n            currentIndex.current = index;\n\n            if (!activelyDragging.includes(index))\n                setActivelyDragging([...activelyDragging, index]);\n\n            if (props.onSortStart)\n                props.onSortStart({sorted: index, sortedID: props.list[index], list: props.list});\n        }\n\n        let moveBy = Math.floor(movementY/itemHeight) // the amount of tasks the active task moved over\n        moveBy = moveBy <= -index ? -index : (moveBy >= (props.list.length-index) ? props.list.length-1 : moveBy); // clip moveby by the total task it could possibly move over\n\n        if (Math.abs(moveBy) > 0 && moveBy!==moveApplied.current) {\n            // @enquierer crushing @jemoka's hopes and dreams\n            let newIndex = index+moveBy;\n            order.current.splice(currentIndex.current, 1); // splice element out\n            order.current.splice(newIndex, 0, index); // splice the index in, noting that we just took something out\n            moveApplied.current = moveBy;\n            currentIndex.current = newIndex;\n        }\n\n        //if (!tap) { // TODO THIS LINE IS EVIL\n            set(getAnimationDestinationFromIndex(index, movementY, order.current, false, down)) // set the animation function\n        //} // TODO CANNOT UNCOMMENT, OR YOU RISK BREAKING THE DATEPICKER\n        // As to why something in Sortable checking for taps breaks the datepicker, I blame Chuck Norris. Why not?\n\n\n        if (last) {// if we are done dragging\n            setTimeout(()=> setActivelyDragging(activelyDragging.filter(x=>x!==index)), 100); // wait for the lovely event bubble and say we are done\n            moveApplied.current = 0; // moves applied\n            currentIndex.current = 0; // currentIndex\n            await props.gruntman.do( // call a gruntman function\n                \"macro.applyOrder\", { \n                    uid: props.uid, // pass it the things vvv\n                    order: order.current, \n                    items: props.list.map(i=>{return {type:\"task\", content:i}}),\n                }\n            );\n\n            if (props.onSortEnd)\n                props.onSortEnd({sorted: index, sortedID: props.list[index], newOrder: order.current, movementY, moveBy, list:props.list});\n\n        }\n\n\n    }).bind(this), {drag:{delay:100}, filterTaps: true, enabled: dragEnabled})\n\n    return props.list.map((id, i) => {\n        let anim = springs[i];\n        return (\n            <div ref={(e)=>{dragEnvelope.current=e}}>\n            <animated.div \n                {...bind(i)} \n                className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                style={{\n                    borderRadius: 7,\n                    position: \"relative\",\n                    cursor: \"pointer\",\n                    zIndex: anim.zIndex,  // z-index is 1000 during drag\n                    transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                }} \n                onClickCapture={(e)=>{\n                    if (activelyDragging.includes(i)){ // if we are still dragging\n                        e.stopPropagation(); // no clicky!\n                    }\n                }}\n            >\n                <Task ref={objRefs[i]} tid={id} key={id+\"-\"+props.prefix} datapack={props.datapack} uid={props.uid} engine={props.engine} gruntman={props.gruntman} availability={props.availability[id]} envelope={dragEnvelope} setDragEnabled={setDragEnabled} />\n            </animated.div>\n            </div>\n    )\n    });\n}\n\nconst SortableProjectList = (props)=>{\n\n    const itemHeight = 42; // height of single item to calculate animation\n\n    const [activelyDragging, setActivelyDragging] = useState([]); // we are actively dragging...\n\n    const order = useRef();\n    const moveApplied = useRef();\n    const currentIndex = useRef();\n    const dragEnvelope = useRef();\n    const [dragEnabled, setDragEnabled] = useState(true);\n\n\n    let objRefs = props.list.map(_ => React.createRef());\n\n    const getAnimationDestinationFromIndex = (activeIndex, mY, currentOrder, noAnim, down) => (indx) => {\n        return activeIndex === indx ?  {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight + (down ? mY-((currentOrder.indexOf(indx)-indx)*itemHeight):0), // number of tasks the index is out of place * height of task + cursor movement => correct dragged position offset\n                zIndex:1000, \n                config: {tension: 100, friction: 2, mass: 1, clamp: true},\n            immediate:noAnim\n        } : {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight,  // number of tasks the index is out of place * height of task => correct adjustment to position\n                zIndex:0, \n            immediate:noAnim\n        }; // if the index is the one that's being dragged, move up by howevermuch needed\n    }\n\n\n    //const [{ x, y }, set] = useSpring(() => ({ x: 0, y: 0 }))\n    const [springs, set, stop] = useSprings(props.list.length, getAnimationDestinationFromIndex(-1, 0, order.current, true))\n\n    // initialize presistant refs\n    useEffect(() => {\n        order.current = props.list.map((_, i)=>i);\n        moveApplied.current = 0; // moves applied\n        currentIndex.current = 0; // currentIndex\n        set(getAnimationDestinationFromIndex(-1, 0, order.current, true)) // initialize the animation function\n    }, [props.list, props.uid]);\n\n    // Set the drag hook and define component movement based on gesture data\n    const bind = useDrag( (async function ({ args: [index], down, movement: [_, movementY] , first, last, tap}) {\n\n        if (first) {\n            currentIndex.current = index;\n\n            if (!activelyDragging.includes(index))\n                setActivelyDragging([...activelyDragging, index]);\n\n            if (props.onSortStart)\n                props.onSortStart({sorted: index, sortedID: props.list[index], list: props.list});\n        }\n\n        let moveBy = Math.floor(movementY/itemHeight) // the amount of tasks the active task moved over\n        moveBy = moveBy <= -index ? -index : (moveBy >= (props.list.length-index) ? props.list.length-1 : moveBy); // clip moveby by the total task it could possibly move over\n\n        if (Math.abs(moveBy) > 0 && moveBy!==moveApplied.current) {\n            // @enquierer crushing @jemoka's hopes and dreams\n            let newIndex = index+moveBy;\n            order.current.splice(currentIndex.current, 1); // splice element out\n            order.current.splice(newIndex, 0, index); // splice the index in, noting that we just took something out\n            moveApplied.current = moveBy;\n            currentIndex.current = newIndex;\n        }\n\n        //if (!tap) { // TODO THIS LINE IS EVIL\n            set(getAnimationDestinationFromIndex(index, movementY, order.current, false, down)) // set the animation function\n        //} // TODO CANNOT UNCOMMENT, OR YOU RISK BREAKING THE DATEPICKER\n        // As to why something in Sortable checking for taps breaks the datepicker, I blame Chuck Norris. Why not?\n\n\n        if (last) {// if we are done dragging\n            setTimeout(()=> setActivelyDragging(activelyDragging.filter(x=>x!==index)), 100); // wait for the lovely event bubble and say we are done\n            moveApplied.current = 0; // moves applied\n            currentIndex.current = 0; // currentIndex\n            await props.gruntman.do( // call a gruntman function\n                \"macro.applyOrder\", { \n                    uid: props.uid, // pass it the things vvv\n                    order: order.current, \n                    items: props.list.map(i=>{return {type:i.type, content:i.type===\"project\"?i.content.id:i.content}}),\n                }\n            );\n\n            if (props.onSortEnd)\n                props.onSortEnd({sorted: index, sortedID: props.list[index], newOrder: order.current, movementY, moveBy, list:props.list});\n\n        }\n\n\n    }).bind(this), {drag:{delay:100}, filterTaps: true, enabled: dragEnabled})\n\n    return props.list.map((item, i) => {\n        let anim = springs[i];\n        if (item.type === \"task\")\n            return (\n                <div ref = {dragEnvelope}>\n                    <animated.div \n                        {...bind(i)} \n                        className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                        style={{\n                            borderRadius: 7,\n                            position: \"relative\",\n                            cursor: \"pointer\",\n                            zIndex: anim.zIndex,  // z-index is 1000 during drag\n                            transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                        }} \n                        onClickCapture={(e)=>{\n                            if (activelyDragging.includes(i)){ // if we are still dragging\n                                e.stopPropagation(); // no clicky!\n                            }\n                        }}\n                    >\n                        <Task ref={props.activeTaskID===item.content ? props.activeTaskRef : objRefs[i]} tid={item.content} key={item.content+\"-\"+props.prefix} datapack={props.datapack} uid={props.uid} engine={props.engine} gruntman={props.gruntman} availability={props.availability[item.content]} envelope={dragEnvelope} setDragEnabled={setDragEnabled}/>\n                    </animated.div>\n                </div>\n            )\n        else if (item.type === \"project\") {\n            return (\n            <div ref={dragEnvelope}>\n                <animated.div \n                    {...bind(i)} \n                    className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                    style={{\n                        borderRadius: 7,\n                        position: \"relative\",\n                        cursor: \"pointer\",\n                        zIndex: anim.zIndex,  // z-index is 1000 during drag\n                        transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                    }} \n                    onClickCapture={(e)=>{\n                        if (activelyDragging.includes(i)){ // if we are still dragging\n                            e.stopPropagation(); // no clicky!\n                        }\n                    }}\n                >\n                    <a className=\"subproject\" style={{opacity:props.availability[item.content.id]?\"1\":\"0.35\"}} onClick={()=>{props.paginate(\"projects\", item.content.id);props.history.push(`/projects/${item.content.id}`)}}><div><i className=\"far fa-arrow-alt-circle-right subproject-icon\"/><div style={{display: \"inline-block\"}}>{props.possibleProjects[item.content.id]}</div></div></a>\n                </animated.div>\n            </div>\n            )\n        }\n    });\n}\n\nexport { SortableTaskList, SortableProjectList };\n\n\n\n","// A whole lotta imports\n\n\n// Ionic components\nimport { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, isPlatform, IonToast } from '@ionic/react';\nimport { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, calendar } from 'ionicons/icons';\n\n// Routing\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\n\n// Like, your heart and soul\nimport React, { Component } from 'react';\n\n// Cool components that we need\nimport Upcoming from './Upcoming';\nimport Calendar from './Calendar';\nimport Completed from './Completed';\nimport Perspectives from './Perspectives';\nimport Projects from './Projects';\nimport WorkspaceWelcome from './WorkspaceWelcome';\nimport ABTIB from './Components/FloatingActionButton';\nimport Keybinds from './Components/KeybindManager';\nimport ReleaseNotesModal from './Components/ReleaseNotesModal';\n\n// Our very own CSS\nimport './Home.css';\n\n// Tootips\nimport ReactTooltip from 'react-tooltip';\n\n// autobind those functions\nconst autoBind = require('auto-bind/react');\nconst history = isPlatform(\"electron\") ? createHashHistory() : createBrowserHistory();\n\n/* \n *\n * Hello, human\n * Good morning\n * Read me please.\n *\n * Use the **state**'s itemSelected \n *     to manage the menu\n * use the **React Router URL** \n *     to manage the page\n *\n * Otherwise, unreload-reload won't work.\n *\n * Thanks. @jemoka.\n *\n */\n\n// Welp. The Home.\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            projects:[], // list of top level projects\n            perspectives:[], // list of perspectives\n            itemSelected:{item:\"upcoming\", id:undefined}, // so what did we actually select\n            isWorkspace:false, // current workspace\n            workspace: this.props.authType===\"workspace\" ? this.props.workspace : this.props.uid, // current workspace/uid\n            isWorkspaceRequestShown: [false, null] // is the workspace toast shown\n        };\n\n        if (this.state.isWorkspace || this.props.authType===\"workspace\")\n            this.props.engine.workspaceify()\n        else\n            this.props.engine.userlandify()\n\n\n        this.props.gruntman.registerGlobalRefresher(this.refresh.bind(this));\n\n        // AutoBind!\n        autoBind(this);\n\n        this.abtibRef = React.createRef();\n\n        this.menu = React.createRef();\n    }\n\n    switch = (workspaceType, id=this.props.uid) => { \n        if (workspaceType === \"workspace\")\n            this.props.engine.workspaceify();\n        else\n            this.props.engine.userlandify();\n        this.setState({isWorkspace: workspaceType===\"workspace\", workspace:id});\n    }\n\n    paginate = (to, id) => this.setState({itemSelected:{item:to ,id}}) // Does not actually paginate; instead, it... uh... sets the highlighting of the menu\n\n    componentDidMount() {\n        // This is, indeed, the view\n        // Get the current URI to set which view is selected\n        let url = (new URL(document.URL))\n        let uri = url.pathname.split(\"/\");\n        let hash = url.hash.split(\"/\");\n        if (uri[1] === \"\")\n            this.setState({itemSelected:{item:\"upcoming\", id:\"\"}});\n        else if (isPlatform(\"electron\"))\n            this.setState({itemSelected:{item:hash[1], id:hash[2]}});\n        else\n            this.setState({itemSelected:{item:uri[1], id:uri[2]}});\n\n        this.refresh()\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevState.to !== this.state.to && this.state.to !== undefined)\n            this.setState({sends:{to:undefined, id:undefined}})\n\n        if (prevState.workspace !== this.state.workspace) \n            this.refresh();\n\n        /*            if (this.state.isWorkspace)*/\n        //this.props.engine.workspaceify()\n        //else\n        /*this.props.engine.userlandify()*/\n    }\n\n    async refresh() {\n        // Load the top level projects and perspectives\n        // to set into the state and to add to the menu\n        let tlp = await this.props.engine.db.getTopLevelProjects(this.state.workspace);\n        let psp = await this.props.engine.db.getPerspectives(this.state.workspace);\n\n        if (this.props.authType === \"firebase\") {\n            let invites = await this.props.engine.db.getInvitations(this.props.email);\n            let top = invites.sort((a, b)=>a.time.seconds<b.time.seconds)[invites.length-1];\n            if (top) {\n                this.props.gruntman.lockUpdates();\n                if (top.type === \"revoke\") {\n                    let newWorkspaces = (await this.props.engine.db.getWorkspaces(this.props.uid)).filter(e=>(e != top.workspace));\n                    await this.props.engine.db.updateWorkspaces(this.props.uid, newWorkspaces);\n                    await invites.filter(i=>i.workspace===top.workspace).forEach(i=>this.props.engine.db.resolveInvitation(i.id, this.props.email)) // simply accept all rejections and anything that happened before, and...\n                    this.switch(\"userland\");\n                    // TODO potenially prompt the user\n                } else if (top.type === \"invite\")\n                    this.setState({isWorkspaceRequestShown: [true, [top.workspace,  (await this.props.engine.db.getWorkspace(top.workspace)).meta.name, top.id]]});\n                this.props.gruntman.unlockUpdates();\n            }\n        }\n\n        this.setState({projects: tlp[2], perspectives:psp[2]});\n    }\n\n\n\n\n    render() {\n        const Router = isPlatform(\"electron\") ? IonReactHashRouter : IonReactRouter; // Router workaround for electron\n        return (\n            <IonPage>\n                {/* The central router that controls the routing of views */}\n                <Router history={history}>\n                    <Keybinds \n                        paginate={this.paginate} \n                        ref={this.keybindRef} \n                        perspectives={this.state.perspectives}\n                        projects={this.state.projects}\n                        abtib={this.abtibRef} \n                        engine={this.props.engine} \n                        uid={this.state.workspace} \n                        gruntman={this.props.gruntman} \n                    />\n                    {/* OoIp */}\n                    <ReactTooltip />\n                    {/* App container */}\n                    <IonContent noBounce forceOverscroll={false}>\n                        {/* Menu pane to control mobile view splitting */}\n                        <IonSplitPane id=\"main-split\" contentId=\"main\" mode=\"md\">\n                            {/* The left: menu! */}\n                            <IonMenu id=\"main-menu\" contentId=\"main\" ref={this.menu}>\n                                <br />\n                                <IonContent id=\"menu-content\" className={(()=>{\n                                    if (!isPlatform(\"electron\")) // if we are not running electron\n                                        return \"normal\"; // normal windowing proceeds\n                                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                                        return \"darwin\"; // frameless setup\n                                    }\n                                    else if (process.platform === \"win32\") // windows\n                                        return \"windows\"; // non-frameless\n\n                                })()}>\n                                    {/* === Built Ins: upcoming + completed == */}\n                                    {/* Upcoming button + link */}\n                                    <Link to=\"/upcoming\" onClick={()=>this.setState({itemSelected:{item:\"upcoming\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Upcoming button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"upcoming\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20}} icon={chevronForwardCircle} />{this.props.localizations.upcoming}</div>\n                                    </Link>\n\n                                    {/* Completed button + link */}\n                                    <Link to=\"/completed\" onClick={()=>this.setState({itemSelected:{item:\"completed\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Completed button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"completed\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20, transform: \"translateY(3.5px)\"}} icon={checkmarkCircle} />{this.props.localizations.completed}</div>\n                                    </Link>\n\n                                    {/* Calendar button + link */}\n                                    <Link to=\"/calendar\" onClick={()=>this.setState({itemSelected:{item:\"calendar\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Calendar button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"calendar\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20, transform: \"translateY(3.5px)\"}} icon={calendar} />{this.props.localizations.calendar}</div>\n                                    </Link>\n\n                                    {/* === Perspectives == */}\n                                    <div className=\"menu-sublabel menu-decoration\">{this.props.localizations.perspectives} <a onClick={()=>{\n                                        if (this.menu.current)\n                                            this.menu.current.close();\n                                        let f = (async function() { // minification breaks double-called anonomous functions, so we must declare them explicitly\n                                            let npid = (await this.props.gruntman.do(\n                                                \"perspective.create\", {\n                                                    uid: this.state.workspace,\n                                                },\n                                            )).pid;\n                                            history.push(`/perspectives/${npid}/do`);\n                                            this.paginate(\"perspectives\", npid);\n                                            this.refresh();\n                                        }).bind(this);\n                                        f();\n\n                                    }} className=\"fa fa-plus add\"></a></div>\n\n                                    {/* === Perspective button + link == */}\n                                    {this.state.perspectives.map((psp) => {\n                                        return (\n                                            <Link key={psp.id} to={`/perspectives/${psp.id}`} onClick={()=>this.setState({itemSelected:{item:\"perspectives\", id:psp.id}})}> {/* Link to trigger router */}\n                                                {/* Perspective button */}\n                                                <div className={\"menu-item \"+(this.state.itemSelected.item === \"perspectives\" && this.state.itemSelected.id === psp.id ? \"menu-item-selected\" : \"\")}><i className=\"fas fa-layer-group\" style={{paddingRight: 2}}></i> {psp.name}</div> \n                                            </Link>\n                                        )\n                                    })}\n\n\n                                    {/* === Projects == */}\n                                    <div className=\"menu-sublabel menu-decoration\">{this.props.localizations.projects}<a onClick={()=>{\n                                        if (this.menu.current)\n                                            this.menu.current.close();\n                                        let f = (async function() { // minification breaks double-called anonomous functions, so we must declare them explicitly\n                                            let npid = (await this.props.gruntman.do(\n                                                \"project.create\", {\n                                                    uid: this.state.workspace,\n                                                },\n                                            )).pid;\n                                            history.push(`/projects/${npid}/do`);\n                                            this.paginate(\"projects\", npid);\n                                            this.refresh();\n                                        }).bind(this);\n                                        f();\n\n                                    }} className=\"fa fa-plus add\"></a></div>\n                                    {/* === Project Contents == */}\n                                    {this.state.projects.map((proj) => {\n                                        return (\n                                            <Link key={proj.id} to={`/projects/${proj.id}`} onClick={()=>this.setState({itemSelected:{item:\"projects\", id:proj.id}})}> {/* Link to trigger router */}\n                                                {/* Perspective button */}\n                                                <div className={\"menu-item \"+(this.state.itemSelected.item === \"projects\" && this.state.itemSelected.id === proj.id ? \"menu-item-selected\" : \"\")}><IonIcon icon={listOutline}/>{proj.name}</div></Link> \n                                        )                            \n                                    })}\n\n                                </IonContent>\n\n                                {/* Logout button */}\n                                <div className=\"menu-item\" id=\"logout\" onClick={()=>{history.push(`/`);this.props.dispatch({operation: \"logout\"})}}><i className=\"fas fa-snowboarding\" style={{paddingRight: 5}} />{this.props.localizations.logout}</div>\n                            </IonMenu>\n                            <IonPage id=\"main\">\n                                {/* raise a glass to Workspace Add */}\n                                <IonToast\n                                    mode=\"ios\"\n                                    cssClass=\"workspace-toast\"\n                                    isOpen={this.state.isWorkspaceRequestShown[0]}\n                                    message={`Invitation to join workspace ${this.state.isWorkspaceRequestShown[1]?this.state.isWorkspaceRequestShown[1][1]:\"\"}`}\n                                    position=\"bottom\"\n                                    buttons={[\n                                        {\n                                            text: 'Reject',\n                                                role: 'cancel',\n                                                handler:  (async function() {\n                                                    await this.props.engine.db.resolveInvitation(this.state.isWorkspaceRequestShown[1][2], this.props.email)\n                                                    this.setState({isWorkspaceRequestShown: [false, null]});\n                                                }).bind(this)\n                                        },\n                                        {\n                                            text: 'Accept',\n                                            handler: (async function() {\n                                                let workspace = this.state.isWorkspaceRequestShown[1][0];\n                                                let newWorkspaces = [...(await this.props.engine.db.getWorkspaces(this.props.uid)), workspace];\n                                                await this.props.engine.db.updateWorkspaces(this.props.uid, newWorkspaces);\n                                                await this.props.engine.db.resolveInvitation(this.state.isWorkspaceRequestShown[1][2], this.props.email)\n                                                this.setState({isWorkspaceRequestShown: [false, null]});\n                                            }).bind(this)\n                                        }\n                                    ]}\n                                />\n                                {/* the add button to inbox button*/}\n                                <ABTIB reference={this.abtibRef} uid={this.state.workspace} gruntman={this.props.gruntman} localizations={this.props.localizations}/>\n                                <ReleaseNotesModal />\n                                {/* the portal root for DOM elements to park */}\n                                <div id=\"parking-lot\"></div>\n                                {/* The actual page */}\n                                <IonRouterOutlet>\n                                    {/* empty => /upcoming*/}\n                                    <Route render={() => <Redirect to=\"/upcoming\"/>}/>\n                                    {/* / => /upcoming */}\n                                    <Route exact path=\"/\" render={() => <Redirect to=\"/upcoming\" />} />\n                                    {/* and the perspective switch */}\n                                    <Switch>\n                                        {/* upcoming renders upcoming */}\n                                        <Route path=\"/upcoming\" exact render={()=><Upcoming engine={this.props.engine} uid={this.state.workspace} gruntman={this.props.gruntman} displayName={this.props.displayName} localizations={this.props.localizations} actualUID={this.props.uid} switch={this.switch} authType={this.props.authType} email={this.props.email}/>} />\n                                        {/* completed renders completed */}\n                                        <Route path=\"/calendar\" exact render={()=><Calendar engine={this.props.engine} uid={this.state.workspace} gruntman={this.props.gruntman} />} localizations={this.props.localizations} />\n                                        {/* workspace renders workspace */}\n                                        <Route path=\"/workspaces/:id\" render={({match})=><WorkspaceWelcome engine={this.props.engine} paginate={this.paginate} id={match.params.id} uid={this.state.workspace}  gruntman={this.props.gruntman}  menuRefresh={this.refresh} localizations={this.props.localizations}/>}  />\n                                        {/* completed renders completed */}\n                                        <Route path=\"/completed\" exact render={()=><Completed engine={this.props.engine} uid={this.state.workspace} gruntman={this.props.gruntman} localizations={this.props.localizations} />} />\n\n                                        {/* perspective renders perspectives */}\n                                        <Route path=\"/perspectives/:id/:create?\" render={({match})=><Perspectives engine={this.props.engine} paginate={this.paginate} id={match.params.id} uid={this.state.workspace}  gruntman={this.props.gruntman}  menuRefresh={this.refresh}  options={match.params.create} localizations={this.props.localizations}/>}  />\n\n                                        {/* project renders perspectives */}\n                                        <Route path=\"/projects/:id/:create?\" render={({match})=><Projects engine={this.props.engine} id={match.params.id} uid={this.state.workspace}  gruntman={this.props.gruntman}  menuRefresh={this.refresh} paginate={this.paginate} options={match.params.create} localizations={this.props.localizations}/>}  />\n                                        {/* TODO projects */}\n                                    </Switch>\n                                </IonRouterOutlet>\n                            </IonPage>\n                        </IonSplitPane>\n                    </IonContent>\n                </Router>\n            </IonPage>\n        );\n    }\n};\n\nexport default Home;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, IonBadge, isPlatform, IonInfiniteScroll, IonInfiniteScrollContent, IonPopover } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Upcoming.scss';\nimport './Pages.css';\n\nimport { SortableTaskList } from './Components/Sortable';\n\nimport Task from './Components/Task';\n\nimport WorkspaceModal from './Components/WorkspaceModal';\n\nconst autoBind = require('auto-bind/react'); // autobind things! \n\n/* \n * The lack of a poem here is scathing\n * so I thought\n * I'd contribute.\n *\n * The homepage needs no introduction\n * For it explains itself in production.\n *\n * But alas,\n * I still write this.\n *\n * What for?\n *\n * @Jemoka\n *\n */\n\n\nclass Upcoming extends Component { // define the component\n    constructor(props) {\n        super(props);\n\n        let tomorrow = new Date();\n        tomorrow.setDate(tomorrow.getDate()+1);\n\n        let greetings = this.props.localizations.greetings_setA;\n\n        this.state = {\n            inbox: [], // define the inbox\n            dueSoon: [], // whats due soon? \n            possibleProjects:{}, // what are the possible projects? \n            possibleTags:{},  // what are the possible tags?\n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [],  // whats available\n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            timeline: [],\n            timelineShown: false,\n            greeting: greetings[Math.floor(Math.random() * greetings.length)],\n            workspaces: [],\n            workspacesPopoverShown: [false, null],\n            workspaceModalShown: false,\n            currentlyEditedWorkspace: null,\n            currentWorkspace: this.props.localizations.personal_workspace,\n        };\n\n        this.updatePrefix = this.random();\n\n        this.workspaceButton = React.createRef();\n\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n\n        autoBind(this);\n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pandt = await this.props.engine.db.getInboxandDS(this.props.uid, avail) // get inbox and due soon \n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n\n        this.updatePrefix = this.random();\n\n        let timeline = await this.props.engine.db.selectTasksInRange(this.props.uid, new Date(), new Date(2100, 1, 1), true);\n        \n                            //timeline.push({type: \"label\", content: timelineRenderedUntil});\n                        //for (let task of fTasks)\n                            //timeline.push({type:\"task\", content:task});\n\n                        //this.setState({timelineRenderedUntil, timelineSoFar: timeline});\n        // Date same date check https://stackoverflow.com/questions/4428327/checking-if-two-dates-have-the-same-date-info\n        timeline = timeline.filter((x)=>!pandt[1].includes(x[0]))\n        Date.prototype.isSameDateAs = function(pDate) {\n          return (\n            this.getFullYear() === pDate.getFullYear() &&\n            this.getMonth() === pDate.getMonth() &&\n            this.getDate() === pDate.getDate()\n          );\n        }\n\n        let refrenceDate = new Date();\n        let tcontent = [];\n        for (let task of timeline) {\n            let due = new Date(task[1].due.seconds*1000);\n            if (!due.isSameDateAs(refrenceDate)) {\n                tcontent.push({type:\"label\", content: due});\n                refrenceDate = due;\n            }\n            tcontent.push({type:\"task\", content: task[0]});\n        }\n\n        let n = this.props.localizations.personal_workspace;\n        let workspaceNames = []\n\n        if (this.props.authType === \"firebase\") {\n            let workspaces = await this.props.engine.db.getWorkspaces(this.props.actualUID);\n\n            workspaceNames = await Promise.all(workspaces.map(async function(e){\n                let name = (await views.props.engine.db.getWorkspace(e)).meta.name\n                if (e===views.props.uid)\n                    n = name;\n                return [e, name]\n            }));\n        }\n\n        this.setState({inbox: pandt[0], dueSoon: pandt[1], possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB, timeline: tcontent, workspaces: workspaceNames, currentWorkspace: n});\n    }\n\n    componentDidMount() {\n        this.refresh();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevProps.uid != this.props.uid) \n            this.refresh();\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n\n    render() {\n        return (\n            <IonPage>\n                <div style={{overflow: \"hidden\"}}>\n                    <div className={\"page-invis-drag \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>&nbsp;</div>\n                    <div className={\"page-content \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>\n                        <WorkspaceModal engine={this.props.engine} gruntman={this.props.gruntman} isShown={this.state.workspaceModalShown} currentWorkspace={this.state.currentlyEditedWorkspace} onDidDismiss={()=>this.setState({workspaceModalShown: false})} getUserByEmail={this.props.getUserByEmail}/>\n                        <div className=\"header-container\" onTouchMove={(e)=>e.preventDefault()}>\n                            <div style={{display: \"inline-block\"}}>\n                                <IonMenuToggle><i className=\"fas fa-bars\" style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} /></IonMenuToggle> <h1 className=\"page-title\"><i style={{paddingRight: 10}} className=\"fas fa-chevron-circle-right\"></i>{this.props.localizations.upcoming}</h1> \n\n                                <div style={{display: \"inline-block\", background: \"var(--decorative-light)\", width: 1, transform:\"translate(-13.5px, 4px)\", height: 20}}>&nbsp;</div> \n                            <div className=\"greeting-datewidget\">\n                                <div style={{display: \"inline-block\"}} className=\"greeting-date\">{(new Date()).getDate()}</div>\n                                <div style={{display: \"inline-block\"}} className=\"greeting-datename\">{new Date().toLocaleString(this.props.localizations.getLanguage(), {  weekday: 'long' })}</div>\n                            </div>\n                            \n\n\n                                <div className=\"greeting-container\"><span id=\"greeting\">{this.state.greeting}</span> <span id=\"greeting-name\" style={{fontWeight: 600}}>{this.props.displayName}</span><a className=\"workspace-name\"  style={{display: this.props.authType===\"firebase\"?\"inline-block\":\"none\"}} onClick={(e)=>this.setState({workspacesPopoverShown: [true, e.nativeEvent]})}>{this.state.currentWorkspace}</a></div>\n                            </div>\n                        </div>\n                        <IonPopover\n                            showBackdrop={false}\n                            ref={this.workspaceButton}\n                            isOpen={this.state.workspacesPopoverShown[0]}\n                            cssClass='workspaces-popover'\n                            mode=\"md\" \n                            onDidDismiss={e => this.setState({workspacesPopoverShown: [false, null]})}\n                            event={this.state.workspacesPopoverShown[1]}\n                        >\n                            <div><div className=\"workspace-name-container\">\n                                <div className=\"workspace-name-selection\" onClick={()=>{\n                                    this.workspaceButton.current.dismiss();\n                                    this.props.switch(\"personal\");\n                                    this.setState({currentWorkspace: this.props.localizations.personal_workspace});\n                                }}><i className=\"fas fa-stream\" style={{marginRight: 10}} />{this.props.localizations.personal_workspace}</div></div>\n                                {this.state.workspaces.map(([id, name])=><div className=\"workspace-name-container\"><div onClick={()=>{\n                                    this.workspaceButton.current.dismiss();\n                                    this.props.switch(\"workspace\", id);\n                                    this.setState({currentWorkspace: name});\n                                }} className=\"workspace-name-selection\"><i className=\"fas fa-stream\" style={{marginRight: 10}} />{name}</div><a className=\"workspace-edit fas fa-pen\" onClick={()=>{\n                                    this.workspaceButton.current.dismiss();\n                                    this.setState({currentlyEditedWorkspace: id, workspaceModalShown: true});\n                                }} /></div>)}\n                                <div className=\"workspace-name-container\" style={{borderTop: \"1px solid var(--decorative-light)\", fontWeight: 600}}><div className=\"workspace-name-selection\" onClick={(async function(){\n                                    let id = await this.props.engine.db.generateWorkspace(this.props.actualUID, this.props.email);\n                                    this.workspaceButton.current.dismiss();\n                                    this.props.switch(\"workspace\", id);\n                                    this.setState({currentlyEditedWorkspace: id, workspaceModalShown: true});\n                                }).bind(this)}><i className=\"fas fa-plus-circle\" style={{marginRight: 10}} />{this.props.localizations.new_workspace}</div></div>\n                            </div>\n                        </IonPopover>\n                            <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\", flexGrow: 5}}>\n                                <div>\n                                    {(()=>{\n                                        if (this.state.inbox.length > 0)\n                                            return <div className=\"page-label\">{this.props.localizations.unsorted}<IonBadge className=\"count-badge\">{this.state.inbox.length}</IonBadge></div>\n                                })()}\n                                <SortableTaskList list={this.state.inbox} prefix={this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                            </div>\n                            <div>\n                                {(()=>{\n                                    if (this.state.dueSoon.length > 0)\n                                        return <div className=\"page-label\">{this.props.localizations.ds}<IonBadge className=\"count-badge\">{this.state.dueSoon.length}</IonBadge></div>\n                                })()}\n                                {this.state.dueSoon.map(id => (\n                                    <Task tid={id} key={id+\"-\"+this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability[id]} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                                ))}\n                            </div>\n                            <div>\n                                <div className=\"timeline-button\">\n                                    <a \n                                        onClick={()=>\n                                                this.setState({timelineShown: !this.state.timelineShown})} \n                                        // for some reason, css classes don't work, so we have to style here\n                                        // @jack? why don't they? well, styling here's fine anyways. most likely b/c they are overrode by className=timeline-button\n                                        style={{\n                                            marginLeft: 15,\n                                            marginTop: 20, \n                                            display: \"inline-block\", \n                                            fontWeight: 600, \n                                            fontSize: 13, \n                                            //color: \"var(--decorative-light-alt)\", \n                                            cursor: \"pointer\"}}\n                                    >\n                                        <i \n                                            className=\"fas fa-calendar-week\" \n                                            style={{paddingRight: 5}}\n                                        ></i> {this.state.timelineShown? this.props.localizations.hide : this.props.localizations.show} {this.props.localizations.timeline}</a>\n                                </div> \n                                {\n                                    (()=>{\n                                        if (this.state.timelineShown)\n                                            return this.state.timeline.map(timelineItem => {\n                                                if (timelineItem.type === \"task\")\n                                                    return <Task tid={timelineItem.content} key={timelineItem.content+\"-\"+this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability[timelineItem.content]} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                                                        else if (timelineItem.type === \"label\")\n                                                    return <div className=\"timeline-box\"><div className=\"timeline-line-container\"><div className=\"timeline-line\">&nbsp;</div></div><div className=\"timeline-text\"><span className=\"timeline-weekname\">{timelineItem.content.toLocaleDateString(this.props.localizations.getLanguage(), { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span></div></div>\n\n\n                                            })\n                                    })()\n                                }\n                                {\n                                    (()=>{\n                                            if (this.state.timelineShown)\n                                            return <span style={{fontSize: 8, color:\"var(--commitid)\", paddingLeft:10, paddingTop:10}}>Commit ID: {process.env.REACT_APP_COMMIT_HASH}</span>\n                                    })()\n                                }\n                            </div>\n                            <div className=\"bottom-helper\">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\n// Hiding scrollbar, a journey\n\n\n\nexport default Upcoming;\n\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component, useState, useEffect } from 'react';\nimport {withGetScreen} from 'react-getscreen'\nimport './Calendar.css'\nimport './Pages.css';\nimport ReactTooltip from 'react-tooltip';\nimport { withRouter } from \"react-router\";\n\nimport Task from './Components/Task';\nimport CalendarPopover, { CalendarUnit } from './Components/CalendarPopover';\nimport CalendarTasklistPopover from './Components/CalendarTasklistPopover';\n\nconst autoBind = require('auto-bind/react');\n\n\n\n/* \n *\n * Apparently,\n * People like calendars.\n *\n * WHY?\n *\n * People don't respect \n * the existance \n * of the whole idea of GTD.\n *\n * Seriously.\n *\n * Why. A calendar?! in a GTD app.\n *\n * FINE. Here's your calendar.\n *\n * @jemoka\n *\n *\n */\n\nlet refreshed = 0;\n\nfunction CalPageBigOllendar(props) {\n\n    function __util_calculate_gradient(left, right, gradientAmount) {\n        let color1 = left;\n        let color2 = right;\n        let ratio = gradientAmount;\n        let hex = function(x) {\n            x = x.toString(16);\n            return (x.length == 1) ? '0' + x : x;\n        };\n\n        let r = Math.ceil(parseInt(color1.substring(0,2), 16) * ratio + parseInt(color2.substring(0,2), 16) * (1-ratio));\n        let g = Math.ceil(parseInt(color1.substring(2,4), 16) * ratio + parseInt(color2.substring(2,4), 16) * (1-ratio));\n        let b = Math.ceil(parseInt(color1.substring(4,6), 16) * ratio + parseInt(color2.substring(4,6), 16) * (1-ratio));\n\n        return hex(r) + hex(g) + hex(b);\n    }\n\n    let [dateSelected, setDateSelected] = useState(new Date());\n\n    let currentMonth = dateSelected.getMonth();\n    let currentYear = dateSelected.getFullYear();\n\n    let firstDayMonth = new Date(currentYear, currentMonth, 1);\n    let lastDayMonth = new Date(currentYear, currentMonth+1, 0);\n    let lastDayLastMonth = new Date(currentYear, currentMonth, 0);\n\n    let firstDayDayname = firstDayMonth.getDay()+1;\n\n    let daysBefore = [...new Array(firstDayDayname-1)].map((_, i)=>{return {type: \"pre\", content: i+lastDayLastMonth.getDate()-(firstDayDayname-1)+1}});\n\n    let daysAfter = [...new Array((6-lastDayMonth.getDay()===-1)?6:6-lastDayMonth.getDay())].map((_, i)=>{return {type:\"post\", content:i+1}});\n\n    let contentDays = [...new Array(lastDayMonth.getDate())].map((_, i)=>{return {type:\"actual\", content:i+1}});\n\n    let [heat, setHeat] = useState({});\n\n    let [isPopoverShown, setIsPopoverShown] = useState(false);\n\n    let [shownList, setShownList] = useState([]);\n    \n    Array.prototype.max = function() {\n        return Math.max.apply(null, this);\n    };\n\n    let refresh = (async function() {\n            let map = new Map();\n            let names = new Map();\n            let ids = new Map();\n            let hm = {};\n            let taskList = await props.engine.db.selectTasksInRange(props.uid, firstDayMonth, lastDayMonth, true);\n            taskList.forEach(([id, val])=>{\n                let date = new Date(val.due.seconds*1000);\n                date.setHours(0, 0, 0, 0);\n                let time = date.getDate();\n                if(map.has(time))\n                    map.set(time, map.get(time)+1);\n                else\n                    map.set(time, 1);\n                if(names.has(time))\n                    names.set(time, [...names.get(time), val.name]);\n                else\n                    names.set(time, [val.name]);\n                if(ids.has(time))\n                    ids.set(time, [...ids.get(time), id]);\n                else\n                    ids.set(time, [id]);\n\n            });\n            let values = Array.from(map.values());\n            let nameList = Array.from(names.values());\n            let idList = Array.from(ids.values());\n            if (values.length > 0) {\n                let max = values.max();\n                let style = getComputedStyle(document.body);\n                let hexes = values.map(e=>__util_calculate_gradient(style.getPropertyValue('--heatmap-darkest').trim().slice(1), style.getPropertyValue('--heatmap-lightest').trim().slice(1), e/max));\n                Array.from(map.keys()).forEach((e, i)=>{hm[e]={color:hexes[i], value:values[i], names:nameList[i], ids: idList[i]}});\n            }\n            setHeat(hm);\n        })\n\n    useEffect(()=>{\n        refresh();\n    },[dateSelected, refreshed]);\n\n    return (\n        <div id=\"calendar-page-bigol-calendar-wrapper\" style={{display: \"inline-block\", height: \"85%\", width: \"95%\", ...props.style}}>\n            <CalendarTasklistPopover uid={props.uid} engine={props.engine} isShown={isPopoverShown} onDidDismiss={()=>setIsPopoverShown(false)} list={shownList} availability={props.availability} datapack={props.datapack} gruntman={props.gruntman} currentDate={dateSelected}/>\n            <div id=\"bigol-calendar-wrapper\">\n                <div id=\"bigol-calendar-daterow\">\n                    <span className=\"bigol-calendar-daterow-item\">Sun</span>\n                    <span className=\"bigol-calendar-daterow-item\">Mon</span>\n                    <span className=\"bigol-calendar-daterow-item\">Tues</span>\n                    <span className=\"bigol-calendar-daterow-item\">Wed</span>\n                    <span className=\"bigol-calendar-daterow-item\">Thu</span>\n                    <span className=\"bigol-calendar-daterow-item\">Fri</span>\n                    <span className=\"bigol-calendar-daterow-item\">Sat</span>\n                </div>\n                <div id=\"bigol-calendar-container\">\n                    {[...daysBefore,...contentDays,...daysAfter].map(i =>\n                    <span className={`bigol-calendar-container-item calendar-container-item-${i.type} calendar-container-item-${i.content}`} style={{\n                        backgroundColor: ((heat[i.content]&&i.type === \"actual\") ? \n                            `#${heat[i.content].color}` :\n                            \"inherit\")\n                    }}\n                        onClick={(e)=>{\n                            let date;\n                            if (i.type === \"pre\")\n                                date = new Date(lastDayLastMonth.getFullYear(), lastDayLastMonth.getMonth(), i.content);\n                            if (i.type === \"actual\") \n                                date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth(), i.content);\n                            if (i.type === \"post\") \n                                date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, i.content);\n                            setDateSelected(date);\n                            if (heat[i.content])\n                                setShownList(heat[i.content].ids);\n                            else\n                                setShownList([]);\n                            setIsPopoverShown(true)\n                            if (props.onDateSelected)\n                                props.onDateSelected(date);\n                        }}>\n                        <div className=\"calendar-date-text\">\n                            {i.content}<span className=\"calendar-date-value\">{(heat[i.content]&&i.type===\"actual\")?`${heat[i.content].value} Tasks`:null}</span></div><div style={{marginLeft: 6, marginRight: 5, marginBottom: 2}}>{((heat[i.content]&&i.type===\"actual\")?heat[i.content].names:[]).map((name)=><span className=\"calendar-date-taskname\"><div className=\"calendar-task-circle\">&nbsp;</div>{name}</span>)}</div>\n                    </span>\n                    )}\n                </div>\n                <div id=\"bigol-calendar-tools\">\n                    <a className=\"fas fa-caret-left calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()-1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <a className=\"fas fa-caret-right calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <div className=\"calendar-today\" onClick={()=>{\n                        setDateSelected(new Date());\n                        if (props.onDateSelected)\n                            props.onDateSelected(new Date());\n\n                    }}>{props.gruntman.localizations.clbtd}</div>\n\n\n                </div>\n\n                <div id=\"bigol-calendar-infopanel\">\n                    <div id=\"bigol-calendar-dategroup\">\n                        <div className=\"bigol-calendar-infopanel-dateselected\">{dateSelected.getDate()}</div>\n                        <div className=\"bigol-calendar-infopanel-datename\">{dateSelected.toLocaleString(props.gruntman.localizations.getLanguage(), {  weekday: 'long' })}</div>\n                        <div className=\"bigol-calendar-infopanel-month\">{dateSelected.toLocaleString(props.gruntman.localizations.getLanguage(), { month: 'long' })}</div>\n                        <div className=\"bigol-calendar-infopanel-year\">{dateSelected.getFullYear()}</div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\nclass Calendar extends Component {\n\n    constructor(props) {\n        super(props);\n\n        let today = new Date();\n        today.setHours(0,0,0,0);\n\n        this.state = {\n            possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            currentDate: (today), // new date\n            taskList: [],\n            popoverIsVisible: false,\n\n        };\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        this.repeater = React.createRef(); // what's my repeater? | i.. i dont know what this does...\n\n        // AutoBind!\n        autoBind(this);\n    }\n    showEdit() {\n        this.setState({showEdit: true})\n    } // util func for showing repeat\n    hideEdit() {\n        this.setState({showEdit: false});\n    } // util func for hiding repeat\n\n    componentWillUnmount() {\n        this.props.gruntman.halt(); // when we unmount, halt gruntman? idk what this does  \n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) // tag nd project stuff \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n\n        projectDB.map(proj=>buildSelectString(proj));\n\n        let endDate = new Date(this.state.currentDate);\n        endDate.setHours(23,59,59,60);\n        let taskList = await this.props.engine.db.selectTasksInRange(this.props.uid, this.state.currentDate, endDate);\n\n        refreshed++;\n\n        this.setState({\n            possibleProjects: pPandT[0][0],\t     // set the project stuff\n            possibleTags: pPandT[1][0],\t\t    // set the tag stuff  \n            possibleProjectsRev: pPandT[0][1],\t   // set more projects stuff  \n            possibleTagsRev: pPandT[1][1],\t  // set more tags stuff  \n            availability: avail,\t\t // set the avail\n            projectSelects: projectList,\t// set the project list  \n            tagSelects: tagsList,\t       // set the tag list\n            projectDB, \t\t\t      // and the project db \n            taskList\n        }); // once we finish, set the state\n    }\n\n    componentDidMount() {\n        this.refresh()\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n                {/* the perspective editor! */}\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n                    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-calendar-alt\">\n                                    </i>\n                                    {this.props.gruntman.localizations.calendar}\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n                            </div> \n                        </div>\n                    </div>\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\", height: \"100%\"}}>\n                        <div id=\"calendar-page-wrapper\">\n                            {(()=>{\n                                if (this.props.isMobile())\n                                    return <CalendarUnit gruntman={this.props.gruntman} uid={this.props.uid} engine={this.props.engine} isShown={this.state.popoverIsVisible} onDidDismiss={()=>this.setState({popoverIsVisible: false})}  onDateSelected={(async function(d){\n                                        let endDate = new Date(d.getTime());\n                                        endDate.setHours(23,59,59,60);\n                                        let taskList = await this.props.engine.db.selectTasksInRange(this.props.uid, d, endDate);\n                                        this.setState({currentDate: d, taskList});\n                                    }).bind(this)}/>\n                                else \n                                    return <CalPageBigOllendar gruntman={this.props.gruntman}  uid={this.props.uid} engine={this.props.engine} availability={this.state.availability} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                            })()}\n                            {(()=>{\n                                if (this.props.isMobile())\n                            return <div id=\"calendar-page-taskpage-wrapper\">\n                                <span id=\"calendar-page-header\">\n                                    <div class=\"calendar-page-count\">{this.state.taskList.length}</div>\n                                    <div class=\"calendar-page-title\">tasks due on</div>\n                                    <div class=\"calendar-page-date\">{this.state.currentDate.toLocaleString('en-us', {  weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'  })}</div>\n                                </span>\n                                {this.state.taskList.map(id=>(\n                                    <Task tid={id} key={id+\"-\"+this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability[id]} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                                ))}\n                            </div>\n                            })()}\n                        <div className=\"bottom-helper\">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\nexport default withGetScreen(Calendar, {mobileLimit: 720, tabletLimit:768, shouldListenOnResize: true});\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { createRef, useEffect, useRef } from 'react';\nimport '../Calendar.css';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\nimport Task from '../Components/Task';\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the calendar popover\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\n\nfunction CalendarTasklistPopover(props) {\n\n    let refs = useRef([]);\n\n    useEffect(()=>{\n        refs.current=props.list.map((_)=>createRef());\n    }, [props.list]);\n\n    return (\n        <IonModal ref={props.reference} isOpen={props.isShown} onDidDismiss={() => {if(props.onDidDismiss) props.onDidDismiss()}} style={{borderRadius: 5}} cssClass=\"calendar-list-popover\">\n                <div id=\"airplane-hanger\"></div> {/*to mount the calendar*/}\n            <div className=\"popover-list\">\n                <span id=\"calendar-page-header\">\n                    <div class=\"calendar-page-count\">{props.list.length}</div>\n                    <div class=\"calendar-page-title\">tasks due on</div>\n                    <div class=\"calendar-page-date\" >{props.currentDate.toLocaleString('en-us', {  weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'  })}</div>\n                </span>\n\n                {props.list.map((id, i)=>\n                    <div ref={refs.current[i]}>\n                        <Task tid={id} key={id} uid={props.uid} engine={props.engine} gruntman={props.gruntman} availability={props.availability[id]} datapack={props.datapack} envelope={refs.current[i]} onModal={true}/>\n                    </div>\n                )}\n\n\n\n\n\n\n\t\t<div style={{marginTop: 10}}>\n\t\t    <a className=\"newbutton\" onClick={()=>{\n\t\t\tprops.gruntman.do( // call a gruntman function\n\t\t\t    \"task.create\", { \n\t\t\t\tuid: props.uid, // pass it the things vvv\n\t\t\t\tpid: \"\",\n\t\t\t\t//due,\n\t\t\t\t//defer,\n\t\t\t\tname: ''\n\t\t\t    }\n\t\t\t).then((result)=>{\n\t\t\t}) // call the homebar refresh\n\t\t    }}><div><i className=\"fas fa-plus-circle subproject-icon\"/><div style={{display: \"inline-block\", fontWeight: 500}}>wheee</div></div></a>\n\n\t\t    <div className=\"bottom-helper\">&nbsp;</div>\n\t\t</div>\n\n\n                <div className=\"bottom-helper\" style={{height: 150}}>&nbsp;</div>\n            </div>\n        </IonModal>\n    )\n}\n\nexport default CalendarTasklistPopover;\n\n","// IMPORTS\nimport { IonContent, IonPage, IonMenuToggle, isPlatform } from '@ionic/react'; \nimport React, { Component, useEffect } from 'react';\nimport './Completed.css';\nimport './Pages.css';\nimport Task from './Components/Task';\nconst autoBind = require('auto-bind/react'); // autobind is a lifesaver\n\n/*\n\n * Sometimes we complete.\n *\n * This is not always correct,\n *\n * so we have this page! \n *\n * @enquirer\n\n*/\n\n// construtor for rendered object\nfunction TaskObject(type, contents) {\n    this.type = type; // set the type to the type (label or task)\n    this.contents = contents; // set the contents to the contents (title or id)\n}\n\n// define the main component!\nclass Completed extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            taskList: [], // the objects we render\n            tasksShown: 1, // track the number of times we have fetched more\n            taskCats: [\"Today\", \"Yesterday\", \"This Week\", \"This Month\", \"Even Before\"], // define task categories (cats!)\n            rendering: true, // define whether or not the element is rendering \n            possibleProjects:{}, // see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {}\n        };\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        autoBind(this);\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    async refresh() {\n        let taskArr = []; // define temp array\n        let full = await this.props.engine.db.getCompletedTasks(this.props.uid); // get the tasks from the database \n\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n        // loop through the tasks, converting to objects and inserting labels between each cat\n        full.forEach((cat, i) => {\n            taskArr.push(new TaskObject(\"label\", this.state.taskCats[i])) // each iteration, push the next label to the temp arr\n            cat.forEach(task => { // this loops through each cat\n                taskArr.push(new TaskObject(\"task\", task)) // convert each task to an object then push it to the temp arr\n            })\n        });\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n        this.setState({taskList: taskArr, rendering: false, possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB}); // once we finish, set the state\n        // also set rendering to false. \n        // This is a hacky solution instead of creating an entirely new async function.\n    }\n\n    async componentDidMount() {\n        this.refresh(); // refresh when the component mounts\n    }\n\n    handleFetchMore() {\n        this.setState({rendering: true}) // trigger loading screen\n        const loader =  setTimeout(() => { // set a timeout to set the rendering to false \n            this.setState({rendering: false})\n\n        }, 2);\n\n        const updateTasks =  setTimeout(() => { // set another timeout for the actual task update\n            this.setState({tasksShown: this.state.tasksShown+1}) \n            // increment tasksShown by one whenever fetch more is clicked\n            // this renders 10 more items \n            this.setState({rendering: false}) // set rendering to false\n        }, 1)\n\n        // disclaimer: I do not understand how this works. I was just messing around trying to debug and this happened to work.\n        // if it ain't broke, dont fix it? \n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n                <div style={{overflowY: \"scroll\"}}>\n                    <div className={\"page-invis-drag \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>&nbsp;</div>\n                    <div className={\"page-content \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>\n\n                        <div className=\"header-container\">\n                            <div style={{display: \"inline-block\"}}>\n                                <IonMenuToggle>\n                                    <i class=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-check-circle\">\n                                    </i>\n                                    Completed\n                                </h1> \n                            </div>\n                        </div>\n                        {/* loop through the taskList ten times, multiplyed by the times we have fetched more */}\n                        {/* if the cat is empty or the final item rendered is a label, don't render it */}\n                        {/* otherwise, render a task */}\n                        {/* for the fetch more, if we are currently rendering, render a loading animation. */}\n                        {/* Otherwise, render a fetch more.*/}\n                        <div style={{overflowY: \"scroll\"}}>\n                            {this.state.taskList.slice(0, 10*this.state.tasksShown).map((content, i) => (\n                                <div style={{marginLeft: 10, marginRight: 10}}>\n                                    {(content.type == \"label\")?  \n                                            (this.state.taskList[i+1] ? \n                                                ((this.state.taskList[i+1].type == \"label\" || this.state.taskList.slice(0, 10*this.state.tasksShown).length == i+1) ? \n                                                \"\" : <p className=\"page-label\" style={{marginBottom:0}}>{content.contents}</p>) : \"\") : \n                                                <Task \n                                                    tid={content.contents} \n                                                    startingCompleted={true}\n                                                    key={content.contents+\"-\"+this.updatePrefix} \n                                                    uid={this.props.uid} \n                                                    engine={this.props.engine} \n                                                    gruntman={this.props.gruntman} \n                                                    availability={this.state.availability[content.contents]} \n                                                    datapack={[this.state.tagSelects,\n                                                        this.state.projectSelects, \n                                                        this.state.possibleProjects, \n                                                        this.state.possibleProjectsRev, \n                                                        this.state.possibleTags, \n                                                        this.state.possibleTagsRev]}\n                                                />\n                                    }\n                                </div>\n                            ))}\n\n                        <div className=\"fetch-more\" > \n                            {/* define the fetch more button */}\n                            {this.state.rendering? <p className=\"loader\" >Loading...</p> : <p onClick={this.handleFetchMore}>Fetch more...</p>}\n                        </div> \n                    <div className=\"bottom-helper\">&nbsp;</div>\n                    </div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\nexport default Completed;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Perspectives.css'\nimport './Pages.css';\nimport ReactTooltip from 'react-tooltip';\nimport { withRouter } from \"react-router\";\n\nimport Task from './Components/Task';\nimport PerspectiveEdit from './Components/PerspectiveEditor';\n\nconst autoBind = require('auto-bind/react');\n\n\n\n/* \n * To sort, we give our tasks tags\n *\n * We can also give them flags\n * \n * With perspectives we filter,\n *\n * To keep our tasks in kilter,\n *\n * Then refactor the code if it lags!\n *\n *\n * @enquirer\n *\n */\n\n\nclass Perspectives extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            taskList: [], // what tasks should we display? \n            perspectiveName: \"\", // whats the perspective name? \n\t    perspectiveQuery: \"\", // whats the perspective query (whats in the text box)?\n\t    perspectiveAvail: {}, // whats the perspective availability? \n\t    perspectiveTord: {},  // whats the perspective ordering?\n\t    // not truth or dare. jack doent even know what that is! ^^ \n            showEdit: this.props.options === \"do\", // are we showing? on do, we are.\n            possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {}\n\n        };\n\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        this.repeater = React.createRef(); // what's my repeater? | i.. i dont know what this does...\n\n\n        // AutoBind!\n        autoBind(this);\n    }\n    showEdit() {\n        this.setState({showEdit: true})\n    } // util func for showing repeat\n    hideEdit() {\n        this.setState({showEdit: false});\n    } // util func for hiding repeat\n\n    componentWillUnmount() {\n        this.props.gruntman.halt(); // when we unmount, halt gruntman? idk what this does  \n    }\n\n    async refresh() {\n        let possiblePerspectives = await this.props.engine.db.getPerspectives(this.props.uid); // get all possible perspectives\n        let perspectiveObject = possiblePerspectives[0][this.props.id] // get the one we want based on page id \n        let taskList = await this.props.engine.perspective.calc(this.props.uid, perspectiveObject.query, perspectiveObject.avail, perspectiveObject.tord) // then get the tasks from that perspective\n\n\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) // tag nd project stuff \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n\n        projectDB.map(proj=>buildSelectString(proj));\n\n        this.setState({\n            taskList: taskList,                           // set the tasklist, \n            perspectiveName: perspectiveObject.name,     // set the perspective name \n\t    perspectiveQuery: perspectiveObject.query,  // set the perspective query \n\t    perspectiveAvail: perspectiveObject.avail, // set the perspective avail \n\t    perspectiveTord: perspectiveObject.tord,  // set the perspective tord \n            possibleProjects: pPandT[0][0],\t     // set the project stuff\n            possibleTags: pPandT[1][0],\t\t    // set the tag stuff  \n            possibleProjectsRev: pPandT[0][1],\t   // set more projects stuff  \n            possibleTagsRev: pPandT[1][1],\t  // set more tags stuff  \n            availability: avail,\t\t // set the avail\n            projectSelects: projectList,\t// set the project list  \n            tagSelects: tagsList,\t       // set the tag list\n            projectDB \t\t\t      // and the project db \n        }); // once we finish, set the state\n    }\n\n    updateName(e) {\n        if (e) { // if the name if defined, \n            this.props.gruntman.registerScheduler(() => {\n                // Register a scheduler to deal with React's onChange\n                // check out the FANCYCHANGE in task.jsx\n                this.props.gruntman.do( // call a gruntman function\n                    \"perspective.update__perspective\", { \n\t\t\t// pass it the things \n                        uid: this.props.uid, // the user id \n                        id: this.props.id,  // the perspective id \n                        payload: {name: e.target.value} // the action, setting name to the new value \n                    }\n                ).then(this.props.menuRefresh) // call the homebar refresh\n            }, `perspective.this.${this.props.id}-update`) // give it a custom id\n            this.setState({perspectiveName: e.target.value}) // set the perspectiveName\n        }\n    } \n\n\n    handleDelete() {\n        this.props.history.push(\"/upcoming\"); // go back\n        this.props.paginate(\"upcoming\"); // idk man \n        this.props.gruntman.do( // call a gruntman function\n            \"perspective.delete__perspective\", { \n                uid: this.props.uid, // pass it the user id \n                id: this.props.id, // and the current id \n            }\n        ).then(()=>{\n            this.props.menuRefresh(); // refresh menubar\n\n        }) // call the homebar refresh\n    }\n\n    componentDidMount() {\n        this.refresh()\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevProps.id !== this.props.id) { // if we updated the defer date\n            this.setState({\n                taskList: [], // what tasks should we display? \n                perspectiveName: \"\", // whats the perspective name? \n                perspectiveQuery: \"\", // whats the perspective query (whats in the text box)?\n                perspectiveAvail: {}, // whats the perspective availability? \n                perspectiveTord: {},  // whats the perspective ordering?\n                // not truth or dare. jack doent even know what that is! ^^ \n                showEdit: this.props.options === \"do\", // are we showing? on do, we are.\n                possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n                possibleTags:{}, \n                possibleProjectsRev:{}, \n                possibleTagsRev:{}, \n                availability: [], \n                projectSelects:[], \n                tagSelects: [], \n                projectDB: {}\n\n            });\n\n            this.refresh(); // switching between perspectives are a prop update and not a rerender\n        }\n        // so we want to refresh the perspective that's rendered\n        if (prevProps.id !== this.props.id && this.props.options === \"do\") // if we are trying to create\n            this.setState({showEdit: true});\n\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n\t\t{/* the perspective editor! */}\n                <PerspectiveEdit \n                    reference={this.repeater} \n                    isShown={this.state.showEdit} \n                    onDidDismiss={this.hideEdit}\n                    uid={this.props.uid} \n                    engine={this.props.engine} \n                    gruntman={this.props.gruntman}\n                    id={this.props.id}\n                    perspectiveName={this.state.perspectiveName}\n                    query={this.state.perspectiveQuery}\n                    avail={this.state.perspectiveAvail}\n                    tord={this.state.perspectiveTord}\n                    menuRefresh={this.props.menuRefresh}\n                    updateName={this.updateName}\n                    startHighlighted={this.props.options === \"do\"}\n                />\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n\t\t    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-layer-group\">\n                                    </i>\n                                    <input className=\"editable-title\" \n                                        onChange={(e)=> {e.persist(); this.updateName(e)}}\n                                        value={this.state.perspectiveName} // TODO: jack this is hecka hacky\n                                    />\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n\n                                <div className=\"greeting-container\" style={{marginLeft: 11, marginTop: 7, marginBottom: 5}}>\n                                    <a \n                                        onClick={this.showEdit} \n                                        data-tip=\"LOCALIZE: Edit\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-icon-ring)\", cursor: \"pointer\"}}>\n                                        <i className=\"fas fa-edit\" \n                                            style={{margin: 3, color: \"var(--task-icon-text)\", \n                                                fontSize: 10, \n                                                transform: \"translate(2px, -2px)\"}} \n                                        ></i>\n                                    </a>\n\n                                    <a \n                                        onClick={this.handleDelete} \n                                        data-tip=\"LOCALIZE: Delete\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-icon-ring)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className=\"fas fa-trash\"\n                                            style={{margin: 3, color: \"var(--task-icon-text)\", \n                                                fontSize: 10, transform: \"translate(2px, -2px)\"}}>\n                                        </i>\n                                    </a>\n\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\"}}>\n\n                        {this.state.taskList.map(id => (\n                            <Task \n                                tid={id}\n                                key={id+\"-\"+this.updatePrefix} \n                                uid={this.props.uid} \n                                engine={this.props.engine} \n                                gruntman={this.props.gruntman} \n                                availability={this.state.availability[id]} \n                                datapack={[\n                                    this.state.tagSelects, \n                                    this.state.projectSelects, \n                                    this.state.possibleProjects, \n                                    this.state.possibleProjectsRev, \n                                    this.state.possibleTags, \n                                    this.state.possibleTagsRev\n                                ]}\n                            />\n                        ))}\n                        <div className=\"bottom-helper\">&nbsp;</div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\nexport default withRouter(Perspectives);\n\n","import { IonModal, IonContent, IonSearchbar, IonPage, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Repeat.css';\nimport '../Perspectives.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\nconst autoBind = require('auto-bind/react');\n\n\n/* \n * perspectives are amazing \n *\n * dab on them haters \n *\n * I just said the cringiest thing ever\n *\n * oh my god huxley i swear to god \n *\n * i will rebase your commits \n *\n *\n * - @zbuster05, recorded by @enquirer\n *\n */\n\nclass PerspectiveEdit extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n            inputEvent: \"\", // define our input event for the perspective title \n\t    expanded: false,\n\t    items: [],\n\t    inited: false,\n\t    query: '',\n\t    selected: 0,\n\t    inputValue: this.props.query,\n        }\n\n        this.name = React.createRef();\n\tthis.currentlySelected = React.createRef(); // selected item ref \n\n    }\n\n    componentDidMount() {\n        if (this.props.startHighlighted) // if we are trying to create\n            this.name.current.focus(); // focus the name\n\tthis.setState({inputValue: this.props.query})\n\tconsole.log(this.props.query)\n    }\n\n    componentDidUpdate() {\n\tif (this.props.query != this.state.inputValue && !this.state.inited) {\n\t    this.setState({inputValue: this.props.query, inited: true})\n\t}\n    }\n\n    async getItems(){\n\tconst subs = (await this.props.engine.db.getProjectsandTags(this.props.uid)) // hit the cache \n\tlet items = []\n\titems.push(...Object.entries(subs[1][0]).map(([key, value]) => { // process it \n\t    return ['#' + value, 'tags', key, 'fas fa-tags']\n\t}))\n\titems.push(...Object.entries(subs[0][0]).map(([key, value]) => { // process it \n\t    return ['.' + value, 'projects', key, 'fas fa-tasks']\n\t}))\n\tthis.setState({items: items, query: ''})\n    }\n    filterItems(searchTerm) { // filter the items!\n\tlet filteredItems = this.state.items.filter(item => {\n\t    return item[0].toLowerCase().indexOf(searchTerm.toLowerCase()) > -1;\n\t});\n\treturn filteredItems\n    }\n\n\n    handleQueryChange(e) {\n\tthis.props.gruntman.registerScheduler(() => { \n\t    //Register a scheduler to deal with React's onChange\n\t    //check out the FANCYCHANGE in task.jsx\n\t    this.props.gruntman.do( // call a gruntman function\n\t\t\"perspective.update__perspective\", { \n\t\t    // pass it the things \n\t\t    uid: this.props.uid, // pass it the uid \n\t\t    id: this.props.id,  // pass it the perspective id \n\t\t    payload: {query: e} // pass it the action, updating the query\n\t\t}\n\t    )\n\t}, `perspective.this.${this.props.id}-update`) // give it a custom id\n    }\n\n    handleHelp() { // TODO TODO TODO: jack what do u want here? \n\twindow.open('https://condutiondocs.shabang.cf/Perspective-Menus-408aae7988a345c0912644267ccda4d2#35a4686c83eb4cc589d3570a05de6b5a')\n    }\n\n    handleAppend(item) {\n\tconst value = `[${item[0]}]`\n\tthis.setState({inputValue: this.state.inputValue += value})\n\tthis.handleQueryChange(this.state.inputValue)\n    }\n    handleKeydown(e) { // handle the keydown... avert your eyes\n\tconst keyname = e.key; // store the keyname\n\tif (keyname == \"Enter\") { // if we submit, \n\t    const selectedItem = this.filterItems(this.state.query)[this.state.selected] // store the selected item\n\t    console.log(selectedItem)\n\t    this.handleAppend(selectedItem)\n\t} else { // if we havent pressed submit, \n\t    const idx = this.state.selected // store the index \n\t    const len = this.filterItems(this.state.query).length-1 // and the filtered items cus react lifecyle bd \n\t    if (keyname == \"ArrowUp\" || (e.ctrlKey && keyname == \"p\")) { // if we are navigating up, \n\t\tif (idx > 0) { // and we selecting something greater than the first element, \n\t\t    this.setState({selected: idx-1}) // subtract from our index \n\t\t} else { this.setState({selected: len})} // if we are selection the first element, wrap to the last\n\t\tif (this.currentlySelected) {this.currentlySelected.current.scrollIntoView({ // and scroll it into view \n\t\t    behavior: \"smooth\", // make it smooooth \n\t\t    block: \"end\" // make it not get covered by the searchbar \n\t\t})}\n\t    } else if (keyname == \"ArrowDown\" || (e.ctrlKey && keyname == \"n\")) { // if we are scrolling down, \n\t\tif (idx == len) { // handle wrapping \n\t\t    this.setState({selected: 0})\n\t\t} else { this.setState({selected: idx+1}) } \n\t\tif (this.currentlySelected) {this.currentlySelected.current.scrollIntoView({\n\t\t    behavior: \"smooth\", // smooooooooooth\n\t\t    block: \"start\", // make it work better. their might be a better option for this \n\t\t})}\n\t\t// TODO: try this: https://stackoverflow.com/questions/56688002/javascript-scrollintoview-only-in-immediate-parent/56688719 (check last answer)\n\t    }\n\t}\n    }\n\n    render() {\n        return (\n            <IonModal \n                ref={this.props.reference} \n                isOpen={this.props.isShown} \n                onWillPresent={() => {this.props.gruntman.lockUpdates(); this.getItems()}}\n                onDidDismiss={() => {\n                    this.props.gruntman.unlockUpdates(); \n                    this.props.updateName(this.state.inputEvent);\n                    if (this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5}\n                } \n                cssClass={`perspective-modal ${this.state.expanded? \"expanded\" : \"\"}`}\n            > \n\t\t<IonPage>\n\t\t    <div className=\"inner-content\">\n\n\t\t\t<div>\n\t\t\t    {/* Header */}\n\t\t\t    <div className=\"perspective-header\">\n\t\t\t\t{/* Repeat name */}\n\t\t\t\t<span style={{display: \"flex\", alignItems: \"center\", width: \"100%\", whiteSpace: \"nowrap\"}}>\n\t\t\t\t    <b className=\"bold-prefix\" >{this.props.gruntman.localizations.perspective_build_callout}</b> \n\t\t\t\t    <input className=\"editable-title pbuilder-pname\" \n\t\t\t\t\tref={this.name}\n\t\t\t\t\tdefaultValue={this.props.perspectiveName} \n\t\t\t\t\tonChange={(e)=> {e.persist(); this.props.updateName(e); this.setState({inputEvent: e})}}\n\t\t\t\t\tstyle={{minWidth: 0}}\n\t\t\t\t\tplaceholder=\"@NEEDLOC Tap to set name\"\n\t\t\t\t    />\n\n\t\t\t\t    <div className=\"repeat-task-name\">{this.state.name}</div>\n\t\t\t\t</span>\n\t\t\t\t{/* Close button */} \n\t\t\t\t<a className=\"edit-close\" onClick={this.props.onDidDismiss} \n\t\t\t\t    style={{transform: \"translate(-5px, 5px)\"}}><i className=\"fa fa-check check\"></i></a>\n\n\t\t\t    </div>\n\t\t\t    <div className=\"build-input\">\n\t\t\t\t<span className=\"bold-prefix\" style={{minWidth: \"70px\", marginTop: \"4px\"}}>Filter by</span> {/*@NEEDLOC*/}\n\t\t\t\t<input \n\t\t\t\t    className=\"build-input-edit\"\n\t\t\t\t    //defaultValue={this.props.query}\n\t\t\t\t    value={this.state.inputValue}\n\t\t\t\t    //value={this.props.query}\n\t\t\t\t    onChange={(e)=> {\n\t\t\t\t\te.persist(); \n\t\t\t\t\tif (e) { this.handleQueryChange(e.target.value) };\n\t\t\t\t\tthis.setState({inputValue: e.target.value})}\n\t\t\t\t    }\n\n\t\t\t\t    placeholder=\"LOCALIZE: perspective query\"\n\t\t\t\t>\n\t\t\t\t</input> \n\t\t\t\t<i \n\t\t\t\t    className=\"fas fa-plus-circle check\" \n\t\t\t\t    style={{marginTop: \"10px\", marginLeft: \"8px\"}}\n\t\t\t\t    onClick={()=>this.setState({expanded: !this.state.expanded})}\n\t\t\t\t></i>\n\t\t\t    </div>\n\n\n\t\t\t    <div className=\"perspective-basic-row\">\n\t\t\t\t<span className=\"pbasic-container\" style={{marginRight: \"25px\"}}>\n\t\t\t\t    <span>\n\t\t\t\t\t<i className=\"repeat-label fas fa-exchange-alt\"></i>\n\t\t\t\t\t<span className=\"perspective-label\">{this.props.gruntman.localizations.perspective_include}</span>\n\t\t\t\t    </span>\n\n\t\t\t\t    <IonSelect \n\t\t\t\t\tclassName=\"perspective-select\" \n\t\t\t\t\tinterface=\"popover\" \n\t\t\t\t\tvalue={this.props.avail} // TODO: make a database hit \n\t\t\t\t\tmode=\"ios\"\n\t\t\t\t\tonIonChange={e=>{\n\t\t\t\t\t    this.props.gruntman.do( // call a gruntman function\n\t\t\t\t\t\t\"perspective.update__perspective\", { \n\t\t\t\t\t\t    uid: this.props.uid, // pass it the user id \n\t\t\t\t\t\t    id: this.props.id,  // pass it the perspective id\n\t\t\t\t\t\t    payload: {avail: e.detail.value} // set the availability \n\t\t\t\t\t\t}\n\t\t\t\t\t    )\n\t\t\t\t\t}}\n\t\t\t\t    >\n\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"remain\">{this.props.gruntman.localizations.psp_rem}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"avail\">{this.props.gruntman.localizations.psp_avil}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"flagged\">{this.props.gruntman.localizations.psp_flg}</IonSelectOption>\n\t\t\t\t    </IonSelect>\n\t\t\t\t</span>\n\n\t\t\t\t<span className=\"pbasic-container\">\n\t\t\t\t    <span>\n\t\t\t\t\t<i className=\"repeat-label fas fa-sort-amount-down-alt\"></i>\n\t\t\t\t\t<span className=\"perspective-label\">{this.props.gruntman.localizations.perspective_order}</span>\n\t\t\t\t    </span>\n\n\t\t\t\t    <IonSelect \n\t\t\t\t\tclassName=\"perspective-select\" \n\t\t\t\t\tinterface=\"popover\" \n\t\t\t\t\tvalue={this.props.tord} \n\t\t\t\t\tmode=\"ios\" \n\t\t\t\t\tonIonChange={e=>{\n\t\t\t\t\t    this.props.gruntman.do( // call a gruntman function\n\t\t\t\t\t\t\"perspective.update__perspective\", { \n\t\t\t\t\t\t    uid: this.props.uid, // pass it the things, you know the drill \n\t\t\t\t\t\t    id: this.props.id, \n\t\t\t\t\t\t    payload: {tord: e.detail.value}\n\t\t\t\t\t\t}\n\t\t\t\t\t    )\n\t\t\t\t\t}}\n\t\t\t\t    >\n\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"duas\">{this.props.gruntman.localizations.psp_abd}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"duds\">{this.props.gruntman.localizations.psp_dbd}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"deas\">{this.props.gruntman.localizations.psp_abe}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"deds\">{this.props.gruntman.localizations.psp_dbe}</IonSelectOption>\n\t\t\t\t\t<IonSelectOption className=\"repeat-select__option\" value=\"alph\">{this.props.gruntman.localizations.psp_alpha}</IonSelectOption>\n\t\t\t\t    </IonSelect>\n\t\t\t\t    <div className=\"help-icon\" onClick={this.handleHelp}>\n\t\t\t\t\t<i \n\t\t\t\t\t    className=\"far fa-question-circle\" \n\t\t\t\t\t></i>\n\t\t\t\t    </div>\n\t\t\t\t</span>\n\t\t\t    </div> \n\t\t\t</div>\n\t\t\t<div className=\"dropdown\">\n\t\t\t    {this.state.expanded?\n\t\t\t\t<div style={{overflowY: \"hidden\"}}>\n\t\t\t\t    <div className='pmodal-content-wrapper'>\n\t\t\t\t\t<IonSearchbar \n\t\t\t\t\t    autoFocus={true} // more wishful thinking?\n\t\t\t\t\t    animated={true} // idk what this does\n\t\t\t\t\t    spellcheck={true} // spellcheck\n\t\t\t\t\t    className='search-add'\n\t\t\t\t\t    // if we are on the first item and with no query, then add a 'Previous' to the end\n\t\t\t\t\t    //placeholder={`Let's go to..${(this.state.selected == 0 && this.state.query == '')?\"   |   Previous\" : \"\"}`} // TODO: jack do you like this? \n\t\t\t\t\t    // when we change, set the query, then set the selected to the first item \n\t\t\t\t\t    onIonChange={e => this.setState({query: e.detail.value, selected: 0})}\n\t\t\t\t\t    debounce={0} // update for every update\n\t\t\t\t\t    onKeyDown={this.handleKeydown} // call our gross function \n\n\t\t\t\t\t////////\n\t\t\t\t\t// loop through our filtered items, highlight if the index is right\n\t\t\t\t\t// onclick nav there, on hover set the index and the styling\n\t\t\t\t\t////////\n\n\t\t\t\t\t/>\n\t\t\t\t\t<div className='option-wrapper'> \n\t\t\t\t\t    {this.filterItems(this.state.query).map((item, i) => {\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t    <div \n\t\t\t\t\t\t\tclassName= {`poption-line ${(this.state.selected == i)? 'poption-text-hover' : ''}`}\n\t\t\t\t\t\t\tref={(this.state.selected == i)? this.currentlySelected : null}\n\t\t\t\t\t\t\tonMouseEnter={() => {\n\t\t\t\t\t\t\t    this.setState({selected: i}); \n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tonClick={()=>{ this.handleAppend(item) }}\n\t\t\t\t\t\t    >\n\t\t\t\t\t\t\t<i className={`${item[3]} option-icon`} style={{\n\t\t\t\t\t\t\t}}></i>\n\t\t\t\t\t\t\t<p \n\t\t\t\t\t\t\t    className= {`option-text`}\n\t\t\t\t\t\t\t>{item[0]}</p>\n\t\t\t\t\t\t    </div>\n\t\t\t\t\t\t    )\n\t\t\t\t\t\t}\n\t\t\t\t\t    )\n\t\t\t\t\t}\n\t\t\t\t\t</div> \n\t\t\t\t    </div>\n\t\t\t    </div> : null }\n\t\t\t</div>\n\t\t    </div>\n\t\t</IonPage>\n            </IonModal>\n        )\n    }\n\n\n}\n\nexport default PerspectiveEdit;\n\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, IonBadge, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Projects.css';\nimport './Pages.css';\n\nimport ReactTooltip from 'react-tooltip';\n\nimport Task from './Components/Task';\n\nimport { withRouter } from \"react-router\";\n\nimport { SortableProjectList } from './Components/Sortable';\n\nconst autoBind = require('auto-bind/react'); // autobind things! \n\nclass Projects extends Component { // define the component\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: '', // project name\n            possibleProjects:{}, // what are the possible projects? \n            possibleTags:{},  // what are the possible tags?\n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [],  // whats available\n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            parent: \"\",\n            is_sequential: false,\n            currentProject: {children:[]},\n            activeTask: \"\"\n        };\n\n        this.updatePrefix = this.random();\n\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n\n        this.activeTask = React.createRef();\n\n        this.name = React.createRef();\n\n        autoBind(this);\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevProps.id !== this.props.id) // if we updated the defer date\n            this.refresh(); // switching between perspectives are a prop update and not a rerender\n\n        if (prevProps.id !== this.props.id && this.props.options === \"do\") // if we are trying to create\n            this.name.current.focus(); // focus the name\n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n        this.updatePrefix = this.random();\n        let cProject = (await views.props.engine.db.getProjectStructure(this.props.uid, this.props.id, false));\n        this.setState({name:pPandT[0][0][this.props.id], possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB, currentProject: cProject, is_sequential: cProject.is_sequential, parent: cProject.parentProj});\n    }\n\n    componentDidMount() {\n        this.refresh();\n        if (this.props.options === \"do\") // if we are trying to create\n            this.name.current.focus(); // focus the name\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    updateName(e) {\n        if (e) {\n            this.props.gruntman.registerScheduler(() => { \n                // Register a scheduler to deal with React's onChange\n                // check out the FANCYCHANGE in task.jsx\n                this.props.gruntman.do( // call a gruntman function\n                    \"project.update__name\", { \n                        uid: this.props.uid, // pass it the things vvv\n                        id: this.props.id, \n                        name: e.target.value\n                    }\n                ).then(this.props.menuRefresh) // call the homebar refresh\n            }, `project.this.${this.props.id}-update`) // give it a custom id\n            this.setState({name: e.target.value})\n        } else { console.log(e)}\n    } \n\n    render() {\n        return (\n            <IonPage>\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n                    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--page-header-sandwich)\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    {(()=> {\n                                        if (this.state.parent !== \"\")\n                                            return <a className=\"fas fa-chevron-left backbutton\" onClick={()=>{this.props.paginate(\"projects\", this.state.parent);this.props.history.push(`/projects/${this.state.parent}`)}} />\n                                    })()}\n                                    <i style={{paddingRight: 4}} \n                                        className=\"fas fa-tasks\">\n                                    </i>\n                                    <input className=\"editable-title\" \n                                        onChange={(e)=> {e.persist(); this.updateName(e)}}\n                                        value={this.state.name} // TODO: jack this is hecka hacky\n                                        style={{transform: \"transformY(-2px)\"}}\n                                        ref={this.name}\n                                    />\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n                                <div className=\"greeting-container\" style={{marginLeft: 5, marginTop: 7, marginBottom: 5}}>\n                                    <a \n                                        onClick={()=> {\n                                            this.setState({is_sequential: !this.state.currentProject.is_sequential}, () => {\n                                                this.props.gruntman.do( // call a gruntman function\n                                                    \"project.update__pstate\", { \n                                                        uid: this.props.uid, // pass it the things vvv\n                                                        id: this.props.id, \n                                                        is_sequential: this.state.is_sequential\n                                                    }\n                                                );\n                                            }); // change the icon\n                                        }} \n                                        data-tip=\"LOCALIZE: Sequencial/Paralellel\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-icon-ring)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className={this.state.is_sequential ? \"fas fa-arrows-alt-v\":\"fas fa-arrows-alt-h\"}\n                                            style={{margin: 3, color: \"var(--task-icon-text)\", \n                                                fontSize: 13, transform: this.state.is_sequential ? \"translate(3.5px, -1px)\" : \"translate(0.25px, -1px)\"}}>\n                                        </i>\n                                    </a>\n                                    <a \n                                        data-tip=\"LOCALIZE: Delete\"\n                                        className=\"perspective-icon\" \n                                        onClick={()=>{\n                                            this.props.gruntman.do( // call a gruntman function\n                                                \"project.delete\", { \n                                                    uid: this.props.uid, // pass it the things vvv\n                                                    pid: this.props.id, \n                                                    parent: (this.state.parent === \"\" || this.state.parent === undefined) ? undefined : this.state.parent\n                                                }\n                                            ).then(()=>{\n                                                this.props.menuRefresh(); // refresh menubar\n                                                this.props.history.push((this.state.parent === \"\" || this.state.parent === undefined) ? \"/upcoming/\" : `/projects/${this.state.parent}`); // go back\n                                                this.props.paginate((this.state.parent === \"\" || this.state.parent === undefined) ? \"upcoming\" : `projects`, (this.state.parent === \"\" || this.state.parent === undefined) ? undefined : this.state.parent);\n                                            }) // call the homebar refresh\n                                        }}\n                                        style={{borderColor: \"var(--task-icon-ring)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className=\"fas fa-trash\"\n                                            style={{margin: 3, color: \"var(--task-icon-text)\", \n                                                fontSize: 10, transform: \"translate(2px, -2px)\"}}\n                                        >\n                                        </i>\n                                    </a>\n\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\", overflowX: \"hidden\"}}>\n\n                        <SortableProjectList list={this.state.currentProject.children} prefix={this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]} possibleProjects={this.state.possibleProjects} history={this.props.history} paginate={this.props.paginate} activeTaskRef={this.activeTask} activeTaskID={this.state.activeTask}/>\n\n                        <div style={{marginTop: 10}}>\n                            <a className=\"newbutton\" onClick={()=>{\n                                this.props.gruntman.do( // call a gruntman function\n                                    \"task.create\", { \n                                        uid: this.props.uid, // pass it the things vvv\n                                        pid: this.props.id, \n                                    },\n                                    true // bypass updates to manually do it + make it quicker\n                                ).then((result)=>{\n                                    let cProject = this.state.currentProject; // get current project\n                                    let avail = this.state.availability; // get current availibilty\n                                    avail[result.tid] = true; // set the current one to be available, temporarily so that people could write in it\n                                    cProject.children.push({type: \"task\", content:result.tid}); // add our new task\n                                    this.setState({activeTask:result.tid, currentProject: cProject, availability: avail}, () =>  this.activeTask.current._explode() ) // wosh!\n                                }) // call the homebar refresh\n                            }}><div><i className=\"fas fa-plus-circle subproject-icon\"/><div style={{display: \"inline-block\", fontWeight: 500}}>{this.props.localizations.nb_at}</div></div></a>\n                            <a className=\"newbutton\" onClick={async function() {\n                                let npid = (await this.props.gruntman.do( // call a gruntman function\n                                    \"project.create\", { \n                                        uid: this.props.uid, // pass it the things vvv\n                                        parent: this.props.id, \n                                    },\n                                )).pid;\n                                this.props.history.push(`/projects/${npid}/do`);\n                            }.bind(this)}><div><i className=\"fas fa-plus-circle subproject-icon\"/><div style={{display: \"inline-block\", fontWeight: 500}}>{this.props.localizations.nb_ap}</div></div></a>\n                            <div className=\"bottom-helper\">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n\n            </IonPage>\n        )\n    }\n}\n\nexport default withRouter(Projects);\n\n","// IMPORTS\nimport { IonContent, IonPage, IonMenuToggle, isPlatform } from '@ionic/react'; \nimport React, { Component, useEffect } from 'react';\nimport './WorkspaceWelcome.css';\nimport './Pages.css';\nimport Task from './Components/Task';\nimport { withRouter } from \"react-router\";\n\nconst autoBind = require('auto-bind/react'); // autobind is a lifesaver\n\n/*\n\n * Sometimes we complete.\n *\n * This is not always correct,\n *\n * so we have this page! \n *\n * @enquirer\n\n*/\n\n\n// define the main component!\nclass WorkspaceWelcome extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: \"\",\n            error: false,\n            loaded: false,\n        };\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        autoBind(this);\n    }\n\n    async refresh() {\n        try {\n            let wsp = await this.props.engine.db.getWorkspace(this.props.uid);\n            this.setState({name: wsp.meta.name, loaded: true});\n        } catch {\n            this.setState({error: true, loaded: true});\n        }\n    }\n\n    componentDidMount() {\n        this.refresh();\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n                <div className=\"workspace-welcome-container\" style={{overflowY: \"scroll\"}}>\n                    {this.state.loaded ? (\n                    !this.state.error?  (\n                    <div style={{margin: \"0 30px\", width: \"min(650px, 80vw)\"}}>\n                            <h1 className=\"workspace-title\">{this.props.localizations.workspace_welcome}<span className=\"workspace-name\" style={{fontSize: 20}}>{this.state.name}</span></h1>\n                        <p className=\"workspace-subtitle\">{this.props.localizations.workspace_explanation} </p>\n                        {/*<p className=\"workspace-subtitle\" style={{fontWeight: 600}}>You have been signed into the {this.state.name} workspace. Simply head back to <a href=\"https://app.condution.com\" className=\"link\">TODO.!!!!!!.com</a> to keep working. Your work is automatically saved.</p>*/}\n                        <div className=\"continue-button\" onClick={()=>{\n                            this.props.history.push(\"/upcoming/\");\n                            this.props.paginate(\"upcoming\");\n                        }}><i className=\"fas fa-snowboarding button-right\" />Let's do this!</div></div>\n                    ):(<div className=\"workspace-error\">\n                        <div style={{fontSize: 26}}> <b>{this.props.localizations.nahman}</b> <span style={{fontSize: 20}}>{this.props.localizations.where_workspace}</span></div>\n                        <div className=\"workspace-forbidden\">{this.props.localizations.workspace_forbidden}</div>\n                    </div>)):null}\n                </div>\n            </IonPage>\n        )\n    }\n}\n\nexport default withRouter(WorkspaceWelcome);\n","//import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport React, { useState } from 'react';\nimport './FloatingActionButton.css';\nimport * as chrono from 'chrono-node';\nimport {useSpring, animated} from 'react-spring'\n\n\n/*\n * Hello human,\n * You know I'm not Jack because my pen has no nib\n * You know I'm not Huxley because I can't adlib\n * If I said I could do frqnt end, I'd be telling a fib\n * And now, as punishment, I've lost a rib\n * But alas, here is abtib ^-^\n *\n * ~~@Exr0n~~\n * @Ex-rib\n *\n */\n\n\nfunction handleABTIBInput(value) {\n    console.log('abtib reportin to handle input ^-^');\n    console.log(value);\n    // TODO: nlp it\n    // TODO: create the task\n}\n\nfunction ABTIB(props) {\n    const defaultValue = props.localizations.qa_content;\n    const [isExpanded, setisExpanded] = useState(false);\n    const [isSaving, setisSaving] = useState(false);\n\n    const anim = useSpring({\n\tto: \n\t    (isSaving ? \n\t\t{\n\t\t    width: 280, \n\t\t    color:\"var(--quickadd-successtext)\", \n\t\t    backgroundColor: \"var(--quickadd-success)\"\n\t\t} \n\n\t\t: \n\n\t\t{\n\t\t    width: isExpanded ? 280:250, \n\t\t    color:\"var(--quickadd-text)\", \n\t\t    //color:\"var(--quickadd-successtext)\", \n\t\t    backgroundColor: \"var(--quickadd)\",\n\t\t    //backgroundColor: \"var(--quickadd-success)\"\n\t\t}\n\t    )\n    })\n\n    return <animated.input \n\t\tid=\"abtib\" \n\t\treadOnly={false} \n\t\ttype=\"text\" \n\t\tdefaultValue={\"\"} \n\t\tstyle={anim} \n\t\tclassName=\"attib\"\n\t\tref={props.reference}\n\n        onFocus={\n            (event) => {\n                event.target.value = \"\";\n                setisExpanded(true);\n            }\n        }\n        onBlur={e=>{\n            setisExpanded(false);\n            setisSaving(false);\n            e.target.value = \"\";\n        }}\n        onKeyUp={\n            (event) => {\n                if (event.key === 'Enter') {\n                    event.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                    setisSaving(true);\n                    let taskName = event.target.value;\n                    let dateInfo = chrono.parse(taskName);\n                    let due = undefined;\n                    let defer = undefined;\n                    if (dateInfo.length > 0) {\n                        // we got a date!\n                        if (dateInfo[0].end) {\n                            // both start (defer) and end (due)\n                            // get end (due) date\n                            due = dateInfo[0].end.date();\n                            defer = dateInfo[0].start.date();\n                            // strip the due date string\n                            taskName = taskName.replace(dateInfo[0].text, \"\").trim();\n\n                        }\n                        else {\n                            // only start (due)\n                            due = dateInfo[0].start.date();\n                            // strip the due date string\n                            taskName = taskName.replace(dateInfo[0].text, \"\").trim();\n                        }\n                    }\n                    let npobj = { \n                            uid: props.uid, // pass it the things vvv\n                            pid: \"\",\n                            due,\n                            defer,\n                            name: taskName\n                    };\n                    props.gruntman.do( // call a gruntman function\n                        \"task.create\", npobj,\n                    ).then(()=>{\n                        event.target.blur();\n                    });\n                }\n            }\n        }\n        placeholder={ defaultValue + ((Math.random()*128 < 1) ? \" ^-^\" : \"\")}\n     />;\n}\n\nexport default ABTIB;\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, {useEffect, useState} from 'react';\n//import OutsideClickHandler from 'react-outside-click-handler';\n\n// Capacitor Core Plugins\nimport { Plugins } from '@capacitor/core';\n\n\nimport \"./ReleaseNotesModal.scss\";\n\nconst { Storage } = Plugins;\n\n\n/*\n * Hello human,\n * good morning.\n *\n * That's the point of this modal\n *\n * @jemoka\n *\n */\n\n\n\nfunction ReleaseNotesModal(props) {\n    let [isShown, setIsShown] = useState(false);\n    useEffect(()=>{\n        Storage.get({key: \"condution_release\"}).then((res) => {\n            if (res.value!==\"onezerozero\") {\n                setIsShown(true);\n                Storage.set({key: \"condution_release\", value: \"onezerozero\"});\n            }\n        });\n    }, []);\n\n    return (\n        <IonModal ref={props.reference} isOpen={isShown} onDidDismiss={() => {}} style={{borderRadius: 5}} cssClass=\"releasenote-popover auto-height\">\n            <div className=\"inner-content releasenote-inside\">\n                <div className=\"condution-callout\"><span className=\"condution-name\">Condution</span><span className=\"condution-vn\">alpha-v1.0.0</span></div>\n                <div className=\"releasenotes\">Release Notes</div>\n                <h1 className=\"header\"> Hey, it's been a while.</h1>\n                <p className=\"content\">Thanks for entrusting Condution for your task management. After a few months of working on the app, we are ready to release our <b>next major version.</b></p>\n                <p className=\"content\">We promised to be a community driven task-management solution, and in 1.0, we aim do deliver on some of those promises. All of the features of 1.0 are proposed by our community <a href=\"https://discord.gg/3hS7yv3\">on Discord</a> and <a href=\"https://github.com/Shabang-Systems/Condution\">on GitHub</a>.</p>\n                <h1 className=\"header\"> tl;dr</h1>\n                <p className=\"content\">A refreshed interface, tag weights, and shared workspaces comes to this all-new release of Condution. We are also building out an API so that you could customize it even further. Enjoy!</p>\n                <p className=\"content\">Now, here's a rundown of some major features added.</p>\n                <div style={{borderTop: \"solid 1px var(--background-feature)\", width: \"100%\", height: 1}}>&nbsp;</div>\n                <h1 className=\"header\"> Shared Workspaces</h1>\n                <p className=\"content\">On the Upcoming page, you will notice a new <a className=\"workspace-name\" style={{display: \"inline-block\", margin: 0}}>Personal Workspace</a> icon. Tapping on that icon allows you to create, share, and open a workspace.</p>\n                <p className=\"content\">Here at Condution, we use workspaces to help manage our tasks too. We each have our own accounts, but share a collaborative Condution workspace.</p>\n                <h1 className=\"header\">  Weighted Tags</h1>\n                <p className=\"content\">Throughout the interface, you will notice that we sprinkled some indicators (heatmaps, progressbars, etc.) of how much a project/group of tasks are completed. The weights of those indicators are driven by user-specificed tag weights!</p>\n                <p className=\"content\">The tag pane <i className=\"fas fa-tags\"></i> accessible from every task allows you to pick tags and set their weights. These serve as the foundation of calculating the weight of a tag (and by extension, a project).</p>\n                <p className=\"content\">A \"High Energy\" tag, for instance, could have a higher weight; so, tasks tagged with that tag will be weighted more heavily.</p>\n                <div style={{borderTop: \"solid 1px var(--background-feature)\", width: \"100%\", height: 1}}>&nbsp;</div>\n                <h1 className=\"header\"> Cheerio</h1>\n                <p className=\"content\">Building Condution has been great fun for all of us; we hope you enjoy the app as well. As always, let us know if you have any feedback <a href=\"https://discord.gg/3hS7yv3\">on Discord</a> or <a href=\"https://github.com/Shabang-Systems/Condution\">on GitHub</a>.</p>\n                <p className=\"content\">If you would like to support our Development, we would be incredibly happy if you would pitch in on <a href=\"https://www.patreon.com/condution\">Patreon</a>. Your contribution will help us keep servers running and features going.</p>\n                <p className=\"content\">As always, with   and , thanks for using Condution.</p>\n            </div>\n        </IonModal>\n    )\n}\n\n\n\n\nexport default ReleaseNotesModal;\n\n","import React, { Component } from 'react';\nimport Mousetrap from 'mousetrap';\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\nimport { withRouter } from \"react-router\";\nimport { IonModal, IonContent, IonHeader, IonPage, IonTitle, IonToolbar, IonSearchbar, IonFooter } from '@ionic/react';\nimport './QuickSwitcher.css'\nimport '../Pages.css';\n\nconst autoBind = require('auto-bind/react');\n\n\n/*\n * I am the quick switcher.\n *\n * With me you switch quickly!\n *\n * but be warned:\n *\n * The code upon which I am built\n *\n * Often sends those who see it\n *\n * Into horror.\n *\n *\n * @enquirer\n */\n\n\n// TODO: subprojects and icon \n\n\nclass QuickSwitcher extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n\t    items: [], // processed items I get passed\n\t    filteredList: [], // my items filtered base upon query \n\t    query: '', // my query! \n\t    direction: true, // should I go back in history, or forward? (for back toggle)\n\t    selected: 0, // what is my selected item index?\n\t    prop_store: '', // store my props so we can check if they have changed \n\t    projs: [],\n\t}\n\tthis.searcher = React.createRef(); // searchbar input ref \n\tthis.currentlySelected = React.createRef(); // selected item ref \n    }\n\n    componentDidUpdate() {\n\tif (this.state.prop_store != this.props) { // if the props have changed, \n\t    this.processItems() // process the items \n\t}\n    }\n\n    componentDidMount() {\n\tthis.processItems() // when we mount, process the items.\n\tthis.setState({prop_store: this.props}) // set the prop store and the items \n\tthis.getProjs() // get our sub projects \n    }\n\n    async getProjs() { // get our projects \n\tconst subs = (await this.props.engine.db.getProjectsandTags(this.props.uid))[0][0] // hit the cache \n\tconst mod = Object.entries(subs).map(([key, value]) => { // process it \n\t    return ['.' + value, 'projects', key, 'fas fa-tasks']\n\t});\n\tthis.setState({projs: mod}) // and set our state \n    }\n\n    focusRef() { // focus the ref!\n\tif (this.searcher.current) // if the ref exists,\n            this.searcher.current.setFocus(); // focus it \n\tthis.setState({query: '', selected: 0}) // and reset the query \n\tthis.getProjs() // and get our projects\n    }\n\n\n    filterItems(searchTerm) { // filter the items!\n\tlet filteredItems = this.state.items.filter(item => {\n\t    return item[0].toLowerCase().indexOf(searchTerm.toLowerCase()) > -1;\n\t});\n\treturn filteredItems\n    }\n\n    processItems() { // process our items!\n\t// name, url prefix, id, icon classname \n\tthis.setState({items: \n\t    [\n\t\t[':upcoming', 'upcoming', '', 'fas fa-chevron-circle-right'], // set the first item to upcoming \n\t\t// (i could do + but i think thats less efficent \n\t\t[':completed', 'completed', '', 'fas fa-check-circle'], // set the second item to completed\n\t\t[':calendar', 'calendar', '', 'fas fa-calendar-alt'], // set the third item to calendar\n\t\t...this.props.items[0].map(o => ['!'+o.name, 'perspectives', o.id, 'fas fa-layer-group']), // map the perspectives\n\t\t...this.state.projs // the projects! \n\t    ],\n\t    prop_store: this.props //  and update the props \n\t})\n    }\n\n    handleKeydown(e) { // handle the keydown... avert your eyes\n\tconst keyname = e.key; // store the keyname\n\tif (keyname == \"Enter\") { // if we submit, \n\t    let selectedItem = this.filterItems(this.state.query)[this.state.selected] // store the selected item\n\t    // TODO: jack make the sidebar styling work \n\t    // if we are selectiong the first item and we have no query, \n\t    if ((!selectedItem || !this.state.query) && this.state.selected == 0) {  \n\t\tif (this.state.direction && this.props.history.length > 2) { // check our direction, \n\t\t    this.props.history.goBack() // then navigate back accordingly. \n\t\t} \n\t\telse if (this.props.history.length > 2) { this.props.history.goForward() }\n\t\tthis.setState({direction: !this.state.direction}) // and flip the direction \n\n\t    } else {\n\t\tconst slicedSelectedItem = selectedItem.slice(1) // store the sliced item!\n\t\tthis.props.history.push(`/${selectedItem[1]}/${selectedItem[2]}`) // push to the history\n\t\tthis.props.paginate(...slicedSelectedItem); // paginate-ify it!\n\t\tthis.props.updateIdx(slicedSelectedItem) // make our homebar keybinds work by giving it the index\n\t    }\n\t    this.props.dismiss() // dismiss the modal\n\t} else { // if we havent pressed submit, \n\t    const idx = this.state.selected // store the index \n\t    const len = this.filterItems(this.state.query).length-1 // and the filtered items cus react lifecyle bd \n\t    if (keyname == \"ArrowUp\" || (e.ctrlKey && keyname == \"p\")) { // if we are navigating up, \n\t\tif (idx > 0) { // and we selecting something greater than the first element, \n\t\t    this.setState({selected: idx-1}) // subtract from our index \n\t\t} else { this.setState({selected: len})} // if we are selection the first element, wrap to the last\n\t\tif (this.currentlySelected) {this.currentlySelected.current.scrollIntoView({ // and scroll it into view \n\t\t    behavior: \"smooth\", // make it smooooth \n\t\t    block: \"end\" // make it not get covered by the searchbar \n\t\t})}\n\t    } else if (keyname == \"ArrowDown\" || (e.ctrlKey && keyname == \"n\")) { // if we are scrolling down, \n\t\tif (idx == len) { // handle wrapping \n\t\t    this.setState({selected: 0})\n\t\t} else { this.setState({selected: idx+1}) } \n\t\tif (this.currentlySelected) {this.currentlySelected.current.scrollIntoView({\n\t\t    behavior: \"smooth\", // smooooooooooth\n\t\t    block: \"start\", // make it work better. their might be a better option for this \n\t\t})}\n\t\t// TODO: try this: https://stackoverflow.com/questions/56688002/javascript-scrollintoview-only-in-immediate-parent/56688719 (check last answer)\n\t    }\n\t}\n    }\n\n\n    render() { \n\treturn (\n\t    <IonModal \n\t\tisOpen={this.props.qs_show}  // are we open? \n\t\tanimated={false} // don't animate the opening. \n\t\tcssClass='qs_modal' // give it a class! \n\t\tautoFocus={true} // this doesnt do anything, but like, wishful thinking? \n\t\tonDidPresent={this.focusRef} // focus our input when we present the modal, and some other stuff\n\t\tonDidDismiss={this.props.dismiss} // set the state toggle when we dismiss the modal\n\t    >\n\t\t<div className='modal-content-wrapper'>\n\t\t    <IonSearchbar \n\t\t\tautoFocus={true} // more wishful thinking?\n\t\t\tref={this.searcher} // give it a ref!\n\t\t\tanimated={true} // idk what this does\n\t\t\tspellcheck={true} // spellcheck\n\t\t\tclassName='search-bar'\n\t\t\t// if we are on the first item and with no query, then add a 'Previous' to the end\n\t\t\tplaceholder={`Let's go to..${(this.state.selected == 0 && this.state.query == '')?\"   |   Previous\" : \"\"}`} // TODO: jack do you like this? \n\t\t\t// when we change, set the query, then set the selected to the first item \n\t\t\tonIonChange={e => this.setState({query: e.detail.value, selected: 0})}\n\t\t\tdebounce={0} // update for every update\n\t\t\tonKeyDown={this.handleKeydown} // call our gross function \n\n\t\t    ////////\n\t\t    // loop through our filtered items, highlight if the index is right\n\t\t    // onclick nav there, on hover set the index and the styling\n\t\t    ////////\n\n\t\t    />\n\t\t    <div className='option-wrapper'> \n\t\t\t{this.filterItems(this.state.query).map((item, i) => {\n\t\t\t    return (\n\t\t\t\t<div \n\t\t\t\t    className=\"option-line\"\n\t\t\t\t    className= {`option-line ${(this.state.selected == i)? 'option-text-hover' : ''}`}\n\t\t\t\t    ref={(this.state.selected == i)? this.currentlySelected : null}\n\t\t\t\t    onMouseEnter={() => {\n\t\t\t\t\tthis.setState({selected: i}); \n\t\t\t\t    }}\n\t\t\t\t    onClick={()=>{\n\t\t\t\t\tthis.props.history.push(`/${item[1]}/${item[2]}`) // push to the history\n\t\t\t\t\tthis.props.paginate(...item.slice(1)); // paginate-ify it!\n\t\t\t\t\tthis.props.dismiss()\n\t\t\t\t    }}\n\n\t\t\t\t>\n\t\t\t\t    <i className={`${item[3]} option-icon`} style={{\n\t\t\t\t    }}></i>\n\t\t\t\t    <p \n\t\t\t\t\tclassName= {`option-text`}\n\t\t\t\t    >{item[0]}</p>\n\t\t\t\t</div>\n\t\t\t\t)\n\n\t\t\t    }\n\t\t\t)}\n\n\t\t    </div> \n\t\t</div>\n\n\t    </IonModal>\n\t) \n    }\n\n}\n\nexport default withRouter(QuickSwitcher);\n\n\n\n","import React, { Component } from 'react';\nimport Mousetrap from 'mousetrap';\nimport bindGlobal from 'mousetrap-global-bind';\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\nimport { withRouter } from \"react-router\";\nimport QuickSwitcher from './QuickSwitcher'\n\nconst autoBind = require('auto-bind/react');\n\n\nclass Keybinds extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n\t    sidebar_list: [], // what's in the sidebar? \n\t    sidebar_index: 0, // how far down the sidebar are we? \n\t    prop_store: '', // store props so we can check if they have changed \n\t    qs_show: false // is the quick switcher shown? \n\t}\n    }\n\n    // define the bindings! 2d array of keybind and function \n    // TODO TODO: for some reason binding works now, so replace that later? \n    // TODO: expand these keybinds. ie, n/p and up/down arrows\n    bindings = [\n\t[\"alt+1\", ()=>{this.sidebar_switcher(this, 0)}], // nav to upcoming keybind\n\t[\"alt+2\", ()=>{this.sidebar_switcher(this, 1)}], // nav to completed keybind\n\t[\"alt+3\", ()=>{this.sidebar_switcher(this, 2)}], // nav to item 3 keybind\n\t[\"alt+4\", ()=>{this.sidebar_switcher(this, 3)}], // nav to item 4 keybind\n\t[\"alt+5\", ()=>{this.sidebar_switcher(this, 4)}], // nav to item 5 keybind\n\t[\"alt+6\", ()=>{this.sidebar_switcher(this, 5)}], // nav to item 6 keybind\n\t[\"alt+7\", ()=>{this.sidebar_switcher(this, 6)}], // nav to item 7 keybind\n\t[\"alt+8\", ()=>{this.sidebar_switcher(this, 7)}], // nav to item 8 keybind\n\t[\"alt+9\", ()=>{this.sidebar_switcher(this, 8)}], // nav to item 9 keybind\n\t[\"alt+0\", ()=>{this.sidebar_switcher(this, this.state.sidebar_list.length-1)}], // nav to last item keybind\n\t[\"alt+j\", ()=>{this.sidebar_incrimentor(this, 1)}], // nav down keybind \n\t[\"alt+k\", ()=>{this.sidebar_incrimentor(this, -1)}], // nav up keybind \n    [\"mod+enter\", ()=>{this.focusElement(this.props.abtib)}], // focus the FAB\n    ]\n\n    globalBindings = [\n    [\"mod+k\", ()=>{this.manageQs(this)}], // toggle quick swithcher keybind \n    ]\n    \n    //TODO: this doesnt work with clicking or like anything else but eh\n\n    sidebar_switcher(that, num){\n\tconst loca = this.state.sidebar_list[num]; // set our location to index in sidebar\n\tthat.props.history.push(`/${loca[0]}/${loca[1]}`) // push to the history\n\tthat.props.paginate(...loca); // paginate-ify it!\n\tthis.setState({sidebar_index: num}) // update the sidebar index \n    }\n\n    sidebar_incrimentor(that, num) {\n\tconst next_loca = this.state.sidebar_list[this.state.sidebar_index+num] // store the variable -- we can delet this. \n\tif (next_loca) { // if its defined, \n\t    this.sidebar_switcher(that, this.state.sidebar_index+num) // go there\n\t    // if it's not defined and it's at the end, \n\t} else if (this.state.sidebar_index == this.state.sidebar_list.length-1) {\n\t    this.sidebar_switcher(that, 0) // wrap around and go back to the beginning \n\t} else { // if it's not defined and not at the end, then it must be at the beginning,\n\t    this.sidebar_switcher(that, this.state.sidebar_list.length-1) // so go to the end \n\t}\n    }\n\n    setSidebarIndex(item) { // manage the quickswitcher sidebar index changing \n\tlet idx\n\tthis.state.sidebar_list.forEach((sidebarItem, i) => { // get passed an item, find the item \n\t    if (this.arraysAreIdentical(sidebarItem, item)) {\n\t\tidx = i\n\t    }\n\t})\n\tthis.setState({sidebar_index: idx})\n    }\n\n    arraysAreIdentical(arr1, arr2){ // helper function cus js bad \n\tfor (let i = 0, len = arr1.length; i < len; i++){\n\t    if (arr1[i] !== arr2[i]){\n\t\treturn false;\n\t    }\n\t}\n\treturn true; \n    }\n\n\n    manageQs(that) {\n\tthis.setState({qs_show: !this.state.qs_show}); \n    }\n\n    focusElement(ref) { // another helper function \n\tif (ref) {\n\t    ref.current.focus()\n\t}\n    }\n\n    componentDidUpdate(){\n\t//TODO: safe-proof(?) this\n\t// update the props\n\tif (this.state.prop_store != this.props) { // if the props have changed, \n\t    this.setState({\n\t\tsidebar_list: [\n\t\t    ['upcoming', ''], // set the first item to upcoming \n\t\t    // (i could do + but i think thats less efficent \n\t\t    ['completed', ''], // set the second item to completed\n\t\t    ['calendar', ''], // set the third item to calendar\n\t\t    ...this.props.perspectives.map(o => ['perspectives', o.id]), // map the perspectives\n\t\t    ...this.props.projects.map(o => ['projects', o.id]) // and the projects \n\t\t], \n\t\tprop_store: this.props //  and update the props \n\t    })\n\t}\n\n\t// TODO: get the current url and set the index that way \n\t//if (!this.state.sidebar_index) {\n\t//    this.setState({sidebar_index: side\n\n\t//}\n    }\n\n    // loop through and bind all our things!\n    componentDidMount() {\n\tthis.setState({prop_store: this.props})\n\n        this.bindings.map(combo => {\n\t\tMousetrap.bind(...combo)\n        })\n\n\tthis.globalBindings.map(combo => {\n\t\tMousetrap.bindGlobal(...combo)\n\t})\n    }\n\n    // loop through and unbind all our things!\n    componentWillUnmount() { \n        this.bindings.map(combo => {\n            Mousetrap.unbind(...combo)\n        })\n    }\n\n    render() { \n\treturn (\n\t    <QuickSwitcher \n\t\tqs_show={this.state.qs_show} \n\t\tdismiss={()=> this.setState({qs_show: false})}\n\t\titems={[this.props.perspectives]}\n\t\tpaginate={this.props.paginate}\n\t\tupdateIdx={this.setSidebarIndex}\n\t\tengine={this.props.engine} \n\t\tuid={this.props.uid} \n\t\tgruntman={this.props.gruntman} \n\n\n\t    /> \n\t)\n    }\n\n}\n\nexport default withRouter(Keybinds);\n\n\n","/*\n * The MIT License\n\nCopyright (c) 2015 Ola Holmstrm <olaholmstrom+github@gmail.com>\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n\nimport React from 'react'\nimport PropTypes from 'prop-types'\nconst autoBind = require('auto-bind/react'); // autobind things! \n\n\nfunction uniq (arr) {\n  let out = []\n\n  for (let i = 0; i < arr.length; i++) {\n    if (out.indexOf(arr[i]) === -1) {\n      out.push(arr[i])\n    }\n  }\n\n  return out\n}\n\n/* istanbul ignore next */\nfunction getClipboardData (e) {\n  if (window.clipboardData) {\n    return window.clipboardData.getData('Text')\n  }\n\n  if (e.clipboardData) {\n    return e.clipboardData.getData('text/plain')\n  }\n\n  return ''\n}\n\nfunction defaultRenderTag (props) {\n  let {tag, key, disabled, onRemove, classNameRemove, getTagDisplayValue, ...other} = props\n  return (\n    <span key={key} {...other}>\n      {getTagDisplayValue(tag)}\n      {!disabled &&\n        <a className={classNameRemove} onClick={(e) => onRemove(key)} />\n      }\n    </span>\n  )\n}\n\ndefaultRenderTag.propTypes = {\n  key: PropTypes.number,\n  tag: PropTypes.string,\n  onRemove: PropTypes.func,\n  classNameRemove: PropTypes.string,\n  getTagDisplayValue: PropTypes.func\n}\n\nfunction defaultRenderInput ({addTag, ...props}) {\n  let {onChange, value, ...other} = props\n  return (\n    <input type='text' onChange={onChange} value={value} {...other} />\n  )\n}\n\ndefaultRenderInput.propTypes = {\n  value: PropTypes.string,\n  onChange: PropTypes.func,\n  addTag: PropTypes.func\n}\n\nfunction defaultRenderLayout (tagComponents, inputComponent) {\n  return (\n    <span>\n      {tagComponents}\n      {inputComponent}\n    </span>\n  )\n}\n\nfunction defaultPasteSplit (data) {\n  return data.split(' ').map(d => d.trim())\n}\n\nconst defaultInputProps = {\n  className: 'react-tagsinput-input',\n  placeholder: 'Add a tag'\n}\n\nclass TagsInput extends React.Component {\n  /* istanbul ignore next */\n  constructor () {\n    super()\n              autoBind(this);\n\n    this.state = {tag: '', isFocused: false}\n    this.focus = this.focus\n    this.blur = this.blur\n  }\n\n  static propTypes = {\n    focusedClassName: PropTypes.string,\n    addKeys: PropTypes.arrayOf(PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string\n    ])),\n    addOnBlur: PropTypes.bool,\n    addOnPaste: PropTypes.bool,\n    currentValue: PropTypes.string,\n    inputValue: PropTypes.string,\n    inputProps: PropTypes.object,\n    onChange: PropTypes.func.isRequired,\n    onChangeInput: PropTypes.func,\n    removeKeys: PropTypes.arrayOf(PropTypes.oneOfType([\n      PropTypes.number,\n      PropTypes.string\n    ])),\n    renderInput: PropTypes.func,\n    renderTag: PropTypes.func,\n    renderLayout: PropTypes.func,\n    pasteSplit: PropTypes.func,\n    tagProps: PropTypes.object,\n    onlyUnique: PropTypes.bool,\n    value: PropTypes.array.isRequired,\n    maxTags: PropTypes.number,\n    validate: PropTypes.func,\n    validationRegex: PropTypes.instanceOf(RegExp),\n    disabled: PropTypes.bool,\n    tagDisplayProp: PropTypes.string,\n    preventSubmit: PropTypes.bool\n  }\n\n  static defaultProps = {\n    className: 'react-tagsinput',\n    focusedClassName: 'react-tagsinput--focused',\n    addKeys: [9, 13],\n    addOnBlur: false,\n    addOnPaste: false,\n    inputProps: {},\n    removeKeys: [8],\n    renderInput: defaultRenderInput,\n    renderTag: defaultRenderTag,\n    renderLayout: defaultRenderLayout,\n    pasteSplit: defaultPasteSplit,\n    tagProps: {className: 'react-tagsinput-tag', classNameRemove: 'react-tagsinput-remove'},\n    onlyUnique: false,\n    maxTags: -1,\n    validate: () => true,\n    validationRegex: /.*/,\n    disabled: false,\n    tagDisplayProp: null,\n    preventSubmit: true\n  }\n\n  _getTagDisplayValue (tag) {\n    const {tagDisplayProp} = this.props\n\n    if (tagDisplayProp) {\n      return tag[tagDisplayProp]\n    }\n\n    return tag\n  }\n\n  _makeTag (tag) {\n    const {tagDisplayProp} = this.props\n\n    if (tagDisplayProp) {\n      return {\n        [tagDisplayProp]: tag\n      }\n    }\n\n    return tag\n  }\n\n  _removeTag (index) {\n    let value = this.props.value.concat([])\n    if (index > -1 && index < value.length) {\n      let changed = value.splice(index, 1)\n      this.props.onChange(value, changed, [index])\n    }\n  }\n\n  _clearInput () {\n    if (this.hasControlledInput()) {\n      this.props.onChangeInput('')\n    } else {\n      this.setState({tag: ''})\n    }\n  }\n\n  _tag () {\n    if (this.hasControlledInput()) {\n      return this.props.inputValue\n    }\n\n    return this.state.tag\n  }\n\n  _addTags (tags) {\n    let {onChange, onValidationReject, onlyUnique, maxTags, value} = this.props\n\n    if (onlyUnique) {\n      tags = uniq(tags)\n      tags = tags.filter(tag => value.every(currentTag =>\n        this._getTagDisplayValue(currentTag) !== this._getTagDisplayValue(tag))\n      )\n    }\n\n    const rejectedTags = tags.filter(tag => !this._validate(this._getTagDisplayValue(tag)))\n    tags = tags.filter(tag => this._validate(this._getTagDisplayValue(tag)))\n    tags = tags.filter(tag => {\n      let tagDisplayValue = this._getTagDisplayValue(tag)\n      if (typeof tagDisplayValue.trim === 'function') {\n        return tagDisplayValue.trim().length > 0\n      } else {\n        return tagDisplayValue\n      }\n    })\n\n    if (maxTags >= 0) {\n      let remainingLimit = Math.max(maxTags - value.length, 0)\n      tags = tags.slice(0, remainingLimit)\n    }\n\n    if (onValidationReject && rejectedTags.length > 0) {\n      onValidationReject(rejectedTags)\n    }\n\n    if (tags.length > 0) {\n      let newValue = value.concat(tags)\n      let indexes = []\n      for (let i = 0; i < tags.length; i++) {\n        indexes.push(value.length + i)\n      }\n      onChange(newValue, tags, indexes)\n      this._clearInput()\n      return true\n    }\n\n    if (rejectedTags.length > 0) {\n      return false\n    }\n\n    this._clearInput()\n    return false\n  }\n\n  _validate (tag) {\n    let {validate, validationRegex} = this.props\n\n    return validate(tag) && validationRegex.test(tag)\n  }\n\n  _shouldPreventDefaultEventOnAdd (added, empty, keyCode) {\n    if (added) {\n      return true\n    }\n\n    if (keyCode === 13) {\n      return (this.props.preventSubmit || !this.props.preventSubmit && !empty)\n    }\n\n    return false\n  }\n\n  focus () {\n    if (this.input && typeof this.input.focus === 'function') {\n      this.input.focus()\n    }\n\n    this.handleOnFocus()\n  }\n\n  blur () {\n    if (this.input && typeof this.input.blur === 'function') {\n      this.input.blur()\n    }\n\n    this.handleOnBlur()\n  }\n\n  accept () {\n    let tag = this._tag()\n\n    if (tag !== '') {\n      tag = this._makeTag(tag)\n      return this._addTags([tag])\n    }\n\n    return false\n  }\n\n  addTag (tag) {\n    return this._addTags([tag])\n  }\n\n  clearInput () {\n    this._clearInput()\n  }\n\n  handlePaste (e) {\n    let {addOnPaste, pasteSplit} = this.props\n\n    if (!addOnPaste) {\n      return\n    }\n\n    e.preventDefault()\n\n    let data = getClipboardData(e)\n    let tags = pasteSplit(data).map(tag => this._makeTag(tag))\n\n    this._addTags(tags)\n  }\n\n  handleKeyDown (e) {\n    if (e.defaultPrevented) {\n      return\n    }\n\n    let {value, removeKeys, addKeys} = this.props\n    const tag = this._tag()\n    let empty = tag === ''\n    let keyCode = e.keyCode\n    let key = e.key\n    let add = addKeys.indexOf(keyCode) !== -1 || addKeys.indexOf(key) !== -1\n    let remove = removeKeys.indexOf(keyCode) !== -1 || removeKeys.indexOf(key) !== -1\n\n    if (add) {\n      let added = this.accept()\n      if (this._shouldPreventDefaultEventOnAdd(added, empty, keyCode)) {\n        e.preventDefault()\n      }\n    }\n\n    if (remove && value.length > 0 && empty) {\n      e.preventDefault()\n      this._removeTag(value.length - 1)\n    }\n  }\n\n  handleClick (e) {\n    if (e.target === this.div) {\n      this.focus()\n    }\n  }\n\n  handleChange (e) {\n    let {onChangeInput} = this.props\n    let {onChange} = this.props.inputProps\n    let tag = e.target.value\n\n    if (onChange) {\n      onChange(e)\n    }\n\n    if (this.hasControlledInput()) {\n      onChangeInput(tag)\n    } else {\n      this.setState({tag})\n    }\n  }\n\n  handleOnFocus (e) {\n    let {onFocus} = this.props.inputProps\n\n    if (onFocus) {\n      onFocus(e)\n    }\n\n    this.setState({isFocused: true})\n  }\n\n  handleOnBlur (e) {\n    let {onBlur} = this.props.inputProps\n\n    this.setState({isFocused: false})\n\n    if (e == null) {\n      return\n    }\n\n    if (onBlur) {\n      onBlur(e)\n    }\n\n    if (this.props.addOnBlur) {\n      const tag = this._makeTag(e.target.value)\n      this._addTags([tag])\n    }\n  }\n\n  handleRemove (tag) {\n    this._removeTag(tag)\n  }\n\n  inputProps () {\n    // eslint-disable-next-line\n    let {onChange, onFocus, onBlur, ...otherInputProps} = this.props.inputProps\n\n    let props = {\n      ...defaultInputProps,\n      ...otherInputProps\n    }\n\n    if (this.props.disabled) {\n      props.disabled = true\n    }\n\n    return props\n  }\n\n  inputValue (props) {\n    return props.currentValue || props.inputValue || ''\n  }\n\n  hasControlledInput () {\n    const {inputValue, onChangeInput} = this.props\n\n    return typeof onChangeInput === 'function' && typeof inputValue === 'string'\n  }\n\n  componentDidMount () {\n    if (this.hasControlledInput()) {\n      return\n    }\n\n    this.setState({\n      tag: this.inputValue(this.props)\n    })\n  }\n\n  componentDidUpdate (prevProps, prevState, snapshot) {\n    /* istanbul ignore next */\n    if (this.hasControlledInput()) {\n      return\n    }\n\n    if (!this.inputValue(this.props)) {\n      return\n    }\n\n    this.setState({\n      tag: this.inputValue(this.props)\n    })\n  }\n\n  render () {\n    /* eslint-disable */\n    let {\n      value,\n      onChange,\n      tagProps,\n      renderLayout,\n      renderTag,\n      renderInput,\n      addKeys,\n      removeKeys,\n      className,\n      focusedClassName,\n      addOnBlur,\n      addOnPaste,\n      inputProps,\n      pasteSplit,\n      onlyUnique,\n      maxTags,\n      validate,\n      validationRegex,\n      disabled,\n      tagDisplayProp,\n      inputValue,\n      onChangeInput,\n      ...other\n    } = this.props\n    /* eslint-enable */\n\n    let {isFocused} = this.state\n\n    if (isFocused) {\n      className += ' ' + focusedClassName\n    }\n\n    let tagComponents = value.map((tag, index) => {\n      return renderTag({\n        key: index,\n        tag,\n        onRemove: this.handleRemove,\n        disabled,\n        getTagDisplayValue: this._getTagDisplayValue,\n        ...tagProps\n      })\n    })\n\n    let inputComponent = renderInput({\n      ref: r => { this.input = r },\n      value: this._tag(),\n      onPaste: this.handlePaste,\n      onKeyDown: this.handleKeyDown,\n      onChange: this.handleChange,\n      onFocus: this.handleOnFocus,\n      onBlur: this.handleOnBlur,\n      addTag: this.addTag,\n      ...this.inputProps()\n    })\n\n    return (\n      <div ref={r => { this.div = r }} onClick={this.handleClick} className={className}>\n        {renderLayout(tagComponents, inputComponent)}\n      </div>\n    )\n  }\n}\n\nexport default TagsInput\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { useState, useEffect } from 'react';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nimport TagsInput from './TagsInput'\nimport AutosizeInput from 'react-input-autosize';\n\nimport 'react-tagsinput/react-tagsinput.css' // If using WebPack and style-loader.\n\nimport \"./WorkspaceModal.scss\";\n\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the repeat UI\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\nfunction autosizingRenderInput ({addTag, ...props}) {\n  let {onChange, value, ...other} = props\n  return (\n      <AutosizeInput style={{border: 0}} name=\"react-tagsinput-actualinput\" type='text' onChange={onChange} value={value} {...other} />\n  )\n}\n\nfunction WorkspaceModal(props) {\n\n    let [workspaceName, setWorkspaceName] = useState(\"\");\n    let [workspaceEditors, setWorkspaceEditors] = useState([]);\n    let [isPublic, setIsPublic] = useState(false);\n\n\n    let update = (async function() {\n            if (props.currentWorkspace) {\n                let wsp = await props.engine.db.getWorkspace(props.currentWorkspace);\n                setWorkspaceName(wsp.meta.name);\n                setWorkspaceEditors(wsp.meta.editors);\n                setIsPublic(wsp.meta.is_public);\n            }\n        });\n\n    useEffect(()=>{\n        update();\n    }, [props.currentWorkspace]);\n\n\n    return (\n        <IonModal ref={props.reference} isOpen={props.isShown} onDidPresent={()=>{update()}} onDidDismiss={() => {if(props.onDidDismiss) props.onDidDismiss()}} style={{borderRadius: 5}} cssClass=\"workspace-popover auto-height\">\n            <div className=\"inner-content workspace-inside\">\n                <div className=\"workspace-header\">\n                    <span className=\"workspace-callout\">{props.gruntman.localizations.perspective_build_callout}</span>\n                    <input className=\"editable-title workspace-input\" \n                        value={workspaceName} \n                        style={{minWidth: 0}}\n                        placeholder=\"@NEEDLOC Tap to set name\"\n                        onChange={(e)=>{\n                            setWorkspaceName(e.target.value);\n                            e.persist();\n                            props.gruntman.registerScheduler(() => props.engine.db.editWorkspace(props.currentWorkspace, {meta: {editors: workspaceEditors, name: e.target.value, is_public: isPublic ? true : false}}), `workspace-${props.currentWorkspace}-update`)\n                        }}\n                    />\n                </div>\n                <div style={{display: \"flex\", alignItems: \"center\", marginLeft: 5}}>\n                    <i className=\"fas fa-user-edit\" style={{color: \"var(--content-normal-alt)\"}} />\n                    <TagsInput value={workspaceEditors} onChange={(list)=>{\n                        let isValid = true;\n                        list.filter(e=>!workspaceEditors.includes(e)).forEach(newAccount => {\n                            if (/\\w+@\\w+\\.\\w+/.test(newAccount))\n                                props.engine.db.inviteToWorkspace(props.currentWorkspace, newAccount);\n                            else \n                                isValid = false;\n                        });\n                        workspaceEditors.filter(e=>!list.includes(e)).forEach(removedAccount => {\n                            props.engine.db.revokeToWorkspace(props.currentWorkspace, removedAccount);\n                        });\n                        if (isValid) {\n                            props.engine.db.editWorkspace(props.currentWorkspace, {meta: {editors: list, name: workspaceName, is_public: isPublic ? true : false}});\n                            setWorkspaceEditors(list);\n                        }\n                    }} renderInput={autosizingRenderInput} inputProps={{placeholder: props.gruntman.localizations.workspace_email}} />\n                </div>\n            </div>\n        </IonModal>\n    )\n}\n\n\n\n\nexport default WorkspaceModal;\n\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t530,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t531,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t532,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t533,\n\t\t18\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t534,\n\t\t19\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t535,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t536,\n\t\t20\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t537,\n\t\t21\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t538,\n\t\t22\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t539,\n\t\t23\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t540,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t541,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t542,\n\t\t24\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t543,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t544,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t545,\n\t\t25\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t546,\n\t\t26\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t547,\n\t\t27\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t548,\n\t\t28\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t549,\n\t\t29\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t550,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t551,\n\t\t15\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t552,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t553,\n\t\t30\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t554,\n\t\t31\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t555,\n\t\t32\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t556,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t557,\n\t\t17\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t558,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t559,\n\t\t33\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t560,\n\t\t34\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t561,\n\t\t35\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t562,\n\t\t36\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t563,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t564,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t565,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t566,\n\t\t37\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t567,\n\t\t16\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t568,\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t569,\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t570,\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t571,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t572,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 263;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t576,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 265;\nmodule.exports = webpackAsyncContext;","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Repeat.css';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the repeat UI\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\nconst autoBind = require('auto-bind/react');\n\nclass Repeat extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n            name: \"\", // task's name\n            rule: \"none\", // the repeat rule\n            advanced: false, // advanced or not\n            on: undefined, // advanced repeat rules\n        }\n    }\n\n    async loadTask() {\n        let taskInfo = await this.props.engine.db.getTaskInformation(this.props.uid, this.props.tid);\n        this.setState({\n            name: taskInfo.name, // name is name\n            rule: taskInfo.repeat ? taskInfo.repeat.rule : \"none\", // rule is rule, if there's a rule\n            advanced: taskInfo.repeat ? (taskInfo.repeat.on !== undefined) : false, // on is on, if there's a rule\n            on: taskInfo.repeat ? taskInfo.repeat.on : undefined, // on is on, if there's a rule\n        });\n    }\n\n    componentDidMount() {\n        this.loadTask();\n    }\n\n    render() {\n        return (\n            <IonModal ref={this.props.reference} isOpen={this.props.isShown} onDidDismiss={() => {if(this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5}} cssClass={\"task-repeat \"+(()=>{\n                // Different repeat modes require different height modals\n                 switch (this.state.rule) {\n                      case \"none\":\n                          return \"task-repeat__default\";\n                      case \"daily\":\n                          return \"task-repeat__default\";\n                      case \"weekly\":\n                          return (this.state.advanced ? \"task-repeat__advanced-weekly\" : \"task-repeat__default\");\n                      case \"monthly\":\n                          return (this.state.advanced ? \"task-repeat__advanced-monthly\" : \"task-repeat__default\");\n                      case \"yearly\":\n                          return \"task-repeat__default\";\n                  }\n            })()}>\n                <div>\n                    {/* Header */}\n                    <div className=\"repeat-header\">\n                        {/* Repeat name */}\n                        <span style={{display: \"flex\", alignItems: \"center\", width: \"100%\"}}>\n\t\t\t                <b className=\"bold-prefix\" >{this.props.gruntman.localizations.repeat_word}</b> \n\t\t\t                <div className=\"repeat-task-name\">{this.state.name}</div>\n\t\t\t            </span>\n                        {/* Close button */}\n                        <a className=\"repeat-close\" onClick={this.props.onDidDismiss}><i className=\"fa fa-times\"></i></a>\n                    </div>\n                    <div>\n                        <div className=\"repeat-basic-row\">\n                            <div className=\"repeat-rule-selector\">\n                            <span>\n                                <i className=\"repeat-label fa fa-redo\"></i>\n                                <span className=\"repeat-label\">{this.props.gruntman.localizations.repeat_word}</span>\n                            </span>\n                            {/* The big select, force iOS style */}\n                            <IonSelect className=\"repeat-select\" interface=\"popover\" value={this.state.rule} mode=\"ios\" onIonChange={e=>{\n                                    // Set the repeat\n                                    this.props.gruntman.do(\n                                        \"task.update\", \n                                        { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: e.detail.value}}}\n                                    )\n\n                                    // Set the state too!\n                                    this.setState({rule: e.detail.value, advanced: false, on: undefined});\n \n                                }}>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"none\">@NEEDLOC None</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"daily\">{this.props.gruntman.localizations.repeat_every_day}</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"weekly\">{this.props.gruntman.localizations.repeat_every_week}</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"monthly\">{this.props.gruntman.localizations.repeat_every_month}</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"yearly\">{this.props.gruntman.localizations.repeat_every_year}</IonSelectOption>\n                            </IonSelect>\n                            </div>\n                                {\n                                    \n                                <a style={{color: \"var(--decorative-light-alt)\", float: \"right\", cursor: \"pointer\", display: [\"weekly\", \"monthly\"].includes(this.state.rule) ? \"inline\" : \"none\" }} className={\"fas \" + (this.state.advanced ? \"fa-caret-down\":\"fa-caret-up\")} onClick={()=> {\n                                    if (this.state.advanced) {\n                                        this.props.gruntman.do(\n                                            \"task.update\", \n                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule}}}\n                                        ) // undo advanced \n                                        this.setState({rule: this.state.rule, advanced: false, on: undefined}); // set the state too!\n                                    } else {\n                                        this.props.gruntman.do(\n                                            \"task.update\", \n                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: []}}}\n                                        ) // do advanced \n                                        this.setState({rule: this.state.rule, advanced: true, on: []}); // set the state too!\n                                    }\n                                }}></a>\n                                }\n                        </div>\n                    </div>\n                    <div style={{margin: \"10px 20px\", color: \"var(--content-normal-alt)\"}}>\n                        {(()=>{\n                            if (this.state.advanced)\n                                switch (this.state.rule) {\n                                    case \"weekly\":\n                                        return (\n                                            <div className=\"repeat-weekgrid\">\n                                                {/* DONT LOCALIZE THESE VALUES. THEY WILL CAUSE PROBLEMS. ON LOCALIZATION, MAKE THESE ARRAYS */}\n                                                {/* [\"originalString\", \"localizedString\"] <= localize in this way */}\n                                                {[[\"M\", this.props.gruntman.localizations.repeat_datework_weekname_m], [\"T\", this.props.gruntman.localizations.repeat_datework_weekname_tu], [\"W\",  this.props.gruntman.localizations.repeat_datework_weekname_w], [\"Th\",  this.props.gruntman.localizations.repeat_datework_weekname_th], [\"F\",  this.props.gruntman.localizations.repeat_datework_weekname_f], [\"S\",  this.props.gruntman.localizations.repeat_datework_weekname_sa], [\"Su\",  this.props.gruntman.localizations.repeat_datework_weekname_su]].map(e => <a key={e} className={\"repeat-weekgrid-number \"+ (()=>{if(this.state.on)  return (this.state.on.includes(e[0]) ? \"repeat-weekgrid-number-selected\":\"\"); else return \"\"})()} onClick={()=>{\n                                                    if (this.state.on.includes(e[0])) {\n                                                        let oldOn = this.state.on;\n                                                        let newOn = oldOn.filter(elem=>elem!==e[0]);\n                                                        // toggle it off\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    } else  {\n                                                        let oldOn = this.state.on;\n                                                        oldOn.push(e[0]);\n                                                        let newOn = oldOn;\n                                                        // toggle it on\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    }\n                                                }}>{e[1]}</a>)}\n                                            </div>\n                                        )\n                                    case \"monthly\":\n                                        return (\n                                            <div className=\"repeat-dategrid\">\n                                                {/* DONT LOCALIZE THESE VALUES. THEY WILL CAUSE PROBLEMS. ON LOCALIZATION, MAKE THESE ARRAYS */}\n                                                {[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\", \"29\", \"30\", \"31\", \"Last\"].map(e => <a key={e} className={\"repeat-dategrid-number \"+ (()=>{if(this.state.on)  return (this.state.on.includes(e.toLowerCase()) ? \"repeat-dategrid-number-selected\":\"\"); else return \"\"})()} onClick={()=>{\n                                                    if (this.state.on.includes(e.toLowerCase())) {\n                                                        let oldOn = this.state.on;\n                                                        let newOn = oldOn.filter(elem=>elem!==e.toLowerCase());\n                                                        // toggle it off\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    } else  {\n                                                        let oldOn = this.state.on;\n                                                        oldOn.push(e.toLowerCase());\n                                                        let newOn = oldOn;\n                                                        // toggle it on\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    }\n                                                }}>{e}</a>)}\n                                            </div>\n                                        );\n                                }\n                        })()}\n                    </div>\n                </div>\n            </IonModal>\n        )\n    }\n\n\n}\n\nexport default Repeat;\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\nimport React, { Component } from 'react';\nimport './TagEditor.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\n/*\n * Although I do not agree\n * Jack told me to make this feat\n * I did not make this carefree\n * yet this is far from elite\n *\n * I resolved to give it a try\n * and encountered this very strange bug\n * This thing makes me want to cry\n * Front-end is far from a drug\n *\n * I may be exageratting\n * Maybe this bug wasn't so bad\n * But still I cannot add padding\n * and it still makes me very sad\n *\n * React may feel like a drug\n * Until you find the next bug\n *\n * by @zbuster05\n * */\n\nconst autoBind = require('auto-bind/react');\n\nclass TagEditor extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            tagList: []\n        }\n    }\n\n   async setTagState() {\n        this.state.tagList = await this.props.engine.db.getTags(this.props.uid);\n    }\n   // TODO BADDD \n    componentDidMount() {\n        this.setTagState()\n    }\n\n    tagClicked() {\n        console.log(\"Tag Clicked!\")\n    }\n\n    render() {\n        return (\n            <IonModal ref={this.props.reference} isOpen={this.props.isShown} onDidPresent={() => {this.setTagState()}} onDidDismiss={() => {if(this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5, border: \"1px solid red\"}} cssClass={\"tag-editor\"}>\n\n                {/*Text Header*/}\n                <div className=\"TagEditor-header\">\n                    <span style={{display: \"inline-flex\", alignItems: \"center\"}}>\n\t\t\t            <b className=\"bold-prefix\" >Tags</b> \n\t\t\t        </span>\n\n                    {/*Close Button*/}\n                    <a className=\"TagEditor-close\" onClick={this.props.onDidDismiss}><i className=\"fa fa-times\"></i></a>\n                </div>\n                \n                {/*Like actual tag setting stuff*/}\n                <div className=\"tag-pane-container\">\n                    <div className=\"tag-list\">\n                        {this.state.tagList.map(tag => {\n                            return (\n                                <div className=\"tag-in-list\" onClick={() => {this.tagClicked()}}>\n                                    <div className=\"tag-name\">\n                                        {tag.name}\n                                    </div>\n                                    <a className=\"TagEditor-close\" onClick={(e) => {\n                                        console.log(\"x clicked\")\n                                        e.stopPropagation()\n                                    }}><i className=\"fa fa-times x\"></i></a>\n                                </div>\n                            )\n                        })}\n                    </div>\n                    <div className=\"tag-settings\"></div>\n                </div>\n            </IonModal>\n        )\n    }\n}\n\nexport default TagEditor\n","// A whole lotta imports\n\n// Ionic components\nimport { IonItem, IonInput, IonContent, IonGrid, IonRow, IonCol, IonSegment, IonLabel, IonButton, IonPopover } from '@ionic/react';\n\n// Detect whether is mobile\nimport { getPlatforms } from '@ionic/react';\n\n// Like, your heart and soul\nimport React, { Component } from 'react';\n\n// React Spring animation packages\nimport { Spring, animated, Keyframes } from 'react-spring/renderprops'\n\n// Cool components \nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\nimport CreatableSelect from 'react-select/creatable';\n\n// Our very own repeat UI\nimport Repeat from './Repeat';\n\n// Our very own tag editor UI\nimport TagEditor from './TagEditor';\n\n// Our very own calendar popover\nimport CalendarPopover from './CalendarPopover';\n\n// Our very own CSS\nimport './Task.css';\n\n// Oooips\nimport ReactTooltip from 'react-tooltip';\n\n// FNS date parcing utils\nconst { parseFromTimeZone } = require('date-fns-timezone')\n\n// autobind those functions\nconst autoBind = require('auto-bind/react');\n\n/*\n *\n * Hello human,\n *\n * I am a task.\n *\n * You seriously are reading the help poem about this?\n *\n * @jemoka\n *\n */\n\n\n// Our very own custom animatinos\nconst AnimationFactory = Keyframes.Spring({\n    // Open->close animation\n    hide: {\n        to: {\n            taskHeight:38, \n            taskMargin: \"2px 8px\", \n            taskBackground:\"\", \n            taskPadding: 3,\n            taskEditOpacity: 0,\n            taskEditMaxHeight: 0,\n            taskOpacity: 1,\n            taskNameDecoration: \"\",\n            taskPosition: \"\",\n            taskDisplay: \"\",\n            taskMaxHeight: 40,\n        },\n        config: {\n            tension: 200,\n            friction: 25,\n            mass: 1\n        },\n        reset: false\n\n    },\n    // Close->open animation\n    show: {\n        to: {\n            taskHeight:38, \n            taskMargin:\"15px 25px\", \n            taskBackground:\"var(--task-selected)\", \n            taskPadding: 10,\n            taskEditOpacity: 1,\n            taskDisplay: \"\",\n            taskOpacity: 1,\n            taskEditMaxHeight: 300,\n            taskNameDecoration: \"\",\n            taskPosition: \"\",\n            taskMaxHeight: 500,\n        },\n        config: {\n            tension: 200,\n            friction: 25,\n            mass: 1\n        },\n        reset: false\n    },\n    // Incomplete->complete animation\n    complete: [\n        {\n            to: {\n                taskMargin: \"14px 8px\", \n                taskNameDecoration: \"line-through\",\n                taskOpacity: 1,\n                taskPosition: \"\",\n            },\n            config: {\n                tension: 200,\n                friction: 25,\n                mass: 1\n            },\n\n        }, \n        {\n            to: {\n                taskMaxHeight: 0,\n                taskHeight:0, \n                taskOpacity: 0,\n                taskMargin: \"0px 8px\", \n                taskPadding: 0,\n                taskPosition: \"absolute\",\n            },\n            config: {\n                tension: 800,\n                friction: 50,\n                mass: 1\n            },\n        }\n    ],\n})\n\n// Aww sheat, here we go\nclass Task extends Component {\n\n    constructor(props) {\n        // Invoke React's constructor\n        super(props);\n\n        // Bind it good!\n        autoBind(this);\n\n        this.state = { \n            expanded: false, // are we expanded?\n            deferDate: undefined, // what's our defer date?\n            dueDate: undefined, // what's our due date?\n            name: \"\", // what's our name string?\n            desc: \"\",  // what's our description string?\n            isFlagged: false, // are we flagged?\n            isFloating: false, // are we floating? or just eating jello?\n            project:\"\", // what's our project ID?\n            tags: [], // what are the IDs of our tags?\n            decoration: \"\",  // are we \"od\" \"ds\" or just just good ol' \"\"?\n            availability: true, // are we avaliable? or are we deferred or blocked (in which case it'd be false.)\n            isComplete: false, // are we completed?\n            showRepeat: false, // is our repeat UI shown?\n            showTagEditor: false, // is our TagEditor UI shown?\n            deferPopoverShown: false, // is the defer calendar popover shown?\n            duePopoverShown: false, // is the due calendar popover shown?\n            startingCompleted: this.props.startingCompleted, // disable immediate onComplete animation for completed\n            possibleTags: this.props.datapack[0], // tags will need to be dynamically added, so\n            haveBeenExpanded: (this.props.startOpen !== undefined && this.props.startOpen !== false), // did we render the edit part yet? optimization\n            notificationPopoverShown: [false, null], // is our notification popover shown?\n            notificationCalendarShown: false, // is the notification calendar shown?\n            hasNotification: false // do we have a notification scheudled?\n        }\n        this.initialRenderDone = false; // wait for data to load to make animation decisions\n        this.me = React.createRef(); // who am I? what am I?\n        this.repeater = React.createRef(); // what's my repeater?\n        this.checkbox = React.createRef(); // what's my pseudocheck\n        this.TagEditorRef = React.createRef(); // what's my tag editor\n        this.actualCheck = React.createRef(); // what's my (actual, non-seen) checkmark\n        this.duePopover = React.createRef(); // what's my due popover?\n        this.deferPopover = React.createRef(); // what's my defer popover?\n        this.notificationPopover = React.createRef(); // what's my notification popover?\n        this.notificationCalender = React.createRef(); // what's my notification calandar?\n    }\n\n    showRepeat() {this.setState({showRepeat: true})} // util func for showing repeat\n    hideRepeat() {this.setState({showRepeat: false})} // util func for hiding repeat\n\n    showTagEditor() {this.setState({showTagEditor: true})} // function for showing tag editor\n    showTageEditor() {this.setState({showTageEditor: false})}  // function for hiding tag editor\n\n    showNotificationPopover(e) {\n        if (this.state.hasNotification)\n            this.setState({notificationPopoverShown: [true, e.nativeEvent]})\n        else \n            this.setState({notificationCalendarShown: true})\n    }\n\n    // Monster function to query task info TODO TODO #cleanmeup\n    async loadTask() {\n\n        // Obviously we need this, the task info\n        let taskInfo = await this.props.engine.db.getTaskInformation(this.props.uid, this.props.tid);\n\n        // Setting state to update the rest of them elements\n        this.setState({\n            name: taskInfo.name, // Set name field\n            desc: taskInfo.desc, // Set task description\n            project: taskInfo.project,  // Set project ID\n            tags: taskInfo.tags, // Set tag ID array\n            isFloating: taskInfo.isFloating, // Set isFloating bool\n            isFlagged: taskInfo.isFlagged, // Set is Flagged bool\n            isComplete: taskInfo.isComplete, // Set is complete style\n            dueDate: (\n                taskInfo.due ? // If we have a due date\n                (taskInfo.isFloating ? // and if we are floating\n                    new Date(taskInfo.due.seconds*1000) : // then the due date in just... the due date\n                    parseFromTimeZone( // otherwise, we stringify the date to remove timezone info\n                        (new Date(taskInfo.due.seconds*1000)).toISOString(), \n                        {timeZone: taskInfo.timezone} // and cast it to the right time zone\n                    )\n                ):\n                undefined \n            ), \n            deferDate: (\n                taskInfo.defer ? // If we have a defer date\n                (taskInfo.isFloating ?  // and if we are floating\n                    new Date(taskInfo.defer.seconds*1000) : // then the defer date is just... the defer date\n                    parseFromTimeZone( // otherwise, we stringify the date to remove timezone info\n                        (new Date(taskInfo.defer.seconds*1000)).toISOString(), \n                        {timeZone: taskInfo.timezone} // and cast it to the right time zone\n                    )\n                ): undefined\n            ),\n            hasNotification: await this.props.gruntman.checkNotification(this.props.tid),\n        });\n        this.refreshDecorations(); // flush and generate them decorations!\n        this.initialRenderDone = true;\n    }\n\n    refreshDecorations() {\n        if (this.state.dueDate) // if we gotta due date\n            if (this.state.dueDate-(new Date()) < 0) // and this kid has not done his homework\n                this.setState({decoration: \"od\"}); // give 'em a red badge\n        else if (this.state.dueDate-(new Date()) < 24*60*60*1000) // or if this kid has not done his homework a day earlier\n            this.setState({decoration: \"ds\"}); // give 'em an orange badge\n        else \n            this.setState({decoration: \"\"}); // give 'em an nothing badge\n\n        if (this.state.deferDate) // if we gotta defer date\n            if (this.state.deferDate-(new Date()) > 0) // and this kid is trying to start early\n                this.setState({availability: false}); // tell 'em it's not avaliable\n        else if (this.props.availability === true) //  otherwise, if this thing's avaliable\n            this.setState({availability: true}); // set it to be so!\n        else if (!this.props.availability) // or if my props make me disabled\n            this.setState({availability: false}); // well then you gotta follow them props, no?\n    }\n\n    componentDidMount() {\n        this.loadTask(); // load the task when we mount   \n        document.addEventListener('mousedown', this.detectOutsideClick, false); // and listen for clicks everywhere\n    }\n\n    componentWillUnmount = () => document.removeEventListener('mousedown', this.detectOutsideClick, false); // remove the listener... no memory leaks plez\n\n    toggleTask = () => this.setState(state => ({expanded: !state.expanded})); // util function to toggl a task\n    \n    closeTask() {\n        this.setState({expanded: false});\n    }\n    //closeTask = () => this.setState({expanded: false}); // util function to close a task\n\n    openTask() {\n        if (this.state.haveBeenExpanded)\n            this.setState({expanded: true});\n        else \n            this.setState({haveBeenExpanded: true}, ()=>this.setState({expanded: true}));\n    }// util function to open a task\n\n    _explode() {\n        // You should probably be calling openTask()\n        this.initialRenderDone = true;\n        this.setState({haveBeenExpanded: true}, ()=>this.setState({expanded: true}));\n    }\n\n    detectOutsideClick(e) {\n\n        if (this.me.current) // if we are mounted\n            if (this.me.current.contains(e.target)) // if we are clicking me\n                return; //click inside\n\n        if (this.repeater.current) // if our repeater is a thing that mounted\n            if (this.repeater.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.duePopover.current) // if our due popover is a thing that mounted\n            if (this.duePopover.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.deferPopover.current) // if our defer popover is a thing that mounted\n            if (this.deferPopover.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.notificationPopover.current) // if our notification popover is a thing that mounted\n            if (this.notificationPopover.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.notificationCalender.current) // if our notification calendar is a thing that mounted\n            if (this.notificationCalender.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n        \n        if (this.TagEditorRef.current) // if our repeater is a thing that mounted\n            if (this.TagEditorRef.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n        \n        //if (this.props.envelope) // if we have a drag envelope\n            //if (this.props.envelope.current) // if we have a drag envelope\n                //if (this.props.envelope.current.contains(e.target)) // and we are clicking inside that\n                    {/*return; //click inside*/}\n\n        // DRAG ENVELOPES ARE SUPPOSED TO PROTECT AGAINST DRAGGING, AND ARE UNIVERSAL ACROSS ALL TASKS\n        // UNCOMMENTING THIS WILL MAKE MULTIPLE TASKS OPEN AT ONCE ON UPCOMING\n\n        if (document.getElementById(\"parking-lot\").contains(e.target))\n            return;\n\n        if (this.props.onModal)\n            if (document.getElementById(\"airplane-hanger\").contains(e.target))\n                return;\n\n        if (this.state.showRepeat) // if we are showing our repeat\n            return; //click inside\n\n        if (this.state.showTagEditor) // if we are showing TagEditor\n            return; // click inside\n\n        //otherwise,\n        this.closeTask();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevState.deferDate !== this.state.deferDate) // if we updated the defer date\n            this.refreshDecorations();\n        if (prevState.dueDate !== this.state.dueDate) // if we updated the due date\n            this.refreshDecorations();\n        if (prevState.expanded !== this.state.expanded && this.state.expanded === true) {// if we opened a task for updating\n            if (getPlatforms().includes(\"mobile\"))\n                document.getElementById(\"abtib\").style.display = \"none\";\n            if (this.props.setDragEnabled) // if we are a draggable task\n                this.props.setDragEnabled(false); // disable drag\n            this.props.gruntman.lockUpdates(); // tell gruntman to chill\n        }\n        else if (prevState.expanded !== this.state.expanded && this.state.expanded === false) { // if we closed a task\n            if (getPlatforms().includes(\"mobile\"))\n                document.getElementById(\"abtib\").style.display = \"block\";\n            if (this.props.setDragEnabled) // if we are a draggable task\n                this.props.setDragEnabled(true); // enable drag\n            this.props.gruntman.unlockUpdates(); // tell gruntman to... grunt!\n        }\n        if (prevProps.startOpen !== this.props.startOpen && this.props.startOpen) // we are newly starting open\n            this.openTask(); // open task\n    }\n\n\n    // ready fo this?\n\n    render() {\n\n        return (\n            <div>\n\n                {/*animation factory to orchistrate animations*/}\n\n                <AnimationFactory\n\n                    native  \n\n                    state = {\n                        this.initialRenderDone ?\n                            (this.state.isComplete? // if we are complete \n                                (this.state.startingCompleted? // and we start complete \n                                    (this.state.expanded? // and we are expanded \n                                        \"show\":\"hide\") // show, otherwise, hide \n                                        :\"complete\") // if we are complete,  and don't start completed, complete. \n                                        : // if we arnt complete, \n                                this.state.startingCompleted ?  // and we start complete \n                                \"complete\" :\n                                (this.state.expanded? \"show\":\"hide\")):\"hide\"\n                    } // if we are incomplete, and we start incomplete, then show or hide based on expanded \n\n                >\n                    {animatedProps => {\n                        return (\n                            // Actual task container, now\n                            <animated.div \n                                onClick={(e)=>{\n                                    if(!this.state.expanded && e.target !== this.checkbox.current && e.target !== this.actualCheck.current && !this.props.freeze && !(this.state.isComplete&&!this.state.startingCompleted)) { \n                                        this.openTask(); // open the task\n                                    }\n                                }}\n                                className={\"task \"+(this.state.expanded?\"expanded\":\"collapsed\")} \n\n                                ref={this.me} \n\n                                style={{\n                                    minHeight: animatedProps.taskHeight, \n                                    maxHeight: animatedProps.taskMaxHeight, \n                                    margin: animatedProps.taskMargin, \n                                    background:animatedProps.taskBackground, \n                                    opacity:animatedProps.taskOpacity, \n                                    overflow: \"hidden\",\n                                    display: animatedProps.taskDisplay,\n                                    position: animated.taskPosition,\n                                    padding: animatedProps.taskPadding}}\n                            >\n\n                                {/* Chapter 0: Utility Components */}\n\n                                {/* Gotta get those on hover tips */}\n                                {/* And load up + hide the repeat UI, too! */}\n                                <Repeat tid={this.props.tid} reference={this.repeater} isShown={this.state.showRepeat} onDidDismiss={this.hideRepeat} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman}/>\n                                {/* As well as load up + hide the tag editor!*/}\n                                <TagEditor reference={this.TagEditorRef} isShown={this.state.showTagEditor} onDidDismiss={()=>this.setState({showTagEditor: false})} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman}/>\n                                \n                                {/* Chapter 1: Task Checkmark */}\n                                {/* Who could have thought so much code goes into a checkbox? */}\n                                <div style={{display: \"inline-block\", transform: \"translateY(-3px)\"}}>\n                                    {/* First, an invisible checkmark */}\n                                    <input \n                                        type=\"checkbox\" \n\n     ref={this.actualCheck}\n                                        id={\"task-check-\"+this.props.tid} \n                                        className=\"task-check\"\n                                        defaultChecked={this.props.startingCompleted}\n                                        onChange={()=>{\n\n                                            // If we are uncompleting a task (that is, currently task is complete) \n                                            if (this.state.isComplete) {\n                                                this.props.gruntman.lockUpdates();\n                                                // Well, first, uncomplete it\n                                                this.setState({isComplete: false})\n                                                // Update the database, registering a gruntman action while you are at it.\n                                                this.props.gruntman.do(\"task.update__uncomplete\", { uid: this.props.uid, tid: this.props.tid}, true)\n                                                // Whatever this is\n                                                this.props.gruntman.unlockUpdates(1000)\n                                            }\n                                            // If we are completing a task (that is, currently task is incomplete)\n                                            else if (!this.state.isComplete) {\n                                                // Lock updates so that animation could finish\n                                                this.props.gruntman.lockUpdates();\n                                                // Complete it\n                                                this.setState({isComplete: true})\n                                                // Update the database, registering a gruntman action while you are at it.\n                                                this.props.gruntman.do(\"task.update__complete\", { uid: this.props.uid, tid: this.props.tid}, true)\n                                                //TODO wait for animation to finish before state update??\n                                                this.props.gruntman.unlockUpdates(1000)\n                                            }\n                                        }} \n                                        style={{opacity: this.state.availability?1:0.35}}\n                                    />\n\n                                    {/* Oh yeah, that checkmark above you can't actually see */}\n                                    {/* Here's what the user actually clicks on, the label! */}\n                                    <label ref={this.checkbox} className={\"task-pseudocheck \"+this.state.decoration} id={\"task-pseudocheck-\"+this.props.tid} htmlFor={\"task-check-\"+this.props.tid}>&zwnj;</label>\n                                </div>\n\n                                {/* The animated input box */}\n                                <animated.input \n                                    defaultValue={this.state.name} \n                                    onChange={\n                                        (e)=>{\n                                            // THIS. REFER TO THIS. YOU ARE HERE. STOP SEARCHING.\n                                            // :point down: is FANCYCHANGE\n\n                                            // If somebody dares to do the complicated action of task name change\n                                            e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n\n                                            // Register a scheduler to watch for more changes\n                                            // because dang react calls onChange on every freaking change\n                                            // TODO TODO destruct all schedulers on view change\n                                            this.props.gruntman.registerScheduler(() => this.props.gruntman.do(\n                                                \"task.update\", // the scheduler actually updates the task\n                                                {\n                                                    uid: this.props.uid, \n                                                    tid: this.props.tid, \n                                                    query:{name: e.target.value} // setting the name to the name\n                                                }\n                                            ), `task-name-${this.props.tid}-update`) // and we will schedule it as this\n                                        }\n                                    } \n\n                                    onFocus={(e)=>{ \n                                        // open the task if its not open already\n                                        if(!this.state.expanded) { \n                                            //this.openTask(); // open the task\n                                            if (getPlatforms().includes(\"mobile\")) e.target.blur(); // blur, only if mobile to fix bugs where even in attempted readonly the cursor blurs\n                                        }\n                                    }} \n                                    className={\"task-name \"+(this.state.expanded?\"\":\"no-select\")} \n                                    readOnly={(!this.state.expanded)} \n                                    type=\"text\" \n                                    autoComplete=\"off\" \n                                    placeholder={this.props.gruntman.localizations.nt} \n                                    style={{opacity: this.state.availability?1:0.35, textDecoration: animatedProps.taskNameDecoration}}\n\t\t\t\t    onKeyDown={e => (e.key == \"Enter\")? this.setState({expanded: false}) : undefined}\n\t\t\t\t    />\n\n                                {/* Task edit. The thing that slides open on edit. */}\n                                {(() => {\n                                    if (this.state.haveBeenExpanded===true)\n                                        return(\n                                            <animated.div className=\"task-edit\" style={{opacity: animatedProps.taskEditOpacity, overflow: \"hidden\",maxHeight: animatedProps.taskEditMaxHeight}}>\n\n                                                {/* First, task description field */}\n                                                <textarea \n\t\t\t\t\t\t    tabIndex='0'\n                                                    placeholder={this.props.gruntman.localizations.desc} \n                                                    className=\"task-desc\" \n                                                    style={{marginBottom: 10}} \n                                                    defaultValue={this.state.desc}\n                                                    onChange={\n                                                        (e)=>{\n                                                            // Register a scheduler to deal with React's onChange\n                                                            // Search for the word FANCYCHANGE to read my spheal on this\n                                                            e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                            this.props.gruntman.registerScheduler(() => this.props.gruntman.do(\n                                                                \"task.update\", \n                                                                {\n                                                                    uid: this.props.uid, \n                                                                    tid: this.props.tid, \n                                                                    query:{desc: e.target.value}\n                                                                }\n                                                            ), `task-desc-${this.props.tid}-update`)\n                                                        }\n                                                    }\n                                                >\n                                                </textarea>\n\n                                                {/* Task icon set. TODO delete task */}\n                                                <div style={{display: \"inline-block\", marginBottom: 6, transform: \"translateY(-5px)\"}}>\n                                                    {/* Flagged icon */}\n                                                    <a data-tip={this.props.gruntman.psp_flg} className=\"task-icon\" style={{borderColor: this.state.isFlagged ? \"var(--task-icon-ring-highlighted)\":\"var(--task-icon-ring)\", cursor: \"pointer\"}} onClick={()=>{\n                                                        // On change, set the flagged state to the opposite of whatever it is\n                                                        // Both on the db...\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{isFlagged: !this.state.isFlagged}}\n                                                        )\n                                                        // And the task!\n                                                        this.setState({isFlagged: !this.state.isFlagged});\n\n                                                    }}><i className=\"fas fa-flag\" style={{margin: 3, color: this.state.isFlagged ? \"var(--task-icon-highlighted)\" : \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(7px, 5px)\"}} ></i></a>\n\n                                                    {/* Floating icon */}\n                                                    <a data-tip=\"LOCALIZE: Floating\" className=\"task-icon\" style={{borderColor: this.state.isFloating? \"var(--task-icon-ring-highlighted)\":\"var(--task-icon-ring)\", cursor: \"pointer\"}} onClick={()=>{\n                                                        // On change, set the floating state to the opposite of whatever it is\n                                                        // Both on the db... TODO flush the timezone too?\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{isFloating: !this.state.isFloating}}\n                                                        )\n                                                        // And the task!\n                                                        this.setState({isFloating: !this.state.isFloating});\n\n                                                    }}><i className=\"fas fa-globe-americas\" style={{margin: 3, color: this.state.isFloating? \"var(--task-icon-highlighted)\" : \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(7px, 5px)\"}} ></i></a>\n\n                                                    {/* Repeat icon that, on click, shows repeat */}\n                                                    <a onClick={this.showRepeat} className=\"task-icon\" style={{borderColor: \"var(--task-icon-ring)\", cursor: \"pointer\"}} data-tip=\"LOCALIZE: Repeat\"><i className=\"fas fa-redo\" style={{margin: 3, color: \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(6.5px, 5.5px)\"}} ></i></a>\n\n                                                    {/* Notification icon that, on click, shows notify popover */}\n                                                    <CalendarPopover  gruntman={this.props.gruntman} reference={this.notificationCalender} uid={this.props.uid} disableOnclick engine={this.props.engine} isShown={this.state.notificationCalendarShown} onDidDismiss={()=>this.setState({notificationCalendarShown: false})} useTime initialDate={this.state.dueDate} onDateSelected={(d)=>{\n                                                        this.props.gruntman.cancelNotification(this.props.tid).then(()=>{\n                                                            this.props.gruntman.scheduleNotification(this.props.tid, this.props.uid, this.state.name, this.state.desc, d);\n                                                            this.setState({hasNotification: true});\n                                                        });\n                                                    }}/>\n                                                    <IonPopover\n                                                        showBackdrop={false}\n                                                        isOpen={this.state.notificationPopoverShown[0]}\n                                                        cssClass='notif-popover'\n                                                        mode=\"md\" \n                                                        onDidDismiss={e => this.setState({notificationPopoverShown: [false, null]})}\n                                                        event={this.state.notificationPopoverShown[1]}\n                                                        ref={this.notificationPopover}\n                                                    >\n                                                        <div>\n                                                            <div className=\"notification-popover-item\" onClick={()=>{\n                                                                this.props.gruntman.cancelNotification(this.props.tid)\n                                                                this.setState({hasNotification: false, notificationPopoverShown: [false, null]});\n                                                            }}>Cancel Notification</div>\n                                                            <div className=\"notification-popover-item\" onClick={()=>this.setState({notificationCalendarShown: true, notificationPopoverShown:[false, null]})}>Change Notification</div>\n                                                        </div>\n                                                    </IonPopover>\n                                                    {(()=>{\n                                                        if (this.props.gruntman.notifPermissionGranted && !(getPlatforms().includes(\"mobileweb\") || getPlatforms().includes(\"desktop\")))\n                                                            return <a onClick={this.showNotificationPopover} className=\"task-icon\" style={{borderColor: \"var(--task-icon-ring)\", cursor: \"pointer\"}} data-tip=\"LOCALIZE: Repeat\"><i className=\"fas fa-bell\" style={{margin: 3, color: \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(7px, 5.5px)\"}} ></i></a>\n                                                    })()}\n\n                                                    {/* TagEditor icon that shows TagEditor on click*/}\n                                                    <a onClick={this.showTagEditor} className=\"task-icon\" style={{borderColor: \"var(--task-icon-ring)\", marginRight: 20, cursor: \"pointer\"}} data-tip=\"LOCALIZE: Freaking TagEditor\"><i className=\"fas fa-tags\" style={{margin: 3, color: \"var(--task-icon-text)\", fontSize: 15, transform: \"translate(6.5px, 5.5px)\"}}></i></a>\n                                                    {/*<div className=\"task-icon\" style={{borderColor: \"var(--task-checkbox-feature-alt)\", marginRight: 20}}><a className=\"fas fa-globe-americas\" style={{margin: 3, color: \"var(--task-textbox)\", fontSize: 13, transform: \"translate(2.5px, -0.5px)\"}}></a></div>*/}\n                                                </div>\n\n\n                                                {/* Task date set */}\n                                                <div style={{display: \"inline-block\", marginBottom: 8}}>\n\n                                                    {/* Defer date container */}\n                                                    <div style={{display: \"inline-block\", marginRight: 10, marginBottom: 5, marginLeft: 6}}>\n                                                        {/* The. Defer. Date. */}\n                                                        <i className=\"fas fa-play\" data-tip=\"LOCALIZE: Defer Date\" style={{transform: \"translateY(-1px)\", marginRight: 10, color: \"var(--task-icon)\", fontSize: 10}}></i>\n                                                        <CalendarPopover  gruntman={this.props.gruntman} reference={this.deferPopover} uid={this.props.uid} engine={this.props.engine} isShown={this.state.deferPopoverShown} onDidDismiss={()=>this.setState({deferPopoverShown: false})} useTime initialDate={this.state.deferDate} onDateSelected={(d)=>{\n                                                            this.props.gruntman.do(\n                                                                \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{defer:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                            )\n                                                            this.setState({deferDate: d});\n\n                                                        }}/>\n                                                        {(() => {\n                                                            {/* The. Defer. Date. Input. */}\n                                                            const DateInput = ({ value, onClick }) => { \n                                                                return (\n                                                                    <input \n\t\t\t\t\t\t\t\t\ttabIndex='0'\n\t\t\t\t\t\t\t\t\tclassName=\"task-datebox\" \n\t\t\t\t\t\t\t\t\treadOnly={(getPlatforms().includes(\"mobile\"))} defaultValue={value}  onChange={(e)=>{\n                                                                        // Register a scheduler to deal with React's onChange\n                                                                        // Search for the word FANCYCHANGE to read my spheal on this\n                                                                        // DATEHANDLING is here too. If you are looking for that, stop searching\n\n                                                                        e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                                        this.props.gruntman.registerScheduler(() => {\n                                                                            let d = chrono.parseDate(e.target.value); // NLP that date!\n                                                                            if (d) this.setState({deferDate: d}); // we we got a valid date, update the calendar UI\n                                                                            if (d) // and update the database too!\n                                                                                this.props.gruntman.do(\n                                                                                    \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{defer:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                                )\n                                                                        }, `task-defer-${this.props.tid}-update`)\n                                                                    }} onFocus={(e) => {\n                                                                        if (getPlatforms().includes(\"mobile\"))\n                                                                            this.setState({deferPopoverShown: true})\n                                                                        else {\n                                                                            onClick();\n                                                                            e.target.focus();\n                                                                        }\n\n                                                                    }}\n                                                                    />\n                                                                );\n                                                            };\n                                                            const TimeInput = ({ value, onChange }) => {\n                                                                // IDK why this is needed, but it is. Sometimes it decides that it will drop the final 0?\n                                                                if (value.slice(value.length-2, value.length) === \":0\") value = value + \"0\";\n                                                                // TODO: calling complex string ops to fix an interface bug not a good idea?\n                                                                return (\n                                                                    <input\n                                                                        className=\"task-timebox\"\n                                                                        defaultValue={value}\n                                                                        onKeyPress={e => {\n                                                                            // TIMEHANDLING is here. If you are searching for that, it's here.\n                                                                            // But anyway, on change, parse the time\n                                                                            let d = chrono.parseDate(e.target.value); //TODO bad?\n                                                                            // ...and throw away the date \n                                                                            if (d && e.key === \"Enter\") onChange(d.getHours() + \":\" + d.getMinutes() + \":\" + d.getSeconds()); // TODO make this with the onChange API\n                                                                        }}\n                                                                    />\n                                                                )};\n                                                            return (\n                                                                <DatePicker\n                                                                    selected={this.state.deferDate}\n                                                                    portalId={this.props.onModal?\"airplane-hanger\":\"parking-lot\"}\n                                                                    onChange={date => {\n                                                                        // If the calendar got a new date, set it\n                                                                        this.setState({deferDate: date});\n\n                                                                        // No longer needed. State updates handle decoration udpates. Kept here for decorative purposes:\n                                                                        // and hit the DB too!\n                                                                        this.props.gruntman.do(\n                                                                            \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{defer: date, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                        )\n                                                                    }}\n                                                                    showTimeInput\n                                                                    dateFormat=\"MM/dd/yyyy h:mm aa\"\n                                                                    customTimeInput={<TimeInput />}\n                                                                    customInput={<DateInput />}\n                                                                />\n                                                            )\n                                                        })()}\n                                                    </div>\n\n                                                    <div style={{display: \"inline-block\", marginBottom: 5, marginLeft: 6}}>\n                                                        <i className=\"fas fa-stop\" data-tip=\"LOCALIZE: Due Date\" style={{transform: \"translateY(-1px)\", marginRight: 10, color: \"var(--task-icon)\", fontSize: 10}}></i>\n                                                        {/* Due date popover */}\n                                                        <CalendarPopover  gruntman={this.props.gruntman} reference={this.duePopover} uid={this.props.uid} engine={this.props.engine} isShown={this.state.duePopoverShown} onDidDismiss={()=>this.setState({duePopoverShown: false})} useTime initialDate={this.state.dueDate} onDateSelected={(d)=>{\n                                                            this.props.gruntman.do(\n                                                                \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{due:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                            )\n                                                            this.setState({dueDate: d});\n\n                                                        }}/>\n                                                        {(() => {\n                                                            const DateInput = ({ value, onClick }) => { \n                                                                return (\n                                                                    <input \n\t\t\t\t\t\t\t\t\ttabIndex='0'\n\t\t\t\t\t\t\t\t\tclassName=\"task-datebox\" readOnly={(getPlatforms().includes(\"mobile\")) ? true : false} defaultValue={value} onChange={(e)=>{\n                                                                        // Register a scheduler to deal with React's onChange\n                                                                        // Search for the word FANCYCHANGE to read my spheal on this\n                                                                        // Search for the word DATEHANDLING for what the heck the code actually does\n\n                                                                        e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                                        this.props.gruntman.registerScheduler(() => {\n                                                                            let d = chrono.parseDate(e.target.value);\n                                                                            if (d) this.setState({dueDate: d});\n                                                                            if (d)\n                                                                                this.props.gruntman.do(\n                                                                                    \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{due:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                                )\n\n                                                                        }, `task-due-${this.props.tid}-update`)\n                                                                    }\n                                                                        } onFocus={(e) => {\n                                                                            if (getPlatforms().includes(\"mobile\"))\n                                                                                this.setState({duePopoverShown: true})\n                                                                            else {\n                                                                                onClick();\n                                                                                e.target.focus();\n                                                                            }\n                                                                        }}\n                                                                    />\n                                                                );\n                                                            };\n                                                            const TimeInput = ({ value, onChange }) => {\n                                                                // IDK why this is needed, but it is. Sometimes it decides that it will drop the final 0?\n                                                                if (value.slice(value.length-2, value.length) === \":0\") value = value + \"0\";\n                                                                // TODO: calling complex string ops to fix an interface bug not a good idea?\n                                                                return (\n                                                                    <input\n                                                                        className=\"task-timebox\"\n                                                                        defaultValue={value}\n                                                                        onKeyPress={e => {\n                                                                            // Search for TIMEHANDLING for notes on time handling.\n                                                                            // But anyway, on change, parse the time\n                                                                            let d = chrono.parseDate(e.target.value); //TODO bad?\n                                                                            // ...and throw away the date \n                                                                            if (d && e.key === \"Enter\") onChange(d.getHours() + \":\" + d.getMinutes() + \":\" + d.getSeconds());\n                                                                        }}\n                                                                    />\n                                                                )};\n                                                            return (\n                                                                <DatePicker\n                                                                    selected={this.state.dueDate}\n                                                                    portalId={this.props.onModal?\"airplane-hanger\":\"parking-lot\"}\n                                                                    onChange={date => this.setState({dueDate: date})}\n                                                                    showTimeInput\n                                                                    isClearable\n                                                                    dateFormat=\"MM/dd/yyyy h:mm aa\"\n                                                                    customTimeInput={<TimeInput />}\n                                                                    customInput={<DateInput />}\n                                                                    onChange={date => {\n                                                                        // If the calendar got a new date, set it\n                                                                        this.setState({dueDate: date});\n\n                                                                        // and hit the DB too!\n                                                                        this.props.gruntman.do(\n                                                                            \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{due: date, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                        )\n                                                                    }}\n                                                                />\n                                                            )\n                                                        })()}\n                                                    </div>\n                                                </div>\n                                                <div>\n                                                    {/* Task project container */}\n                                                    <span className=\"task-project-container\">\n                                                        {/* Icon */}\n                                                        <i className=\"fas fa-list-ul\" style={{margin: 3, color: \"var(--task-icon)\", fontSize: 13, marginRight: 5, transform: \"translateY(5px)\"}}></i>\n                                                        {/* Project select */}\n                                                        <Select \n                                                            options={this.props.datapack[1]}\n                                                            className='task-project'\n                                                            classNamePrefix='task-select'\n                                                            isClearable\n                                                            styles={{\n                                                                // Fixes the overlapping problem of the component\n                                                                menuPortal: provided => ({ ...provided, zIndex: \"99999 !important\" })\n                                                            }}\n                                                            menuPortalTarget={document.body}\n                                                            value={this.props.datapack[1].filter(option => option.value === this.state.project)}\n                                                            onChange={(e)=>{\n                                                                {/* :point up: filter for only options with this project and set that to be the value */}\n                                                                {/* Actually update the project */}\n                                                                this.props.gruntman.do(\"task.update__project\", { uid: this.props.uid, tid: this.props.tid, oldProject: this.state.project===\"\"?undefined:this.state.project, project: (e?e.value:\"\")})\n                                                                {/* And set the state, too! */}\n                                                                this.setState({project:(e?e.value:\"\")});\n                                                            }}\n                                                        />\n                                                    </span>\n                                                    {/* Task tag container */}\n                                                    <span className=\"task-tag-container\">\n                                                        {/* Icon */}\n                                                        <i className=\"fas fa-tags\" style={{margin: 3, color: \"var(--task-icon)\", fontSize: 13, transform: \"translateY(5px)\"}}></i>\n                                                        {/* Tag select */}\n                                                        <CreatableSelect\n                                                            options={this.props.datapack[0]}\n                                                            className='task-tag'\n                                                            classNamePrefix='task-select'\n                                                            isClearable\n                                                            isMulti\n                                                            styles={{ menuPortal: base => ({ ...base, zIndex: \"99999 !important\" }) }}\n                                                            menuPortalTarget={document.body}\n                                                            value={this.props.datapack[0].filter(option => this.state.tags.includes(option.value))}\n                                                            onChange={(newValue, actionMeta) => {\n                                                                let view = this;\n                                                                let tids = newValue?newValue.map(async function (e) { // for each tag\n                                                                    if (e.__isNew__) { // if it's a new tag\n                                                                        let tagID = (await view.props.gruntman.do( // create it!\n                                                                            \"tag.create\",\n                                                                            {\n                                                                                uid: view.props.uid,\n                                                                                name: e.label,\n                                                                            }, \n                                                                        )).id;\n                                                                        let originalTags = view.state.possibleTags; // get tags\n                                                                        originalTags.push({label: e.label, value: tagID}); // add our new tag\n                                                                        view.setState({possibleTags: originalTags}); // sax-a-boom!\n                                                                        return tagID;\n                                                                    } else\n                                                                        return e.value;\n                                                                }):[]; // find the correct tags sets, or set it to an empty set\n                                                                Promise.all(tids).then(tagIDs => {\n                                                                    this.setState({tags: tagIDs}); // set the state\n                                                                    this.props.gruntman.do(\n                                                                        \"task.update\", \n                                                                        {\n                                                                            uid: this.props.uid, \n                                                                            tid: this.props.tid, \n                                                                            query:{tags: tagIDs} // set a taskID\n                                                                        }\n                                                                    )\n                                                                });\n                                                            }}\n                                                        />\n                                                    </span>\n                                                </div>\n                                            </animated.div>\n                                        )\n                                })()}\n                            </animated.div>\n                        )}\n                    } \n                </AnimationFactory>\n            </div >\n\n\n        )\n    }\n}\n\nexport default Task;\n\n","import dbManager from \"./DBManager\"\nlet cRef = dbManager.cRef;\n\nconst util = {\n    select: {\n        compare: (lhs, cmp, rhs) => {\n            switch (cmp) {\n                case \"<\":\n                    return lhs < rhs;\n                case \">\":\n                    return lhs > rhs;\n                case \"<=\":\n                    return lhs <= rhs;\n                case \">=\":\n                    return lhs >= rhs;\n                case \"==\":\n                    return lhs == rhs;\n                case \"!=\":\n                    return lhs != rhs;\n                case \"has\":\n                    return lhs.includes(rhs);\n                case \"!has\":\n                    return !lhs.includes(rhs);\n                default:\n                    throw new TypeError(\"Unkown comparator \" + cmp);\n            }\n        },\n        all: (...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (!util.select.compare(dat[lhs], cmp, rhs))\n                    return false;\n            return true;\n        },\n        any: (...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs))\n                    return true;\n            return false;\n        },\n        atLeast: (threshold, ...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            let counter = 0;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs)) {\n                    ++counter;\n                    if (counter >= threshold)\n                        return true;\n                }\n            return false;\n        },\n        atMost: (threshold, ...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            let counter = 0;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs)) {\n                    ++counter;\n                    if (counter > threshold)\n                        return false;\n                }\n            return true;\n        }\n    },\n    debug: {\n        log: (arg) => {\n            console.log(arg);\n            return arg;\n        },\n        trace: (arg) => {\n            console.trace(arg);\n            return arg;\n        }\n    }\n};\n\nlet isWorkspace = false;\n\nfunction setWorkspaceMode(workspaceMode) {\n    isWorkspace = workspaceMode;\n}\n\nasync function generateWorkspace(userID, userEmail, name=\"\") {\n    let oldWorkspaces = (await cRef(\"users\", userID).get()).data()\n    oldWorkspaces = oldWorkspaces ? oldWorkspaces.workspaces : undefined;\n    oldWorkspaces = oldWorkspaces ? oldWorkspaces : [];\n    let workspaceID = (await cRef(\"workspaces\").add({meta: {editors: [userEmail], name}})).id;\n    (await cRef(\"users\", userID).set({workspaces:[...oldWorkspaces, workspaceID]}, {merge:true}));\n    return workspaceID;\n}\n\nasync function getWorkspaces(userID) {\n    let userData = (await cRef(\"users\", userID).get()).data()\n    if (userData)\n        return userData[\"workspaces\"]?userData[\"workspaces\"]:[];\n    else \n        return [];\n}\n\nasync function updateWorkspaces(userID, newWorkspaces) {\n    return (await cRef(\"users\", userID).set({workspaces: newWorkspaces}, {merge:true}))\n}\n\nasync function getWorkspace(workspaceID) {\n    return (await cRef(\"workspaces\", workspaceID).get()).data();\n}\n\nasync function editWorkspace(workspaceID, query) {\n    return cRef(\"workspaces\", workspaceID).update(query);\n}\n\nasync function inviteToWorkspace(workspaceID, inviteeEmail) {\n    return (await cRef(\"invitations\", inviteeEmail, \"invites\").add({email: inviteeEmail, workspace: workspaceID, type: \"invite\", time: new Date()})).id;\n\n}\n\nasync function revokeToWorkspace(workspaceID, inviteeEmail) {\n    return (await cRef(\"invitations\", inviteeEmail, \"invites\").add({email: inviteeEmail, workspace: workspaceID, type: \"revoke\", time: new Date()})).id;\n}\n\nasync function getInvitations(userEmail) {\n    return (await cRef(\"invitations\", userEmail, \"invites\").get()).docs.map(doc=>Object.assign(doc.data(), {id: doc.id}));\n}\n\nasync function resolveInvitation(inviteID, userEmail) {\n    return cRef(\"invitations\", userEmail, \"invites\", inviteID).delete();\n}\n\n\nasync function getTasks(userID) {\n    return cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\").get()\n    .then(snap => snap.docs\n        .map(doc => doc.id)\n    ).catch(err => {\n        console.error('Error getting documents', err);\n    });\n}\n\nasync function getTasksWithQuery(userID, query) {\n    let taskDocs = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\")\n        .get()\n        .then(snap => snap.docs\n            .filter(query)\n        ).catch(err => {\n            console.error('Error getting documents', err);\n        });\n    return taskDocs.map(doc => doc.id);\n}\n\nasync function getInboxTasks(userID) {\n\n    let inboxDocs = await cRef(\n        isWorkspace?\"workspaces\":\"users\", userID,\n        \"tasks\")\n        //['project', '==', ''],\n        //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(util.select.all(['project', '==', ''], ['isComplete', '==', false]))\n            .sort((a,b) => a.data().order - b.data().order)\n        ).catch(err => {\n            console.error('Error getting documents', err);\n        });\n    return inboxDocs.map(doc => doc.id);\n}\n\nasync function getDSTasks(userID, available, wrt) {\n    let dsTime = wrt ? wrt : new Date(); // TODO: merge with next line?\n    dsTime.setHours(dsTime.getHours() + 24);\n    //let available = await getItemAvailability(userID);\n    let dsDocs = await cRef(isWorkspace?\"workspaces\":\"users\", userID,\n        \"tasks\")\n            //['due', '<=', dsTime],\n            //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(doc =>\n                (doc.data().due ? (doc.data().due.seconds <= (dsTime.getTime()/1000)) : false) && // has a due date and is ds\n                (doc.data().defer ? (doc.data().defer.seconds < ((new Date()).getTime())/1000) : true) && // has a defer and is not defered or has no defer date\n                (doc.data().isComplete === false) && // is not completed\n                (available[doc.id]) // aaaand is available\n            )\n            .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n    ).catch(console.error);\n    return dsDocs.map(doc => doc.id);\n}\n\nasync function dueTasks(userID, available, wrt) {\n    let dsTime = wrt ? wrt : new Date(); // TODO: merge with next line?\n    dsTime.setHours(23,59,59,999);\n    //let available = await getItemAvailability(userID);\n    let dsDocs = await cRef(isWorkspace?\"workspaces\":\"users\", userID,\n        \"tasks\")\n            //['due', '<=', dsTime],\n            //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(doc =>\n                (doc.data().due ? (doc.data().due.seconds <= (dsTime.getTime()/1000)) : false) && // has a due date and is ds\n                (doc.data().defer ? (doc.data().defer.seconds < ((new Date()).getTime())/1000) : true) && // has a defer and is not defered or has no defer date\n                (doc.data().isComplete === false) && // is not completed\n                (available[doc.id]) // aaaand is available\n            )\n            .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n    ).catch(console.error);\n    return dsDocs.map(doc => doc.id);\n}\n\nasync function selectTasksInRange(userID, min=(new Date(1900, 1, 1)), max=(new Date(2100, 1, 1)), returnFull=false) {\n/*    let maxT = max;*/\n    //let minT = min;\n    //maxT.setHours(23, 59, 59, 999);\n    /*minT.setHours(0, 0, 0, 0);*/\n    let tasks = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\")\n                    .get()\n                    .then(snap => snap.docs\n                        .filter(doc =>\n                            (doc.data().due ?\n                                (doc.data().defer ?\n                                    (new Date(doc.data().due.seconds*1000)) <= max && (new Date(doc.data().due.seconds*1000)) >= min && (new Date() >= (new Date(doc.data().defer.seconds*1000)))\n                                : false) \n                                : false)\n                        )\n                        .filter(doc => !doc.data().isComplete)\n                        .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n                    ).catch(console.error);\n    return returnFull ? tasks.map(doc => [doc.id, doc.data()]):tasks.map(doc => doc.id);\n}\n\nasync function getDSRow(userID, avaliable) {\n    console.warn(\"DEPERCATED: use instead selectTasksInRange\");\n    let ibt = await getInboxTasks(userID);\n    let d = new Date();\n    let dsTasks = [];\n    let prev = [];\n    for (let i=0; i<=7; i++) {\n        let content = (await dueTasks(userID, avaliable, d))\n        let cache = content;\n        dsTasks.push(content.filter(x => !prev.includes(x)));\n        prev = cache;\n        d.setDate(d.getDate() + 1)\n    }\n    return dsTasks.map(dst => dst.filter(x => ibt.indexOf(x) < 0));\n}\n\nasync function getInboxandDS(userID, avalibility) {\n    let ibt = await getInboxTasks(userID);\n    let dst = await getDSTasks(userID, avalibility);\n    let dstWithoutIbt = dst.filter(x => ibt.indexOf(x) < 0);\n    return [ibt, dstWithoutIbt]\n}\n\nasync function getTaskInformation(userID, taskID) {\n    let dat = (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\").get()\n        .then(snap => snap.docs\n            .filter(doc => doc.id === taskID))\n    )[0]\n    if (dat) return dat.data();\n}\n\nasync function removeParamFromTask(userID, taskID, paramName) {\n    let ti = await getTaskInformation(userID, taskID);\n    delete ti[paramName];\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\", taskID)\n        .set(ti)\n        .catch(console.error);\n}\n\nasync function getTopLevelProjects(userID) {\n    let projectIdByName = {};\n    let projectNameById = {};\n    let projectsSorted = []; \n\n    let snap = (await cRef(isWorkspace?\"workspaces\":'users', userID, \"projects\")\n        .get());\n\n    snap.docs.forEach(proj => {\n        if (proj.exists && proj.data().top_level === true) {\n            projectNameById[proj.id] = proj.data().name;\n            projectIdByName[proj.data().name] = proj.id;\n            let projElem = {};\n            projElem.id = proj.id;\n            projElem.name = proj.data().name;\n            projElem.sortOrder = proj.data().order;\n            projectsSorted.push(projElem);\n        }\n    });\n\n    projectsSorted.sort((a,b) => a.sortOrder-b.sortOrder);\n    let ret = [projectNameById, projectIdByName, projectsSorted];\n    return ret;\n}\n\nasync function getTags(userID) {\n    let tags = [];\n\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tags\").get()\n        .then(snap => snap.docs.forEach( tag => {\n            if (tag.exists) {\n                tags.push(tag.data());\n            }\n        }\n    )).catch(console.error);\n    return tags;\n}\n\nasync function getProjectsandTags(userID) {\n    // NOTE: no longer console.error when  !project/tag.exists\n    let projectIdByName = {};\n    let projectNameById = {};\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get()   // TODO: combine database hits\n        .then(snap => snap.docs.forEach(proj => {\n            if (proj.exists) {\n                projectNameById[proj.id] = proj.data().name;\n                projectIdByName[proj.data().name] = proj.id;\n            }\n        }))\n        .catch(console.error);\n\n    let tagIdByName = {};\n    let tagNameById = {};\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tags\").get()\n        .then(snap => snap.docs.forEach(tag => {\n            if (tag.exists) {\n                tagNameById[tag.id] = tag.data().name;\n                tagIdByName[tag.data().name] = tag.id;\n            }\n        }))\n        .catch(console.error);\n\n    return [[projectNameById, projectIdByName], [tagNameById, tagIdByName]];\n}\n\nasync function getPerspectives(userID) {\n    let pInfobyName = {};\n    let pInfobyID = {};\n    let ps = [];\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"perspectives\").get()   // TODO: combine database hits\n        .then(snap => snap.docs.forEach(pstp => {\n            if (pstp.exists) {\n                pInfobyID[pstp.id] = {name: pstp.data().name, query: pstp.data().query, avail: pstp.data().avail, tord: pstp.data().tord};\n                pInfobyName[pstp.data().name] = {id: pstp.id, query: pstp.data().query, avail: pstp.data().avail, tord: pstp.data().tord};\n                ps.push({id: pstp.id, ...pstp.data()});\n            }\n        }))\n        .catch(console.error);\n\n    ps.sort((a,b) => a.order-b.order);\n\n    return [pInfobyID, pInfobyName, ps];\n}\n\nasync function modifyProject(userID, projectID, updateQuery) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function modifyTask(userID, taskID, updateQuery) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\", taskID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function modifyPerspective(userID, taskID, updateQuery) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"perspectives\", taskID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function newTask(userID, taskObj) {\n//, nameParam, descParam, deferParam, dueParam, isFlaggedParam, isFloatingParam, projectParam, tagsParam, tz\n    // Set order param. Either return the latest item in index or\n    if (taskObj.project === \"\") {\n        let ibtL = (await getInboxTasks(userID)).length;\n        taskObj.order = ibtL;\n    } else {\n        let projL = (await getProjectStructure(userID, taskObj.project)).children.length;\n        taskObj.order = projL;\n    }\n\n    // Perspectives cannot have empty defer dates\n    // But! We could set no defer to defer today.\n    if (!taskObj.defer)\n        taskObj.defer = new Date();\n\n    let taskID = (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\").add(taskObj)).id;\n\n    return taskID;\n}\n\nasync function newProject(userID, projObj, parentProj) {\n//, nameParam, descParam, deferParam, dueParam, isFlaggedParam, isFloatingParam, projectParam, tagsParam, tz\n    // Set order param. Either return the latest item in index or\n    let projL;\n    // Util func to get size of ob\n    Object.size = function(obj) {\n        var size = 0, key;\n        for (key in obj) {\n            if (obj.hasOwnProperty(key)) size++;\n        }\n        return size;\n    };\n\n    if (parentProj) {\n        projL = (await getProjectStructure(userID, parentProj)).children.length;\n        projObj.parent = parentProj;\n    } else {\n        projL = Object.size((await getTopLevelProjects(userID))[0]);\n        projObj.parent = \"\";\n    }\n    projObj.order = projL;\n    projObj.children = {};\n\n    let pid = (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").add(projObj)).id;\n    return pid;\n}\n\nasync function newPerspective(userID, pstObj) {\n    return (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"perspectives\").add({order: (await getPerspectives(userID))[2].length, ...pstObj})).id;\n}\n\nasync function newTag(userID, tagName) {\n    return (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tags\").add({name: tagName})).id;\n}\n\nasync function completeTask(userID, taskID) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\", taskID).update({\n        isComplete: true\n    });\n}\n\nasync function dissociateTask(userID, taskID, projectID) {\n    let originalChildren = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(util.dump)\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)).then(util.dump).then(t => t[0].data().children);\n\n    delete originalChildren[taskID];\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function associateTask(userID, taskID, projectID) {\n    let originalChildren = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get()\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)[0] //.filter(doc => doc.id === taskID)\n        .data().children);\n\n    originalChildren[taskID] = \"task\";\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function associateProject(userID, assosProjID, projectID) {\n    let originalChildren = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get()\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)[0] //.filter(doc => doc.id === taskID)\n        .data().children);\n\n    originalChildren[assosProjID] = \"project\";\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function dissociateProject(userID, assosProjID, projectID) {\n    let originalChildren = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(util.dump)\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)).then(util.dump).then(t => t[0].data().children);\n\n    delete originalChildren[assosProjID];\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function deleteTask(userID, taskID, willDissociateTask = true) {\n    let taskData = await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\").get()\n        .then(snap => snap.docs.filter(doc => doc.id === taskID)[0].data()); // Fetch task data\n\n    if (taskData.project!== \"\" && willDissociateTask) {\n        await dissociateTask(userID, taskID, taskData.project);\n    }\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tasks\", taskID).delete()\n        .catch(console.error);\n}\n\nasync function deletePerspective(userID, perspectiveID) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"perspectives\", perspectiveID).delete();\n}\n\nasync function deleteProject(userID, projectID) {\n    let struct = await getProjectStructure(userID, projectID)\n    for (let i of struct.children) {\n        if (i.type === \"project\") deleteProject(userID, i.content.id)\n        else modifyTask(userID, i.content, {project:\"\"});\n    }\n   \n    let cpLtTasks = await getCompletedTasks(userID);\n    const cpLt = [].concat(...cpLtTasks);\n    for (let t of cpLt)\n        if ((await getTaskInformation(userID, t)).project === projectID)\n            modifyTask(userID, t, {project:\"\"});\n\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\", projectID).delete()\n        .catch(console.error);\n}\n\nasync function deleteTag(userID, tagID) {\n    await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"tags\", tagID).delete()\n        .catch(console.error);\n}\n\nasync function getProjectStructure(userID, projectID, recursive=false) {\n    let children = [];\n\n    // absurdly hitting the cache with a very broad query so that the\n    // cache will catch all projects and only hit the db once\n\n    let project =  (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === projectID)[0];\n    if (!project) {\n        return { id: projectID, children: [], is_sequential: false, sortOrder: 0, parentProj: 0};\n    }\n    for (let [itemID, type] of Object.entries(project.data().children)) {\n        if (type === \"task\") {  // TODO: combine if statements\n            let task = await getTaskInformation(userID, itemID);\n            if(task){\n                if (!task.isComplete) {\n                    children.push({type: \"task\", content: itemID, sortOrder: task.order});\n                }\n            }\n           \n        } else if (type === \"project\") {\n            if (recursive) {\n                let project = await getProjectStructure(userID, itemID);\n                if(project) children.push({type: \"project\", content: project, is_sequential: project.is_sequential, sortOrder: project.sortOrder}); \n            } else {\n                let project =  (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === itemID)[0];\n                if(project) children.push({type: \"project\", content: {id: itemID}, is_sequential: project.data().is_sequential, sortOrder: project.data().order}); \n            }\n        }\n    }\n    children.sort((a,b) => a.sortOrder-b.sortOrder); //  sort by ascending order of order, TODO: we should prob use https://firebase.google.com/docs/reference/js/firebase.firestore.Query#order-by\n    return { id: projectID, children: children, is_sequential: project.data().is_sequential, sortOrder: project.data().order, parentProj: project.data().parent};\n}\n\nasync function getItemAvailability(userID) {\n    let t = new Date();\n    let tlps = (await getTopLevelProjects(userID))[2];\n    let blockstatus = {};\n    let timea = new Date();\n    async function recursivelyGetBlocks(userID, projectID) {\n        let bstat = {};\n        let project = (await cRef(isWorkspace?\"workspaces\":\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === projectID)[0];\n        let projStruct = (await getProjectStructure(userID, projectID));\n        if (project.data().is_sequential) {\n            let child = projStruct.children[0];\n            if (child) {\n                if (child.type === \"project\") {\n                    Object.assign(bstat, (await recursivelyGetBlocks(userID, child.content.id)));\n                    bstat[child.content.id] = true;\n                } else if (child.type === \"task\") {\n                    bstat[child.content] = true;\n                }\n            }\n        } else {\n            let children = projStruct.children;\n            await Promise.all(children.map(async function(child) {\n                if (child.type === \"project\") {\n                    Object.assign(bstat, (await recursivelyGetBlocks(userID, child.content.id)));\n                    bstat[child.content.id] = true;\n                } else if (child.type === \"task\") {\n                    bstat[child.content] = true;\n                }\n            }));\n        }\n        return bstat;\n    };\n    await Promise.all(tlps.map(async function(p) {\n        blockstatus[p.id] = true;\n        let blocks = await recursivelyGetBlocks(userID, p.id);\n        Object.assign(blockstatus, blocks);\n    }));\n    await (await getInboxTasks(userID)).forEach((id) => blockstatus[id] = true);\n    return blockstatus;\n}\n\nasync function getCompletedTasks(userID) {\n    let completedTasks = await getTasksWithQuery(userID, util.select.all([\"isComplete\", \"==\", true]));\n    let taskItems = {};\n    await Promise.all(completedTasks.map(async function(tsk){\n        taskItems[tsk] = await getTaskInformation(userID, tsk);\n    }));\n    const cpSorted = completedTasks.sort(function(b,a) {\n        let taskA = taskItems[a];\n        let taskB = taskItems[b];\n        if (!taskA || !taskB) {\n            return 1;\n        }\n        return ((\n            (taskA.completeDate) ?\n                (taskA.completeDate.seconds) :\n                1\n        )-(\n            (taskB.completeDate) ?\n                (taskB).completeDate.seconds :\n                1\n        ));\n    });\n    let today = new Date();\n    let yesterday = new Date();\n    let thisWeek = new Date();\n    let thisMonth = new Date();\n    today.setHours(0,0,0,0);\n    yesterday.setDate(yesterday.getDate()-1);\n    yesterday.setHours(0,0,0,0);\n    thisWeek.setDate(thisWeek.getDate()-7);\n    thisWeek.setHours(0,0,0,0);\n    thisMonth.setMonth(thisMonth.getMonth()-1);\n    thisMonth.setHours(0,0,0,0);\n    let tasksToday = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= today : false;\n    });\n    let tasksYesterday = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= yesterday && new Date(tsks.completeDate.seconds * 1000) < today : false;\n    });\n    let tasksWeek = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= thisWeek && new Date(tsks.completeDate.seconds * 1000) < yesterday : false;\n    });\n    let tasksMonth = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= thisMonth && new Date(tsks.completeDate.seconds * 1000) < thisWeek : false;\n    });\n    let evenBefore = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) < thisMonth : true;\n    });\n    //console.log(tasksYesterday);\n    //console.log(tasksWeek);\n    //console.log(tasksMonth);\n    /*console.log(evenBefore);*/\n    return [tasksToday, tasksYesterday, tasksWeek, tasksMonth, evenBefore];\n}\n\nasync function onBoard(userID, tz, username, payload) {\n    // Inbox, in reverse cronological order\n    await newTask(userID, {\n            name: payload[0] + ` ${username}, ` + payload[1],\n            desc: payload[2],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await newTask(userID, {\n            name: payload[3],\n            desc: payload[4],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await newTask(userID, {\n            name: payload[5],\n            desc: payload[6],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n\n    let cdyrslf = await newProject(userID, {name: payload[7], top_level: true, is_sequential: false});\n    let npd = await newProject(userID, {name: payload[8], top_level: true, is_sequential: false});\n    let od = new Date();\n    let ds = new Date();\n    od.setHours(od.getHours() - 24);\n    ds.setHours(ds.getHours() + 20);\n    let odid = await newTask(userID, {\n            name: payload[9],\n            desc: payload[10],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: npd,\n            tags: [],\n            timezone: tz,\n            due: od,\n            repeat: {rule: \"none\"},\n        }\n    );\n    let dsID = await newTask(userID, {\n            name: payload[11],\n            desc: payload[12],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: npd,\n            tags: [],\n            timezone: tz,\n            due: ds,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, odid, npd);\n    await associateTask(userID, dsID, npd);\n    ds.setHours(ds.getHours() + 2);\n    let checkoutID = await newTask(userID, {\n            name: payload[13],\n            desc: payload[14],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    let nice = await newTask(userID, {\n            name: payload[15],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, nice, cdyrslf);\n    let sequential = await newTask(userID, {\n            name: payload[16],\n            desc: payload[17],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, sequential, cdyrslf);\n    let blocked = await newTask(userID, {\n            name: payload[18],\n            desc: payload[19],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, blocked, cdyrslf);\n    let click = await newTask(userID, {\n            name: payload[20],\n            desc: payload[21],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, click, cdyrslf);\n    let pspDir = await newTask(userID, {\n            name: payload[22],\n            desc: payload[23],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, pspDir, cdyrslf);\n    let pspsp = await newProject(userID, {name: payload[24], top_level: true, is_sequential: false});\n    let tags = await Promise.all([newTag(userID, payload[25]), newTag(userID, payload[26]), newTag(userID, payload[27]), newTag(userID, payload[28])]);\n    let specific = await newTask(userID, {\n            name: payload[29],\n            desc: payload[30],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: pspsp,\n            tags: [tags[2], tags[3]],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, specific, pspsp);\n    let sp = await newTask(userID, {\n            name: payload[31],\n            desc: payload[32],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: pspsp,\n            tags: [tags[0]],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, sp, pspsp);\n    await newPerspective(userID, {name: payload[33], query: payload[34]});\n    let promotion = await newProject(userID, {name: payload[35], top_level: true, is_sequential: false});\n    let online = await newTask(userID, {\n            name: payload[36],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, online, promotion);\n    let dis = await newTask(userID, {\n            name: payload[37],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, dis, promotion);\n    let patreon = await newTask(userID, {\n        name: payload[38],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, patreon, promotion);\n    let yiipee = await newTask(userID, {\n        name: payload[39],\n            desc: payload[40],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, yiipee, promotion);\n}\n\nexport default {util, getTasks, getTasksWithQuery, getInboxTasks, getDSTasks, getInboxandDS, removeParamFromTask, getTopLevelProjects, getProjectsandTags, getPerspectives, modifyProject, modifyTask, modifyPerspective, newProject, newPerspective, newTag, newTask, completeTask, dissociateTask, associateTask, associateProject, dissociateProject, deleteTask, deletePerspective, deleteProject, selectTasksInRange, getProjectStructure, getItemAvailability, getTaskInformation, getDSRow, deleteTag, getCompletedTasks, onBoard, getTags, generateWorkspace, getWorkspace, getWorkspaces, editWorkspace, inviteToWorkspace, revokeToWorkspace, getInvitations, resolveInvitation, updateWorkspaces};\n\nexport { setWorkspaceMode };\n\n\n","import dbObj from \"./ObjectManager\";\n\nconst perspectiveHandler = function(){\n    let cgs = {\n        taskFilter: /([^\\w\\d\\s\\[]{1,2}[\\w\\s]+)/gi,\n        taskCaptureGroup: /\\[(([^\\w\\d\\s]{1,2}[\\w\\s]+) *)*?\\]/gi,\n        logicCaptureGroup: /(.*) *([<=>]) *(.*)/gi,\n        globalCaptureGroup: /\\[(([^\\w\\d\\s]{1,2}[\\w\\s]+) *)*?\\](\\$\\w+)* *[<=>]* * *(\\$\\w+)*/gi,\n        clear: function() {\n            this.taskFilter.lastIndex = 0;\n            this.taskCaptureGroup.lastIndex = 0;\n            this.logicCaptureGroup.lastIndex = 0;\n            this.globalCaptureGroup.lastIndex = 0;\n        }\n    };\n\n    let getCaptureGroups = (str) => str.match(cgs.globalCaptureGroup);\n\n    let parseTaskCaptureGroup = (str) => (str.split(\"$\").map(i=>i.trim()));\n\n    let parseSpecialVariables = function(...val) {\n        let vr;\n        switch(val[0]) {\n           case \"today\":\n               vr = new Date();\n               break;\n        }\n        return vr;\n    };\n\n    let compileTask = async function(uid, str, pPaT, additionalFilter, isWorkspace) {\n        let queries = additionalFilter ? [additionalFilter] : [];\n        let taskCache = [];\n        let antiCache = [];\n        await Promise.all(str.match(cgs.taskFilter).map(async function(e) {\n            e = e.trim();\n            if (e[0] !== \"!\") {\n                switch (e[0]) {\n                    case \".\":\n                        let pid = pPaT[0][1][e.slice(1, e.length)];\n                        queries.push(['project', '==', pid]);\n                        let pS = await dbObj.getProjectStructure(uid, pid, false, isWorkspace);\n                        for (let i of pS.children)\n                            if (i.type === \"project\")\n                                taskCache = [...taskCache, ...(await compileTask(uid, str.replace(e.slice(1, e.length), pPaT[0][0][i.content.id]), pPaT, additionalFilter))];\n                        break;\n                    case \"#\":\n                        queries.push(['tags', 'has',  pPaT[1][1][e.slice(1, e.length)]]);\n                }\n            } else {\n                switch (e[1]) {\n                    case \".\":\n                        let pid = pPaT[0][1][e.slice(2, e.length)];\n                        queries.push(['project', '!=', pid]);\n\n                        let pS = await dbObj.getProjectStructure(uid, pid, false, isWorkspace);\n                        for (let i of pS.children)\n                            if (i.type === \"project\")\n                                antiCache = [...antiCache, ...(await compileTask(uid, str.replace(e, \".\"+pPaT[0][0][i.content.id]), pPaT, additionalFilter, isWorkspace))];\n                        break;\n                    case \"#\":\n                        queries.push(['tags', '!has',  pPaT[1][1][e.slice(2, e.length)]]);\n                }\n            }\n            queries.push(['isComplete', '==', false]);\n        }));\n        return [...taskCache, ...(await dbObj.getTasksWithQuery(uid, dbObj.util.select.all(...queries), isWorkspace))].filter(i=>(!antiCache.includes(i)));\n    };\n\n    let compileLogicCaptureGroup = async function(uid, tasks, cmp, value, ltr, isWorkspace=false) {\n        let taskInfo = await Promise.all(tasks[0].map(async function(t){\n            return [await dbObj.getTaskInformation(uid, t, isWorkspace), t];\n        }));\n        let taskCompValues;\n        // TODO: add more?\n        if (tasks[1].includes(\"due\")) {\n            taskCompValues = taskInfo.map(t => [t[1], (t[0].due ? new Date((t[0].due.seconds)*1000) : undefined)]);\n        } else if (tasks[1].includes(\"defer\")) {\n            taskCompValues = taskInfo.map(t => [t[1], (t[0].defer ? new Date((t[0].defer.seconds)*1000) : undefined)]);\n        }\n        let filteredResults;\n        let util_datesequal = function(dateA, dateB) {\n            return dateA.getFullYear() === dateB.getFullYear() && dateA.getMonth() === dateB.getMonth() && dateA.getDate() === dateB.getDate();\n        };\n        switch (cmp) {\n            case \"=\":\n                taskCompValues = taskCompValues.filter(t=>util_datesequal(t[1], value));\n                break;\n            case \">\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] > value) : taskCompValues = taskCompValues.filter(t => t[1] < value);\n                break;\n            case \"<\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] < value) : taskCompValues = taskCompValues.filter(t => t[1] > value);\n                break;\n            case \">=\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] >= value) : taskCompValues = taskCompValues.filter(t => t[1] <= value);\n                break;\n            case \"<=\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] <= value) : taskCompValues = taskCompValues.filter(t => t[1] >= value);\n                break;\n\n        }\n        return (taskCompValues.map(t => t[0]));\n    };\n\n    let getPerspectiveFromString = async function(uid, pStr, filter, order, isWorkspace=false) {\n        let pPaT = await dbObj.getProjectsandTags(uid, isWorkspace);\n        let pRes = await getCaptureGroups(pStr);\n        if (!pRes) {\n            return [];\n        }\n        let fquery; \n        switch (filter) {\n            case \"avail\":\n                fquery = [\"defer\", \"<\", ((new Date()).getTime())/1000];\n                break;\n            case \"flagged\":\n                fquery = [\"isFlagged\", \"==\", true];\n                break;\n        }\n        let tasks = await Promise.all(pRes.map(async function(i) {\n            cgs.clear();\n            let logicSort = cgs.logicCaptureGroup.exec(i);\n            let t;\n            if(logicSort) {\n                // handle logic group\n                let [, lhs, cmp, rhs] = logicSort;\n                [lhs, rhs] = [parseTaskCaptureGroup(lhs), parseTaskCaptureGroup(rhs)];\n                if (cgs.taskCaptureGroup.test(lhs)) {\n                    lhs = [await compileTask(uid, lhs[0], pPaT, fquery, isWorkspace), lhs[1]];\n                    rhs = parseSpecialVariables(rhs[1]);\n                    t = (await compileLogicCaptureGroup(uid, lhs, cmp, rhs, true, isWorkspace)); // true (that is, left to right order)\n                } else {\n                    rhs = [await compileTask(uid, rhs[0], pPaT, fquery, isWorkspace), rhs[1]];\n                    lhs = parseSpecialVariables(lhs[1]);\n                    t = (await compileLogicCaptureGroup(uid, rhs, cmp, lhs, false, isWorkspace)); // false (that is, right to left order)\n                }\n            } else {\n                // handle standard group\n                t = (await compileTask(uid, i, pPaT, fquery, isWorkspace));\n            }\n            return t;\n        }));\n        tasks = [...new Set(tasks.flat(1))];\n        let taskObjs = await Promise.all(tasks.map(async function(t){\n            return {id: t, ...(await dbObj.getTaskInformation(uid, t, isWorkspace))}\n        })).then(values=>values);\n        switch (order) {\n            case \"duas\":\n                taskObjs.sort((a,b)=>(a.due?a.due.seconds:10000000000)-(b.due?b.due.seconds:10000000000));\n                break;\n            case \"duds\":\n                taskObjs.sort((a,b)=>(b.due?b.due.seconds:1)-(a.due?a.due.seconds:1));\n                break;\n            case \"deas\":\n                taskObjs.sort((a,b)=>(a.defer?a.defer.seconds:10000000000)-(b.defer?b.defer.seconds:10000000000));\n                break;\n            case \"deds\":\n                taskObjs.sort((a,b)=>(b.defer?b.defer.seconds:1)-(a.defer?a.defer.seconds:1));\n                break;\n\n        }\n        // Final availability filter for sequential\n        let aval = await dbObj.getItemAvailability(uid, isWorkspace);\n        if (filter === \"avail\") taskObjs = taskObjs.filter(it => (aval[it.id] !== undefined)); \n        return taskObjs.map(t=>t.id);\n    };\n\n    return {calc: getPerspectiveFromString};\n}();\n\nexport default perspectiveHandler;\n\n","import dbFuncs, { setWorkspaceMode } from \"./src/ObjectManager\"\nimport pspObj from \"./src/PerspectiveManager\"\nimport dbRefObj from \"./src/DBManager\"\n\n\nexport default {start:dbRefObj.__init__, use:dbRefObj.useDb, db: dbFuncs, perspective: pspObj, flush: dbRefObj.flush, workspaceify: ()=>setWorkspaceMode(true), userlandify: ()=>setWorkspaceMode(false)};\n\n","import { Plugins } from '@capacitor/core';\nimport { getPlatforms } from '@ionic/react';\n\nconst { parseFromTimeZone } = require('date-fns-timezone')\n\nconst { LocalNotifications, Permissions } = Plugins;\n\n/* AutoBind */\nconst autoBind = require('auto-bind/react');\n\nclass Gruntman {\n\n    /*\n     * Hello human,\n     * good afternoon.\n     * I am gruntman.\n     *\n     * Register refreshers with me\n     * so I could handle refreshes.\n     *\n     * Do actions with me\n     * so I could reverse them.\n     *\n     * Undo happens from me\n     * refresh happens from me.\n     *\n     *\n     * @jemoka\n     *\n     */\n\n    constructor(engine) {\n        this.notifPermissionGranted = false;\n        Permissions.query({name: \"notifications\"}).then((async function (e) {\n            if (e.state === \"prompt\")\n                this.notifPermissionGranted = (await LocalNotifications.requestPermission()).granted;\n            else if (e.state === \"granted\")\n                this.notifPermissionGranted = true;\n\n            let platforms = getPlatforms();\n            if (this.notifPermissionGranted && !platforms.includes(\"mobileweb\") && !platforms.includes(\"desktop\")) {\n                // notification specific setup\n                //\n                // TODO TODO TODO TODO TODO TODO TODO TODO\n                //\n\n                //LocalNotifications.registerActionTypes({types: [{id: \"completeOrSnooze\", actions: [{id:\"complete\", title: \"LOCALIZE: Complete\", requiresAuthentication: \"true\", foreground: \"false\"}, {id:\"snooze\", title: \"LOCALIZE: Snooze\", requiresAuthentication: \"true\", foreground: \"false\"}]}]});\n            }\n            LocalNotifications.addListener(\"localNotificationActionPerformed\", this.handleNotificationAction);\n        }).bind(this));\n\n        this.hashCode = s => Math.abs(s.split('').reduce((a,b)=>{a=((a<<5)-a)+b.charCodeAt(0);return a&a},0));\n\n        this.e = engine;\n        this.refresher = ()=>{};\n        this.globalRefresher = ()=>{};\n        this.callbackRefresherReleased = true; // prevent live callback merge conflicts\n        this.conflictResolution = 1000; // 1000 ms = 1s worth of conflict time.\n        this.releaseTimeout = undefined;\n\n        this.doers = {\n            macro: {\n                applyOrder: async function (options) {\n                    // TODO undo handler?\n                    if (options.items.length !== options.order.length) \n                        console.error(\"Length of items and order length must be the same!\")\n                    await Promise.all(options.order.map((e,i) => {\n                        let item = options.items[e];\n                        if (item.type === \"task\") \n                            return engine.db.modifyTask(options.uid, item.content, {order: i});\n                        else if (item.type === \"project\")\n                            return engine.db.modifyProject(options.uid, item.content, {order: i});\n                            //await engine.db.modifyProject(options.uid, e.content, {order: options.order[i]});\n                    }));\n                    return {uid:options.uid}; // TODO HANDLE UNDO\n                }\n            },\n            tag: {\n                create: async function (options) {\n                    let newTag = await engine.db.newTag(options.uid, options.name);\n                    return {uid: options.uid, id: newTag};\n                }\n            },\n            task: {\n                create: async function (options) {\n                    let ntObject = {\n                        desc: \"\",\n                        isFlagged: false,\n                        isFloating: false,\n                        isComplete: false,\n                        project: options.pid?options.pid:\"\",\n                        tags: [],\n                        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n                        repeat: {rule: \"none\"},\n                        name: options.name?options.name:\"\",\n                    };\n\n                    if (options.due)\n                        ntObject.due = options.due\n                    if (options.defer)\n                        ntObject.defer = options.defer\n\n                    let ntID = await engine.db.newTask(options.uid, ntObject)\n\n                    if (options.pid && options.pid != \"\")\n                        engine.db.associateTask(options.uid, ntID, options.pid);\n\n                    return {uid: options.uid, tid: ntID};\n                },\n                update: async function (options) {\n                    let tInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, options.query)\n\n                    return {uid: options.uid, tid: options.tid, tInfo};\n                },\n                update__project:  async function (options) {\n                    let tInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, {project: options.project})\n\n                    if (options.oldProject)\n                        await engine.db.dissociateTask(options.uid, options.tid, options.oldProject);\n\n                    if (options.project !== \"\")\n                        await engine.db.associateTask(options.uid, options.tid, options.project);\n\n                    return {uid: options.uid, tid: options.tid, tInfo};\n                },\n                update__uncomplete: async function (options) {\n                    let taskInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, {isComplete: false, completeDate: new Date()});\n                    return {uid: options.uid, tid: options.tid, taskInfo};\n                },\n                update__complete: async function (options) {\n                    await engine.db.modifyTask(options.uid, options.tid, {isComplete: true, completeDate: new Date()})\n                    let taskInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    let due = (\n                        taskInfo.due ?\n                        (taskInfo.isFloating ?\n                            new Date(taskInfo.due.seconds*1000) :\n                            parseFromTimeZone(\n                                (new Date(taskInfo.due.seconds*1000)).toISOString(),\n                                {timeZone: taskInfo.timezone}\n                            )\n                        ):\n                        undefined\n                    );\n                    let defer = (\n                        taskInfo.defer ?\n                        (taskInfo.isFloating ?\n                            new Date(taskInfo.defer.seconds*1000) :\n                            parseFromTimeZone(\n                                (new Date(taskInfo.defer.seconds*1000)).toISOString(),\n                                {timeZone: taskInfo.timezone}\n                            )\n                        ): undefined\n                    );\n                    let repeat = taskInfo.repeat;\n                    if (repeat.rule !== \"none\" && due) {\n                        let rRule = repeat.rule;\n                        if (rRule === \"daily\") {\n                            if (defer) {\n                                let defDistance = due-defer;\n                                due.setDate(due.getDate() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                due.setDate(due.getDate() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n\n                        } else if (rRule === \"weekly\") {\n                            if (defer) {\n                                let rOn = repeat.on;\n                                let current = \"\";\n                                let defDistance = due-defer;\n                                if (rOn) {\n                                    while (!rOn.includes(current)) {\n                                        due.setDate(due.getDate() + 1);\n                                        let dow = due.getDay();\n                                        switch (dow) {\n                                            case 1:\n                                                current = \"M\";\n                                                break;\n                                            case 2:\n                                                current = \"T\";\n                                                break;\n                                            case 3:\n                                                current = \"W\";\n                                                break;\n                                            case 4:\n                                                current = \"Th\";\n                                                break;\n                                            case 5:\n                                                current = \"F\";\n                                                break;\n                                            case 6:\n                                                current = \"S\";\n                                                break;\n                                            case 0:\n                                                current = \"Su\";\n                                                break;\n                                        }\n                                    }\n                                } else {\n                                    due.setDate(due.getDate()+7);\n                                    defer.setDate(defer.getDate()+7);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                let rOn = repeat.on;\n                                if (rOn) {\n                                    let current = \"\";\n                                    while (!rOn.includes(current)) {\n                                        due.setDate(due.getDate() + 1);\n                                        let dow = due.getDay();\n                                        switch (dow) {\n                                            case 1:\n                                                current = \"M\";\n                                                break;\n                                            case 2:\n                                                current = \"T\";\n                                                break;\n                                            case 3:\n                                                current = \"W\";\n                                                break;\n                                            case 4:\n                                                current = \"Th\";\n                                                break;\n                                            case 5:\n                                                current = \"F\";\n                                                break;\n                                            case 6:\n                                                current = \"S\";\n                                                break;\n                                            case 0:\n                                                current = \"Su\";\n                                                break;\n                                        }\n                                    }\n                                } else {\n                                    due.setDate(due.getDate()+7);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n                        } else if (rRule === \"monthly\") {\n                            if (defer) {\n                                let rOn = repeat.on;\n                                let dow = due.getDate();\n                                let oDow = due.getDate();\n                                let defDistance = due-defer;\n                                if (rOn) {\n                                    while ((!rOn.includes(dow.toString()) && !(rOn.includes(\"Last\") && (new Date(due.getFullYear(), due.getMonth(), due.getDate()).getDate() === new Date(due.getFullYear(), due.getMonth()+1, 0).getDate()))) || (oDow === dow)) {\n                                        due.setDate(due.getDate() + 1);\n                                        dow = due.getDate();\n                                    }\n                                } else {\n                                    due.setMonth(due.getMonth()+1);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                let rOn = repeat.on;\n                                if (rOn) {\n                                    let dow = due.getDate();\n                                    let oDow = due.getDate();\n                                    while ((!rOn.includes(dow.toString()) && !(rOn.includes(\"Last\") && (new Date(due.getFullYear(), due.getMonth(), due.getDate()).getDate() === new Date(due.getFullYear(), due.getMonth()+1, 0).getDate()))) || (oDow === dow)) {\n                                        due.setDate(due.getDate() + 1);\n                                        dow = due.getDate();\n                                    }\n                                } else {\n                                    due.setMonth(due.getMonth()+1);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n                        } else if (rRule === \"yearly\") {\n                            if (defer) {\n                                let defDistance = due-defer;\n                                due.setFullYear(due.getFullYear() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                due.setFullYear(due.getFullYear() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n\n                        }\n                    }\n                    return {message: \"Todo TODO TODO Todo: undo pack?\"}\n                }\n            },\n            project: {\n                create: async function (options) { // create project\n                    let projObj = {\n                        name: \"\",\n                        top_level: options.parent === undefined,\n                        is_sequential: false,\n                    };\n                    let npid = options.parent ? await engine.db.newProject(options.uid, projObj, options.parent) : await engine.db.newProject(options.uid, projObj) // make a project... with or without a parent\n                    if (options.parent) {\n                        engine.db.associateProject(options.uid, npid, options.parent);\n                    }// associate the two\n                    return {uid: options.uid, pid: npid}\n                },\n                delete: async function (options) {\n                    await engine.db.deleteProject(options.uid, options.pid);\n                    if (options.parent)\n                        engine.db.dissociateProject(options.uid, options.pid, options.parent);\n\n                    return {uid: options.uid, TODO: \"TODO\"} // TODO: how do we undelete a project?\n                },\n                update__name: async function (options) { // update the project name!\n                    let possibleProjects = await engine.db.getProjectsandTags(options.uid);\n                    // get all possible project\n                    let projectName = possibleProjects[0][0][options.id]\n                    // get the one we want based on page id\n\n                    // modify the project\n                    await engine.db.modifyProject(options.uid, options.id, {name: options.name});\n                    // return what we need to undo\n                    return {projectName, uid: options.uid}\n                },\n                update__pstate: async function (options) { // update the project name!\n                    let currentProject = await engine.db.getProjectStructure(options.uid, options.id, false); // get current project info\n                    // get all possible project\n                    let is_sequential = currentProject;\n                    // get the one we want based on page id\n\n                    // modify the project\n                    await engine.db.modifyProject(options.uid, options.id, {is_sequential: options.is_sequential});\n                    // return what we need to undo\n                    return {is_sequential, uid: options.uid}\n                },\n                associate:  async function (options) {\n                    //await engine.db.modifyTask(options.uid, options.tid, options.query)\n                    await engine.db.associateTask(options.uid, options.tid, options.pid);\n                    return {uid: options.uid, tid: options.tid};\n                },\n                dissociate:  async function (options) {\n                    //await engine.db.modifyTask(options.uid, options.tid, options.query)\n                    await engine.db.dissociateTask(options.uid, options.tid, options.pid);\n                    return {uid: options.uid, tid: options.tid};\n                }\n            },\n            perspective: {\n                create: async function(options) {\n                    let pObj = {\n                        name: \"\",\n                        avail: \"remain\",\n                        tord: \"duds\",\n                        query: \"\"\n                    }\n                    let npspid = await engine.db.newPerspective(options.uid, pObj);\n                    return {uid: options.uid, pid: npspid};\n                },\n                update__perspective: async function (options) { // update the perspective name!\n                    let possiblePerspectives = await engine.db.getPerspectives(options.uid);\n                    // get all possible perspectives\n                    let perspectiveObject = possiblePerspectives[0][options.id]\n                    // get the one we want based on page id\n\n                    // modify the perspective\n                    await engine.db.modifyPerspective(options.uid, options.id, options.payload);\n\n                    // return what we need to undo\n                    return {perspectiveObject, uid: options.uid}\n                },\n\n                delete__perspective: async function (options) { // update the perspective name!\n                    console.log(\"perspective delete gruntman func\")\n                    // TODO: is this it? @jack\n                    await engine.db.deletePerspective(options.uid, options.id);\n                }\n            },\n        } // type:action:functionaction (return resources)\n        this.undoers = {\n            task: {\n                update: \"task.set\"\n            }\n        } // action: string\n        this.backlog = []; // actionID\n        this.undolog = []; // actionID\n        this.taskLog = {\n        } // actionID: [type, resources]\n        this.canUndo = {\n            task: {\n                update: true,\n            }\n        }\n        this.schedulers = {\n        } // util function onChange fixer-upper\n        this.updateLock = false;\n        this.updateInterval = undefined;\n\n        // @core-devs will not approve but I am secretly hiding\n        // a copy of localized strings in gruntman\n        this.secretLocalizedStrings = {};\n\n        // And AutoBind any and all functions\n        autoBind(this);\n    }\n\n    get localizations() {\n        return this.secretLocalizedStrings;\n    }\n\n    set localizations(value) {\n        this.secretLocalizedStrings = value;\n    }\n\n    halt() {\n        for (let key in this.schedulers)\n            clearTimeout(this.schedulers[key])\n        //this.refresher = ()=>{}; TODO TODO may cause memory leaks in _very_ narrow circumstances but uncomming will break project toggles due to refresher mounting too quickly\n        if (this.updateInterval)\n            clearTimeout(this.updateInterval);\n        this.updateInterval = undefined;\n    }\n\n    lockUpdates() {\n        this.updateLock = true;\n        if (this.updateInterval)\n            clearTimeout(this.updateInterval);\n        this.updateInterval = undefined;\n    }\n\n    unlockUpdates(interval=580) {\n        this.updateLock = false;\n        this.updateInterval = setTimeout(this.refresher, interval);\n    }\n\n    requestRefresh() {\n        if (!this.updateLock && this.callbackRefresherReleased) {\n            this.refresher();\n            this.globalRefresher();\n        }\n    }\n\n    async scheduleNotification(id, uid, title, desc, time) {\n        return await LocalNotifications.schedule({\n            notifications: [\n                {\n                    title: title,\n                    body: desc,\n                    schedule: { at: time},\n                    sound: null,\n                    id: this.hashCode(id),\n                    attachments: [`${id}`, `${uid}`],\n                    extra: uid,\n                }\n            ]\n        });\n    }\n\n    async handleNotificationAction(action) {\n        let [taskID, userID] = action.notification.attachments;\n        switch (action.actionId) {\n            case \"complete\":\n                // TODO TODO\n                this.do(\"task.update__complete\", { uid: userID, tid: taskID}, true)\n                break;\n            case \"snooze\":\n                // TODO TODO\n                taskID = action.notification.attachments;\n                userID = action.notification.extra;\n                break;\n        }\n    }\n\n    async cancelNotification(id) {\n        return await LocalNotifications.cancel({notifications: [{id:`${this.hashCode(id)}`}]});\n    }\n\n    async checkNotification(id) {\n        let expectedID = this.hashCode(id);\n        let pending = await LocalNotifications.getPending();\n        let needed = pending.notifications.map(e=>e.id).filter(e=>e==expectedID); // two equal signs to ignore type\n        return needed.length > 0;\n    }\n\n    registerGlobalRefresher(r) {\n        this.globalRefresher=r;\n        this.callbackRefresherReleased= false;\n        this.releaseTimeout = setTimeout(()=>{this.callbackRefresherReleased=true; this.releaseTimeout=undefined}, this.conflictResolution);\n\n    }\n\n    /*\n     * @param refresher: refresher function to refresh what you registered\n     */\n\n    registerRefresher(r) {\n        this.refresher = r;\n        // lock updates every time a new page loads to prevent MeRGE Conflicts\n        if(this.releaseTimeout) clearTimeout(this.releaseTimeout);\n        this.callbackRefresherReleased= false;\n        this.releaseTimeout = setTimeout(()=>{this.callbackRefresherReleased=true; this.releaseTimeout=undefined}, this.conflictResolution);\n    }\n\n    registerScheduler(callback, identifier, wait=500) {\n        if (this.schedulers[identifier])\n            clearTimeout(this.schedulers[identifier]); // clear the timeout\n        this.schedulers[identifier] = setTimeout(callback, wait);\n    }\n\n    async do(actionName, options, bypassUpdates, isUndo, unsafe_FORCE_UPDATES) {\n        /*\n         * @param actionName => action directive like task.edit or project.create\n         * @param options => options\n         *\n         */\n\n        // Lock updates every time cacheRef is called to prevent mErGE ConFLIcTS\n        if(this.releaseTimeout) clearTimeout(this.releaseTimeout);\n        this.callbackRefresherReleased= false;\n        this.releaseTimeout = setTimeout(()=>{this.callbackRefresherReleased=true; this.releaseTimeout=undefined}, this.conflictResolution);\n\n        let actionID = this.random();\n\n        let nodes = actionName.split(\".\");\n\n        let action = this.doers;\n        while (nodes.length > 0) {\n            action = action[nodes.shift()];\n        }\n\n        if (isUndo) this.undolog.push(actionID);\n        else this.backlog.push(actionID);\n\n        let resources = await action(options);\n\n        this.taskLog[actionID] = [actionName, resources];\n\n        if (!this.updateLock && !bypassUpdates)\n            this.refresher();\n\n        if (unsafe_FORCE_UPDATES)\n            this.refresher();\n\n        return await resources;\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n}\n\nexport default Gruntman;\n\n","import React, { Component } from 'react';\nimport { Plugins } from '@capacitor/core';\n// Firebase App (the core Firebase SDK) is always required and must be listed first\nimport * as firebase from \"firebase/app\";\n\n// Add the Firebase products that you want to use\nimport \"firebase/auth\";\n\nimport $ from \"jquery\";\n\n\nimport './Auth.css';\n\n\nimport '../themefiles/condutiontheme-default.css';\nimport '../themefiles/condutiontheme-default-dark.css';\nimport '../themefiles/condutiontheme-default-light.css';\nimport '../themefiles/condutiontheme-default-adapter.css';\n\n\n\nconst autoBind = require('auto-bind/react');\n\n\nconst { Storage } = Plugins;\n\nclass Auth extends Component {\n    constructor(props) {\n        super(props);\n\n        let greetings = this.props.localizations.greetings_setB;\n\n        /*\n         * mode 0 = login in progress, \n         *      1 = new account in progress,\n         *      2 = recovery in progress, \n         *      3 = email unverified,\n         *      4 = email verified, proceed create\n         *      5 = recovery executed, shepeard them back\n         *\n         */\n\n        this.state = {\n            authMode: 0,\n            showExtra: false,\n            greeting: greetings[Math.floor(Math.random() * greetings.length)]\n        };\n\n        autoBind(this);\n    }\n\n    doLogin() {\n        let view = this;\n        firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\n            firebase.auth().signInWithEmailAndPassword($(\"#email\").val(), $(\"#password\").val()).then(function() {\n                if (firebase.auth().currentUser.emailVerified)\n                     view.props.dispatch({service: \"firebase\", operation: \"login\"});\n                else\n                    view.setState({authMode: 3});\n            }).catch(function(error) {\n                    // Handle Errors here.\n                    const errorCode = error.code;\n                    const errorMessage = error.message;\n                    console.log(error);\n                    $(\".auth-upf\").addClass(\"wrong\");\n            });\n        });\n    }\n\n    doCreate() {\n        // TODO: actually create the account\n        let view = this;\n        let problem = false;\n        firebase.auth().createUserWithEmailAndPassword($(\"#email\").val(), $(\"#password\").val()).catch(function(error) {\n            view.setState({showExtra: true}, ()=>$('#need-verify').html(error.message));\n            problem=true;\n        }).then(function() {\n            if (!problem) {\n                firebase.auth().currentUser.sendEmailVerification();\n                firebase.auth().currentUser.updateProfile({displayName: $(\"#name\").val()});\n                view.setState({authMode: 4, showExtra: true});\n            }\n        })\n    }\n\n    dispatchCreate() {\n        firebase.auth().currentUser.reload().then(()=>{;\n            if (firebase.auth().currentUser.emailVerified)\n                this.props.dispatch({service: \"firebase\", operation: \"create\"});\n            else\n                $('#need-verify').html(\"Please double-check that you tapped the verification link in your email.\");\n        });\n    }\n\n    doRecover() {\n        let problem = false;\n        let view = this;\n        firebase.auth().sendPasswordResetEmail($(\"#email\").val()).catch(function(error) {\n            view.setState({showExtra: true});\n            $('#need-verify').html(error.message);\n            problem=true;\n        }).then(function() {\n            if (!problem) {\n                view.setState({authMode: 5});\n            }\n        })\n        // TODO: actually recover the account\n    }\n\n    doLocal() {\n        this.props.dispatch({service: \"json\", operation: \"login\"});\n    }\n\n    render() {\n        return (\n            <div id=\"auth-content-wrapper\">\n                <div id=\"auth-left-menu\">\n                    <div className=\"menu-area\" style={{height:\"100%\"}}>\n                        <div className=\"auth-component\"></div>\n                        <div className=\"auth-component\"></div>\n                        <span id=\"auth-image-credit\">Image by <span style={{fontWeight: 500}}>Tobias Keller/Pawe Czerwiski</span></span>\n                    </div>\n                </div>\n                <div id=\"authwall\">\n                    <h1 id=\"greeting-auth\">{this.state.greeting}</h1><span id=\"welcome-auth-msg\">{this.props.localizations.welcome_auth_msg}</span>\n                    <h3 className=\"greeting-auth-subtitle\" id=\"greeting-auth-normal\">{(()=>{\n                        switch (this.state.authMode) {\n                            case 2:\n                                return this.props.localizations.nowirres;\n                            default:\n                                return this.props.localizations.greeting_auth_normal;\n\n                        }\n                    })()}</h3> \n                    <input className=\"auth-upf\" id=\"name\" type=\"text\" autoComplete=\"off\" defaultValue=\"\" placeholder={this.props.localizations.what_should_we} style={{display: this.state.authMode === 1 ? \"block\" : \"none\"}}/>\n                    <input className=\"auth-upf\" id=\"email\" type=\"email\" autoComplete=\"off\" defaultValue=\"\" placeholder={this.props.localizations.email} />\n                    <input className=\"auth-upf\" id=\"password\" type=\"password\" autoComplete=\"off\" defaultValue=\"\" placeholder={this.props.localizations.password} style={{display: this.state.authMode !== 2 ? \"block\" : \"none\"}} onKeyPress={(event)=>{\n                        if (event.key === \"Enter\") {\n                            switch (this.state.authMode) {\n                                case 0:\n                                    this.doLogin();\n                                    break;\n                                case 1:\n                                    this.doCreate();\n                                    break;\n                                case 2:\n                                    this.doRecover();\n                                    break;\n                                case 4:\n                                    this.dispatchCreate();\n                                    break;\n                                case 5: \n                                    this.doLogin();\n                                    break;\n                            }\n                        }\n                    }}/>\n                    {(() => {\n                        if (this.state.authMode === 3 || this.state.authMode ===  4 || this.state.authMode === 5 || this.state.showExtra) return <span id=\"need-verify\">\n                            {(()=>{\n                                switch(this.state.authMode){\n                                    case 3:\n                                        return this.props.localizations.need_and_do;\n                                    case 4:\n                                        return this.props.localizations.need_verify;\n                                    case 5:\n                                        return this.props.localizations.need_and_login;\n\n                            }})()}\n                        </span>\n                    })()}\n                    <span id=\"recover-password\" style={{display: this.state.authMode === 3 ? \"none\" : \"block\"}} onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 2:\n                                    return this.setState({authMode: 0});\n                                default:\n                                    return this.setState({authMode: 2});\n\n                            }\n                        }}>{(()=>{\n                            switch (this.state.authMode) {\n                                case 2:\n                                    return this.props.localizations.remembered;\n                                default:\n                                    return this.props.localizations.rec_pswd;\n\n                            }\n                        })()}</span>\n                    <div id=\"auth-actiongroup\">\n                        <div id=\"newuser\" onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 1:\n                                    return this.setState({authMode: 0});\n                                default:\n                                    return this.setState({authMode: 1});\n\n                            }\n                        }}>{(()=>{\n                            switch (this.state.authMode) {\n                                case 1:\n                                    return this.props.localizations.login;\n                                default:\n                                    return this.props.localizations.newuser;\n\n                            }\n                        })()}</div>\n                        <div id=\"login\" onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 0:\n                                    this.doLogin();\n                                    break;\n                                case 1:\n                                    this.doCreate();\n                                    break;\n                                case 2:\n                                    this.doRecover();\n                                    break;\n                                case 4:\n                                    this.dispatchCreate();\n                                    break;\n                            }\n                        }}>\n                            <i className=\"fas fa-snowboarding\" style={{paddingRight: \"5px\"}}></i><span id=\"login-text\">{(() => {\n                                switch(this.state.authMode) {\n                                    case 0:\n                                    case 3:\n                                        return this.props.localizations.lds;\n                                    case 1:\n                                        return this.props.localizations.verifem;\n                                    case 2:\n                                        return this.props.localizations.lerec;\n                                    case 4:\n                                        return this.props.localizations.proceed;\n                                    case 5:\n                                        return this.props.localizations.proceed;\n                                }\n                            })()}</span>\n                        </div>\n                        {(() => {\n                            if (this.state.authMode !== 2) return <div className=\"convert-src\" id=\"ulac\" onClick={this.doLocal}>{this.props.localizations.ulac}</div>\n                        })()}\n                    </div>\n                </div>\n            </div>\n      );\n    }\n}\n\nexport default Auth;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport Lottie from 'react-lottie';\nimport './Pages.css';\n\nconst LoadSpinner = require('../static/load.json');\n\nconsole.log(LoadSpinner);\n\nconst autoBind = require('auto-bind/react');\n\nconst defaultOptions = {\n    loop: true,\n    autoplay: true, \n    animationData: LoadSpinner,\n    rendererSettings: {\n        preserveAspectRatio: 'xMidYMid slice'\n    }\n};\n\nfunction Loader(props) {\n    return (\n        <div style={{width: \"100%\", height: \"100%\", position: \"absolute\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <Lottie options={defaultOptions}\n                height={50}\n                width={50}\n                isStopped={false}\n                isPaused={false}\n            />\n            <div style={{position: \"absolute\", bottom: 15, color: \"var(--decorative-light-alt)\", fontSize: 11, paddingLeft:20, paddingRight:10}}>\n                2019-2020 Shabang Systems, LLC and the Condution Authors. Software released under GNU-GPLv3.\n            </div>\n        </div>\n    )\n}\n\nexport default Loader;\n\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Pages.css';\n\nconst autoBind = require('auto-bind/react');\n\nfunction Onboarding(props) {\n    return (\n        <div style={{width: \"100%\", height: \"100%\", position: \"absolute\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\", color:\"var(--content-normal-accent)\"}}>\n            <div style={{marginRight: 20, maxWidth: 500}}>\n                <b>Condution v1.0.0-alpha.0</b> <br />\n                <i>ONBOARDING VIEW!! Woo hoo!</i> <br /> \n                <span>Arn't you excited to get an account</span> <br /> \n                <span>at a random todo list app?</span> <br /> \n            </div>\n            <div style={{marginLeft: 20, maxWidth: 500}}>\n                <br />\n\n                <pre style={{fontSize: 10, color:\"var(--content-normal-alt)\"}}>\n                    {`\n    Copyright (C) 2019-2020. Shabang Systems, LLC\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see https://www.gnu.org/licenses/.\n                    `}\n                </pre>\n            </div>\n\n        </div>\n    )\n}\n\nexport default Onboarding;\n\n","/* Global Imports */\nimport React, { Component } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet, IonMenu, setupConfig } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Themefiles */\nimport './themefiles/condutiontheme-default-adapter.css';\nimport './themefiles/condutiontheme-default.css';\nimport './themefiles/condutiontheme-default-dark.css';\nimport './themefiles/condutiontheme-default-light.css';\n//import './themefiles/condutiontheme-default-new.css';\nimport './themefiles/condutiontheme-black-n-red.css';\n\n/* Font awesome */\nimport './static/fa/scripts/all.min.css';\n\n/* Theme variables */\nimport './theme/variables.css';\n\n/* Capacitor core plugins + jQuery */\nimport { Plugins } from '@capacitor/core';\nimport $ from \"jquery\";\n\n/* Our Lovley Core Engine */\nimport Engine from './backend/CondutionEngine';\nimport Gruntman from './gruntman';\n\n/* Firebase */\nimport * as firebase from \"firebase/app\";\n\n/* Auth and store modules */\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\n/* Views that we need */\nimport Auth from './pages/Auth';\nimport Loader from './pages/Loader';\nimport Onboarding from './pages/Onboarding';\nimport Home from './pages/Home';\n\n/* Localization Toolkit */\nimport LocalizedStrings from 'react-localization';\n\n/* AutoBind */\nconst autoBind = require('auto-bind/react');\n\n\n/* Storage Plugins */\nconst { Storage } = Plugins;\n\n\n/* \n * Hello human, good morning.\n *\n * Hope you are doing well. Thanks (why are you) visiting App.jsx?\n *\n * I manage global routing, auth handling, and all that jazz.\n * You should not touch me to change the interface.\n * But I guess I change the interface. So.\n *\n * I kind of change the interface?\n *\n * Anyways, I return one of Loader, Auth, or Home depending on auth state.\n *\n * And check for the auth state to determine which one to return\n *\n * It's not really a poem, isn't it.\n *\n * @Jemoka\n *\n */\n\nsetupConfig({ swipeBackEnabled: false, }); // globally disable swipe b/c we implemented our own\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        let localizations = new LocalizedStrings({\n            en: require(\"./static/I18n/main.json\"),\n            zh: require(\"./static/I18n/zh-CN.json\"),\n            de: require(\"./static/I18n/de-DE.json\"),\n        });\n\n        // TODO TODO remove this\n        //localizations.setLanguage(\"zh\");\n\n            // We start with setting our state. We don't know our user's UID (duh)\n            this.state = {authMode: \"loader\", uid: \"\", displayName: \"\", localizations, workspace: null};\n            \n            // We also set the theme based on the user's media query\n            if (window.matchMedia('(prefers-color-scheme:dark)').matches) {\n                $(\"body\").removeClass();\n                $(\"body\").addClass(\"condutiontheme-default-dark\");\n            }\n            else {\n                $(\"body\").removeClass();\n                $(\"body\").addClass(\"condutiontheme-default-light\");\n            }\n\n            // Make ourselves a nice gruntman\n            this.gruntman = new Gruntman(Engine);\n            this.gruntman.localizations = localizations;\n            // And AutoBind any and all functions\n            autoBind(this);\n        }\n\n        async componentDidMount() {\n            // This IS in fact the view\n            let view = this;\n\n            // Light the fire, kick the tires an instance \n            // of {firebase}, and initializing the firebase \n            // and json engines\n            await Engine.start({firebase}, \"firebase\", \"json\");\n\n            let url = (new URL(document.URL))\n            let uri = url.pathname.split(\"/\");\n\n            // ==Handling cached dispatch==\n            // So, do we have a condution_stotype? \n            Storage.get({key: 'condution_stotype'}).then((async function(dbType) {\n                switch (dbType.value) {\n                    // If its firebase \n                    case \"firebase\":\n                        // Check if we actually has a user\n                        firebase.auth().onAuthStateChanged(function(user) {\n                            if (!user)\n                                view.authDispatch({operation:\"logout\"});\n                            // If we have one, shift the engine into firebase mode\n                            else {\n                                Engine.use(\"firebase\", view.gruntman.requestRefresh);\n                                // Load the authenticated state, set authmode as \"firebase\" and supply the UID\n                                view.setState({authMode: \"firebase\", uid: user.uid, displayName: user.displayName});\n                            }\n                        })\n                        break;\n                    // If its json\n                case \"json\":\n                    // Shift the engine into json mode\n                    Engine.use(\"json\", view.gruntman.requestRefresh);\n                    // Load the authenticated state, set the authmode as \"json\" and supply \"hard-storage-user\" as UID\n                    this.setState({authMode: \"json\", uid:\"hard-storage-user\"});\n                    break;\n                // If its workspace preload\n                case \"workspace\":\n                    if (uri[1] !== \"workspaces\") {\n                        Engine.use(\"firebase\", view.gruntman.requestRefresh);\n                        this.setState({authMode: \"workspace\", workspace:(await Storage.get({key: 'condution_workspace'})).value});\n                        break;\n                    }\n                // If there is nothing, well, set the authmode as \"none\"\n                default:\n                    if (uri[1] !== \"workspaces\")\n                        this.setState({authMode: \"none\", uid:undefined});\n                    else {\n                        Engine.use(\"firebase\", view.gruntman.requestRefresh);\n                        Storage.set({key: 'condution_stotype', value: \"workspace\"});\n                        Storage.set({key: 'condution_workspace', value: uri[2]});\n                        this.setState({authMode: \"workspace\", workspace:uri[2]});\n                    }\n                    break;\n            }\n        }).bind(this));\n    }\n\n    // authDispatch handles the dispatching of auth operations. {login, create, and logout}\n    authDispatch(mode) {\n        // TODO: that's a state machine! @zbuster05\n        let uid;\n        let name;\n        switch (mode.operation) {\n            // operation mode login\n            case \"login\":\n                // shift the engine into whatever mode we just logged into\n                Engine.use(mode.service, this.gruntman.requestRefresh);\n                // write the login state into cookies\n                Storage.set({key: 'condution_stotype', value: mode.service});\n                // get the UID\n\n                switch (mode.service) {\n                    // if its firebase\n                    case \"firebase\":\n                        // set the UID as the UID\n                        uid = firebase.auth().currentUser.uid;\n                        name = firebase.auth().currentUser.displayName\n                        break;\n                    default:\n                        // set the UID as \"hard-storage-user\"\n                        uid = \"hard-storage-user\";\n                        name = \"\"\n                        break;\n                }\n                // load the authenicated state and supply the UID\n                this.setState({authMode: mode.service, uid, displayName: name});\n                break;\n            // operation mode create\n            case \"create\":\n                // setthe engine as whatever service\n                Engine.use(mode.service, this.gruntman.requestRefresh);\n                Storage.set({key: 'condution_stotype', value: mode.service});\n                switch (mode.service) {\n                    // if its firebase\n                    case \"firebase\":\n                        // set the UID as the UID\n                        uid = firebase.auth().currentUser.uid;\n                        name = firebase.auth().currentUser.displayName\n                        break;\n                    default:\n                        // set the UID as \"hard-storage-user\"\n                        uid = \"hard-storage-user\";\n                        name = \"\"\n                        break;\n                }\n\n                // Here\n                this.setState({authMode: \"onboarding\", uid, displayName: name});\n                Engine.db.onBoard(uid, Intl.DateTimeFormat().resolvedOptions().timeZone, this.gruntman.localizations.getLanguage()===\"en\" ? \"there\": \"\", this.gruntman.localizations.onboarding_content).then(e=>this.setState({authMode: mode.service, uid, displayName: name}));\n                // TODO: be done with onboarding\n                // Set the storage type and write it into cookies\n                // load the authenicated state and TODO supply the UID\n                break;\n            case \"logout\":\n                // Set the storage type to nada and write it into cookies\n                Storage.set({key: 'condution_stotype', value: \"none\"});\n                // Sign out if we are signed in\n                firebase.auth().signOut();\n                // Load the auth view\n                this.setState({authMode: \"none\", name: \"\"});\n                break;\n        }\n    }\n\n    render() {\n        // Check for onboarding here\n        // then continue\n        // Which authmode?\n        switch (this.state.authMode) {\n            // if we are at the first-paint load mode, do this:\n            case \"loader\":\n                return <Loader />\n            // if we did not authenticate yet, load the auth view:\n            case \"none\":\n                return <Auth dispatch={this.authDispatch} localizations={this.state.localizations}/>;\n            // if we did auth, load it up and get the party going\n            case \"firebase\":\n                return <Home engine={Engine} uid={this.state.uid} dispatch={this.authDispatch} gruntman={this.gruntman} displayName={this.state.displayName} localizations={this.state.localizations} authType={this.state.authMode} email={firebase.auth().currentUser.email}/>;\n            case \"workspace\":\n                return <Home engine={Engine} uid={this.state.uid} dispatch={this.authDispatch} gruntman={this.gruntman} displayName={this.state.displayName} localizations={this.state.localizations} authType={this.state.authMode} workspace={this.state.workspace}/>;\n            case \"json\":\n                return <Home engine={Engine} uid={this.state.uid} dispatch={this.authDispatch} gruntman={this.gruntman} displayName={this.state.displayName} localizations={this.state.localizations} authType={this.state.authMode}/>;\n            // wut esta this auth mode? load the loader with an error\n            case \"onboarding\":\n                return <Onboarding />\n            default:\n                console.error(`CentralDispatchError: Wut Esta ${this.state.authMode}`);\n                return <Loader isError={true} error={this.state.authMode}/>\n        }\n    }\n}\n\nexport default App;\n//class App extends Component {\n    //render() {\n        //return (\n            //<IonApp>\n                //<Home />\n            //</IonApp>\n        //);\n    //}\n//}\n\n/*export default App;*/\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}