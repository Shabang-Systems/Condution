{"version":3,"sources":["pages/Components/Sortable.jsx","pages/Home.jsx","pages/Upcoming.jsx","pages/Calendar.jsx","pages/Completed.jsx","pages/Perspectives.jsx","pages/Components/PerspectiveEditor.jsx","pages/Projects.jsx","pages/Components/FloatingActionButton.jsx","pages/Components/QuickSwitcher.jsx","pages/Components/KeybindManager.jsx","../node_modules/@ionic/core/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","../node_modules/ionicons/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","backend/src/ObjectManager.js","backend/src/PerspectiveManager.js","backend/CondutionEngine.js","gruntman.js","pages/Auth.jsx","pages/Loader.jsx","App.jsx","serviceWorker.ts","index.jsx","pages/Components/Repeat.jsx","pages/Components/TagEditor.jsx","pages/Components/Task.jsx","backend/src/DBManager.js"],"names":["SortableTaskList","props","useState","activelyDragging","setActivelyDragging","order","useRef","moveApplied","currentIndex","dragEnvelope","dragEnabled","setDragEnabled","objRefs","list","map","_","React","createRef","getAnimationDestinationFromIndex","activeIndex","mY","currentOrder","noAnim","down","indx","y","indexOf","zIndex","config","tension","friction","mass","clamp","immediate","useSprings","length","current","springs","set","useEffect","i","uid","bind","useDrag","a","args","index","movement","movementY","first","last","tap","includes","onSortStart","sorted","sortedID","moveBy","Math","floor","abs","newIndex","splice","setTimeout","filter","x","gruntman","do","items","type","content","onSortEnd","newOrder","drag","delay","filterTaps","enabled","id","anim","ref","e","div","className","style","borderRadius","position","cursor","transform","interpolate","onClickCapture","stopPropagation","tid","key","prefix","datapack","engine","availability","envelope","SortableProjectList","item","activeTaskID","activeTaskRef","opacity","onClick","paginate","history","push","display","possibleProjects","autoBind","require","isPlatform","createHashHistory","createBrowserHistory","Home","to","setState","itemSelected","state","projects","perspectives","undefined","url","URL","document","uri","pathname","split","hash","this","refresh","prevProps","prevState","snapshot","sends","db","getTopLevelProjects","tlp","getPerspectives","psp","Router","IonReactHashRouter","IonReactRouter","keybindRef","noBounce","forceOverscroll","contentId","mode","window","navigator","platform","process","fontSize","icon","chevronForwardCircle","checkmarkCircle","calendar","npid","pid","f","paddingRight","name","proj","listOutline","dispatch","operation","render","exact","path","displayName","match","params","menuRefresh","options","create","Component","Upcoming","tomorrow","Date","setDate","getDate","greetings","inbox","dueSoon","possibleTags","possibleProjectsRev","possibleTagsRev","projectSelects","tagSelects","projectDB","timeline","timelineShown","greeting","random","updatePrefix","registerRefresher","getItemAvailability","avail","getInboxandDS","pandt","getProjectsandTags","pPandT","projectList","tagsList","value","label","views","pdb","topLevels","getProjectStructure","buildSelectString","p","level","children","selectTasksInRange","prototype","isSameDateAs","pDate","getFullYear","getMonth","refrenceDate","tcontent","task","due","seconds","halt","toString","overflow","onTouchMove","preventDefault","marginLeft","color","toLocaleString","weekday","fontWeight","marginRight","overflowY","flexGrow","marginTop","timelineItem","toLocaleDateString","year","month","day","paddingLeft","paddingTop","CalPagelendar","dateSelected","setDateSelected","currentMonth","currentYear","firstDayMonth","lastDayMonth","lastDayLastMonth","firstDayDayname","getDay","daysBefore","Array","daysAfter","contentDays","backgroundColor","date","onDateSelected","Calendar","today","setTime","currentDate","taskList","repeater","showEdit","endDate","effect","offset","top","d","getTime","console","log","TaskObject","contents","Completed","tasksShown","taskCats","rendering","taskArr","getCompletedTasks","full","forEach","cat","class","slice","marginBottom","startingCompleted","handleFetchMore","Perspectives","perspectiveName","perspectiveQuery","perspectiveAvail","perspectiveTord","possiblePerspectives","perspectiveObject","perspective","calc","query","tord","registerScheduler","payload","target","then","reference","isShown","onDidDismiss","hideEdit","updateName","startHighlighted","onChange","persist","data-tip","borderColor","margin","handleDelete","withRouter","PerspectiveEdit","inputEvent","focus","alert","isOpen","onWillPresent","lockUpdates","unlockUpdates","cssClass","alignItems","width","whiteSpace","defaultValue","minWidth","placeholder","handleQueryChange","interface","onIonChange","detail","handleHelp","Projects","parent","is_sequential","currentProject","activeTask","cProject","parentProj","result","_explode","ABTIB","isExpanded","setisExpanded","isSaving","setisSaving","useSpring","input","readOnly","event","onBlur","onKeyUp","taskName","dateInfo","chrono","defer","end","start","replace","text","trim","npobj","blur","QuickSwitcher","qs_show","animated","dismiss","Keybinds","bindings","sidebar_switcher","sidebar_list","sidebar_incrimentor","manageQs","sidebar_index","prop_store","that","num","loca","o","combo","Mousetrap","unbind","webpackAsyncContext","req","__webpack_require__","Promise","resolve","Error","code","ids","keys","Object","module","exports","cRef","dbManager","util","select","compare","lhs","cmp","rhs","TypeError","all","requirements","doc","dat","data","any","atLeast","threshold","counter","atMost","debug","arg","trace","userID","get","snap","docs","catch","err","error","getTasksWithQuery","taskDocs","getInboxTasks","sort","b","inboxDocs","getDSTasks","available","wrt","dsTime","setHours","getHours","isComplete","dsDocs","dueTasks","min","max","returnFull","tasks","avaliable","warn","ibt","dsTasks","prev","cache","dst","avalibility","dstWithoutIbt","getTaskInformation","taskID","paramName","ti","projectIdByName","projectNameById","projectsSorted","exists","top_level","projElem","sortOrder","ret","tagIdByName","tagNameById","tag","pInfobyName","pInfobyID","ps","pstp","projectID","updateQuery","update","modifyTask","newTask","taskObj","project","ibtL","projL","add","newProject","projObj","size","obj","hasOwnProperty","newPerspective","pstObj","newTag","tagName","dissociateTask","dump","t","originalChildren","associateTask","assosProjID","willDissociateTask","taskData","delete","perspectiveID","deleteProject","struct","cpLtTasks","cpLt","concat","tagID","recursive","itemID","entries","recursivelyGetBlocks","bstat","projStruct","child","assign","tlps","blockstatus","blocks","completedTasks","taskItems","tsk","cpSorted","taskA","taskB","completeDate","yesterday","thisWeek","thisMonth","setMonth","tasksToday","tsks","tasksYesterday","tasksWeek","tasksMonth","evenBefore","tz","username","desc","isFlagged","isFloating","tags","timezone","repeat","rule","cdyrslf","npd","od","ds","odid","dsID","nice","sequential","blocked","click","pspDir","pspsp","specific","sp","promotion","online","dis","patreon","yiipee","getTasks","removeParamFromTask","modifyProject","modifyPerspective","completeTask","associateProject","dissociateProject","deleteTask","deletePerspective","getDSRow","deleteTag","onBoard","perspectiveHandler","cgs","taskFilter","taskCaptureGroup","logicCaptureGroup","globalCaptureGroup","clear","lastIndex","parseTaskCaptureGroup","str","parseSpecialVariables","vr","compileTask","pPaT","additionalFilter","queries","taskCache","antiCache","dbObj","pS","compileLogicCaptureGroup","ltr","taskInfo","taskCompValues","util_datesequal","dateA","dateB","pStr","pRes","fquery","logicSort","exec","test","Set","flat","values","taskObjs","aval","it","dbRefObj","__init__","use","useDb","dbFuncs","pspObj","flush","parseFromTimeZone","Gruntman","refresher","callbackRefresherReleased","conflictResolution","releaseTimeout","doers","macro","applyOrder","ntObject","Intl","DateTimeFormat","resolvedOptions","timeZone","ntID","tInfo","update__project","oldProject","update__uncomplete","update__complete","toISOString","rRule","defDistance","rOn","on","dow","oDow","setFullYear","message","TODO","update__name","projectName","update__pstate","associate","dissociate","pObj","npspid","update__perspective","delete__perspective","undoers","backlog","undolog","taskLog","canUndo","schedulers","updateLock","updateInterval","clearTimeout","interval","r","callback","identifier","wait","actionName","bypassUpdates","isUndo","unsafe_FORCE_UPDATES","actionID","nodes","action","shift","resources","Auth","Plugins","Storage","authMode","showExtra","view","firebase","setPersistence","Persistence","LOCAL","signInWithEmailAndPassword","$","val","currentUser","emailVerified","service","addClass","problem","createUserWithEmailAndPassword","html","sendEmailVerification","updateProfile","reload","sendPasswordResetEmail","height","autoComplete","onKeyPress","doLogin","doCreate","doRecover","dispatchCreate","doLocal","Loader","justifyContent","maxWidth","setupConfig","swipeBackEnabled","App","matchMedia","matches","removeClass","Engine","dbType","onAuthStateChanged","user","requestRefresh","authDispatch","signOut","isError","Boolean","location","hostname","ReactDOM","getElementById","serviceWorker","ready","registration","unregister","Repeat","advanced","loadTask","float","newOn","elem","oldOn","toLowerCase","TagEditor","AnimationFactory","Keyframes","Spring","hide","taskHeight","taskMargin","taskBackground","taskPadding","taskEditOpacity","taskEditMaxHeight","taskOpacity","taskNameDecoration","taskPosition","taskDisplay","taskMaxHeight","reset","show","complete","Task","componentWillUnmount","removeEventListener","detectOutsideClick","toggleTask","expanded","deferDate","dueDate","decoration","showRepeat","showTagEditor","haveBeenExpanded","startOpen","initialRenderDone","me","checkbox","TagEditorRef","actualCheck","showTageEditor","refreshDecorations","addEventListener","contains","closeTask","openTask","native","animatedProps","freeze","minHeight","maxHeight","background","padding","hideRepeat","hideTagEditor","defaultChecked","htmlFor","onFocus","getPlatforms","textDecoration","DateInput","TimeInput","getMinutes","getSeconds","selected","showTimeInput","dateFormat","customTimeInput","customInput","isClearable","classNamePrefix","styles","menuPortal","provided","menuPortalTarget","option","isMulti","base","newValue","actionMeta","tids","__isNew__","originalTags","tagIDs","storageType","memoryDB","firebaseDB","fsRef","readiness","FilesystemDirectory","FilesystemEncoding","Filesystem","Device","Map","unsubscribeCallbacks","getFirebaseRef","assert","collectionGroup","collection","nav","DocumentReference","Query","isArray","where","generateRandomString","substring","TODOstring","JSON","stringify","has","onSnapshot","next","diskJSONDB","dbRoot","Data","read","readFile","directory","encoding","UTF8","parse","write","writeFile","pointer","some","parsed","docRefs","docID","round","pop","cacheRef","cachedRead","storageRef","storageAdd","storageRead","storageSet","storageUpdate","storageDel","loaders","features","initializeApp","dbkeys","deploy","firestore","enablePersistence","synchronizeTabs","getInfo","isMobile","resourcesPath","sqliteDB","dbPath"],"mappings":"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","file":"static/js/main.3d189f38.chunk.js","sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { useDrag } from 'react-use-gesture'\nimport { useSprings, animated, interpolate } from 'react-spring'\n\nimport '../Projects.css';\n\nimport Task from './Task';\n\n\n\n/*\n *\n * Hello human,\n * good afternoon.\n *\n * I am clumsy sortable!\n *\n * Use me to sort things\n * and make sortable task lists\n *\n * TODO => put actual documentation here\n *\n * So there.\n *\n * @jemoka\n *\n */\n\nconst SortableTaskList = (props)=>{\n\n    const itemHeight = 42; // height of single item to calculate animation\n\n    const [activelyDragging, setActivelyDragging] = useState([]); // we are actively dragging...\n\n    const order = useRef();\n    const moveApplied = useRef();\n    const currentIndex = useRef();\n    const dragEnvelope = useRef();\n    const [dragEnabled, setDragEnabled] = useState(true);\n\n\n    let objRefs = props.list.map(_ => React.createRef());\n\n    const getAnimationDestinationFromIndex = (activeIndex, mY, currentOrder, noAnim, down) => (indx) => {\n        return activeIndex === indx ?  {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight + (down ? mY-((currentOrder.indexOf(indx)-indx)*itemHeight):0), // number of tasks the index is out of place * height of task + cursor movement => correct dragged position offset\n                zIndex:1000, \n                config: {tension: 100, friction: 2, mass: 1, clamp: true},\n            immediate:noAnim\n        } : {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight,  // number of tasks the index is out of place * height of task => correct adjustment to position\n                zIndex:0, \n            immediate:noAnim\n        }; // if the index is the one that's being dragged, move up by howevermuch needed\n    }\n\n\n    //const [{ x, y }, set] = useSpring(() => ({ x: 0, y: 0 }))\n    const [springs, set, stop] = useSprings(props.list.length, getAnimationDestinationFromIndex(-1, 0, order.current, true))\n\n    // initialize presistant refs\n    useEffect(() => {\n        order.current = props.list.map((_, i)=>i);\n        moveApplied.current = 0; // moves applied\n        currentIndex.current = 0; // currentIndex\n        set(getAnimationDestinationFromIndex(-1, 0, order.current, true)) // initialize the animation function\n    }, [props.list, props.uid]);\n\n    // Set the drag hook and define component movement based on gesture data\n    const bind = useDrag( (async function ({ args: [index], down, movement: [_, movementY] , first, last, tap}) {\n\n        if (first) {\n            currentIndex.current = index;\n\n            if (!activelyDragging.includes(index))\n                setActivelyDragging([...activelyDragging, index]);\n\n            if (props.onSortStart)\n                props.onSortStart({sorted: index, sortedID: props.list[index], list: props.list});\n        }\n\n        let moveBy = Math.floor(movementY/itemHeight) // the amount of tasks the active task moved over\n        moveBy = moveBy <= -index ? -index : (moveBy >= (props.list.length-index) ? props.list.length-1 : moveBy); // clip moveby by the total task it could possibly move over\n\n        if (Math.abs(moveBy) > 0 && moveBy!==moveApplied.current) {\n            // @enquierer crushing @jemoka's hopes and dreams\n            let newIndex = index+moveBy;\n            order.current.splice(currentIndex.current, 1); // splice element out\n            order.current.splice(newIndex, 0, index); // splice the index in, noting that we just took something out\n            moveApplied.current = moveBy;\n            currentIndex.current = newIndex;\n        }\n\n        //if (!tap) { // TODO THIS LINE IS EVIL\n            set(getAnimationDestinationFromIndex(index, movementY, order.current, false, down)) // set the animation function\n        //} // TODO CANNOT UNCOMMENT, OR YOU RISK BREAKING THE DATEPICKER\n        // As to why something in Sortable checking for taps breaks the datepicker, I blame Chuck Norris. Why not?\n\n\n        if (last) {// if we are done dragging\n            setTimeout(()=> setActivelyDragging(activelyDragging.filter(x=>x!==index)), 100); // wait for the lovely event bubble and say we are done\n            moveApplied.current = 0; // moves applied\n            currentIndex.current = 0; // currentIndex\n            await props.gruntman.do( // call a gruntman function\n                \"macro.applyOrder\", { \n                    uid: props.uid, // pass it the things vvv\n                    order: order.current, \n                    items: props.list.map(i=>{return {type:\"task\", content:i}}),\n                }\n            );\n\n            if (props.onSortEnd)\n                props.onSortEnd({sorted: index, sortedID: props.list[index], newOrder: order.current, movementY, moveBy, list:props.list});\n\n        }\n\n\n    }).bind(this), {drag:{delay:100}, filterTaps: true, enabled: dragEnabled})\n\n    return props.list.map((id, i) => {\n        let anim = springs[i];\n        return (\n            <div ref={(e)=>{dragEnvelope.current=e}}>\n            <animated.div \n                {...bind(i)} \n                className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                style={{\n                    borderRadius: 7,\n                    position: \"relative\",\n                    cursor: \"pointer\",\n                    zIndex: anim.zIndex,  // z-index is 1000 during drag\n                    transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                }} \n                onClickCapture={(e)=>{\n                    if (activelyDragging.includes(i)){ // if we are still dragging\n                        e.stopPropagation(); // no clicky!\n                    }\n                }}\n            >\n                <Task ref={objRefs[i]} tid={id} key={id+\"-\"+props.prefix} datapack={props.datapack} uid={props.uid} engine={props.engine} gruntman={props.gruntman} availability={props.availability[id]} envelope={dragEnvelope} setDragEnabled={setDragEnabled} />\n            </animated.div>\n            </div>\n    )\n    });\n}\n\nconst SortableProjectList = (props)=>{\n\n    const itemHeight = 42; // height of single item to calculate animation\n\n    const [activelyDragging, setActivelyDragging] = useState([]); // we are actively dragging...\n\n    const order = useRef();\n    const moveApplied = useRef();\n    const currentIndex = useRef();\n    const dragEnvelope = useRef();\n    const [dragEnabled, setDragEnabled] = useState(true);\n\n\n    let objRefs = props.list.map(_ => React.createRef());\n\n    const getAnimationDestinationFromIndex = (activeIndex, mY, currentOrder, noAnim, down) => (indx) => {\n        return activeIndex === indx ?  {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight + (down ? mY-((currentOrder.indexOf(indx)-indx)*itemHeight):0), // number of tasks the index is out of place * height of task + cursor movement => correct dragged position offset\n                zIndex:1000, \n                config: {tension: 100, friction: 2, mass: 1, clamp: true},\n            immediate:noAnim\n        } : {\n                y: ((currentOrder.indexOf(indx) !== -1 ? currentOrder.indexOf(indx) : indx)-indx)*itemHeight,  // number of tasks the index is out of place * height of task => correct adjustment to position\n                zIndex:0, \n            immediate:noAnim\n        }; // if the index is the one that's being dragged, move up by howevermuch needed\n    }\n\n\n    //const [{ x, y }, set] = useSpring(() => ({ x: 0, y: 0 }))\n    const [springs, set, stop] = useSprings(props.list.length, getAnimationDestinationFromIndex(-1, 0, order.current, true))\n\n    // initialize presistant refs\n    useEffect(() => {\n        order.current = props.list.map((_, i)=>i);\n        moveApplied.current = 0; // moves applied\n        currentIndex.current = 0; // currentIndex\n        set(getAnimationDestinationFromIndex(-1, 0, order.current, true)) // initialize the animation function\n    }, [props.list, props.uid]);\n\n    // Set the drag hook and define component movement based on gesture data\n    const bind = useDrag( (async function ({ args: [index], down, movement: [_, movementY] , first, last, tap}) {\n\n        if (first) {\n            currentIndex.current = index;\n\n            if (!activelyDragging.includes(index))\n                setActivelyDragging([...activelyDragging, index]);\n\n            if (props.onSortStart)\n                props.onSortStart({sorted: index, sortedID: props.list[index], list: props.list});\n        }\n\n        let moveBy = Math.floor(movementY/itemHeight) // the amount of tasks the active task moved over\n        moveBy = moveBy <= -index ? -index : (moveBy >= (props.list.length-index) ? props.list.length-1 : moveBy); // clip moveby by the total task it could possibly move over\n\n        if (Math.abs(moveBy) > 0 && moveBy!==moveApplied.current) {\n            // @enquierer crushing @jemoka's hopes and dreams\n            let newIndex = index+moveBy;\n            order.current.splice(currentIndex.current, 1); // splice element out\n            order.current.splice(newIndex, 0, index); // splice the index in, noting that we just took something out\n            moveApplied.current = moveBy;\n            currentIndex.current = newIndex;\n        }\n\n        //if (!tap) { // TODO THIS LINE IS EVIL\n            set(getAnimationDestinationFromIndex(index, movementY, order.current, false, down)) // set the animation function\n        //} // TODO CANNOT UNCOMMENT, OR YOU RISK BREAKING THE DATEPICKER\n        // As to why something in Sortable checking for taps breaks the datepicker, I blame Chuck Norris. Why not?\n\n\n        if (last) {// if we are done dragging\n            setTimeout(()=> setActivelyDragging(activelyDragging.filter(x=>x!==index)), 100); // wait for the lovely event bubble and say we are done\n            moveApplied.current = 0; // moves applied\n            currentIndex.current = 0; // currentIndex\n            await props.gruntman.do( // call a gruntman function\n                \"macro.applyOrder\", { \n                    uid: props.uid, // pass it the things vvv\n                    order: order.current, \n                    items: props.list.map(i=>{return {type:i.type, content:i.type===\"project\"?i.content.id:i.content}}),\n                }\n            );\n\n            if (props.onSortEnd)\n                props.onSortEnd({sorted: index, sortedID: props.list[index], newOrder: order.current, movementY, moveBy, list:props.list});\n\n        }\n\n\n    }).bind(this), {drag:{delay:100}, filterTaps: true, enabled: dragEnabled})\n\n    return props.list.map((item, i) => {\n        let anim = springs[i];\n        if (item.type === \"task\")\n            return (\n                <div ref = {dragEnvelope}>\n                    <animated.div \n                        {...bind(i)} \n                        className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                        style={{\n                            borderRadius: 7,\n                            position: \"relative\",\n                            cursor: \"pointer\",\n                            zIndex: anim.zIndex,  // z-index is 1000 during drag\n                            transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                        }} \n                        onClickCapture={(e)=>{\n                            if (activelyDragging.includes(i)){ // if we are still dragging\n                                e.stopPropagation(); // no clicky!\n                            }\n                        }}\n                    >\n                        <Task ref={props.activeTaskID===item.content ? props.activeTaskRef : objRefs[i]} tid={item.content} key={item.content+\"-\"+props.prefix} datapack={props.datapack} uid={props.uid} engine={props.engine} gruntman={props.gruntman} availability={props.availability[item.content]} envelope={dragEnvelope} setDragEnabled={setDragEnabled}/>\n                    </animated.div>\n                </div>\n            )\n        else if (item.type === \"project\") {\n            return (\n            <div ref={dragEnvelope}>\n                <animated.div \n                    {...bind(i)} \n                    className={activelyDragging.includes(i) ? \"drag-envelope dragging\" : \"drag-envelope\"}\n                    style={{\n                        borderRadius: 7,\n                        position: \"relative\",\n                        cursor: \"pointer\",\n                        zIndex: anim.zIndex,  // z-index is 1000 during drag\n                        transform: interpolate([anim.y], (y) => `translate3d(0,${y}px,0)`), // interpolate the transform, b/c that's, uh, the dragging part\n                    }} \n                    onClickCapture={(e)=>{\n                        if (activelyDragging.includes(i)){ // if we are still dragging\n                            e.stopPropagation(); // no clicky!\n                        }\n                    }}\n                >\n                    <a className=\"subproject\" style={{opacity:props.availability[item.content.id]?\"1\":\"0.35\"}} onClick={()=>{props.paginate(\"projects\", item.content.id);props.history.push(`/projects/${item.content.id}`)}}><div><i className=\"far fa-arrow-alt-circle-right subproject-icon\"/><div style={{display: \"inline-block\"}}>{props.possibleProjects[item.content.id]}</div></div></a>\n                </animated.div>\n            </div>\n            )\n        }\n    });\n}\n\nexport { SortableTaskList, SortableProjectList };\n\n\n\n","// A whole lotta imports\n\n// Ionic components\nimport { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, isPlatform } from '@ionic/react';\nimport { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, calendar } from 'ionicons/icons';\n\n// Routing\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\n\n// Like, your heart and soul\nimport React, { Component } from 'react';\n\n// Cool components that we need\nimport Upcoming from './Upcoming';\nimport Calendar from './Calendar';\nimport Completed from './Completed';\nimport Perspectives from './Perspectives';\nimport Projects from './Projects';\nimport ABTIB from './Components/FloatingActionButton';\nimport Keybinds from './Components/KeybindManager';\n\n// Our very own CSS\nimport './Home.css';\n\n// Tootips\nimport ReactTooltip from 'react-tooltip';\n\n// autobind those functions\nconst autoBind = require('auto-bind/react');\nconst history = isPlatform(\"electron\") ? createHashHistory() : createBrowserHistory();\n\n/* \n *\n * Hello, human\n * Good morning\n * Read me please.\n *\n * Use the **state**'s itemSelected \n *     to manage the menu\n * use the **React Router URL** \n *     to manage the page\n *\n * Otherwise, unreload-reload won't work.\n *\n * Thanks. @jemoka.\n *\n */\n\n// Welp. The Home.\nclass Home extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            projects:[], // list of top level projects\n            perspectives:[], // list of perspectives\n            itemSelected:{item:\"upcoming\", id:undefined}, // so what did we actually select\n        };\n        // AutoBind!\n        autoBind(this);\n    }\n\n    paginate = (to, id) => this.setState({itemSelected:{item:to ,id}}) // Does not actually paginate; instead, it... uh... sets the highlighting of the menu\n\n    componentDidMount() {\n        // This is, indeed, the view\n        // Get the current URI to set which view is selected\n        let url = (new URL(document.URL))\n        let uri = url.pathname.split(\"/\");\n        let hash = url.hash.split(\"/\");\n        if (uri[1] === \"\")\n            this.setState({itemSelected:{item:\"upcoming\", id:\"\"}});\n        else if (isPlatform(\"electron\"))\n            this.setState({itemSelected:{item:hash[1], id:hash[2]}});\n        else\n            this.setState({itemSelected:{item:uri[1], id:uri[2]}});\n\n        this.refresh()\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (prevState.to !== this.state.to && this.state.to !== undefined)\n             this.setState({sends:{to:undefined, id:undefined}})\n    }\n\n    async refresh() {\n        // Load the top level projects and perspectives\n        // to set into the state and to add to the menu\n        let tlp = await this.props.engine.db.getTopLevelProjects(this.props.uid);\n        let psp = await this.props.engine.db.getPerspectives(this.props.uid);\n\n        this.setState({projects: tlp[2], perspectives:psp[2]});\n    }\n\n\n\n\n    render() {\n        const Router = isPlatform(\"electron\") ? IonReactHashRouter : IonReactRouter; // Router workaround for electron\n        return (\n            <IonPage>\n                {/* The central router that controls the routing of views */}\n                <Router history={history}>\n\t\t    <Keybinds \n\t\t\tpaginate={this.paginate} \n\t\t\tref={this.keybindRef} \n\t\t\tperspectives={this.state.perspectives}\n\t\t\tprojects={this.state.projects}\n\t\t    />\n                    {/* OoIp */}\n                    <ReactTooltip />\n                    {/* App container */}\n                    <IonContent noBounce forceOverscroll={false}>\n                        {/* Menu pane to control mobile view splitting */}\n                        <IonSplitPane id=\"main-split\" contentId=\"main\" mode=\"md\">\n                            {/* The left: menu! */}\n                            <IonMenu id=\"main-menu\" contentId=\"main\">\n                                <br />\n                                <IonContent id=\"menu-content\" className={(()=>{\n                                    if (!isPlatform(\"electron\")) // if we are not running electron\n                                        return \"normal\"; // normal windowing proceeds\n                                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                                        return \"darwin\"; // frameless setup\n                                    }\n                                    else if (process.platform === \"win32\") // windows\n                                        return \"windows\"; // non-frameless\n\n                                })()}>\n                                    {/* === Built Ins: upcoming + completed == */}\n                                    {/* Upcoming button + link */}\n                                    <Link to=\"/upcoming\" onClick={()=>this.setState({itemSelected:{item:\"upcoming\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Upcoming button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"upcoming\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20}} icon={chevronForwardCircle} />Upcoming</div>\n                                    </Link>\n\n                                    {/* Completed button + link */}\n                                    <Link to=\"/completed\" onClick={()=>this.setState({itemSelected:{item:\"completed\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Completed button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"completed\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20, transform: \"translateY(3.5px)\"}} icon={checkmarkCircle} />Completed</div>\n                                    </Link>\n\n                                    {/* Calendar button + link */}\n                                    <Link to=\"/calendar\" onClick={()=>this.setState({itemSelected:{item:\"calendar\", id:undefined}})}> {/* Link to trigger router */}\n                                        {/* Calendar button */}\n                                        <div className={\"menu-item \"+(this.state.itemSelected.item === \"calendar\" ? \"menu-item-selected\" : \"\")} style={{fontSize: 18}}><IonIcon style={{fontSize: 20, transform: \"translateY(3.5px)\"}} icon={calendar} />Calendar</div>\n                                    </Link>\n\n                                    {/* === Perspectives == */}\n                                    <div className=\"menu-sublabel menu-decoration\">Perspectives <a onClick={()=>{\n                                        let f = (async function() { // minification breaks double-called anonomous functions, so we must declare them explicitly\n                                            let npid = (await this.props.gruntman.do(\n                                                \"perspective.create\", {\n                                                    uid: this.props.uid,\n                                                },\n                                            )).pid;\n                                            history.push(`/perspectives/${npid}/do`);\n                                            this.paginate(\"perspectives\", npid);\n                                            this.refresh();\n                                        }).bind(this);\n                                        f();\n\n                                    }} className=\"fa fa-plus add\"></a></div>\n\n                                    {/* === Perspective button + link == */}\n                                    {this.state.perspectives.map((psp) => {\n                                        return (\n                                            <Link key={psp.id} to={`/perspectives/${psp.id}`} onClick={()=>this.setState({itemSelected:{item:\"perspectives\", id:psp.id}})}> {/* Link to trigger router */}\n                                                {/* Perspective button */}\n                                                <div className={\"menu-item \"+(this.state.itemSelected.item === \"perspectives\" && this.state.itemSelected.id === psp.id ? \"menu-item-selected\" : \"\")}><i className=\"fas fa-layer-group\" style={{paddingRight: 2}}></i> {psp.name}</div> \n                                            </Link>\n                                        )\n                                    })}\n\n\n                                    {/* === Projects == */}\n                                    <div className=\"menu-sublabel menu-decoration\">Projects <a onClick={()=>{\n                                        let f = (async function() { // minification breaks double-called anonomous functions, so we must declare them explicitly\n                                            let npid = (await this.props.gruntman.do(\n                                                \"project.create\", {\n                                                    uid: this.props.uid,\n                                                },\n                                            )).pid;\n                                            history.push(`/projects/${npid}/do`);\n                                            this.paginate(\"projects\", npid);\n                                            this.refresh();\n                                        }).bind(this);\n                                        f();\n\n                                    }} className=\"fa fa-plus add\"></a></div>\n                                    {/* === Project Contents == */}\n                                    {this.state.projects.map((proj) => {\n                                        return (\n                                            <Link key={proj.id} to={`/projects/${proj.id}`} onClick={()=>this.setState({itemSelected:{item:\"projects\", id:proj.id}})}> {/* Link to trigger router */}\n                                                {/* Perspective button */}\n                                                <div className={\"menu-item \"+(this.state.itemSelected.item === \"projects\" && this.state.itemSelected.id === proj.id ? \"menu-item-selected\" : \"\")}><IonIcon icon={listOutline}/>{proj.name}</div></Link> \n                                        )                            \n                                    })}\n\n                                </IonContent>\n\n                                {/* Logout button */}\n                                <div className=\"menu-item\" id=\"logout\" onClick={()=>{history.push(`/`);this.props.dispatch({operation: \"logout\"})}}><i className=\"fas fa-snowboarding\" style={{paddingRight: 5}} />Logout</div>\n                            </IonMenu>\n                            <IonPage id=\"main\">\n                                {/* the add button to inbox button*/}\n                                <ABTIB uid={this.props.uid} gruntman={this.props.gruntman} />\n                                {/* The actual page */}\n                                <IonRouterOutlet>\n                                    {/* empty => /upcoming*/}\n                                    <Route render={() => <Redirect to=\"/upcoming\"/>}/>\n                                    {/* / => /upcoming */}\n                                    <Route exact path=\"/\" render={() => <Redirect to=\"/upcoming\" />} />\n                                    {/* and the perspective switch */}\n                                    <Switch>\n                                        {/* upcoming renders upcoming */}\n                                        <Route path=\"/upcoming\" exact render={()=><Upcoming engine={this.props.engine} uid={this.props.uid} gruntman={this.props.gruntman} displayName={this.props.displayName} />} />\n                                        {/* completed renders completed */}\n                                        <Route path=\"/calendar\" exact render={()=><Calendar engine={this.props.engine} uid={this.props.uid} gruntman={this.props.gruntman} />} />\n\n                                        {/* completed renders completed */}\n                                        <Route path=\"/completed\" exact render={()=><Completed engine={this.props.engine} uid={this.props.uid} gruntman={this.props.gruntman} />} />\n\n                                        {/* perspective renders perspectives */}\n                                        <Route path=\"/perspectives/:id/:create?\" render={({match})=><Perspectives engine={this.props.engine} paginate={this.paginate} id={match.params.id} uid={this.props.uid}  gruntman={this.props.gruntman}  menuRefresh={this.refresh}  options={match.params.create}/>}  />\n\n                                        {/* project renders perspectives */}\n                                        <Route path=\"/projects/:id/:create?\" render={({match})=><Projects engine={this.props.engine} id={match.params.id} uid={this.props.uid}  gruntman={this.props.gruntman}  menuRefresh={this.refresh} paginate={this.paginate} options={match.params.create}/>}  />\n                                        {/* TODO projects */}\n                                    </Switch>\n                                </IonRouterOutlet>\n                            </IonPage>\n                        </IonSplitPane>\n                    </IonContent>\n                </Router>\n            </IonPage>\n        );\n    }\n};\n\nexport default Home;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, IonBadge, isPlatform, IonInfiniteScroll, IonInfiniteScrollContent } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Upcoming.scss';\nimport './Pages.css';\n\nimport { SortableTaskList } from './Components/Sortable';\n\nimport Task from './Components/Task';\n\nconst autoBind = require('auto-bind/react'); // autobind things! \n\n/* \n * The lack of a poem here is scathing\n * so I thought\n * I'd contribute.\n *\n * The homepage needs no introduction\n * For it explains itself in production.\n *\n * But alas,\n * I still write this.\n *\n * What for?\n *\n * @Jemoka\n *\n */\n\n\nclass Upcoming extends Component { // define the component\n    constructor(props) {\n        super(props);\n\n        let tomorrow = new Date();\n        tomorrow.setDate(tomorrow.getDate()+1);\n\n        let greetings = [\"Hello,\", \"Hey,\", \"Heyo,\", \"Aloha,\", \"Yo!\"];\n\n        this.state = {\n            inbox: [], // define the inbox\n            dueSoon: [], // whats due soon? \n            possibleProjects:{}, // what are the possible projects? \n            possibleTags:{},  // what are the possible tags?\n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [],  // whats available\n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            timeline: [],\n            timelineShown: false,\n            greeting: greetings[Math.floor(Math.random() * greetings.length)]\n        };\n\n        this.updatePrefix = this.random();\n\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n\n        autoBind(this);\n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pandt = await this.props.engine.db.getInboxandDS(this.props.uid, avail) // get inbox and due soon \n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n\n        this.updatePrefix = this.random();\n\n        let timeline = await this.props.engine.db.selectTasksInRange(this.props.uid, new Date(), new Date(2100, 1, 1), true);\n        \n                            //timeline.push({type: \"label\", content: timelineRenderedUntil});\n                        //for (let task of fTasks)\n                            //timeline.push({type:\"task\", content:task});\n\n                        //this.setState({timelineRenderedUntil, timelineSoFar: timeline});\n        // Date same date check https://stackoverflow.com/questions/4428327/checking-if-two-dates-have-the-same-date-info\n        \n        Date.prototype.isSameDateAs = function(pDate) {\n          return (\n            this.getFullYear() === pDate.getFullYear() &&\n            this.getMonth() === pDate.getMonth() &&\n            this.getDate() === pDate.getDate()\n          );\n        }\n\n        let refrenceDate = new Date();\n        let tcontent = [];\n        for (let task of timeline) {\n            let due = new Date(task[1].due.seconds*1000);\n            if (!due.isSameDateAs(refrenceDate)) {\n                tcontent.push({type:\"label\", content: due});\n                refrenceDate = due;\n            }\n            tcontent.push({type:\"task\", content: task[0]});\n        }\n\n        this.setState({inbox: pandt[0], dueSoon: pandt[1], possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB, timeline: tcontent});\n    }\n\n    componentDidMount() {\n        this.refresh();\n\n        //// Jack and the Misadventures of Hiding the Scrollbar\n        //const content = this.pageRef.current;\n        //const styles = document.createElement('style');\n        //styles.textContent = `\n            //.scroll-y::-webkit-scrollbar {\n                //display: none;\n            //}\n        //`;\n        {/*content.shadowRoot.appendChild(styles);*/}\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n\n    render() {\n\n        return (\n            <IonPage>\n                <div style={{overflow: \"hidden\"}}>\n\n                    <div className={\"page-invis-drag \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>&nbsp;</div>\n                    <div className={\"page-content \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>\n                        <div className=\"header-container\" onTouchMove={(e)=>e.preventDefault()}>\n                            <div style={{display: \"inline-block\"}}>\n                                <IonMenuToggle><i className=\"fas fa-bars\" style={{marginLeft: 20, color: \"var(--decorative-light-alt\"}} /></IonMenuToggle> <h1 className=\"page-title\"><i style={{paddingRight: 10}} className=\"fas fa-chevron-circle-right\"></i>Upcoming</h1> \n\n                                    \n                            <div className=\"greeting-datewidget\">\n                                <div style={{display: \"inline-block\"}} className=\"greeting-date\">{(new Date()).getDate()}</div>\n                                <div style={{display: \"inline-block\"}} className=\"greeting-datename\">{new Date().toLocaleString('en-us', {  weekday: 'long' })}</div>\n                            </div>\n                            \n\n\n                                <div className=\"greeting-container\"><span id=\"greeting\">{this.state.greeting}</span> <span id=\"greeting-name\" style={{fontWeight: 600}}>{this.props.displayName}</span></div>\n                            </div>\n                        </div>\n                        <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\", flexGrow: 5}}>\n                            <div>\n                                {(()=>{\n                                    if (this.state.inbox.length > 0)\n                                        return <div className=\"page-label\">Unsorted<IonBadge className=\"count-badge\">{this.state.inbox.length}</IonBadge></div>\n                                })()}\n                                <SortableTaskList list={this.state.inbox} prefix={this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                            </div>\n                            <div>\n                                {(()=>{\n                                    if (this.state.dueSoon.length > 0)\n                                        return <div className=\"page-label\">Due Soon<IonBadge className=\"count-badge\">{this.state.dueSoon.length}</IonBadge></div>\n                                })()}\n                                {this.state.dueSoon.map(id => (\n                                    <Task tid={id} key={id+\"-\"+this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability[id]} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                                ))}\n                            </div>\n                            <div>\n                                <div className=\"timeline-button\">\n                                    <a \n                                        onClick={()=>\n                                                this.setState({timelineShown: !this.state.timelineShown})} \n                                        // for some reason, css classes don't work, so we have to style here\n                                        // @jack? why don't they? well, styling here's fine anyways. most likely b/c they are overrode by className=timeline-button\n                                        style={{\n                                            marginLeft: 15,\n                                            marginTop: 20, \n                                            display: \"inline-block\", \n                                            fontWeight: 600, \n                                            fontSize: 13, \n                                            //color: \"var(--decorative-light-alt)\", \n                                            cursor: \"pointer\"}}\n                                    >\n                                        <i \n                                            className=\"fas fa-calendar-week\" \n                                            style={{paddingRight: 5}}\n                                        ></i> {this.state.timelineShown? \"Hide\" : \"Show\"} timeline</a>\n                                </div> \n                                {\n                                    (()=>{\n                                        if (this.state.timelineShown)\n                                            return this.state.timeline.map(timelineItem => {\n                                                if (timelineItem.type === \"task\")\n                                                    return <Task tid={timelineItem.content} key={timelineItem.content+\"-\"+this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability[timelineItem.content]} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]}/>\n                                                        else if (timelineItem.type === \"label\")\n                                                    return <div className=\"timeline-box\"><div className=\"timeline-line-container\"><div className=\"timeline-line\">&nbsp;</div></div><div className=\"timeline-text\"><span className=\"timeline-weekname\">{timelineItem.content.toLocaleDateString(\"en-US\", { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span></div></div>\n\n\n                                            })\n                                    })()\n                                }\n                                {\n                                    (()=>{\n                                            if (this.state.timelineShown)\n                                            return <span style={{fontSize: 8, color:\"var(--decorative-light-alt)\", paddingLeft:10, paddingTop:10}}>Commit ID: {process.env.REACT_APP_COMMIT_HASH}</span>\n                                    })()\n                                }\n                            </div>\n                            <div className=\"bottom-helper\">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\n// Hiding scrollbar, a journey\n\n\n\nexport default Upcoming;\n\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component, useState } from 'react';\nimport './Calendar.css'\nimport './Pages.css';\nimport ReactTooltip from 'react-tooltip';\nimport { withRouter } from \"react-router\";\n\nimport Task from './Components/Task';\n\nconst autoBind = require('auto-bind/react');\n\n\n\n/* \n *\n * Apparently,\n * People like calendars.\n *\n * WHY?\n *\n * People don't respect \n * the existance \n * of the whole idea of GTD.\n *\n * Seriously.\n *\n * Why. A calendar?! in a GTD app.\n *\n * FINE. Here's your calendar.\n *\n * @jemoka\n *\n *\n */\n\nfunction CalPagelendar(props) {\n    let [dateSelected, setDateSelected] = useState(new Date());\n\n    let currentMonth = dateSelected.getMonth();\n    let currentYear = dateSelected.getFullYear();\n\n    let firstDayMonth = new Date(currentYear, currentMonth, 1);\n    let lastDayMonth = new Date(currentYear, currentMonth+1, 0);\n    let lastDayLastMonth = new Date(currentYear, currentMonth, 0);\n\n    let firstDayDayname = firstDayMonth.getDay()+1;\n\n    let daysBefore = [...new Array(firstDayDayname-1)].map((_, i)=>{return {type: \"pre\", content: i+lastDayLastMonth.getDate()-(firstDayDayname-1)+1}});\n\n    let daysAfter = [...new Array((6-lastDayMonth.getDay()===-1)?6:6-lastDayMonth.getDay())].map((_, i)=>{return {type:\"post\", content:i+1}});\n\n    let contentDays = [...new Array(lastDayMonth.getDate())].map((_, i)=>{return {type:\"actual\", content:i+1}});\n\n    return (\n        <div id=\"calendar-page-calendar-wrapper\" style={{display: \"inline-block\", ...props.style}}>\n            <div id=\"calendar-wrapper\">\n                <div id=\"calendar-daterow\">\n                    <span className=\"calendar-daterow-item\">Sun</span>\n                    <span className=\"calendar-daterow-item\">Mon</span>\n                    <span className=\"calendar-daterow-item\">Tues</span>\n                    <span className=\"calendar-daterow-item\">Wed</span>\n                    <span className=\"calendar-daterow-item\">Thu</span>\n                    <span className=\"calendar-daterow-item\">Fri</span>\n                    <span className=\"calendar-daterow-item\">Sat</span>\n                </div>\n                <div id=\"calendar-container\">\n                    {[...daysBefore,...contentDays,...daysAfter].map(i =>\n                    <span className={`calendar-container-item calendar-container-item-${i.type} calendar-container-item-${i.content}`} style={{backgroundColor: (i.type === \"actual\" && i.content === dateSelected.getDate()) ? \"var(--decorative-light)\":\"inherit\"}} onClick={(e)=>{\n                        let date;\n                        if (i.type === \"pre\")\n                            date = new Date(lastDayLastMonth.getFullYear(), lastDayLastMonth.getMonth(), i.content);\n                        if (i.type === \"actual\") \n                            date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth(), i.content);\n                        if (i.type === \"post\") \n                            date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, i.content);\n                        setDateSelected(date);\n                        if (props.onDateSelected)\n                            props.onDateSelected(date);\n                    }}>{i.content}</span>\n                    )}\n                </div>\n                <div id=\"calendar-infopanel\">\n                    <div className=\"calendar-infopanel-dateselected\">{dateSelected.getDate()}</div>\n                    <div className=\"calendar-infopanel-datename\">{dateSelected.toLocaleString('en-us', {  weekday: 'long' })}</div>\n                    <div className=\"calendar-infopanel-month\">{dateSelected.toLocaleString('en-us', { month: 'long' })}</div>\n                    <div className=\"calendar-infopanel-year\">{dateSelected.getFullYear()}</div>\n                </div>\n                <div id=\"calendar-tools\">\n                    <a className=\"fas fa-caret-left calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()-1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <a className=\"fas fa-caret-right calendar-button\" onClick={()=>{\n                        let date = new Date(firstDayMonth.getFullYear(), firstDayMonth.getMonth()+1, 1);\n                        setDateSelected(date);\n                        if (props.onDateSelected)\n                            props.onDateSelected(date);\n\n                    }}></a>\n                    <div className=\"calendar-today\" onClick={()=>{\n                        setDateSelected(new Date());\n                        if (props.onDateSelected)\n                            props.onDateSelected(new Date());\n\n                    }}>Today</div>\n\n                </div>\n            </div>\n        </div>\n    )\n}\n\n\n\nclass Calendar extends Component {\n\n    constructor(props) {\n        super(props);\n\n        let today = new Date();\n        today.setTime(0,0,0,0);\n\n        this.state = {\n            possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            currentDate: (today), // new date\n            taskList: []\n\n        };\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        this.repeater = React.createRef(); // what's my repeater? | i.. i dont know what this does...\n\n        // AutoBind!\n        autoBind(this);\n    }\n    showEdit() {\n        this.setState({showEdit: true})\n    } // util func for showing repeat\n    hideEdit() {\n        this.setState({showEdit: false});\n    } // util func for hiding repeat\n\n    componentWillUnmount() {\n        this.props.gruntman.halt(); // when we unmount, halt gruntman? idk what this does  \n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) // tag nd project stuff \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n\n        projectDB.map(proj=>buildSelectString(proj));\n\n        let endDate = this.state.currentDate;\n        endDate.setTime(23,59,59,59);\n\n        let taskList = await this.props.engine.db.selectTasksInRange(this.props.uid, this.state.currentDate, endDate);\n\n        this.setState({\n            possibleProjects: pPandT[0][0],\t     // set the project stuff\n            possibleTags: pPandT[1][0],\t\t    // set the tag stuff  \n            possibleProjectsRev: pPandT[0][1],\t   // set more projects stuff  \n            possibleTagsRev: pPandT[1][1],\t  // set more tags stuff  \n            availability: avail,\t\t // set the avail\n            projectSelects: projectList,\t// set the project list  \n            tagSelects: tagsList,\t       // set the tag list\n            projectDB, \t\t\t      // and the project db \n            currentDate: (new Date()), // new date\n            taskList\n        }); // once we finish, set the state\n    }\n\n    componentDidMount() {\n        this.refresh()\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n                {/* the perspective editor! */}\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n                    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--decorative-light-alt\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-layer-group\">\n                                    </i>\n                                    Calendar\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n                            </div> \n                        </div>\n                    </div>\n\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\"}}>\n                        <div id=\"calendar-page-wrapper\">\n                            <CalPagelendar onDateSelected={(async function(d){\n                                let endDate = new Date(d.getTime());;\n                                endDate.setTime(23,59,59,59);\n                                let taskList = await this.props.engine.db.selectTasksInRange(this.props.uid, d, endDate);\n                                console.log(taskList, d, endDate)\n                                this.setState({currentDate: d, taskList});\n                            }).bind(this)}/>\n                            <div id=\"calendar-page-taskpage-wrapper\">\n                                {this.state.taskList.map(e=><span>{e}</span>)}\n                            </div>\n                        </div>\n                        <div className=\"bottom-helper\">&nbsp;</div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\nexport default Calendar;\n\n","// IMPORTS\nimport { IonContent, IonPage, IonMenuToggle, isPlatform } from '@ionic/react'; \nimport React, { Component, useEffect } from 'react';\nimport './Completed.css';\nimport './Pages.css';\nimport Task from './Components/Task';\nconst autoBind = require('auto-bind/react'); // autobind is a lifesaver\n\n/*\n\n * Sometimes we complete.\n *\n * This is not always correct,\n *\n * so we have this page! \n *\n * @enquirer\n\n*/\n\n// construtor for rendered object\nfunction TaskObject(type, contents) {\n    this.type = type; // set the type to the type (label or task)\n    this.contents = contents; // set the contents to the contents (title or id)\n}\n\n// define the main component!\nclass Completed extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            taskList: [], // the objects we render\n            tasksShown: 1, // track the number of times we have fetched more\n            taskCats: [\"Today\", \"Yesterday\", \"This Week\", \"This Month\", \"Even Before\"], // define task categories (cats!)\n            rendering: true, // define whether or not the element is rendering \n            possibleProjects:{}, // see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {}\n        };\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        autoBind(this);\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    async refresh() {\n        let taskArr = []; // define temp array\n        let full = await this.props.engine.db.getCompletedTasks(this.props.uid); // get the tasks from the database \n\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n        // loop through the tasks, converting to objects and inserting labels between each cat\n        full.forEach((cat, i) => {\n            taskArr.push(new TaskObject(\"label\", this.state.taskCats[i])) // each iteration, push the next label to the temp arr\n            cat.forEach(task => { // this loops through each cat\n                taskArr.push(new TaskObject(\"task\", task)) // convert each task to an object then push it to the temp arr\n            })\n        });\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n        this.setState({taskList: taskArr, rendering: false, possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB}); // once we finish, set the state\n        // also set rendering to false. \n        // This is a hacky solution instead of creating an entirely new async function.\n    }\n\n    async componentDidMount() {\n        this.refresh(); // refresh when the component mounts\n    }\n\n    handleFetchMore() {\n        this.setState({rendering: true}) // trigger loading screen\n        const loader =  setTimeout(() => { // set a timeout to set the rendering to false \n            this.setState({rendering: false})\n\n        }, 2);\n\n        const updateTasks =  setTimeout(() => { // set another timeout for the actual task update\n            this.setState({tasksShown: this.state.tasksShown+1}) \n            // increment tasksShown by one whenever fetch more is clicked\n            // this renders 10 more items \n            this.setState({rendering: false}) // set rendering to false\n        }, 1)\n\n        // disclaimer: I do not understand how this works. I was just messing around trying to debug and this happened to work.\n        // if it ain't broke, dont fix it? \n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n                <div style={{overflowY: \"scroll\"}}>\n                    <div className={\"page-invis-drag \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>&nbsp;</div>\n                    <div className={\"page-content \" + (()=>{\n                        if (!isPlatform(\"electron\")) // if we are not running electron\n                            return \"normal\"; // normal windowing proceeds\n                        else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                            return \"darwin\"; // frameless setup\n                        }\n                        else if (process.platform === \"win32\") // windows\n                            return \"windows\"; // non-frameless\n\n                    })()}>\n\n                        <div className=\"header-container\">\n                            <div style={{display: \"inline-block\"}}>\n                                <IonMenuToggle>\n                                    <i class=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--decorative-light-alt\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-check-circle\">\n                                    </i>\n                                    Completed\n                                </h1> \n                            </div>\n                        </div>\n                        {/* loop through the taskList ten times, multiplyed by the times we have fetched more */}\n                        {/* if the cat is empty or the final item rendered is a label, don't render it */}\n                        {/* otherwise, render a task */}\n                        {/* for the fetch more, if we are currently rendering, render a loading animation. */}\n                        {/* Otherwise, render a fetch more.*/}\n                        <div style={{overflowY: \"scroll\"}}>\n                            {this.state.taskList.slice(0, 10*this.state.tasksShown).map((content, i) => (\n                                <div style={{marginLeft: 10, marginRight: 10}}>\n                                    {(content.type == \"label\")?  \n                                            (this.state.taskList[i+1] ? \n                                                ((this.state.taskList[i+1].type == \"label\" || this.state.taskList.slice(0, 10*this.state.tasksShown).length == i+1) ? \n                                                \"\" : <p className=\"page-label\" style={{marginBottom:0}}>{content.contents}</p>) : \"\") : \n                                                <Task \n                                                    tid={content.contents} \n                                                    startingCompleted={true}\n                                                    key={content.contents+\"-\"+this.updatePrefix} \n                                                    uid={this.props.uid} \n                                                    engine={this.props.engine} \n                                                    gruntman={this.props.gruntman} \n                                                    availability={this.state.availability[content.contents]} \n                                                    datapack={[this.state.tagSelects,\n                                                        this.state.projectSelects, \n                                                        this.state.possibleProjects, \n                                                        this.state.possibleProjectsRev, \n                                                        this.state.possibleTags, \n                                                        this.state.possibleTagsRev]}\n                                                />\n                                    }\n                                </div>\n                            ))}\n\n                        <div className=\"fetch-more\" > \n                            {/* define the fetch more button */}\n                            {this.state.rendering? <p className=\"loader\" >Loading...</p> : <p onClick={this.handleFetchMore}>Fetch more...</p>}\n                        </div> \n                    <div className=\"bottom-helper\">&nbsp;</div>\n                    </div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\nexport default Completed;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Perspectives.css'\nimport './Pages.css';\nimport ReactTooltip from 'react-tooltip';\nimport { withRouter } from \"react-router\";\n\nimport Task from './Components/Task';\nimport PerspectiveEdit from './Components/PerspectiveEditor';\n\nconst autoBind = require('auto-bind/react');\n\n\n\n/* \n * To sort, we give our tasks tags\n *\n * We can also give them flags\n * \n * With perspectives we filter,\n *\n * To keep our tasks in kilter,\n *\n * Then refactor the code if it lags!\n *\n *\n * @enquirer\n *\n */\n\n\nclass Perspectives extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            taskList: [], // what tasks should we display? \n            perspectiveName: \"\", // whats the perspective name? \n\t    perspectiveQuery: \"\", // whats the perspective query (whats in the text box)?\n\t    perspectiveAvail: {}, // whats the perspective availability? \n\t    perspectiveTord: {},  // whats the perspective ordering?\n\t    // not truth or dare. jack doent even know what that is! ^^ \n            showEdit: this.props.options === \"do\", // are we showing? on do, we are.\n            possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n            possibleTags:{}, \n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [], \n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {}\n\n        };\n\n\n        this.updatePrefix = this.random();\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n        this.repeater = React.createRef(); // what's my repeater? | i.. i dont know what this does...\n\n\n        // AutoBind!\n        autoBind(this);\n    }\n    showEdit() {\n        this.setState({showEdit: true})\n    } // util func for showing repeat\n    hideEdit() {\n        this.setState({showEdit: false});\n    } // util func for hiding repeat\n\n    componentWillUnmount() {\n        this.props.gruntman.halt(); // when we unmount, halt gruntman? idk what this does  \n    }\n\n    async refresh() {\n        let possiblePerspectives = await this.props.engine.db.getPerspectives(this.props.uid); // get all possible perspectives\n        let perspectiveObject = possiblePerspectives[0][this.props.id] // get the one we want based on page id \n        let taskList = await this.props.engine.perspective.calc(this.props.uid, perspectiveObject.query, perspectiveObject.avail, perspectiveObject.tord) // then get the tasks from that perspective\n\n\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) // tag nd project stuff \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n\n        projectDB.map(proj=>buildSelectString(proj));\n\n        this.setState({\n            taskList: taskList,                           // set the tasklist, \n            perspectiveName: perspectiveObject.name,     // set the perspective name \n\t    perspectiveQuery: perspectiveObject.query,  // set the perspective query \n\t    perspectiveAvail: perspectiveObject.avail, // set the perspective avail \n\t    perspectiveTord: perspectiveObject.tord,  // set the perspective tord \n            possibleProjects: pPandT[0][0],\t     // set the project stuff\n            possibleTags: pPandT[1][0],\t\t    // set the tag stuff  \n            possibleProjectsRev: pPandT[0][1],\t   // set more projects stuff  \n            possibleTagsRev: pPandT[1][1],\t  // set more tags stuff  \n            availability: avail,\t\t // set the avail\n            projectSelects: projectList,\t// set the project list  \n            tagSelects: tagsList,\t       // set the tag list\n            projectDB \t\t\t      // and the project db \n        }); // once we finish, set the state\n    }\n\n    updateName(e) {\n        if (e) { // if the name if defined, \n            this.props.gruntman.registerScheduler(() => {\n                // Register a scheduler to deal with React's onChange\n                // check out the FANCYCHANGE in task.jsx\n                this.props.gruntman.do( // call a gruntman function\n                    \"perspective.update__perspective\", { \n\t\t\t// pass it the things \n                        uid: this.props.uid, // the user id \n                        id: this.props.id,  // the perspective id \n                        payload: {name: e.target.value} // the action, setting name to the new value \n                    }\n                ).then(this.props.menuRefresh) // call the homebar refresh\n            }, `perspective.this.${this.props.id}-update`) // give it a custom id\n            this.setState({perspectiveName: e.target.value}) // set the perspectiveName\n        }\n    } \n\n\n    handleDelete() {\n        this.props.history.push(\"/upcoming\"); // go back\n        this.props.paginate(\"upcoming\"); // idk man \n        this.props.gruntman.do( // call a gruntman function\n            \"perspective.delete__perspective\", { \n                uid: this.props.uid, // pass it the user id \n                id: this.props.id, // and the current id \n            }\n        ).then(()=>{\n            this.props.menuRefresh(); // refresh menubar\n\n        }) // call the homebar refresh\n    }\n\n    componentDidMount() {\n        this.refresh()\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevProps.id !== this.props.id) { // if we updated the defer date\n            this.setState({\n                taskList: [], // what tasks should we display? \n                perspectiveName: \"\", // whats the perspective name? \n                perspectiveQuery: \"\", // whats the perspective query (whats in the text box)?\n                perspectiveAvail: {}, // whats the perspective availability? \n                perspectiveTord: {},  // whats the perspective ordering?\n                // not truth or dare. jack doent even know what that is! ^^ \n                showEdit: this.props.options === \"do\", // are we showing? on do, we are.\n                possibleProjects:{}, // stuff for tasks and projects to work: see jacks comments in upcoming \n                possibleTags:{}, \n                possibleProjectsRev:{}, \n                possibleTagsRev:{}, \n                availability: [], \n                projectSelects:[], \n                tagSelects: [], \n                projectDB: {}\n\n            });\n\n            this.refresh(); // switching between perspectives are a prop update and not a rerender\n        }\n        // so we want to refresh the perspective that's rendered\n        if (prevProps.id !== this.props.id && this.props.options === \"do\") // if we are trying to create\n            this.setState({showEdit: true});\n\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    render() {\n        return (\n            <IonPage>\n\t\t{/* the perspective editor! */}\n                <PerspectiveEdit \n                    reference={this.repeater} \n                    isShown={this.state.showEdit} \n                    onDidDismiss={this.hideEdit}\n                    uid={this.props.uid} \n                    engine={this.props.engine} \n                    gruntman={this.props.gruntman}\n                    id={this.props.id}\n                    perspectiveName={this.state.perspectiveName}\n                    query={this.state.perspectiveQuery}\n                    avail={this.state.perspectiveAvail}\n                    tord={this.state.perspectiveTord}\n                    menuRefresh={this.props.menuRefresh}\n                    updateName={this.updateName}\n                    startHighlighted={this.props.options === \"do\"}\n                />\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n\t\t    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--decorative-light-alt\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    <i style={{paddingRight: 10}} \n                                        className=\"fas fa-layer-group\">\n                                    </i>\n                                    <input className=\"editable-title\" \n                                        onChange={(e)=> {e.persist(); this.updateName(e)}}\n                                        value={this.state.perspectiveName} // TODO: jack this is hecka hacky\n                                    />\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n\n                                <div className=\"greeting-container\" style={{marginLeft: 11, marginTop: 7}}>\n                                    <a \n                                        onClick={this.showEdit} \n                                        data-tip=\"LOCALIZE: Edit\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-checkbox-feature-alt)\", cursor: \"pointer\"}}>\n                                        <i className=\"fas fa-edit\" \n                                            style={{margin: 3, color: \"var(--task-textbox)\", \n                                                fontSize: 10, \n                                                transform: \"translate(2px, -2px)\"}} \n                                        ></i>\n                                    </a>\n\n                                    <a \n                                        onClick={this.handleDelete} \n                                        data-tip=\"LOCALIZE: Delete\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-checkbox-feature-alt)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className=\"fas fa-trash\"\n                                            style={{margin: 3, color: \"var(--task-textbox)\", \n                                                fontSize: 10, transform: \"translate(2px, -2px)\"}}>\n                                        </i>\n                                    </a>\n\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\"}}>\n\n                        {this.state.taskList.map(id => (\n                            <Task \n                                tid={id}\n                                key={id+\"-\"+this.updatePrefix} \n                                uid={this.props.uid} \n                                engine={this.props.engine} \n                                gruntman={this.props.gruntman} \n                                availability={this.state.availability[id]} \n                                datapack={[\n                                    this.state.tagSelects, \n                                    this.state.projectSelects, \n                                    this.state.possibleProjects, \n                                    this.state.possibleProjectsRev, \n                                    this.state.possibleTags, \n                                    this.state.possibleTagsRev\n                                ]}\n                            />\n                        ))}\n                        <div className=\"bottom-helper\">&nbsp;</div>\n                    </div>\n                </div>\n            </IonPage>\n        )\n    }\n}\n\nexport default withRouter(Perspectives);\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Repeat.css';\nimport '../Perspectives.css';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\nconst autoBind = require('auto-bind/react');\n\n\n/* \n * perspectives are amazing \n *\n * dab on them haters \n *\n * I just said the cringiest thing ever\n *\n * oh my god huxley i swear to god \n *\n * i will rebase your commits \n *\n *\n * - @zbuster05, recorded by @enquirer\n *\n */\n\nclass PerspectiveEdit extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n            inputEvent: \"\", // define our input event for the perspective title \n        }\n\n        this.name = React.createRef();\n    }\n\n    componentDidMount() {\n        if (this.props.startHighlighted) // if we are trying to create\n            this.name.current.focus(); // focus the name\n    }\n\n    handleQueryChange(e) {\n        if (e) { // if the event is defined \n            this.props.gruntman.registerScheduler(() => { \n                //Register a scheduler to deal with React's onChange\n                //check out the FANCYCHANGE in task.jsx\n                this.props.gruntman.do( // call a gruntman function\n                    \"perspective.update__perspective\", { \n                        // pass it the things \n                        uid: this.props.uid, // pass it the uid \n                        id: this.props.id,  // pass it the perspective id \n                        payload: {query: e.target.value} // pass it the action, updating the query\n                    }\n                )\n            }, `perspective.this.${this.props.id}-update`) // give it a custom id\n        } else {console.log(e)}\n    }\n\n    handleHelp() { // TODO TODO TODO: jack what do u want here? \n        alert(\"You really think we have documentation ready? I mean, if they are there, they are at docs.condution.com\")\n        console.log(\"no one is here to help. grow up.\")\n    }\n\n    render() {\n        return (\n            <IonModal \n                ref={this.props.reference} \n                isOpen={this.props.isShown} \n                onWillPresent={() => {this.props.gruntman.lockUpdates();}}\n                onDidDismiss={() => {\n                    this.props.gruntman.unlockUpdates(); \n                    this.props.updateName(this.state.inputEvent);\n                    if (this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5}\n                } \n                cssClass={\"perspective-modal\"}\n            > \n\n                <div>\n                    {/* Header */}\n                    <div className=\"perspective-header\">\n                        {/* Repeat name */}\n                        <span style={{display: \"flex\", alignItems: \"center\", width: \"100%\", whiteSpace: \"nowrap\"}}>\n                            <b className=\"bold-prefix\" >Let&#39;s build &nbsp;</b> \n                            <input className=\"editable-title pbuilder-pname\" \n                                ref={this.name}\n                                defaultValue={this.props.perspectiveName} \n                                onChange={(e)=> {e.persist(); this.props.updateName(e); this.setState({inputEvent: e})}}\n                                style={{minWidth: 0}}\n                                placeholder=\"Tap to set name\"\n                            />\n\n                            <div className=\"repeat-task-name\">{this.state.name}</div>\n                        </span>\n                        {/* Close button */} \n                        <a className=\"repeat-close\" onClick={this.props.onDidDismiss} style={{transform: \"translate(-10px, 3px)\"}}><i className=\"fa fa-times\"></i></a>\n\n                    </div>\n                    <div className=\"build-input\">\n                        <span className=\"bold-prefix\" style={{minWidth: \"70px\", marginTop: \"4px\"}}>Filter by</span>\n                        <input \n                            className=\"build-input-edit\"\n                            defaultValue={this.props.query}\n                            onChange={(e)=> {e.persist(); this.handleQueryChange(e)}}\n                            placeholder=\"LOCALIZE: perspective query\"\n                        >\n                        </input> \n                    </div>\n\n\n                    <div className=\"perspective-basic-row\">\n                        <span className=\"pbasic-container\" style={{marginRight: \"25px\"}}>\n                            <span>\n                                <i className=\"repeat-label fas fa-exchange-alt\"></i>\n                                <span className=\"perspective-label\">Include</span>\n                            </span>\n\n                            <IonSelect \n                                className=\"perspective-select\" \n                                interface=\"popover\" \n                                value={this.props.avail} // TODO: make a database hit \n                                mode=\"ios\"\n                                onIonChange={e=>{\n                                    this.props.gruntman.do( // call a gruntman function\n                                        \"perspective.update__perspective\", { \n                                            uid: this.props.uid, // pass it the user id \n                                            id: this.props.id,  // pass it the perspective id\n                                            payload: {avail: e.detail.value} // set the availability \n                                        }\n                                    )\n                                }}\n                            >\n\n                                <IonSelectOption className=\"repeat-select__option\" value=\"remain\">Remaining</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"avail\">Available</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"flagged\">Flagged</IonSelectOption>\n                            </IonSelect>\n                        </span>\n\n                        <span className=\"pbasic-container\">\n                            <span>\n                                <i className=\"repeat-label fas fa-sort-amount-down-alt\"></i>\n                                <span className=\"perspective-label\">Order</span>\n                            </span>\n\n                            <IonSelect \n                                className=\"perspective-select\" \n                                interface=\"popover\" \n                                value={this.props.tord} \n                                mode=\"ios\" \n                                onIonChange={e=>{\n                                    this.props.gruntman.do( // call a gruntman function\n                                        \"perspective.update__perspective\", { \n                                            uid: this.props.uid, // pass it the things, you know the drill \n                                            id: this.props.id, \n                                            payload: {tord: e.detail.value}\n                                        }\n                                    )\n                                }}\n                            >\n\n                                <IonSelectOption className=\"repeat-select__option\" value=\"duas\">Ascend by Due</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"duds\">Descend by Due</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"deas\">Ascend by Defer</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"deds\">Descend by Defer</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"alph\">Alphabetical</IonSelectOption>\n                            </IonSelect>\n                            <div className=\"help-icon\" onClick={this.handleHelp}>\n                                <i \n                                    className=\"far fa-question-circle\" \n                                ></i>\n                            </div>\n                        </span>\n\n\n                    </div> \n\n                </div>\n            </IonModal>\n        )\n    }\n\n\n}\n\nexport default PerspectiveEdit;\n\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet, IonMenuToggle, IonBadge, isPlatform } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Projects.css';\nimport './Pages.css';\n\nimport ReactTooltip from 'react-tooltip';\n\nimport Task from './Components/Task';\n\nimport { withRouter } from \"react-router\";\n\nimport { SortableProjectList } from './Components/Sortable';\n\nconst autoBind = require('auto-bind/react'); // autobind things! \n\nclass Projects extends Component { // define the component\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: '', // project name\n            possibleProjects:{}, // what are the possible projects? \n            possibleTags:{},  // what are the possible tags?\n            possibleProjectsRev:{}, \n            possibleTagsRev:{}, \n            availability: [],  // whats available\n            projectSelects:[], \n            tagSelects: [], \n            projectDB: {},\n            parent: \"\",\n            is_sequential: false,\n            currentProject: {children:[]},\n            activeTask: \"\"\n        };\n\n        this.updatePrefix = this.random();\n\n        this.props.gruntman.registerRefresher((this.refresh).bind(this));\n\n        this.activeTask = React.createRef();\n\n        this.name = React.createRef();\n\n        autoBind(this);\n    }\n\n    componentWillUnmount() {\n        this.props.gruntman.halt();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevProps.id !== this.props.id) // if we updated the defer date\n            this.refresh(); // switching between perspectives are a prop update and not a rerender\n\n        if (prevProps.id !== this.props.id && this.props.options === \"do\") // if we are trying to create\n            this.name.current.focus(); // focus the name\n    }\n\n    async refresh() {\n        let avail = await this.props.engine.db.getItemAvailability(this.props.uid) // get availability of items\n        let pPandT = await this.props.engine.db.getProjectsandTags(this.props.uid); // get projects and tags\n\n        let projectList = []; // define the project list\n        let tagsList = []; // define the tag list\n\n        for (let pid in pPandT[1][0]) \n            tagsList.push({value: pid, label: pPandT[1][0][pid]});\n        let views = this;\n        let projectDB = await (async function() {\n            let pdb = [];\n            let topLevels = (await views.props.engine.db.getTopLevelProjects(views.props.uid))[0];\n            for (let key in topLevels) {\n                pdb.push(await views.props.engine.db.getProjectStructure(views.props.uid, key, true));\n            }\n            return pdb;\n        }());\n\n        let buildSelectString = function(p, level) {\n            if (!level)\n                level = \"\"\n            projectList.push({value: p.id, label: level+pPandT[0][0][p.id]})\n            if (p.children)\n                for (let e of p.children)\n                    if (e.type === \"project\")\n                        buildSelectString(e.content, level+\":: \");\n        };\n        projectDB.map(proj=>buildSelectString(proj));\n        this.updatePrefix = this.random();\n        let cProject = (await views.props.engine.db.getProjectStructure(this.props.uid, this.props.id, false));\n        this.setState({name:pPandT[0][0][this.props.id], possibleProjects: pPandT[0][0], possibleTags: pPandT[1][0], possibleProjectsRev: pPandT[0][1], possibleTagsRev: pPandT[1][1], availability: avail, projectSelects: projectList, tagSelects: tagsList, projectDB, currentProject: cProject, is_sequential: cProject.is_sequential, parent: cProject.parentProj});\n    }\n\n    componentDidMount() {\n        this.refresh();\n        if (this.props.options === \"do\") // if we are trying to create\n            this.name.current.focus(); // focus the name\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n\n    updateName(e) {\n        if (e) {\n            this.props.gruntman.registerScheduler(() => { \n                // Register a scheduler to deal with React's onChange\n                // check out the FANCYCHANGE in task.jsx\n                this.props.gruntman.do( // call a gruntman function\n                    \"project.update__name\", { \n                        uid: this.props.uid, // pass it the things vvv\n                        id: this.props.id, \n                        name: e.target.value\n                    }\n                ).then(this.props.menuRefresh) // call the homebar refresh\n            }, `project.this.${this.props.id}-update`) // give it a custom id\n            this.setState({name: e.target.value})\n        } else { console.log(e)}\n    } \n\n    render() {\n        return (\n            <IonPage>\n                <div className={\"page-invis-drag \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>&nbsp;</div>\n                <div className={\"page-content \" + (()=>{\n                    if (!isPlatform(\"electron\")) // if we are not running electron\n                        return \"normal\"; // normal windowing proceeds\n                    else if (window.navigator.platform.includes(\"Mac\")){ // macos\n                        return \"darwin\"; // frameless setup\n                    }\n                    else if (process.platform === \"win32\") // windows\n                        return \"windows\"; // non-frameless\n\n                })()}>\n\n                    <div className=\"header-container\" >\n                        <div style={{display: \"inline-block\"}}>\n                            <div> \n                                <IonMenuToggle>\n                                    <i className=\"fas fa-bars\" \n                                        style={{marginLeft: 20, color: \"var(--decorative-light-alt\"}} />\n                                </IonMenuToggle> \n                                <h1 className=\"page-title\">\n                                    {(()=> {\n                                        if (this.state.parent !== \"\")\n                                            return <a className=\"fas fa-chevron-left backbutton\" onClick={()=>{this.props.paginate(\"projects\", this.state.parent);this.props.history.push(`/projects/${this.state.parent}`)}} />\n                                    })()}\n                                    <i style={{paddingRight: 4}} \n                                        className=\"fas fa-tasks\">\n                                    </i>\n                                    <input className=\"editable-title\" \n                                        onChange={(e)=> {e.persist(); this.updateName(e)}}\n                                        value={this.state.name} // TODO: jack this is hecka hacky\n                                        style={{transform: \"transformY(-2px)\"}}\n                                        ref={this.name}\n                                    />\n                                </h1> \n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n                                <div className=\"greeting-container\" style={{marginLeft: 5, marginTop: 7}}>\n                                    <a \n                                        onClick={()=> {\n                                            this.setState({is_sequential: !this.state.currentProject.is_sequential}, () => {\n                                                this.props.gruntman.do( // call a gruntman function\n                                                    \"project.update__pstate\", { \n                                                        uid: this.props.uid, // pass it the things vvv\n                                                        id: this.props.id, \n                                                        is_sequential: this.state.is_sequential\n                                                    }\n                                                );\n                                            }); // change the icon\n                                        }} \n                                        data-tip=\"LOCALIZE: Sequencial/Paralellel\"\n                                        className=\"perspective-icon\" \n                                        style={{borderColor: \"var(--task-checkbox-feature-alt)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className={this.state.is_sequential ? \"fas fa-arrows-alt-v\":\"fas fa-arrows-alt-h\"}\n                                            style={{margin: 3, color: \"var(--task-textbox)\", \n                                                fontSize: 13, transform: this.state.is_sequential ? \"translate(3.5px, -1px)\" : \"translate(0.25px, -1px)\"}}>\n                                        </i>\n                                    </a>\n                                    <a \n                                        data-tip=\"LOCALIZE: Delete\"\n                                        className=\"perspective-icon\" \n                                        onClick={()=>{\n                                            this.props.gruntman.do( // call a gruntman function\n                                                \"project.delete\", { \n                                                    uid: this.props.uid, // pass it the things vvv\n                                                    pid: this.props.id, \n                                                    parent: (this.state.parent === \"\" || this.state.parent === undefined) ? undefined : this.state.parent\n                                                }\n                                            ).then(()=>{\n                                                this.props.menuRefresh(); // refresh menubar\n                                                this.props.history.push((this.state.parent === \"\" || this.state.parent === undefined) ? \"/upcoming/\" : `/projects/${this.state.parent}`); // go back\n                                                this.props.paginate((this.state.parent === \"\" || this.state.parent === undefined) ? \"upcoming\" : `projects`, (this.state.parent === \"\" || this.state.parent === undefined) ? undefined : this.state.parent);\n                                            }) // call the homebar refresh\n                                        }}\n                                        style={{borderColor: \"var(--task-checkbox-feature-alt)\", \n                                            cursor: \"pointer\", marginLeft: 5}}>\n                                        <i className=\"fas fa-trash\"\n                                            style={{margin: 3, color: \"var(--task-textbox)\", \n                                                fontSize: 10, transform: \"translate(2px, -2px)\"}}\n                                        >\n                                        </i>\n                                    </a>\n\n                                </div> \n                            </div>\n                        </div>\n                    </div>\n\n                    <div style={{marginLeft: 10, marginRight: 10, overflowY: \"scroll\"}}>\n\n                        <SortableProjectList list={this.state.currentProject.children} prefix={this.updatePrefix} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman} availability={this.state.availability} datapack={[this.state.tagSelects, this.state.projectSelects, this.state.possibleProjects, this.state.possibleProjectsRev, this.state.possibleTags, this.state.possibleTagsRev]} possibleProjects={this.state.possibleProjects} history={this.props.history} paginate={this.props.paginate} activeTaskRef={this.activeTask} activeTaskID={this.state.activeTask}/>\n\n                        <div style={{marginTop: 10}}>\n                            <a className=\"newbutton\" onClick={()=>{\n                                this.props.gruntman.do( // call a gruntman function\n                                    \"task.create\", { \n                                        uid: this.props.uid, // pass it the things vvv\n                                        pid: this.props.id, \n                                    },\n                                    true // bypass updates to manually do it + make it quicker\n                                ).then((result)=>{\n                                    let cProject = this.state.currentProject; // get current project\n                                    let avail = this.state.availability; // get current availibilty\n                                    avail[result.tid] = true; // set the current one to be available, temporarily so that people could write in it\n                                    cProject.children.push({type: \"task\", content:result.tid}); // add our new task\n                                    this.setState({activeTask:result.tid, currentProject: cProject, availability: avail}, () =>  this.activeTask.current._explode() ) // wosh!\n                                }) // call the homebar refresh\n                            }}><div><i className=\"fas fa-plus-circle subproject-icon\"/><div style={{display: \"inline-block\", fontWeight: 500}}>Add a Task</div></div></a>\n                            <a className=\"newbutton\" onClick={async function() {\n                                let npid = (await this.props.gruntman.do( // call a gruntman function\n                                    \"project.create\", { \n                                        uid: this.props.uid, // pass it the things vvv\n                                        parent: this.props.id, \n                                    },\n                                )).pid;\n                                this.props.history.push(`/projects/${npid}/do`);\n                            }.bind(this)}><div><i className=\"fas fa-plus-circle subproject-icon\"/><div style={{display: \"inline-block\", fontWeight: 500}}>Add a Project</div></div></a>\n                            <div className=\"bottom-helper\">&nbsp;</div>\n                        </div>\n                    </div>\n                </div>\n\n            </IonPage>\n        )\n    }\n}\n\nexport default withRouter(Projects);\n\n","//import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport React, { useState } from 'react';\nimport './FloatingActionButton.css';\nimport * as chrono from 'chrono-node';\nimport {useSpring, animated} from 'react-spring'\n\n\n/*\n * Hello human,\n * You know I'm not Jack because my pen has no nib\n * You know I'm not Huxley because I can't adlib\n * If I said I could do frqnt end, I'd be telling a fib\n * And now, as punishment, I've lost a rib\n * But alas, here is abtib ^-^\n *\n * ~~@Exr0n~~\n * @Ex-rib\n *\n */\n\nconst defaultValue = \"Add something to the inbox?\";\n\nfunction handleABTIBInput(value) {\n    console.log('abtib reportin to handle input ^-^');\n    console.log(value);\n    // TODO: nlp it\n    // TODO: create the task\n}\n\nfunction ABTIB(props) {\n    const [isExpanded, setisExpanded] = useState(false);\n    const [isSaving, setisSaving] = useState(false);\n\n    const anim = useSpring({\n\tto: \n\t    (isSaving ? \n\t\t{\n\t\t    width: 280, \n\t\t    color:\"var(--quickadd-successtext)\", \n\t\t    backgroundColor: \"var(--quickadd-success)\"\n\t\t} \n\n\t\t: \n\n\t\t{\n\t\t    width: isExpanded ? 280:250, \n\t\t    color:\"var(--quickadd-text)\", \n\t\t    //color:\"var(--quickadd-successtext)\", \n\t\t    backgroundColor: \"var(--quickadd)\",\n\t\t    //backgroundColor: \"var(--quickadd-success)\"\n\t\t}\n\t    )\n    })\n\n    return <animated.input \n\t\tid=\"abtib\" \n\t\treadOnly={false} \n\t\ttype=\"text\" \n\t\tdefaultValue={\"\"} \n\t\tstyle={anim} \n\t\tclassName=\"attib\"\n\n        onClick={\n            (event) => {\n                event.target.value = \"\";\n                setisExpanded(true);\n            }\n        }\n        onBlur={e=>{\n            setisExpanded(false);\n            setisSaving(false);\n            e.target.value = \"\";\n        }}\n        onKeyUp={\n            (event) => {\n                if (event.key === 'Enter') {\n                    event.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                    setisSaving(true);\n                    let taskName = event.target.value;\n                    let dateInfo = chrono.parse(taskName);\n                    let due = undefined;\n                    let defer = undefined;\n                    if (dateInfo.length > 0) {\n                        // we got a date!\n                        if (dateInfo[0].end) {\n                            // both start (defer) and end (due)\n                            // get end (due) date\n                            due = dateInfo[0].end.date();\n                            defer = dateInfo[0].start.date();\n                            // strip the due date string\n                            taskName = taskName.replace(dateInfo[0].text, \"\").trim();\n\n                        }\n                        else {\n                            // only start (due)\n                            due = dateInfo[0].start.date();\n                            // strip the due date string\n                            taskName = taskName.replace(dateInfo[0].text, \"\").trim();\n                        }\n                    }\n                    let npobj = { \n                            uid: props.uid, // pass it the things vvv\n                            pid: \"\",\n                            due,\n                            defer,\n                            name: taskName\n                    };\n                    props.gruntman.do( // call a gruntman function\n                        \"task.create\", npobj,\n                    ).then(()=>{\n                        event.target.blur();\n                    });\n                }\n            }\n        }\n        placeholder={ defaultValue + ((Math.random()*128 < 1) ? \" ^-^\" : \"\")}\n     />;\n}\n\nexport default ABTIB;\n\n","import React, { Component } from 'react';\nimport Mousetrap from 'mousetrap';\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\nimport { withRouter } from \"react-router\";\nimport { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport './QuickSwitcher.css'\n\nconst autoBind = require('auto-bind/react');\n\n\n\nclass QuickSwitcher extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {}\n    }\n\n    componentDidMount() {}\n\n    render() { \n\treturn (\n\t    <IonModal \n\t\t//ref={this.props.reference} \n\t\tisOpen={this.props.qs_show} \n\t\tanimated={false}\n\t\tcssClass='qs_modal'\n\t\tonDidDismiss={this.props.dismiss}\n\t    >\n\t\t<input \n\t\t    placeholder=\"LOCALIZE: quickswitcht-ify!\"\n\t\t>\n\t\t</input> \n\n\t    </IonModal>\n\t) \n    }\n\n}\n\nexport default QuickSwitcher;\n\n\n\n","import React, { Component } from 'react';\nimport Mousetrap from 'mousetrap';\nimport { IonReactRouter, IonReactHashRouter } from '@ionic/react-router';\nimport { Redirect, Route, Link, Switch } from 'react-router-dom';\nimport { createBrowserHistory, createHashHistory } from 'history';\nimport { withRouter } from \"react-router\";\nimport QuickSwitcher from './QuickSwitcher'\n\nconst autoBind = require('auto-bind/react');\n\n\n\nclass Keybinds extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n\t    sidebar_list: [], // what's in the sidebar? \n\t    sidebar_index: 0, // how far down the sidebar are we? \n\t    prop_store: '', // store props so we can check if they have changed \n\t    qs_show: false // is the quick switcher shown? \n\t}\n    }\n\n    // define the bindings! 2d array of keybind and function \n    // TODO TODO: for some reason binding works now, so replace that later? \n    // TODO: expand these keybinds. ie, n/p and up/down arrows\n    bindings = [\n\t[\"alt+1\", ()=>{this.sidebar_switcher(this, 0)}], // nav to upcoming keybind\n\t[\"alt+2\", ()=>{this.sidebar_switcher(this, 1)}], // nav to completed keybind\n\t[\"alt+3\", ()=>{this.sidebar_switcher(this, 2)}], // nav to item 3 keybind\n\t[\"alt+4\", ()=>{this.sidebar_switcher(this, 3)}], // nav to item 4 keybind\n\t[\"alt+5\", ()=>{this.sidebar_switcher(this, 4)}], // nav to item 5 keybind\n\t[\"alt+6\", ()=>{this.sidebar_switcher(this, 5)}], // nav to item 6 keybind\n\t[\"alt+7\", ()=>{this.sidebar_switcher(this, 6)}], // nav to item 7 keybind\n\t[\"alt+8\", ()=>{this.sidebar_switcher(this, 7)}], // nav to item 8 keybind\n\t[\"alt+9\", ()=>{this.sidebar_switcher(this, 8)}], // nav to item 9 keybind\n\t[\"alt+0\", ()=>{this.sidebar_switcher(this, this.state.sidebar_list.length-1)}], // nav to last item keybind\n\t[\"alt+j\", ()=>{this.sidebar_incrimentor(this, 1)}], // nav down keybind \n\t[\"alt+k\", ()=>{this.sidebar_incrimentor(this, -1)}], // nav up keybind \n\t[\"command+k\", ()=>{this.manageQs(this)}], // toggle quick swithcher keybind \n    ]\n\n    sidebar_switcher(that, num){\n\tconst loca = this.state.sidebar_list[num]; // set our location to index in sidebar\n\tthat.props.history.push(`/${loca[0]}/${loca[1]}`) // push to the history\n\tthat.props.paginate(...loca); // paginate-ify it!\n\tthis.setState({sidebar_index: num}) // update the sidebar index \n    }\n\n    sidebar_incrimentor(that, num) {\n\tconst next_loca = this.state.sidebar_list[this.state.sidebar_index+num] // store the variable -- we can delet this. \n\tif (next_loca) { // if its defined, \n\t    this.sidebar_switcher(that, this.state.sidebar_index+num) // go there\n\t    // if it's not defined and it's at the end, \n\t} else if (this.state.sidebar_index == this.state.sidebar_list.length-1) {\n\t    this.sidebar_switcher(that, 0) // wrap around and go back to the beginning \n\t} else { // if it's not defined and not at the end, then it must be at the beginning,\n\t    this.sidebar_switcher(that, this.state.sidebar_list.length-1) // so go to the end \n\t}\n    }\n\n\n    manageQs(that) {\n\tthis.setState({qs_show: !this.state.qs_show}); \n    }\n\n    componentDidUpdate(){\n\t//TODO: safe-proof(?) this\n\t// update the props\n\tif (this.state.prop_store != this.props) { // if the props have changed, \n\t    this.setState({\n\t\tsidebar_list: [\n\t\t    ['upcoming', ''], // set the first item to upcoming \n\t\t    // (i could do + but i think thats less efficent \n\t\t    ['completed', ''], // set the second item to completed\n\t\t    ['calendar', ''], // set the third item to calendar\n\t\t    ...this.props.perspectives.map(o => ['perspectives', o.id]), // map the perspectives\n\t\t    ...this.props.projects.map(o => ['projects', o.id]) // and the projects \n\t\t], \n\t\tprop_store: this.props //  and update the props \n\t    })\n\t}\n\n\t// TODO: get the current url and set the index that way \n\t//if (!this.state.sidebar_index) {\n\t//    this.setState({sidebar_index: side\n\n\t//}\n    }\n\n    // loop through and bind all our things!\n    componentDidMount() {\n\tthis.setState({prop_store: this.props})\n\n        this.bindings.map(combo => {\n            Mousetrap.bind(...combo)\n        })\n    }\n\n    // loop through and unbind all our things!\n    componentWillUnmount() { \n        this.bindings.map(combo => {\n            Mousetrap.unbind(...combo)\n        })\n    }\n\n    render() { \n\treturn (\n\t    <QuickSwitcher qs_show={this.state.qs_show} dismiss={()=> this.setState({qs_show: false})}/> \n\t)\n    }\n\n}\n\nexport default withRouter(Keybinds);\n\n\n","var map = {\n\t\"./ion-action-sheet.entry.js\": [\n\t\t387,\n\t\t5\n\t],\n\t\"./ion-alert.entry.js\": [\n\t\t388,\n\t\t6\n\t],\n\t\"./ion-app_8.entry.js\": [\n\t\t389,\n\t\t7\n\t],\n\t\"./ion-avatar_3.entry.js\": [\n\t\t390,\n\t\t18\n\t],\n\t\"./ion-back-button.entry.js\": [\n\t\t391,\n\t\t19\n\t],\n\t\"./ion-backdrop.entry.js\": [\n\t\t392,\n\t\t43\n\t],\n\t\"./ion-button_2.entry.js\": [\n\t\t393,\n\t\t20\n\t],\n\t\"./ion-card_5.entry.js\": [\n\t\t394,\n\t\t21\n\t],\n\t\"./ion-checkbox.entry.js\": [\n\t\t395,\n\t\t22\n\t],\n\t\"./ion-chip.entry.js\": [\n\t\t396,\n\t\t23\n\t],\n\t\"./ion-col_3.entry.js\": [\n\t\t397,\n\t\t44\n\t],\n\t\"./ion-datetime_3.entry.js\": [\n\t\t398,\n\t\t10\n\t],\n\t\"./ion-fab_3.entry.js\": [\n\t\t399,\n\t\t24\n\t],\n\t\"./ion-img.entry.js\": [\n\t\t400,\n\t\t45\n\t],\n\t\"./ion-infinite-scroll_2.entry.js\": [\n\t\t401,\n\t\t46\n\t],\n\t\"./ion-input.entry.js\": [\n\t\t402,\n\t\t25\n\t],\n\t\"./ion-item-option_3.entry.js\": [\n\t\t403,\n\t\t26\n\t],\n\t\"./ion-item_8.entry.js\": [\n\t\t404,\n\t\t27\n\t],\n\t\"./ion-loading.entry.js\": [\n\t\t405,\n\t\t28\n\t],\n\t\"./ion-menu_3.entry.js\": [\n\t\t406,\n\t\t29\n\t],\n\t\"./ion-modal.entry.js\": [\n\t\t407,\n\t\t8\n\t],\n\t\"./ion-nav_2.entry.js\": [\n\t\t408,\n\t\t15\n\t],\n\t\"./ion-popover.entry.js\": [\n\t\t409,\n\t\t9\n\t],\n\t\"./ion-progress-bar.entry.js\": [\n\t\t410,\n\t\t30\n\t],\n\t\"./ion-radio_2.entry.js\": [\n\t\t411,\n\t\t31\n\t],\n\t\"./ion-range.entry.js\": [\n\t\t412,\n\t\t32\n\t],\n\t\"./ion-refresher_2.entry.js\": [\n\t\t413,\n\t\t11\n\t],\n\t\"./ion-reorder_2.entry.js\": [\n\t\t414,\n\t\t17\n\t],\n\t\"./ion-ripple-effect.entry.js\": [\n\t\t415,\n\t\t47\n\t],\n\t\"./ion-route_4.entry.js\": [\n\t\t416,\n\t\t33\n\t],\n\t\"./ion-searchbar.entry.js\": [\n\t\t417,\n\t\t34\n\t],\n\t\"./ion-segment_2.entry.js\": [\n\t\t418,\n\t\t35\n\t],\n\t\"./ion-select_3.entry.js\": [\n\t\t419,\n\t\t36\n\t],\n\t\"./ion-slide_2.entry.js\": [\n\t\t420,\n\t\t48\n\t],\n\t\"./ion-spinner.entry.js\": [\n\t\t421,\n\t\t13\n\t],\n\t\"./ion-split-pane.entry.js\": [\n\t\t422,\n\t\t49\n\t],\n\t\"./ion-tab-bar_2.entry.js\": [\n\t\t423,\n\t\t37\n\t],\n\t\"./ion-tab_2.entry.js\": [\n\t\t424,\n\t\t16\n\t],\n\t\"./ion-text.entry.js\": [\n\t\t425,\n\t\t38\n\t],\n\t\"./ion-textarea.entry.js\": [\n\t\t426,\n\t\t39\n\t],\n\t\"./ion-toast.entry.js\": [\n\t\t427,\n\t\t40\n\t],\n\t\"./ion-toggle.entry.js\": [\n\t\t428,\n\t\t12\n\t],\n\t\"./ion-virtual-scroll.entry.js\": [\n\t\t429,\n\t\t50\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 199;\nmodule.exports = webpackAsyncContext;","var map = {\n\t\"./ion-icon.entry.js\": [\n\t\t433,\n\t\t57\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 201;\nmodule.exports = webpackAsyncContext;","import dbManager from \"./DBManager\"\nlet cRef = dbManager.cRef;\n\nconst util = {\n    select: {\n        compare: (lhs, cmp, rhs) => {\n            switch (cmp) {\n                case \"<\":\n                    return lhs < rhs;\n                case \">\":\n                    return lhs > rhs;\n                case \"<=\":\n                    return lhs <= rhs;\n                case \">=\":\n                    return lhs >= rhs;\n                case \"==\":\n                    return lhs == rhs;\n                case \"!=\":\n                    return lhs != rhs;\n                case \"has\":\n                    return lhs.includes(rhs);\n                case \"!has\":\n                    return !lhs.includes(rhs);\n                default:\n                    throw new TypeError(\"Unkown comparator \" + cmp);\n            }\n        },\n        all: (...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (!util.select.compare(dat[lhs], cmp, rhs))\n                    return false;\n            return true;\n        },\n        any: (...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs))\n                    return true;\n            return false;\n        },\n        atLeast: (threshold, ...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            let counter = 0;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs)) {\n                    ++counter;\n                    if (counter >= threshold)\n                        return true;\n                }\n            return false;\n        },\n        atMost: (threshold, ...requirements) => (doc) => {\n            let dat = doc.data();\n            if (dat.defer) dat.defer = dat.defer.seconds;\n            if (dat.due) dat.due = dat.due.seconds;\n            let counter = 0;\n            for (let [lhs, cmp, rhs] of requirements)\n                if (util.select.compare(dat[lhs], cmp, rhs)) {\n                    ++counter;\n                    if (counter > threshold)\n                        return false;\n                }\n            return true;\n        }\n    },\n    debug: {\n        log: (arg) => {\n            console.log(arg);\n            return arg;\n        },\n        trace: (arg) => {\n            console.trace(arg);\n            return arg;\n        }\n    }\n};\n\nasync function getTasks(userID) {\n    return cRef(\"users\", userID, \"tasks\").get()\n    .then(snap => snap.docs\n        .map(doc => doc.id)\n    ).catch(err => {\n        console.error('Error getting documents', err);\n    });\n}\n\nasync function getTasksWithQuery(userID, query) {\n    let taskDocs = await cRef(\"users\", userID, \"tasks\")\n        .get()\n        .then(snap => snap.docs\n            .filter(query)\n        ).catch(err => {\n            console.error('Error getting documents', err);\n        });\n    return taskDocs.map(doc => doc.id);\n}\n\nasync function getInboxTasks(userID) {\n    let inboxDocs = await cRef(\n        \"users\", userID,\n        \"tasks\")\n        //['project', '==', ''],\n        //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(util.select.all(['project', '==', ''], ['isComplete', '==', false]))\n            .sort((a,b) => a.data().order - b.data().order)\n        ).catch(err => {\n            console.error('Error getting documents', err);\n        });\n    return inboxDocs.map(doc => doc.id);\n}\n\nasync function getDSTasks(userID, available, wrt) {\n    let dsTime = wrt ? wrt : new Date(); // TODO: merge with next line?\n    dsTime.setHours(dsTime.getHours() + 24);\n    //let available = await getItemAvailability(userID);\n    let dsDocs = await cRef(\"users\", userID,\n        \"tasks\")\n            //['due', '<=', dsTime],\n            //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(doc =>\n                (doc.data().due ? (doc.data().due.seconds <= (dsTime.getTime()/1000)) : false) && // has a due date and is ds\n                (doc.data().defer ? (doc.data().defer.seconds < ((new Date()).getTime())/1000) : true) && // has a defer and is not defered or has no defer date\n                (doc.data().isComplete === false) && // is not completed\n                (available[doc.id]) // aaaand is available\n            )\n            .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n    ).catch(console.error);\n    return dsDocs.map(doc => doc.id);\n}\n\nasync function dueTasks(userID, available, wrt) {\n    let dsTime = wrt ? wrt : new Date(); // TODO: merge with next line?\n    dsTime.setHours(23,59,59,999);\n    //let available = await getItemAvailability(userID);\n    let dsDocs = await cRef(\"users\", userID,\n        \"tasks\")\n            //['due', '<=', dsTime],\n            //['isComplete', \"==\", false])\n        .get()\n        .then(snap => snap.docs\n            .filter(doc =>\n                (doc.data().due ? (doc.data().due.seconds <= (dsTime.getTime()/1000)) : false) && // has a due date and is ds\n                (doc.data().defer ? (doc.data().defer.seconds < ((new Date()).getTime())/1000) : true) && // has a defer and is not defered or has no defer date\n                (doc.data().isComplete === false) && // is not completed\n                (available[doc.id]) // aaaand is available\n            )\n            .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n    ).catch(console.error);\n    return dsDocs.map(doc => doc.id);\n}\n\nasync function selectTasksInRange(userID, min=(new Date(1900, 1, 1)), max=(new Date(2100, 1, 1)), returnFull=false) {\n/*    let maxT = max;*/\n    //let minT = min;\n    //maxT.setHours(23, 59, 59, 999);\n    /*minT.setHours(0, 0, 0, 0);*/\n    let tasks = await cRef(\"users\", userID, \"tasks\")\n                    .get()\n                    .then(snap => snap.docs\n                        .filter(doc =>\n                            (doc.data().due ?\n                                (doc.data().defer ?\n                                    (new Date(doc.data().due.seconds*1000))<max && (new Date(doc.data().due.seconds*1000)) > min && (new Date()>(new Date(doc.data().defer.seconds*1000)))\n                                : false) \n                                : false)\n                        )\n                        .filter(doc => !doc.data().isComplete)\n                        .sort((a,b) => a.data().due.seconds - b.data().due.seconds)\n                    ).catch(console.error);\n    return returnFull ? tasks.map(doc => [doc.id, doc.data()]):tasks.map(doc => doc.id);\n}\n\nasync function getDSRow(userID, avaliable) {\n    console.warn(\"DEPERCATED: use instead selectTasksInRange\");\n    let ibt = await getInboxTasks(userID);\n    let d = new Date();\n    let dsTasks = [];\n    let prev = [];\n    for (let i=0; i<=7; i++) {\n        let content = (await dueTasks(userID, avaliable, d))\n        let cache = content;\n        dsTasks.push(content.filter(x => !prev.includes(x)));\n        prev = cache;\n        d.setDate(d.getDate() + 1)\n    }\n    return dsTasks.map(dst => dst.filter(x => ibt.indexOf(x) < 0));\n}\n\nasync function getInboxandDS(userID, avalibility) {\n    let ibt = await getInboxTasks(userID);\n    let dst = await getDSTasks(userID, avalibility);\n    let dstWithoutIbt = dst.filter(x => ibt.indexOf(x) < 0);\n    return [ibt, dstWithoutIbt]\n}\n\nasync function getTaskInformation(userID, taskID) {\n    let dat = (await cRef(\"users\", userID, \"tasks\").get()\n        .then(snap => snap.docs\n            .filter(doc => doc.id === taskID))\n    )[0]\n    if (dat) return dat.data();\n}\n\nasync function removeParamFromTask(userID, taskID, paramName) {\n    let ti = await getTaskInformation(userID, taskID);\n    delete ti[paramName];\n    await cRef(\"users\", userID, \"tasks\", taskID)\n        .set(ti)\n        .catch(console.error);\n}\n\nasync function getTopLevelProjects(userID) {\n    let projectIdByName = {};\n    let projectNameById = {};\n    let projectsSorted = []; \n\n    let snap = (await cRef('users', userID, \"projects\")\n        .get());\n\n    snap.docs.forEach(proj => {\n        if (proj.exists && proj.data().top_level === true) {\n            projectNameById[proj.id] = proj.data().name;\n            projectIdByName[proj.data().name] = proj.id;\n            let projElem = {};\n            projElem.id = proj.id;\n            projElem.name = proj.data().name;\n            projElem.sortOrder = proj.data().order;\n            projectsSorted.push(projElem);\n        }\n    });\n\n    projectsSorted.sort((a,b) => a.sortOrder-b.sortOrder);\n    let ret = [projectNameById, projectIdByName, projectsSorted];\n    return ret;\n}\n\nasync function getProjectsandTags(userID) {\n    // NOTE: no longer console.error when  !project/tag.exists\n    let projectIdByName = {};\n    let projectNameById = {};\n    await cRef(\"users\", userID, \"projects\").get()   // TODO: combine database hits\n        .then(snap => snap.docs.forEach(proj => {\n            if (proj.exists) {\n                projectNameById[proj.id] = proj.data().name;\n                projectIdByName[proj.data().name] = proj.id;\n            }\n        }))\n        .catch(console.error);\n\n    let tagIdByName = {};\n    let tagNameById = {};\n    await cRef(\"users\", userID, \"tags\").get()\n        .then(snap => snap.docs.forEach(tag => {\n            if (tag.exists) {\n                tagNameById[tag.id] = tag.data().name;\n                tagIdByName[tag.data().name] = tag.id;\n            }\n        }))\n        .catch(console.error);\n\n    return [[projectNameById, projectIdByName], [tagNameById, tagIdByName]];\n}\n\nasync function getPerspectives(userID) {\n    let pInfobyName = {};\n    let pInfobyID = {};\n    let ps = [];\n    await cRef(\"users\", userID, \"perspectives\").get()   // TODO: combine database hits\n        .then(snap => snap.docs.forEach(pstp => {\n            if (pstp.exists) {\n                pInfobyID[pstp.id] = {name: pstp.data().name, query: pstp.data().query, avail: pstp.data().avail, tord: pstp.data().tord};\n                pInfobyName[pstp.data().name] = {id: pstp.id, query: pstp.data().query, avail: pstp.data().avail, tord: pstp.data().tord};\n                ps.push({id: pstp.id, ...pstp.data()});\n            }\n        }))\n        .catch(console.error);\n\n    ps.sort((a,b) => a.order-b.order);\n\n    return [pInfobyID, pInfobyName, ps];\n}\n\nasync function modifyProject(userID, projectID, updateQuery) {\n    await cRef(\"users\", userID, \"projects\", projectID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function modifyTask(userID, taskID, updateQuery) {\n    await cRef(\"users\", userID, \"tasks\", taskID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function modifyPerspective(userID, taskID, updateQuery) {\n    await cRef(\"users\", userID, \"perspectives\", taskID)\n        .update(updateQuery)\n        .catch(console.error);\n}\n\nasync function newTask(userID, taskObj) {\n//, nameParam, descParam, deferParam, dueParam, isFlaggedParam, isFloatingParam, projectParam, tagsParam, tz\n    // Set order param. Either return the latest item in index or\n    if (taskObj.project === \"\") {\n        let ibtL = (await getInboxTasks(userID)).length;\n        taskObj.order = ibtL;\n    } else {\n        let projL = (await getProjectStructure(userID, taskObj.project)).children.length;\n        taskObj.order = projL;\n    }\n\n    // Perspectives cannot have empty defer dates\n    // But! We could set no defer to defer today.\n    if (!taskObj.defer)\n        taskObj.defer = new Date();\n\n    let taskID = (await cRef(\"users\", userID, \"tasks\").add(taskObj)).id;\n\n    return taskID;\n}\n\nasync function newProject(userID, projObj, parentProj) {\n//, nameParam, descParam, deferParam, dueParam, isFlaggedParam, isFloatingParam, projectParam, tagsParam, tz\n    // Set order param. Either return the latest item in index or\n    let projL;\n    // Util func to get size of ob\n    Object.size = function(obj) {\n        var size = 0, key;\n        for (key in obj) {\n            if (obj.hasOwnProperty(key)) size++;\n        }\n        return size;\n    };\n\n    if (parentProj) {\n        projL = (await getProjectStructure(userID, parentProj)).children.length;\n        projObj.parent = parentProj;\n    } else {\n        projL = Object.size((await getTopLevelProjects(userID))[0]);\n        projObj.parent = \"\";\n    }\n    projObj.order = projL;\n    projObj.children = {};\n\n    let pid = (await cRef(\"users\", userID, \"projects\").add(projObj)).id;\n    return pid;\n}\n\nasync function newPerspective(userID, pstObj) {\n    return (await cRef(\"users\", userID, \"perspectives\").add({order: (await getPerspectives(userID))[2].length, ...pstObj})).id;\n}\n\nasync function newTag(userID, tagName) {\n    return (await cRef(\"users\", userID, \"tags\").add({name: tagName})).id;\n}\n\nasync function completeTask(userID, taskID) {\n    await cRef(\"users\", userID, \"tasks\", taskID).update({\n        isComplete: true\n    });\n}\n\nasync function dissociateTask(userID, taskID, projectID) {\n    let originalChildren = await cRef(\"users\", userID, \"projects\").get().then(util.dump)\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)).then(util.dump).then(t => t[0].data().children);\n\n    delete originalChildren[taskID];\n    await cRef(\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function associateTask(userID, taskID, projectID) {\n    let originalChildren = await cRef(\"users\", userID, \"projects\").get()\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)[0] //.filter(doc => doc.id === taskID)\n        .data().children);\n\n    originalChildren[taskID] = \"task\";\n    await cRef(\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function associateProject(userID, assosProjID, projectID) {\n    let originalChildren = await cRef(\"users\", userID, \"projects\").get()\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)[0] //.filter(doc => doc.id === taskID)\n        .data().children);\n\n    originalChildren[assosProjID] = \"project\";\n    await cRef(\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function dissociateProject(userID, assosProjID, projectID) {\n    let originalChildren = await cRef(\"users\", userID, \"projects\").get().then(util.dump)\n        .then(snapshot => snapshot.docs.filter(x => x.id === projectID)).then(util.dump).then(t => t[0].data().children);\n\n    delete originalChildren[assosProjID];\n    await cRef(\"users\", userID, \"projects\", projectID)\n        .update({children: originalChildren});\n}\n\nasync function deleteTask(userID, taskID, willDissociateTask = true) {\n    let taskData = await cRef(\"users\", userID, \"tasks\").get()\n        .then(snap => snap.docs.filter(doc => doc.id === taskID)[0].data()); // Fetch task data\n\n    if (taskData.project!== \"\" && willDissociateTask) {\n        await dissociateTask(userID, taskID, taskData.project);\n    }\n    await cRef(\"users\", userID, \"tasks\", taskID).delete()\n        .catch(console.error);\n}\n\nasync function deletePerspective(userID, perspectiveID) {\n    await cRef(\"users\", userID, \"perspectives\", perspectiveID).delete();\n}\n\nasync function deleteProject(userID, projectID) {\n    let struct = await getProjectStructure(userID, projectID)\n    for (let i of struct.children) {\n        if (i.type === \"project\") deleteProject(userID, i.content.id)\n        else modifyTask(userID, i.content, {project:\"\"});\n    }\n   \n    let cpLtTasks = await getCompletedTasks(userID);\n    const cpLt = [].concat(...cpLtTasks);\n    for (let t of cpLt)\n        if ((await getTaskInformation(userID, t)).project === projectID)\n            modifyTask(userID, t, {project:\"\"});\n\n    await cRef(\"users\", userID, \"projects\", projectID).delete()\n        .catch(console.error);\n}\n\nasync function deleteTag(userID, tagID) {\n    await cRef(\"users\", userID, \"tags\", tagID).delete()\n        .catch(console.error);\n}\n\nasync function getProjectStructure(userID, projectID, recursive=false) {\n    let children = [];\n\n    // absurdly hitting the cache with a very broad query so that the\n    // cache will catch all projects and only hit the db once\n\n    let project =  (await cRef(\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === projectID)[0];\n    if (!project) {\n        return { id: projectID, children: [], is_sequential: false, sortOrder: 0, parentProj: 0};\n    }\n    for (let [itemID, type] of Object.entries(project.data().children)) {\n        if (type === \"task\") {  // TODO: combine if statements\n            let task = await getTaskInformation(userID, itemID);\n            if(task){\n                if (!task.isComplete) {\n                    children.push({type: \"task\", content: itemID, sortOrder: task.order});\n                }\n            }\n           \n        } else if (type === \"project\") {\n            if (recursive) {\n                let project = await getProjectStructure(userID, itemID);\n                if(project) children.push({type: \"project\", content: project, is_sequential: project.is_sequential, sortOrder: project.sortOrder}); \n            } else {\n                let project =  (await cRef(\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === itemID)[0];\n                if(project) children.push({type: \"project\", content: {id: itemID}, is_sequential: project.data().is_sequential, sortOrder: project.data().order}); \n            }\n        }\n    }\n    children.sort((a,b) => a.sortOrder-b.sortOrder); //  sort by ascending order of order, TODO: we should prob use https://firebase.google.com/docs/reference/js/firebase.firestore.Query#order-by\n    return { id: projectID, children: children, is_sequential: project.data().is_sequential, sortOrder: project.data().order, parentProj: project.data().parent};\n}\n\nasync function getItemAvailability(userID) {\n    let t = new Date();\n    let tlps = (await getTopLevelProjects(userID))[2];\n    let blockstatus = {};\n    let timea = new Date();\n    async function recursivelyGetBlocks(userID, projectID) {\n        let bstat = {};\n        let project = (await cRef(\"users\", userID, \"projects\").get().then(snap => snap.docs)).filter(doc=>doc.id === projectID)[0];\n        let projStruct = (await getProjectStructure(userID, projectID));\n        if (project.data().is_sequential) {\n            let child = projStruct.children[0];\n            if (child) {\n                if (child.type === \"project\") {\n                    Object.assign(bstat, (await recursivelyGetBlocks(userID, child.content.id)));\n                    bstat[child.content.id] = true;\n                } else if (child.type === \"task\") {\n                    bstat[child.content] = true;\n                }\n            }\n        } else {\n            let children = projStruct.children;\n            await Promise.all(children.map(async function(child) {\n                if (child.type === \"project\") {\n                    Object.assign(bstat, (await recursivelyGetBlocks(userID, child.content.id)));\n                    bstat[child.content.id] = true;\n                } else if (child.type === \"task\") {\n                    bstat[child.content] = true;\n                }\n            }));\n        }\n        return bstat;\n    };\n    await Promise.all(tlps.map(async function(p) {\n        blockstatus[p.id] = true;\n        let blocks = await recursivelyGetBlocks(userID, p.id);\n        Object.assign(blockstatus, blocks);\n    }));\n    await (await getInboxTasks(userID)).forEach((id) => blockstatus[id] = true);\n    return blockstatus;\n}\n\nasync function getCompletedTasks(userID) {\n    let completedTasks = await getTasksWithQuery(userID, util.select.all([\"isComplete\", \"==\", true]));\n    let taskItems = {};\n    await Promise.all(completedTasks.map(async function(tsk){\n        taskItems[tsk] = await getTaskInformation(userID, tsk);\n    }));\n    const cpSorted = completedTasks.sort(function(b,a) {\n        let taskA = taskItems[a];\n        let taskB = taskItems[b];\n        if (!taskA || !taskB) {\n            return 1;\n        }\n        return ((\n            (taskA.completeDate) ?\n                (taskA.completeDate.seconds) :\n                1\n        )-(\n            (taskB.completeDate) ?\n                (taskB).completeDate.seconds :\n                1\n        ));\n    });\n    let today = new Date();\n    let yesterday = new Date();\n    let thisWeek = new Date();\n    let thisMonth = new Date();\n    today.setHours(0,0,0,0);\n    yesterday.setDate(yesterday.getDate()-1);\n    yesterday.setHours(0,0,0,0);\n    thisWeek.setDate(thisWeek.getDate()-7);\n    thisWeek.setHours(0,0,0,0);\n    thisMonth.setMonth(thisMonth.getMonth()-1);\n    thisMonth.setHours(0,0,0,0);\n    let tasksToday = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= today : false;\n    });\n    let tasksYesterday = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= yesterday && new Date(tsks.completeDate.seconds * 1000) < today : false;\n    });\n    let tasksWeek = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= thisWeek && new Date(tsks.completeDate.seconds * 1000) < yesterday : false;\n    });\n    let tasksMonth = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) >= thisMonth && new Date(tsks.completeDate.seconds * 1000) < thisWeek : false;\n    });\n    let evenBefore = cpSorted.filter(function (a) {\n        let tsks = taskItems[a];\n        return tsks.completeDate ? new Date(tsks.completeDate.seconds * 1000) < thisMonth : true;\n    });\n    //console.log(tasksYesterday);\n    //console.log(tasksWeek);\n    //console.log(tasksMonth);\n    /*console.log(evenBefore);*/\n    return [tasksToday, tasksYesterday, tasksWeek, tasksMonth, evenBefore];\n}\n\nasync function onBoard(userID, tz, username, payload) {\n    // Inbox, in reverse cronological order\n    await newTask(userID, {\n            name: payload[0] + ` ${username}, ` + payload[1],\n            desc: payload[2],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await newTask(userID, {\n            name: payload[3],\n            desc: payload[4],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await newTask(userID, {\n            name: payload[5],\n            desc: payload[6],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n\n    let cdyrslf = await newProject(userID, {name: payload[7], top_level: true, is_sequential: false});\n    let npd = await newProject(userID, {name: payload[8], top_level: true, is_sequential: false});\n    let od = new Date();\n    let ds = new Date();\n    od.setHours(od.getHours() - 24);\n    ds.setHours(ds.getHours() + 20);\n    let odid = await newTask(userID, {\n            name: payload[9],\n            desc: payload[10],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: npd,\n            tags: [],\n            timezone: tz,\n            due: od,\n            repeat: {rule: \"none\"},\n        }\n    );\n    let dsID = await newTask(userID, {\n            name: payload[11],\n            desc: payload[12],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: npd,\n            tags: [],\n            timezone: tz,\n            due: ds,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, odid, npd);\n    await associateTask(userID, dsID, npd);\n    ds.setHours(ds.getHours() + 2);\n    let checkoutID = await newTask(userID, {\n            name: payload[13],\n            desc: payload[14],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: \"\",\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    let nice = await newTask(userID, {\n            name: payload[15],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, nice, cdyrslf);\n    let sequential = await newTask(userID, {\n            name: payload[16],\n            desc: payload[17],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, sequential, cdyrslf);\n    let blocked = await newTask(userID, {\n            name: payload[18],\n            desc: payload[19],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, blocked, cdyrslf);\n    let click = await newTask(userID, {\n            name: payload[20],\n            desc: payload[21],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, click, cdyrslf);\n    let pspDir = await newTask(userID, {\n            name: payload[22],\n            desc: payload[23],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: cdyrslf,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, pspDir, cdyrslf);\n    let pspsp = await newProject(userID, {name: payload[24], top_level: true, is_sequential: false});\n    let tags = await Promise.all([newTag(userID, payload[25]), newTag(userID, payload[26]), newTag(userID, payload[27]), newTag(userID, payload[28])]);\n    let specific = await newTask(userID, {\n            name: payload[29],\n            desc: payload[30],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: pspsp,\n            tags: [tags[2], tags[3]],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, specific, pspsp);\n    let sp = await newTask(userID, {\n            name: payload[31],\n            desc: payload[32],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: pspsp,\n            tags: [tags[0]],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, sp, pspsp);\n    await newPerspective(userID, {name: payload[33], query: payload[34]});\n    let promotion = await newProject(userID, {name: payload[35], top_level: true, is_sequential: false});\n    let online = await newTask(userID, {\n            name: payload[36],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, online, promotion);\n    let dis = await newTask(userID, {\n            name: payload[37],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, dis, promotion);\n    let patreon = await newTask(userID, {\n        name: payload[38],\n            desc: \"\",\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, patreon, promotion);\n    let yiipee = await newTask(userID, {\n        name: payload[39],\n            desc: payload[40],\n            isFlagged: false,\n            isFloating: false,\n            isComplete: false,\n            project: promotion,\n            tags: [],\n            timezone: tz,\n            repeat: {rule: \"none\"},\n        }\n    );\n    await associateTask(userID, yiipee, promotion);\n}\n\nexport default {util, getTasks, getTasksWithQuery, getInboxTasks, getDSTasks, getInboxandDS, removeParamFromTask, getTopLevelProjects, getProjectsandTags, getPerspectives, modifyProject, modifyTask, modifyPerspective, newProject, newPerspective, newTag, newTask, completeTask, dissociateTask, associateTask, associateProject, dissociateProject, deleteTask, deletePerspective, deleteProject, selectTasksInRange, getProjectStructure, getItemAvailability, getTaskInformation, getDSRow, deleteTag, getCompletedTasks, onBoard};\n\n","import dbObj from \"./ObjectManager\";\n\nconst perspectiveHandler = function(){\n    let cgs = {\n        taskFilter: /([^\\w\\d\\s\\[]{1,2}[\\w\\s]+)/gi,\n        taskCaptureGroup: /\\[(([^\\w\\d\\s]{1,2}[\\w\\s]+) *)*?\\]/gi,\n        logicCaptureGroup: /(.*) *([<=>]) *(.*)/gi,\n        globalCaptureGroup: /\\[(([^\\w\\d\\s]{1,2}[\\w\\s]+) *)*?\\](\\$\\w+)* *[<=>]* * *(\\$\\w+)*/gi,\n        clear: function() {\n            this.taskFilter.lastIndex = 0;\n            this.taskCaptureGroup.lastIndex = 0;\n            this.logicCaptureGroup.lastIndex = 0;\n            this.globalCaptureGroup.lastIndex = 0;\n        }\n    };\n\n    let getCaptureGroups = (str) => str.match(cgs.globalCaptureGroup);\n\n    let parseTaskCaptureGroup = (str) => (str.split(\"$\").map(i=>i.trim()));\n\n    let parseSpecialVariables = function(...val) {\n        let vr;\n        switch(val[0]) {\n           case \"today\":\n               vr = new Date();\n               break;\n        }\n        return vr;\n    };\n\n    let compileTask = async function(uid, str, pPaT, additionalFilter) {\n        let queries = additionalFilter ? [additionalFilter] : [];\n        let taskCache = [];\n        let antiCache = [];\n        await Promise.all(str.match(cgs.taskFilter).map(async function(e) {\n            e = e.trim();\n            if (e[0] !== \"!\") {\n                switch (e[0]) {\n                    case \".\":\n                        let pid = pPaT[0][1][e.slice(1, e.length)];\n                        queries.push(['project', '==', pid]);\n                        let pS = await dbObj.getProjectStructure(uid, pid);\n                        for (let i of pS.children)\n                            if (i.type === \"project\")\n                                taskCache = [...taskCache, ...(await compileTask(uid, str.replace(e.slice(1, e.length), pPaT[0][0][i.content.id]), pPaT, additionalFilter))];\n                        break;\n                    case \"#\":\n                        queries.push(['tags', 'has',  pPaT[1][1][e.slice(1, e.length)]]);\n                }\n            } else {\n                switch (e[1]) {\n                    case \".\":\n                        let pid = pPaT[0][1][e.slice(2, e.length)];\n                        queries.push(['project', '!=', pid]);\n\n                        let pS = await dbObj.getProjectStructure(uid, pid);\n                        for (let i of pS.children)\n                            if (i.type === \"project\")\n                                antiCache = [...antiCache, ...(await compileTask(uid, str.replace(e, \".\"+pPaT[0][0][i.content.id]), pPaT, additionalFilter))];\n                        break;\n                    case \"#\":\n                        queries.push(['tags', '!has',  pPaT[1][1][e.slice(2, e.length)]]);\n                }\n            }\n            queries.push(['isComplete', '==', false]);\n        }));\n        return [...taskCache, ...(await dbObj.getTasksWithQuery(uid, dbObj.util.select.all(...queries)))].filter(i=>(!antiCache.includes(i)));\n    };\n\n    let compileLogicCaptureGroup = async function(uid, tasks, cmp, value, ltr) {\n        let taskInfo = await Promise.all(tasks[0].map(async function(t){\n            return [await dbObj.getTaskInformation(uid, t), t];\n        }));\n        let taskCompValues;\n        // TODO: add more?\n        if (tasks[1].includes(\"due\")) {\n            taskCompValues = taskInfo.map(t => [t[1], (t[0].due ? new Date((t[0].due.seconds)*1000) : undefined)]);\n        } else if (tasks[1].includes(\"defer\")) {\n            taskCompValues = taskInfo.map(t => [t[1], (t[0].defer ? new Date((t[0].defer.seconds)*1000) : undefined)]);\n        }\n        let filteredResults;\n        let util_datesequal = function(dateA, dateB) {\n            return dateA.getFullYear() === dateB.getFullYear() && dateA.getMonth() === dateB.getMonth() && dateA.getDate() === dateB.getDate();\n        };\n        switch (cmp) {\n            case \"=\":\n                taskCompValues = taskCompValues.filter(t=>util_datesequal(t[1], value));\n                break;\n            case \">\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] > value) : taskCompValues = taskCompValues.filter(t => t[1] < value);\n                break;\n            case \"<\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] < value) : taskCompValues = taskCompValues.filter(t => t[1] > value);\n                break;\n            case \">=\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] >= value) : taskCompValues = taskCompValues.filter(t => t[1] <= value);\n                break;\n            case \"<=\":\n                ltr ? taskCompValues = taskCompValues.filter(t => t[1] <= value) : taskCompValues = taskCompValues.filter(t => t[1] >= value);\n                break;\n\n        }\n        return (taskCompValues.map(t => t[0]));\n    };\n\n    let getPerspectiveFromString = async function(uid, pStr, filter, order) {\n        let pPaT = await dbObj.getProjectsandTags(uid);\n        let pRes = await getCaptureGroups(pStr);\n        if (!pRes) {\n            return [];\n        }\n        let fquery; \n        switch (filter) {\n            case \"avail\":\n                fquery = [\"defer\", \"<\", ((new Date()).getTime())/1000];\n                break;\n            case \"flagged\":\n                fquery = [\"isFlagged\", \"==\", true];\n                break;\n        }\n        let tasks = await Promise.all(pRes.map(async function(i) {\n            cgs.clear();\n            let logicSort = cgs.logicCaptureGroup.exec(i);\n            let t;\n            if(logicSort) {\n                // handle logic group\n                let [, lhs, cmp, rhs] = logicSort;\n                [lhs, rhs] = [parseTaskCaptureGroup(lhs), parseTaskCaptureGroup(rhs)];\n                if (cgs.taskCaptureGroup.test(lhs)) {\n                    lhs = [await compileTask(uid, lhs[0], pPaT, fquery), lhs[1]];\n                    rhs = parseSpecialVariables(rhs[1]);\n                    t = (await compileLogicCaptureGroup(uid, lhs, cmp, rhs, true)); // true (that is, left to right order)\n                } else {\n                    rhs = [await compileTask(uid, rhs[0], pPaT, fquery), rhs[1]];\n                    lhs = parseSpecialVariables(lhs[1]);\n                    t = (await compileLogicCaptureGroup(uid, rhs, cmp, lhs, false)); // false (that is, right to left order)\n                }\n            } else {\n                // handle standard group\n                t = (await compileTask(uid, i, pPaT, fquery));\n            }\n            return t;\n        }));\n        tasks = [...new Set(tasks.flat(1))];\n        let taskObjs = await Promise.all(tasks.map(async function(t){\n            return {id: t, ...(await dbObj.getTaskInformation(uid, t))}\n        })).then(values=>values);\n        switch (order) {\n            case \"duas\":\n                taskObjs.sort((a,b)=>(a.due?a.due.seconds:10000000000)-(b.due?b.due.seconds:10000000000));\n                break;\n            case \"duds\":\n                taskObjs.sort((a,b)=>(b.due?b.due.seconds:1)-(a.due?a.due.seconds:1));\n                break;\n            case \"deas\":\n                taskObjs.sort((a,b)=>(a.defer?a.defer.seconds:10000000000)-(b.defer?b.defer.seconds:10000000000));\n                break;\n            case \"deds\":\n                taskObjs.sort((a,b)=>(b.defer?b.defer.seconds:1)-(a.defer?a.defer.seconds:1));\n                break;\n\n        }\n        // Final availability filter for sequential\n        let aval = await dbObj.getItemAvailability(uid);\n        if (filter === \"avail\") taskObjs = taskObjs.filter(it => (aval[it.id] !== undefined)); \n        return taskObjs.map(t=>t.id);\n    };\n\n    return {calc: getPerspectiveFromString};\n}();\n\nexport default perspectiveHandler;\n\n","import dbFuncs from \"./src/ObjectManager\"\nimport pspObj from \"./src/PerspectiveManager\"\nimport dbRefObj from \"./src/DBManager\"\n\n\nexport default {start:dbRefObj.__init__, use:dbRefObj.useDb, db: dbFuncs, perspective: pspObj, flush: dbRefObj.flush};\n\n","const { parseFromTimeZone } = require('date-fns-timezone')\n\n/* AutoBind */\nconst autoBind = require('auto-bind/react');\n\nclass Gruntman {\n\n    /*\n     * Hello human,\n     * good afternoon.\n     * I am gruntman.\n     *\n     * Register refreshers with me\n     * so I could handle refreshes.\n     *\n     * Do actions with me\n     * so I could reverse them.\n     *\n     * Undo happens from me\n     * refresh happens from me.\n     *\n     *\n     * @jemoka\n     *\n     */\n\n    constructor(engine) {\n        this.e = engine;\n        this.refresher = ()=>{};\n        this.callbackRefresherReleased = true; // prevent live callback merge conflicts\n        this.conflictResolution = 1000; // 1000 ms = 1s worth of conflict time.\n        this.releaseTimeout = undefined;\n\n\n        this.doers = {\n            macro: {\n                applyOrder: async function (options) {\n                    // TODO undo handler?\n                    if (options.items.length !== options.order.length) \n                        console.error(\"Length of items and order length must be the same!\")\n                    await Promise.all(options.order.map((e,i) => {\n                        let item = options.items[e];\n                        if (item.type === \"task\") \n                            return engine.db.modifyTask(options.uid, item.content, {order: i});\n                        else if (item.type === \"project\")\n                            return engine.db.modifyProject(options.uid, item.content, {order: i});\n                            //await engine.db.modifyProject(options.uid, e.content, {order: options.order[i]});\n                    }));\n                    return {uid:options.uid}; // TODO HANDLE UNDO\n                }\n            },\n            tag: {\n                create: async function (options) {\n                    let newTag = await engine.db.newTag(options.uid, options.name);\n                    return {uid: options.uid, id: newTag};\n                }\n            },\n            task: {\n                create: async function (options) {\n                    let ntObject = {\n                        desc: \"\",\n                        isFlagged: false,\n                        isFloating: false,\n                        isComplete: false,\n                        project: options.pid?options.pid:\"\",\n                        tags: [],\n                        timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n                        repeat: {rule: \"none\"},\n                        name: options.name?options.name:\"\",\n                    };\n\n                    if (options.due)\n                        ntObject.due = options.due\n                    if (options.defer)\n                        ntObject.defer = options.defer\n\n                    let ntID = await engine.db.newTask(options.uid, ntObject)\n\n                    if (options.pid && options.pid != \"\")\n                        engine.db.associateTask(options.uid, ntID, options.pid);\n\n                    return {uid: options.uid, tid: ntID};\n                },\n                update: async function (options) {\n                    let tInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, options.query)\n\n                    return {uid: options.uid, tid: options.tid, tInfo};\n                },\n                update__project:  async function (options) {\n                    let tInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, {project: options.project})\n\n                    if (options.oldProject)\n                        await engine.db.dissociateTask(options.uid, options.tid, options.oldProject);\n\n                    if (options.project !== \"\")\n                        await engine.db.associateTask(options.uid, options.tid, options.project);\n\n                    return {uid: options.uid, tid: options.tid, tInfo};\n                },\n                update__uncomplete: async function (options) {\n                    let taskInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    await engine.db.modifyTask(options.uid, options.tid, {isComplete: false, completeDate: new Date()});\n                    return {uid: options.uid, tid: options.tid, taskInfo};\n                },\n                update__complete: async function (options) {\n                    await engine.db.modifyTask(options.uid, options.tid, {isComplete: true, completeDate: new Date()})\n                    let taskInfo = await engine.db.getTaskInformation(options.uid, options.tid);\n                    let due = (\n                        taskInfo.due ?\n                        (taskInfo.isFloating ?\n                            new Date(taskInfo.due.seconds*1000) :\n                            parseFromTimeZone(\n                                (new Date(taskInfo.due.seconds*1000)).toISOString(),\n                                {timeZone: taskInfo.timezone}\n                            )\n                        ):\n                        undefined\n                    );\n                    let defer = (\n                        taskInfo.defer ?\n                        (taskInfo.isFloating ?\n                            new Date(taskInfo.defer.seconds*1000) :\n                            parseFromTimeZone(\n                                (new Date(taskInfo.defer.seconds*1000)).toISOString(),\n                                {timeZone: taskInfo.timezone}\n                            )\n                        ): undefined\n                    );\n                    let repeat = taskInfo.repeat;\n                    if (repeat.rule !== \"none\" && due) {\n                        let rRule = repeat.rule;\n                        if (rRule === \"daily\") {\n                            if (defer) {\n                                let defDistance = due-defer;\n                                due.setDate(due.getDate() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                due.setDate(due.getDate() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n\n                        } else if (rRule === \"weekly\") {\n                            if (defer) {\n                                let rOn = repeat.on;\n                                let current = \"\";\n                                let defDistance = due-defer;\n                                if (rOn) {\n                                    while (!rOn.includes(current)) {\n                                        due.setDate(due.getDate() + 1);\n                                        let dow = due.getDay();\n                                        switch (dow) {\n                                            case 1:\n                                                current = \"M\";\n                                                break;\n                                            case 2:\n                                                current = \"T\";\n                                                break;\n                                            case 3:\n                                                current = \"W\";\n                                                break;\n                                            case 4:\n                                                current = \"Th\";\n                                                break;\n                                            case 5:\n                                                current = \"F\";\n                                                break;\n                                            case 6:\n                                                current = \"S\";\n                                                break;\n                                            case 0:\n                                                current = \"Su\";\n                                                break;\n                                        }\n                                    }\n                                } else {\n                                    due.setDate(due.getDate()+7);\n                                    defer.setDate(defer.getDate()+7);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                let rOn = repeat.on;\n                                if (rOn) {\n                                    let current = \"\";\n                                    while (!rOn.includes(current)) {\n                                        due.setDate(due.getDate() + 1);\n                                        let dow = due.getDay();\n                                        switch (dow) {\n                                            case 1:\n                                                current = \"M\";\n                                                break;\n                                            case 2:\n                                                current = \"T\";\n                                                break;\n                                            case 3:\n                                                current = \"W\";\n                                                break;\n                                            case 4:\n                                                current = \"Th\";\n                                                break;\n                                            case 5:\n                                                current = \"F\";\n                                                break;\n                                            case 6:\n                                                current = \"S\";\n                                                break;\n                                            case 0:\n                                                current = \"Su\";\n                                                break;\n                                        }\n                                    }\n                                } else {\n                                    due.setDate(due.getDate()+7);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n                        } else if (rRule === \"monthly\") {\n                            if (defer) {\n                                let rOn = repeat.on;\n                                let dow = due.getDate();\n                                let oDow = due.getDate();\n                                let defDistance = due-defer;\n                                if (rOn) {\n                                    while ((!rOn.includes(dow.toString()) && !(rOn.includes(\"Last\") && (new Date(due.getFullYear(), due.getMonth(), due.getDate()).getDate() === new Date(due.getFullYear(), due.getMonth()+1, 0).getDate()))) || (oDow === dow)) {\n                                        due.setDate(due.getDate() + 1);\n                                        dow = due.getDate();\n                                    }\n                                } else {\n                                    due.setMonth(due.getMonth()+1);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                let rOn = repeat.on;\n                                if (rOn) {\n                                    let dow = due.getDate();\n                                    let oDow = due.getDate();\n                                    while ((!rOn.includes(dow.toString()) && !(rOn.includes(\"Last\") && (new Date(due.getFullYear(), due.getMonth(), due.getDate()).getDate() === new Date(due.getFullYear(), due.getMonth()+1, 0).getDate()))) || (oDow === dow)) {\n                                        due.setDate(due.getDate() + 1);\n                                        dow = due.getDate();\n                                    }\n                                } else {\n                                    due.setMonth(due.getMonth()+1);\n                                }\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n                        } else if (rRule === \"yearly\") {\n                            if (defer) {\n                                let defDistance = due-defer;\n                                due.setFullYear(due.getFullYear() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due, defer:(new Date(due-defDistance))});\n                            } else {\n                                due.setFullYear(due.getFullYear() + 1);\n                                engine.db.modifyTask(options.uid, options.tid, {isComplete: false, due:due});\n                            }\n\n                        }\n                    }\n                    return {message: \"Todo TODO TODO Todo: undo pack?\"}\n                }\n            },\n            project: {\n                create: async function (options) { // create project\n                    let projObj = {\n                        name: \"\",\n                        top_level: options.parent === undefined,\n                        is_sequential: false,\n                    };\n                    let npid = options.parent ? await engine.db.newProject(options.uid, projObj, options.parent) : await engine.db.newProject(options.uid, projObj) // make a project... with or without a parent\n                    if (options.parent) {\n                        engine.db.associateProject(options.uid, npid, options.parent);\n                    }// associate the two\n                    return {uid: options.uid, pid: npid}\n                },\n                delete: async function (options) {\n                    await engine.db.deleteProject(options.uid, options.pid);\n                    if (options.parent)\n                        engine.db.dissociateProject(options.uid, options.pid, options.parent);\n\n                    return {uid: options.uid, TODO: \"TODO\"} // TODO: how do we undelete a project?\n                },\n                update__name: async function (options) { // update the project name!\n                    let possibleProjects = await engine.db.getProjectsandTags(options.uid);\n                    // get all possible project\n                    let projectName = possibleProjects[0][0][options.id]\n                    // get the one we want based on page id\n\n                    // modify the project\n                    await engine.db.modifyProject(options.uid, options.id, {name: options.name});\n                    // return what we need to undo\n                    return {projectName, uid: options.uid}\n                },\n                update__pstate: async function (options) { // update the project name!\n                    let currentProject = await engine.db.getProjectStructure(options.uid, options.id, false); // get current project info\n                    // get all possible project\n                    let is_sequential = currentProject;\n                    // get the one we want based on page id\n\n                    // modify the project\n                    await engine.db.modifyProject(options.uid, options.id, {is_sequential: options.is_sequential});\n                    // return what we need to undo\n                    return {is_sequential, uid: options.uid}\n                },\n                associate:  async function (options) {\n                    //await engine.db.modifyTask(options.uid, options.tid, options.query)\n                    await engine.db.associateTask(options.uid, options.tid, options.pid);\n                    return {uid: options.uid, tid: options.tid};\n                },\n                dissociate:  async function (options) {\n                    //await engine.db.modifyTask(options.uid, options.tid, options.query)\n                    await engine.db.dissociateTask(options.uid, options.tid, options.pid);\n                    return {uid: options.uid, tid: options.tid};\n                }\n            },\n            perspective: {\n                create: async function(options) {\n                    let pObj = {\n                        name: \"\",\n                        avail: \"remain\",\n                        tord: \"duds\",\n                        query: \"\"\n                    }\n                    let npspid = await engine.db.newPerspective(options.uid, pObj);\n                    return {uid: options.uid, pid: npspid};\n                },\n                update__perspective: async function (options) { // update the perspective name!\n                    let possiblePerspectives = await engine.db.getPerspectives(options.uid);\n                    // get all possible perspectives\n                    let perspectiveObject = possiblePerspectives[0][options.id]\n                    // get the one we want based on page id\n\n                    // modify the perspective\n                    await engine.db.modifyPerspective(options.uid, options.id, options.payload);\n\n                    // return what we need to undo\n                    return {perspectiveObject, uid: options.uid}\n                },\n\n                delete__perspective: async function (options) { // update the perspective name!\n                    console.log(\"perspective delete gruntman func\")\n                    // TODO: is this it? @jack\n                    await engine.db.deletePerspective(options.uid, options.id);\n                }\n            },\n        } // type:action:functionaction (return resources)\n        this.undoers = {\n            task: {\n                update: \"task.set\"\n            }\n        } // action: string\n        this.backlog = []; // actionID\n        this.undolog = []; // actionID\n        this.taskLog = {\n        } // actionID: [type, resources]\n        this.canUndo = {\n            task: {\n                update: true,\n            }\n        }\n        this.schedulers = {\n        } // util function onChange fixer-upper\n        this.updateLock = false;\n        this.updateInterval = undefined;\n\n        // And AutoBind any and all functions\n        autoBind(this);\n    }\n\n    halt() {\n        for (let key in this.schedulers)\n            clearTimeout(this.schedulers[key])\n        //this.refresher = ()=>{}; TODO TODO may cause memory leaks in _very_ narrow circumstances but uncomming will break project toggles due to refresher mounting too quickly\n        if (this.updateInterval)\n            clearTimeout(this.updateInterval);\n        this.updateInterval = undefined;\n    }\n\n    lockUpdates() {\n        this.updateLock = true;\n        if (this.updateInterval)\n            clearTimeout(this.updateInterval);\n        this.updateInterval = undefined;\n    }\n\n    unlockUpdates(interval=580) {\n        this.updateLock = false;\n        this.updateInterval = setTimeout(this.refresher, interval);\n    }\n\n    requestRefresh() {\n        if (!this.updateLock && this.callbackRefresherReleased)\n            this.refresher();\n    }\n\n    /*\n     * @param refresher: refresher function to refresh what you registered\n     */\n\n    registerRefresher(r) {\n        this.refresher = r;\n        // lock updates every time a new page loads to prevent MeRGE Conflicts\n        if(this.releaseTimeout) clearTimeout(this.releaseTimeout);\n        this.callbackRefresherReleased= false;\n        this.releaseTimeout = setTimeout(()=>{this.callbackRefresherReleased=true; this.releaseTimeout=undefined}, this.conflictResolution);\n    }\n\n    registerScheduler(callback, identifier, wait=500) {\n        if (this.schedulers[identifier])\n            clearTimeout(this.schedulers[identifier]); // clear the timeout\n        this.schedulers[identifier] = setTimeout(callback, wait);\n    }\n\n    async do(actionName, options, bypassUpdates, isUndo, unsafe_FORCE_UPDATES) {\n        /*\n         * @param actionName => action directive like task.edit or project.create\n         * @param options => options\n         *\n         */\n\n        // Lock updates every time cacheRef is called to prevent mErGE ConFLIcTS\n        if(this.releaseTimeout) clearTimeout(this.releaseTimeout);\n        this.callbackRefresherReleased= false;\n        this.releaseTimeout = setTimeout(()=>{this.callbackRefresherReleased=true; this.releaseTimeout=undefined}, this.conflictResolution);\n\n        let actionID = this.random();\n\n        let nodes = actionName.split(\".\");\n\n        let action = this.doers;\n        while (nodes.length > 0) {\n            action = action[nodes.shift()];\n        }\n\n        if (isUndo) this.undolog.push(actionID);\n        else this.backlog.push(actionID);\n\n        let resources = await action(options);\n\n        this.taskLog[actionID] = [actionName, resources];\n\n        if (!this.updateLock && !bypassUpdates)\n            this.refresher();\n\n        if (unsafe_FORCE_UPDATES)\n            this.refresher();\n\n        return await resources;\n    }\n\n    random() { return (((1+Math.random())*0x10000)|0).toString(16)+\"-\"+(((1+Math.random())*0x10000)|0).toString(16);}\n}\n\nexport default Gruntman;\n\n","import React, { Component } from 'react';\nimport { Plugins } from '@capacitor/core';\n// Firebase App (the core Firebase SDK) is always required and must be listed first\nimport * as firebase from \"firebase/app\";\n\n// Add the Firebase products that you want to use\nimport \"firebase/auth\";\n\nimport $ from \"jquery\";\n\n\nimport './Auth.css';\n\n\nimport '../themefiles/condutiontheme-default.css';\nimport '../themefiles/condutiontheme-default-dark.css';\nimport '../themefiles/condutiontheme-default-light.css';\n\n\n\nconst autoBind = require('auto-bind/react');\n\n\nconst { Storage } = Plugins;\n\nclass Auth extends Component {\n    constructor(props) {\n        super(props);\n\n        let greetings = [\"Hello,\", \"Hey,\", \"Heyo,\", \"Aloha,\", \"Yo!\"];\n\n        /*\n         * mode 0 = login in progress, \n         *      1 = new account in progress,\n         *      2 = recovery in progress, \n         *      3 = email unverified,\n         *      4 = email verified, proceed create\n         *      5 = recovery executed, shepeard them back\n         *\n         */\n\n        this.state = {\n            authMode: 0,\n            showExtra: false,\n            greeting: greetings[Math.floor(Math.random() * greetings.length)]\n        };\n\n        autoBind(this);\n    }\n\n    doLogin() {\n        let view = this;\n        firebase.auth().setPersistence(firebase.auth.Auth.Persistence.LOCAL).then(() => {\n            firebase.auth().signInWithEmailAndPassword($(\"#email\").val(), $(\"#password\").val()).then(function() {\n                if (firebase.auth().currentUser.emailVerified)\n                     view.props.dispatch({service: \"firebase\", operation: \"login\"});\n                else\n                    view.setState({authMode: 3});\n            }).catch(function(error) {\n                    // Handle Errors here.\n                    const errorCode = error.code;\n                    const errorMessage = error.message;\n                    console.log(error);\n                    $(\".auth-upf\").addClass(\"wrong\");\n            });\n        });\n    }\n\n    doCreate() {\n        // TODO: actually create the account\n        let view = this;\n        let problem = false;\n        firebase.auth().createUserWithEmailAndPassword($(\"#email\").val(), $(\"#password\").val()).catch(function(error) {\n            view.setState({showExtra: true}, ()=>$('#need-verify').html(error.message));\n            problem=true;\n        }).then(function() {\n            if (!problem) {\n                firebase.auth().currentUser.sendEmailVerification();\n                firebase.auth().currentUser.updateProfile({displayName: $(\"#name\").val()});\n                view.setState({authMode: 4, showExtra: true});\n            }\n        })\n    }\n\n    dispatchCreate() {\n        firebase.auth().currentUser.reload().then(()=>{;\n            if (firebase.auth().currentUser.emailVerified)\n                this.props.dispatch({service: \"firebase\", operation: \"create\"});\n            else\n                $('#need-verify').html(\"Please double-check that you tapped the verification link in your email.\");\n        });\n    }\n\n    doRecover() {\n        let problem = false;\n        let view = this;\n        firebase.auth().sendPasswordResetEmail($(\"#email\").val()).catch(function(error) {\n            view.setState({showExtra: true});\n            $('#need-verify').html(error.message);\n            problem=true;\n        }).then(function() {\n            if (!problem) {\n                view.setState({authMode: 5});\n            }\n        })\n        // TODO: actually recover the account\n    }\n\n    doLocal() {\n        this.props.dispatch({service: \"json\", operation: \"login\"});\n    }\n\n    render() {\n        return (\n            <div id=\"auth-content-wrapper\">\n                <div id=\"auth-left-menu\">\n                    <div className=\"menu-area\" style={{height:\"100%\"}}>\n                        <div className=\"auth-component\"></div>\n                        <div className=\"auth-component\"></div>\n                        <span id=\"auth-image-credit\">Image by <span style={{fontWeight: 500}}>Tobias Keller/Pawe Czerwiski</span></span>\n                    </div>\n                </div>\n                <div id=\"authwall\">\n                    <h1 id=\"greeting-auth\">{this.state.greeting}</h1><span id=\"welcome-auth-msg\">Welcome to Condution.</span>\n                    <h3 className=\"greeting-auth-subtitle\" id=\"greeting-auth-normal\">{(()=>{\n                        switch (this.state.authMode) {\n                            case 2:\n                                return \"No worries! Let's recover your password.\";\n                            default:\n                                return \"Good to see you. Please sign in or tap Use Locally.\";\n\n                        }\n                    })()}</h3> \n                    <input className=\"auth-upf\" id=\"name\" type=\"text\" autoComplete=\"off\" defaultValue=\"\" placeholder=\"What should we call you?\" style={{display: this.state.authMode === 1 ? \"block\" : \"none\"}}/>\n                    <input className=\"auth-upf\" id=\"email\" type=\"email\" autoComplete=\"off\" defaultValue=\"\" placeholder=\"Email\" />\n                    <input className=\"auth-upf\" id=\"password\" type=\"password\" autoComplete=\"off\" defaultValue=\"\" placeholder=\"Password\" style={{display: this.state.authMode !== 2 ? \"block\" : \"none\"}} onKeyPress={(event)=>{\n                        if (event.key === \"Enter\") {\n                            switch (this.state.authMode) {\n                                case 0:\n                                    this.doLogin();\n                                    break;\n                                case 1:\n                                    this.doCreate();\n                                    break;\n                                case 2:\n                                    this.doRecover();\n                                    break;\n                                case 4:\n                                    this.dispatchCreate();\n                                    break;\n                                case 5: \n                                    this.doLogin();\n                                    break;\n                            }\n                        }\n                    }}/>\n                    {(() => {\n                        if (this.state.authMode === 3 || this.state.authMode ===  4 || this.state.authMode === 5 || this.state.showExtra) return <span id=\"need-verify\">\n                            {(()=>{\n                                switch(this.state.authMode){\n                                    case 3:\n                                        return \"Check and verify your email, then tap Let's Do This!\";\n                                    case 4:\n                                        return \"Check and verify your email, then tap Proceed!\";\n                                    case 5:\n                                        return \"Check and verify your email, then return to login.\";\n\n                            }})()}\n                        </span>\n                    })()}\n                    <span id=\"recover-password\" style={{display: this.state.authMode === 3 ? \"none\" : \"block\"}} onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 2:\n                                    return this.setState({authMode: 0});\n                                default:\n                                    return this.setState({authMode: 2});\n\n                            }\n                        }}>{(()=>{\n                            switch (this.state.authMode) {\n                                case 2:\n                                    return \"Remembered? Login\";\n                                default:\n                                    return \"Recover Password\";\n\n                            }\n                        })()}</span>\n                    <div id=\"auth-actiongroup\">\n                        <div id=\"newuser\" onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 1:\n                                    return this.setState({authMode: 0});\n                                default:\n                                    return this.setState({authMode: 1});\n\n                            }\n                        }}>{(()=>{\n                            switch (this.state.authMode) {\n                                case 1:\n                                    return \"Log in\";\n                                default:\n                                    return \"Make an account\";\n\n                            }\n                        })()}</div>\n                        <div id=\"login\" onClick={()=>{\n                            switch (this.state.authMode) {\n                                case 0:\n                                    this.doLogin();\n                                    break;\n                                case 1:\n                                    this.doCreate();\n                                    break;\n                                case 2:\n                                    this.doRecover();\n                                    break;\n                                case 4:\n                                    this.dispatchCreate();\n                                    break;\n                            }\n                        }}>\n                            <i className=\"fas fa-snowboarding\" style={{paddingRight: \"5px\"}}></i><span id=\"login-text\">{(() => {\n                                switch(this.state.authMode) {\n                                    case 0:\n                                    case 3:\n                                        return \"Let's Do This!\";\n                                    case 1:\n                                        return \"Verify Email!\";\n                                    case 2:\n                                        return \"Let's Recover!\";\n                                    case 4:\n                                        return \"Proceed!\";\n                                    case 5:\n                                        return \"Proceed!\";\n                                }\n                            })()}</span>\n                        </div>\n                        {(() => {\n                            if (this.state.authMode !== 2) return <div className=\"convert-src\" id=\"ulac\" onClick={this.doLocal}>Use Locally</div>\n                        })()}\n                    </div>\n                </div>\n            </div>\n      );\n    }\n}\n\nexport default Auth;\n","import { IonContent, IonPage, IonSplitPane, IonMenu, IonText, IonIcon, IonMenuButton, IonRouterOutlet } from '@ionic/react';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Pages.css';\n\nconst autoBind = require('auto-bind/react');\n\nfunction Loader(props) {\n    return (\n        <div style={{width: \"100%\", height: \"100%\", position: \"absolute\", display: \"flex\", justifyContent: \"center\", alignItems: \"center\"}}>\n            <div style={{marginRight: 20, maxWidth: 500}}>\n                <b>Condution v1.0.0-alpha.0</b> <br />\n\n                    <i>Like, why are you reading this?</i> <br />\n\n                    If there is something here [{props.error}], <br />\n                then talk to Jack or something. Or fix it. <br />\n                    INTERNAL USE ONLY. DO NOT DISTRIBUTE.\n            </div>\n            <div style={{marginLeft: 20, maxWidth: 500}}>\n                <br />\n\n                <pre style={{fontSize: 10}}>\n                    {`\n    Copyright (C) 2019-2020. Shabang Systems, LLC\n\n    This program is free software: you can redistribute it and/or modify\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    This program is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see https://www.gnu.org/licenses/.\n                    `}\n                </pre>\n            </div>\n\n        </div>\n    )\n}\n\nexport default Loader;\n\n","/* Global Imports */\nimport React, { Component } from 'react';\nimport { Redirect, Route } from 'react-router-dom';\nimport { IonApp, IonRouterOutlet, IonMenu, setupConfig } from '@ionic/react';\nimport { IonReactRouter } from '@ionic/react-router';\n\n/* Core CSS required for Ionic components to work properly */\nimport '@ionic/react/css/core.css';\n\n/* Basic CSS for apps built with Ionic */\nimport '@ionic/react/css/normalize.css';\nimport '@ionic/react/css/structure.css';\nimport '@ionic/react/css/typography.css';\n\n/* Optional CSS utils that can be commented out */\nimport '@ionic/react/css/padding.css';\nimport '@ionic/react/css/float-elements.css';\nimport '@ionic/react/css/text-alignment.css';\nimport '@ionic/react/css/text-transformation.css';\nimport '@ionic/react/css/flex-utils.css';\nimport '@ionic/react/css/display.css';\n\n/* Themefiles */\nimport './themefiles/condutiontheme-default.css';\nimport './themefiles/condutiontheme-default-dark.css';\nimport './themefiles/condutiontheme-default-light.css';\nimport './themefiles/condutiontheme-black-n-red.css';\n\n/* Font awesome */\nimport './static/fa/scripts/all.min.css';\n\n/* Theme variables */\nimport './theme/variables.css';\n\n/* Capacitor core plugins + jQuery */\nimport { Plugins } from '@capacitor/core';\nimport $ from \"jquery\";\n\n/* Our Lovley Core Engine */\nimport Engine from './backend/CondutionEngine';\nimport Gruntman from './gruntman';\n\n/* Firebase */\nimport * as firebase from \"firebase/app\";\n\n/* Auth and store modules */\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\n/* Views that we need */\nimport Auth from './pages/Auth';\nimport Loader from './pages/Loader';\nimport Home from './pages/Home';\n\n\n/* AutoBind */\nconst autoBind = require('auto-bind/react');\n\n\n/* Storage Plugins */\nconst { Storage } = Plugins;\n\n\n/* \n * Hello human, good morning.\n *\n * Hope you are doing well. Thanks (why are you) visiting App.jsx?\n *\n * I manage global routing, auth handling, and all that jazz.\n * You should not touch me to change the interface.\n * But I guess I change the interface. So.\n *\n * I kind of change the interface?\n *\n * Anyways, I return one of Loader, Auth, or Home depending on auth state.\n *\n * And check for the auth state to determine which one to return\n *\n * It's not really a poem, isn't it.\n *\n * @Jemoka\n *\n */\n\nsetupConfig({ swipeBackEnabled: false, }); // globally disable swipe b/c we implemented our own\n\n\nclass App extends Component {\n    constructor(props) {\n        super(props);\n\n        // We start with setting our state. We don't know our user's UID (duh)\n        this.state = {authMode: \"loader\", uid: \"\", displayName: \"\"};\n        \n        // We also set the theme based on the user's media query\n        if (window.matchMedia('(prefers-color-scheme:dark)').matches) {\n            $(\"body\").removeClass();\n            $(\"body\").addClass(\"condutiontheme-default-dark\");\n        }\n        else {\n            $(\"body\").removeClass();\n            $(\"body\").addClass(\"condutiontheme-default-light\");\n        }\n\n        // Make ourselves a nice gruntman\n        this.gruntman = new Gruntman(Engine);\n        \n        // And AutoBind any and all functions\n        autoBind(this);\n    }\n\n    async componentDidMount() {\n        // This IS in fact the view\n        let view = this;\n\n        // Light the fire, kick the tires an instance \n        // of {firebase}, and initializing the firebase \n        // and json engines\n        await Engine.start({firebase}, \"firebase\", \"json\");\n\n\n        // ==Handling cached dispatch==\n        // So, do we have a condution_stotype? \n        Storage.get({key: 'condution_stotype'}).then((dbType) => {\n            switch (dbType.value) {\n                // If its firebase \n                case \"firebase\":\n                    // Check if we actually has a user\n                    firebase.auth().onAuthStateChanged(function(user) {\n                        if (!user)\n                            view.authDispatch({operation:\"logout\"});\n                        // If we have one, shift the engine into firebase mode\n                        else {\n                            Engine.use(\"firebase\", view.gruntman.requestRefresh);\n                            // Load the authenticated state, set authmode as \"firebase\" and supply the UID\n                            view.setState({authMode: \"firebase\", uid: user.uid, displayName: user.displayName});\n                        }\n                    })\n                    break;\n                // If its json\n                case \"json\":\n                    // Shift the engine into json mode\n                    Engine.use(\"json\", view.gruntman.requestRefresh);\n                    // Load the authenticated state, set the authmode as \"json\" and supply \"hard-storage-user\" as UID\n                    this.setState({authMode: \"json\", uid:\"hard-storage-user\"});\n                    break;\n                // If there is nothing, well, set the authmode as \"none\"\n                default:\n                    this.setState({authMode: \"none\", uid:undefined});\n                    break;\n            }\n        });\n    }\n\n    // authDispatch handles the dispatching of auth operations. {login, create, and logout}\n    authDispatch(mode) {\n        // TODO: that's a state machine! @zbuster05\n        let uid;\n        let name;\n        switch (mode.operation) {\n            // operation mode login\n            case \"login\":\n                // shift the engine into whatever mode we just logged into\n                Engine.use(mode.service, this.gruntman.requestRefresh);\n                // write the login state into cookies\n                Storage.set({key: 'condution_stotype', value: mode.service});\n                // get the UID\n\n                switch (mode.service) {\n                    // if its firebase\n                    case \"firebase\":\n                        // set the UID as the UID\n                        uid = firebase.auth().currentUser.uid;\n                        name = firebase.auth().currentUser.displayName\n                        break;\n                    default:\n                        // set the UID as \"hard-storage-user\"\n                        uid = \"hard-storage-user\";\n                        name = \"\"\n                        break;\n                }\n                // load the authenicated state and supply the UID\n                this.setState({authMode: mode.service, uid, displayName: name});\n                break;\n            // operation mode create\n            case \"create\":\n                // setthe engine as whatever service\n                Engine.use(mode.service, this.gruntman.requestRefresh);\n                Storage.set({key: 'condution_stotype', value: mode.service});\n                switch (mode.service) {\n                    // if its firebase\n                    case \"firebase\":\n                        // set the UID as the UID\n                        uid = firebase.auth().currentUser.uid;\n                        name = firebase.auth().currentUser.displayName\n                        break;\n                    default:\n                        // set the UID as \"hard-storage-user\"\n                        uid = \"hard-storage-user\";\n                        name = \"\"\n                        break;\n                }\n\n                // TODO: do onboarding\n                // Here\n                console.log(\"I would be onboarding, but... alas.\");\n                // TODO: be done with onboarding\n                // Set the storage type and write it into cookies\n                // load the authenicated state and TODO supply the UID\n                this.setState({authMode: mode.service, uid, displayName: name});\n                break;\n            case \"logout\":\n                // Set the storage type to nada and write it into cookies\n                Storage.set({key: 'condution_stotype', value: \"none\"});\n                // Sign out if we are signed in\n                firebase.auth().signOut();\n                // Load the auth view\n                this.setState({authMode: \"none\", name: \"\"});\n                break;\n        }\n    }\n\n    render() {\n        // Check for onboarding here\n        // then continue\n        // Which authmode?\n        switch (this.state.authMode) {\n            // if we are at the first-paint load mode, do this:\n            case \"loader\":\n                return <Loader />\n            // if we did not authenticate yet, load the auth view:\n            case \"none\":\n                return <Auth dispatch={this.authDispatch}/>;\n            // if we did auth, load it up and get the party going\n            case \"firebase\":\n            case \"json\":\n                return <Home engine={Engine} uid={this.state.uid} dispatch={this.authDispatch} gruntman={this.gruntman} displayName={this.state.displayName}/>;\n            // wut esta this auth mode? load the loader with an error\n            default:\n                console.error(`CentralDispatchError: Wut Esta ${this.state.authMode}`);\n                return <Loader isError={true} error={this.state.authMode}/>\n        }\n    }\n}\n\nexport default App;\n//class App extends Component {\n    //render() {\n        //return (\n            //<IonApp>\n                //<Home />\n            //</IonApp>\n        //);\n    //}\n//}\n\n/*export default App;*/\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      process.env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Repeat.css';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\n\n/*\n * Hello human,\n * good morning.\n *\n * I am the repeat UI\n *\n * Rule denotes the repeat major rule: {no repeat, daily, weekly: yearly}\n * Advanced denotes whether the user is using fancy repeat\n * On denotes the advanced repeat signals. (like mon, tue, sat or something.)\n *\n * @jemoka\n *\n */\n\nconst autoBind = require('auto-bind/react');\n\nclass Repeat extends Component {\n    constructor(props) {\n        super(props);\n        autoBind(this);\n\n        this.state = {\n            name: \"\", // task's name\n            rule: \"none\", // the repeat rule\n            advanced: false, // advanced or not\n            on: undefined, // advanced repeat rules\n        }\n    }\n\n    async loadTask() {\n        let taskInfo = await this.props.engine.db.getTaskInformation(this.props.uid, this.props.tid);\n        this.setState({\n            name: taskInfo.name, // name is name\n            rule: taskInfo.repeat ? taskInfo.repeat.rule : \"none\", // rule is rule, if there's a rule\n            advanced: taskInfo.repeat ? (taskInfo.repeat.on !== undefined) : false, // on is on, if there's a rule\n            on: taskInfo.repeat ? taskInfo.repeat.on : undefined, // on is on, if there's a rule\n        });\n    }\n\n    componentDidMount() {\n        this.loadTask();\n    }\n\n    render() {\n        return (\n            <IonModal ref={this.props.reference} isOpen={this.props.isShown} onDidDismiss={() => {if(this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5}} cssClass={\"task-repeat \"+(()=>{\n                // Different repeat modes require different height modals\n                 switch (this.state.rule) {\n                      case \"none\":\n                          return \"task-repeat__default\";\n                      case \"daily\":\n                          return \"task-repeat__default\";\n                      case \"weekly\":\n                          return (this.state.advanced ? \"task-repeat__advanced-weekly\" : \"task-repeat__default\");\n                      case \"monthly\":\n                          return (this.state.advanced ? \"task-repeat__advanced-monthly\" : \"task-repeat__default\");\n                      case \"yearly\":\n                          return \"task-repeat__default\";\n                  }\n            })()}>\n                <div>\n                    {/* Header */}\n                    <div className=\"repeat-header\">\n                        {/* Repeat name */}\n                        <span style={{display: \"flex\", alignItems: \"center\", width: \"100%\"}}>\n\t\t\t                <b className=\"bold-prefix\" >Repeat</b> \n\t\t\t                <div className=\"repeat-task-name\">{this.state.name}</div>\n\t\t\t            </span>\n                        {/* Close button */}\n                        <a className=\"repeat-close\" onClick={this.props.onDidDismiss}><i className=\"fa fa-times\"></i></a>\n                    </div>\n                    <div>\n                        <div className=\"repeat-basic-row\">\n                            <div className=\"repeat-rule-selector\">\n                            <span>\n                                <i className=\"repeat-label fa fa-redo\"></i>\n                                <span className=\"repeat-label\">Repeat</span>\n                            </span>\n                            {/* The big select, force iOS style */}\n                            <IonSelect className=\"repeat-select\" interface=\"popover\" value={this.state.rule} mode=\"ios\" onIonChange={e=>{\n                                    // Set the repeat\n                                    this.props.gruntman.do(\n                                        \"task.update\", \n                                        { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: e.detail.value}}}\n                                    )\n\n                                    // Set the state too!\n                                    this.setState({rule: e.detail.value, advanced: false, on: undefined});\n \n                                }}>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"none\">None</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"daily\">Daily</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"weekly\">Weekly</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"monthly\">Monthly</IonSelectOption>\n                                <IonSelectOption className=\"repeat-select__option\" value=\"yearly\">Yearly</IonSelectOption>\n                            </IonSelect>\n                            </div>\n                                {\n                                    \n                                <a style={{color: \"var(--decorative-light-alt)\", float: \"right\", cursor: \"pointer\", display: [\"weekly\", \"monthly\"].includes(this.state.rule) ? \"inline\" : \"none\" }} className={\"fas \" + (this.state.advanced ? \"fa-caret-down\":\"fa-caret-up\")} onClick={()=> {\n                                    if (this.state.advanced) {\n                                        this.props.gruntman.do(\n                                            \"task.update\", \n                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule}}}\n                                        ) // undo advanced \n                                        this.setState({rule: this.state.rule, advanced: false, on: undefined}); // set the state too!\n                                    } else {\n                                        this.props.gruntman.do(\n                                            \"task.update\", \n                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: []}}}\n                                        ) // do advanced \n                                        this.setState({rule: this.state.rule, advanced: true, on: []}); // set the state too!\n                                    }\n                                }}></a>\n                                }\n                        </div>\n                    </div>\n                    <div style={{margin: \"10px 20px\", color: \"var(--content-normal-alt)\"}}>\n                        {(()=>{\n                            if (this.state.advanced)\n                                switch (this.state.rule) {\n                                    case \"weekly\":\n                                        return (\n                                            <div className=\"repeat-weekgrid\">\n                                                {/* DONT LOCALIZE THESE VALUES. THEY WILL CAUSE PROBLEMS. ON LOCALIZATION, MAKE THESE ARRAYS */}\n                                                {/* [\"originalString\", \"localizedString\"] <= localize in this way */}\n                                                {[[\"M\", \"M\"], [\"T\", \"T\"], [\"W\", \"W\"], [\"Th\", \"Th\"], [\"F\", \"F\"], [\"S\", \"S\"], [\"Su\", \"Su\"]].map(e => <a key={e} className={\"repeat-weekgrid-number \"+ (()=>{if(this.state.on)  return (this.state.on.includes(e[0]) ? \"repeat-weekgrid-number-selected\":\"\"); else return \"\"})()} onClick={()=>{\n                                                    if (this.state.on.includes(e[0])) {\n                                                        let oldOn = this.state.on;\n                                                        let newOn = oldOn.filter(elem=>elem!==e[0]);\n                                                        // toggle it off\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    } else  {\n                                                        let oldOn = this.state.on;\n                                                        oldOn.push(e[0]);\n                                                        let newOn = oldOn;\n                                                        // toggle it on\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    }\n                                                }}>{e[1]}</a>)}\n                                            </div>\n                                        )\n                                    case \"monthly\":\n                                        return (\n                                            <div className=\"repeat-dategrid\">\n                                                {/* DONT LOCALIZE THESE VALUES. THEY WILL CAUSE PROBLEMS. ON LOCALIZATION, MAKE THESE ARRAYS */}\n                                                {[\"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\", \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\", \"28\", \"29\", \"30\", \"31\", \"Last\"].map(e => <a key={e} className={\"repeat-dategrid-number \"+ (()=>{if(this.state.on)  return (this.state.on.includes(e.toLowerCase()) ? \"repeat-dategrid-number-selected\":\"\"); else return \"\"})()} onClick={()=>{\n                                                    if (this.state.on.includes(e.toLowerCase())) {\n                                                        let oldOn = this.state.on;\n                                                        let newOn = oldOn.filter(elem=>elem!==e.toLowerCase());\n                                                        // toggle it off\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    } else  {\n                                                        let oldOn = this.state.on;\n                                                        oldOn.push(e.toLowerCase());\n                                                        let newOn = oldOn;\n                                                        // toggle it on\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{repeat: {rule: this.state.rule, on: newOn}}}\n                                                        )\n                                                        this.setState({on: newOn});\n                                                    }\n                                                }}>{e}</a>)}\n                                            </div>\n                                        );\n                                }\n                        })()}\n                    </div>\n                </div>\n            </IonModal>\n        )\n    }\n\n\n}\n\nexport default Repeat;\n\n","import { IonModal, IonContent, IonSelect, IonSelectOption } from '@ionic/react';\nimport { Dropdown } from 'react-bootstrap';\n//import { chevronForwardCircle, checkmarkCircle, filterOutline, listOutline, bicycle } from 'ionicons/icons';\nimport React, { Component } from 'react';\nimport './Repeat.css';\n//import OutsideClickHandler from 'react-outside-click-handler';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\n\n/*\n * Although I do not agree\n * Jack told me to make this feat\n * I did not make this carefree\n * yet this is far from elite\n *\n * I resolved to give it a try\n * and encountered this very strange bug\n * This thing makes me want to cry\n * Front-end is far from a drug\n *\n * I may be exageratting\n * Maybe this bug wasn't so bad\n * But still I cannot add padding\n * and it still makes me very sad\n *\n * React may feel like a drug\n * Until you find the next bug\n *\n * by @zbuster05\n * */\n\nconst autoBind = require('auto-bind/react');\n\nclass TagEditor extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {}\n    }\n    render() {\n        return (\n            <IonModal ref={this.props.reference} isOpen={this.props.isShown} onDidDismiss={() => {if(this.props.onDidDismiss) this.props.onDidDismiss()}} style={{borderRadius: 5}} cssClass={\"tag-editor\"}>\n                {/*Text Header*/}\n                <div className=\"TagEditor-header\">\n                    <span style={{display: \"flex\", alignItems: \"center\", width: \"100%\"}}>\n\t\t\t            <b className=\"bold-prefix\" >Tags</b> \n\t\t\t        </span>\n                    {/*Close Button*/}\n                    <a className=\"TagEditor-close\" onClick={this.props.onDidDismiss}><i className=\"fa fa-times\"></i></a>\n                </div>\n                <div className=\"tag-list\"></div>\n            </IonModal>\n        )\n    }\n}\n\nexport default TagEditor\n","// A whole lotta imports\n\n// Ionic components\nimport { IonItem, IonInput, IonContent, IonGrid, IonRow, IonCol, IonSegment, IonLabel, IonButton } from '@ionic/react';\n\n// Detect whether is mobile\nimport { getPlatforms } from '@ionic/react';\n\n// Like, your heart and soul\nimport React, { Component } from 'react';\n\n// React Spring animation packages\nimport { Spring, animated, Keyframes } from 'react-spring/renderprops'\n\n// Cool components \nimport DatePicker from 'react-datepicker';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport * as chrono from 'chrono-node';\nimport Select from 'react-select'\nimport CreatableSelect from 'react-select/creatable';\n\n// Our very own repeat UI\nimport Repeat from './Repeat';\n\n// Our very own tag editor UI\nimport TagEditor from './TagEditor';\n\n// Our very own CSS\nimport './Task.css';\n\n// Oooips\nimport ReactTooltip from 'react-tooltip';\n\n// FNS date parcing utils\nconst { parseFromTimeZone } = require('date-fns-timezone')\n\n// autobind those functions\nconst autoBind = require('auto-bind/react');\n\n/*\n *\n * Hello human,\n *\n * I am a task.\n *\n * You seriously are reading the help poem about this?\n *\n * @jemoka\n *\n */\n\n\n// Our very own custom animatinos\nconst AnimationFactory = Keyframes.Spring({\n    // Open->close animation\n    hide: {\n        to: {\n            taskHeight:38, \n            taskMargin: \"2px 8px\", \n            taskBackground:\"\", \n            taskPadding: 3,\n            taskEditOpacity: 0,\n            taskEditMaxHeight: 0,\n            taskOpacity: 1,\n            taskNameDecoration: \"\",\n            taskPosition: \"\",\n            taskDisplay: \"\",\n            taskMaxHeight: 40,\n        },\n        config: {\n            tension: 200,\n            friction: 25,\n            mass: 1\n        },\n        reset: false\n\n    },\n    // Close->open animation\n    show: {\n        to: {\n            taskHeight:38, \n            taskMargin:\"15px 25px\", \n            taskBackground:\"var(--task-feature)\", \n            taskPadding: 10,\n            taskEditOpacity: 1,\n            taskDisplay: \"\",\n            taskOpacity: 1,\n            taskEditMaxHeight: 300,\n            taskNameDecoration: \"\",\n            taskPosition: \"\",\n            taskMaxHeight: 500,\n        },\n        config: {\n            tension: 200,\n            friction: 25,\n            mass: 1\n        },\n        reset: false\n    },\n    // Incomplete->complete animation\n    complete: [\n        {\n            to: {\n                taskMargin: \"14px 8px\", \n                taskNameDecoration: \"line-through\",\n                taskOpacity: 1,\n                taskPosition: \"\",\n            },\n            config: {\n                tension: 200,\n                friction: 25,\n                mass: 1\n            },\n\n        }, \n        {\n            to: {\n                taskMaxHeight: 0,\n                taskHeight:0, \n                taskOpacity: 0,\n                taskMargin: \"0px 8px\", \n                taskPadding: 0,\n                taskPosition: \"absolute\",\n            },\n            config: {\n                tension: 800,\n                friction: 50,\n                mass: 1\n            },\n        }\n    ],\n})\n\n// Aww sheat, here we go\nclass Task extends Component {\n\n    constructor(props) {\n        // Invoke React's constructor\n        super(props);\n\n        // Bind it good!\n        autoBind(this);\n\n        this.state = { \n            expanded: false, // are we expanded?\n            deferDate: undefined, // what's our defer date?\n            dueDate: undefined, // what's our due date?\n            name: \"\", // what's our name string?\n            desc: \"\",  // what's our description string?\n            isFlagged: false, // are we flagged?\n            isFloating: false, // are we floating? or just eating jello?\n            project:\"\", // what's our project ID?\n            tags: [], // what are the IDs of our tags?\n            decoration: \"\",  // are we \"od\" \"ds\" or just just good ol' \"\"?\n            availability: true, // are we avaliable? or are we deferred or blocked (in which case it'd be false.)\n            isComplete: false, // are we completed?\n            showRepeat: false, // is our repeat UI shown?\n            showTagEditor: false, // is our TagEditor UI shown?\n            startingCompleted: this.props.startingCompleted, // disable immediate onComplete animation for completed\n            possibleTags: this.props.datapack[0], // tags will need to be dynamically added, so\n            haveBeenExpanded: (this.props.startOpen !== undefined && this.props.startOpen !== false) // did we render the edit part yet? optimization\n        }\n        this.initialRenderDone = false; // wait for data to load to make animation decisions\n        this.me = React.createRef(); // who am I? what am I?\n        this.repeater = React.createRef(); // what's my repeater?\n        this.checkbox = React.createRef(); // what's my pseudocheck\n        this.TagEditorRef = React.createRef(); // what's my tag editor\n        this.actualCheck = React.createRef(); // what's my (actual, non-seen) checkmark\n    }\n\n    showRepeat() {this.setState({showRepeat: true})} // util func for showing repeat\n    hideRepeat() {this.setState({showRepeat: false})} // util func for hiding repeat\n\n    showTagEditor() {this.setState({showTagEditor: true})} // function for showing tag editor\n    showTageEditor() {this.setState({showTageEditor: false})}  // function for hiding tag editor\n\n\n    // Monster function to query task info TODO TODO #cleanmeup\n    async loadTask() {\n\n        // Obviously we need this, the task info\n        let taskInfo = await this.props.engine.db.getTaskInformation(this.props.uid, this.props.tid);\n\n        // Setting state to update the rest of them elements\n        this.setState({\n            name: taskInfo.name, // Set name field\n            desc: taskInfo.desc, // Set task description\n            project: taskInfo.project,  // Set project ID\n            tags: taskInfo.tags, // Set tag ID array\n            isFloating: taskInfo.isFloating, // Set isFloating bool\n            isFlagged: taskInfo.isFlagged, // Set is Flagged bool\n            isComplete: taskInfo.isComplete, // Set is complete style\n            dueDate: (\n                taskInfo.due ? // If we have a due date\n                (taskInfo.isFloating ? // and if we are floating\n                    new Date(taskInfo.due.seconds*1000) : // then the due date in just... the due date\n                    parseFromTimeZone( // otherwise, we stringify the date to remove timezone info\n                        (new Date(taskInfo.due.seconds*1000)).toISOString(), \n                        {timeZone: taskInfo.timezone} // and cast it to the right time zone\n                    )\n                ):\n                undefined \n            ), \n            deferDate: (\n                taskInfo.defer ? // If we have a defer date\n                (taskInfo.isFloating ?  // and if we are floating\n                    new Date(taskInfo.defer.seconds*1000) : // then the defer date is just... the defer date\n                    parseFromTimeZone( // otherwise, we stringify the date to remove timezone info\n                        (new Date(taskInfo.defer.seconds*1000)).toISOString(), \n                        {timeZone: taskInfo.timezone} // and cast it to the right time zone\n                    )\n                ): undefined\n            )\n        });\n        this.refreshDecorations(); // flush and generate them decorations!\n        this.initialRenderDone = true;\n    }\n\n    refreshDecorations() {\n        if (this.state.dueDate) // if we gotta due date\n            if (this.state.dueDate-(new Date()) < 0) // and this kid has not done his homework\n                this.setState({decoration: \"od\"}); // give 'em a red badge\n        else if (this.state.dueDate-(new Date()) < 24*60*60*1000) // or if this kid has not done his homework a day earlier\n            this.setState({decoration: \"ds\"}); // give 'em an orange badge\n        else \n            this.setState({decoration: \"\"}); // give 'em an nothing badge\n\n        if (this.state.deferDate) // if we gotta defer date\n            if (this.state.deferDate-(new Date()) > 0) // and this kid is trying to start early\n                this.setState({availability: false}); // tell 'em it's not avaliable\n        else if (this.props.availability === true) //  otherwise, if this thing's avaliable\n            this.setState({availability: true}); // set it to be so!\n        else if (!this.props.availability) // or if my props make me disabled\n            this.setState({availability: false}); // well then you gotta follow them props, no?\n    }\n\n    componentDidMount() {\n        this.loadTask(); // load the task when we mount   \n        document.addEventListener('mousedown', this.detectOutsideClick, false); // and listen for clicks everywhere\n    }\n\n    componentWillUnmount = () => document.removeEventListener('mousedown', this.detectOutsideClick, false); // remove the listener... no memory leaks plez\n\n    toggleTask = () => this.setState(state => ({expanded: !state.expanded})); // util function to toggl a task\n    \n    closeTask() {\n        this.setState({expanded: false});\n    }\n    //closeTask = () => this.setState({expanded: false}); // util function to close a task\n\n    openTask() {\n        if (this.state.haveBeenExpanded)\n            this.setState({expanded: true});\n        else \n            this.setState({haveBeenExpanded: true}, ()=>this.setState({expanded: true}));\n    }// util function to open a task\n\n    _explode() {\n        // You should probably be calling openTask()\n        this.initialRenderDone = true;\n        this.setState({haveBeenExpanded: true}, ()=>this.setState({expanded: true}));\n    }\n\n    detectOutsideClick(e) {\n\n        if (this.me.current) // if we are mounted\n            if (this.me.current.contains(e.target)) // if we are clicking me\n                return; //click inside\n\n        if (this.repeater.current) // if our repeater is a thing that mounted\n            if (this.repeater.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n        \n        if (this.TagEditorRef.current) // if our repeater is a thing that mounted\n            if (this.TagEditorRef.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n        \n        if (this.props.envelope) // if we have a drag envelope\n            if (this.props.envelope.current.contains(e.target)) // and we are clicking inside that\n                return; //click inside\n\n        if (this.state.showRepeat) // if we are showing our repeat\n            return; //click inside\n\n        if (this.state.showTagEditor) // if we are showing TagEditor\n            return; // click inside\n\n        //otherwise,\n        this.closeTask();\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        // flush styles\n        if (prevState.deferDate !== this.state.deferDate) // if we updated the defer date\n            this.refreshDecorations();\n        if (prevState.dueDate !== this.state.dueDate) // if we updated the due date\n            this.refreshDecorations();\n        if (prevState.expanded !== this.state.expanded && this.state.expanded === true) {// if we opened a task for updating\n            if (this.props.setDragEnabled) // if we are a draggable task\n                this.props.setDragEnabled(false); // disable drag\n            this.props.gruntman.lockUpdates(); // tell gruntman to chill\n        }\n        else if (prevState.expanded !== this.state.expanded && this.state.expanded === false) { // if we closed a task\n            if (this.props.setDragEnabled) // if we are a draggable task\n                this.props.setDragEnabled(true); // enable drag\n            this.props.gruntman.unlockUpdates(); // tell gruntman to... grunt!\n        }\n        if (prevProps.startOpen !== this.props.startOpen && this.props.startOpen) // we are newly starting open\n            this.openTask(); // open task\n    }\n\n\n    // ready fo this?\n\n    render() {\n\n        return (\n            <div>\n\n                {/*animation factory to orchistrate animations*/}\n\n                <AnimationFactory\n\n                    native  \n\n                    state = {\n                        this.initialRenderDone ?\n                            (this.state.isComplete? // if we are complete \n                                (this.state.startingCompleted? // and we start complete \n                                    (this.state.expanded? // and we are expanded \n                                        \"show\":\"hide\") // show, otherwise, hide \n                                        :\"complete\") // if we are complete,  and don't start completed, complete. \n                                        : // if we arnt complete, \n                                this.state.startingCompleted ?  // and we start complete \n                                \"complete\" :\n                                (this.state.expanded? \"show\":\"hide\")):\"hide\"\n                    } // if we are incomplete, and we start incomplete, then show or hide based on expanded \n\n                >\n                    {animatedProps => {\n                        return (\n                            // Actual task container, now\n                            <animated.div \n                                onClick={(e)=>{\n                                    if(!this.state.expanded && e.target !== this.checkbox.current && e.target !== this.actualCheck.current && !this.props.freeze && !(this.state.isComplete&&!this.state.startingCompleted)) { \n                                        this.openTask(); // open the task\n                                    }\n                                }}\n                                className={\"task \"+(this.state.expanded?\"expanded\":\"collapsed\")} \n\n                                ref={this.me} \n\n                                style={{\n                                    minHeight: animatedProps.taskHeight, \n                                    maxHeight: animatedProps.taskMaxHeight, \n                                    margin: animatedProps.taskMargin, \n                                    background:animatedProps.taskBackground, \n                                    opacity:animatedProps.taskOpacity, \n                                    overflow: \"hidden\",\n                                    display: animatedProps.taskDisplay,\n                                    position: animated.taskPosition,\n                                    padding: animatedProps.taskPadding}}\n                            >\n\n                                {/* Chapter 0: Utility Components */}\n\n                                {/* Gotta get those on hover tips */}\n                                <ReactTooltip effect=\"solid\" offset={{top: 3}} backgroundColor=\"black\" className=\"tooltips\" />\n                                {/* And load up + hide the repeat UI, too! */}\n                                <Repeat tid={this.props.tid} reference={this.repeater} isShown={this.state.showRepeat} onDidDismiss={this.hideRepeat} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman}/>\n                                {/* As well as load up + hide the tag editor!*/}\n                                <TagEditor reference={this.TagEditorRef} isShown={this.state.showTagEditor} onDidDismiss={this.hideTagEditor} uid={this.props.uid} engine={this.props.engine} gruntman={this.props.gruntman}/>\n                                \n                                {/* Chapter 1: Task Checkmark */}\n                                {/* Who could have thought so much code goes into a checkbox? */}\n                                <div style={{display: \"inline-block\", transform: \"translateY(-3px)\"}}>\n                                    {/* First, an invisible checkmark */}\n                                    <input \n                                        type=\"checkbox\" \n\n     ref={this.actualCheck}\n                                        id={\"task-check-\"+this.props.tid} \n                                        className=\"task-check\"\n                                        defaultChecked={this.props.startingCompleted}\n                                        onChange={()=>{\n\n                                            // If we are uncompleting a task (that is, currently task is complete) \n                                            if (this.state.isComplete) {\n                                                this.props.gruntman.lockUpdates();\n                                                // Well, first, uncomplete it\n                                                this.setState({isComplete: false})\n                                                // Update the database, registering a gruntman action while you are at it.\n                                                this.props.gruntman.do(\"task.update__uncomplete\", { uid: this.props.uid, tid: this.props.tid}, true)\n                                                // Whatever this is\n                                                this.props.gruntman.unlockUpdates(1000)\n                                            }\n                                            // If we are completing a task (that is, currently task is incomplete)\n                                            else if (!this.state.isComplete) {\n                                                // Lock updates so that animation could finish\n                                                this.props.gruntman.lockUpdates();\n                                                // Complete it\n                                                this.setState({isComplete: true})\n                                                // Update the database, registering a gruntman action while you are at it.\n                                                this.props.gruntman.do(\"task.update__complete\", { uid: this.props.uid, tid: this.props.tid}, true)\n                                                //TODO wait for animation to finish before state update??\n                                                this.props.gruntman.unlockUpdates(1000)\n                                            }\n                                        }} \n                                        style={{opacity: this.state.availability?1:0.35}}\n                                    />\n\n                                    {/* Oh yeah, that checkmark above you can't actually see */}\n                                    {/* Here's what the user actually clicks on, the label! */}\n                                    <label ref={this.checkbox} className={\"task-pseudocheck \"+this.state.decoration} id={\"task-pseudocheck-\"+this.props.tid} htmlFor={\"task-check-\"+this.props.tid}>&zwnj;</label>\n                                </div>\n\n                                {/* The animated input box */}\n                                <animated.input \n                                    defaultValue={this.state.name} \n                                    placeholder={\"LOCALIZE: Task Name\"} \n                                    onChange={\n                                        (e)=>{\n                                            // THIS. REFER TO THIS. YOU ARE HERE. STOP SEARCHING.\n                                            // :point down: is FANCYCHANGE\n\n                                            // If somebody dares to do the complicated action of task name change\n                                            e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n\n                                            // Register a scheduler to watch for more changes\n                                            // because dang react calls onChange on every freaking change\n                                            // TODO TODO destruct all schedulers on view change\n                                            this.props.gruntman.registerScheduler(() => this.props.gruntman.do(\n                                                \"task.update\", // the scheduler actually updates the task\n                                                {\n                                                    uid: this.props.uid, \n                                                    tid: this.props.tid, \n                                                    query:{name: e.target.value} // setting the name to the name\n                                                }\n                                            ), `task-name-${this.props.tid}-update`) // and we will schedule it as this\n                                        }\n                                    } \n\n                                    onFocus={(e)=>{ \n                                        // open the task if its not open already\n                                        if(!this.state.expanded) { \n                                            //this.openTask(); // open the task\n                                            if (getPlatforms().includes(\"mobile\")) e.target.blur(); // blur, only if mobile to fix bugs where even in attempted readonly the cursor blurs\n                                        }\n                                    }} \n                                    className={\"task-name \"+(this.state.expanded?\"\":\"no-select\")} \n                                    readOnly={(!this.state.expanded)} \n                                    type=\"text\" \n                                    autoComplete=\"off\" \n                                    placeholder=\"LOCALIZE: Task Name\" \n                                    style={{opacity: this.state.availability?1:0.35, textDecoration: animatedProps.taskNameDecoration}} />\n\n                                {/* Task edit. The thing that slides open on edit. */}\n                                {(() => {\n                                    if (this.state.haveBeenExpanded===true)\n                                        return(\n                                            <animated.div className=\"task-edit\" style={{opacity: animatedProps.taskEditOpacity, overflow: \"hidden\",maxHeight: animatedProps.taskEditMaxHeight}}>\n                                                {/* First, task description field */}\n                                                <textarea \n                                                    placeholder=\"LOCALIZE:Description\" \n                                                    className=\"task-desc\" \n                                                    style={{marginBottom: 10}} \n                                                    defaultValue={this.state.desc}\n                                                    onChange={\n                                                        (e)=>{\n                                                            // Register a scheduler to deal with React's onChange\n                                                            // Search for the word FANCYCHANGE to read my spheal on this\n                                                            e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                            this.props.gruntman.registerScheduler(() => this.props.gruntman.do(\n                                                                \"task.update\", \n                                                                {\n                                                                    uid: this.props.uid, \n                                                                    tid: this.props.tid, \n                                                                    query:{desc: e.target.value}\n                                                                }\n                                                            ), `task-desc-${this.props.tid}-update`)\n                                                        }\n                                                    }\n                                                >\n                                                </textarea>\n\n                                                {/* Task icon set. TODO delete task */}\n                                                <div style={{display: \"inline-block\", marginBottom: 6, transform: \"translateY(-5px)\"}}>\n                                                    {/* Flagged icon */}\n                                                    <a data-tip=\"LOCALIZE: Flagged\" className=\"task-icon\" style={{borderColor: this.state.isFlagged ? \"var(--task-flaggedRing)\":\"var(--task-checkbox-feature-alt)\", cursor: \"pointer\"}} onClick={()=>{\n                                                        // On change, set the flagged state to the opposite of whatever it is\n                                                        // Both on the db...\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{isFlagged: !this.state.isFlagged}}\n                                                        )\n                                                        // And the task!\n                                                        this.setState({isFlagged: !this.state.isFlagged});\n\n                                                    }}><i className=\"fas fa-flag\" style={{margin: 3, color: this.state.isFlagged ? \"var(--task-flagged)\" : \"var(--task-textbox)\", fontSize: 15, transform: \"translate(7px, 5px)\"}} ></i></a>\n\n                                                    {/* Floating icon */}\n                                                    <a data-tip=\"LOCALIZE: Floating\" className=\"task-icon\" style={{borderColor: this.state.isFloating? \"var(--task-flaggedRing)\":\"var(--task-checkbox-feature-alt)\", cursor: \"pointer\"}} onClick={()=>{\n                                                        // On change, set the floating state to the opposite of whatever it is\n                                                        // Both on the db... TODO flush the timezone too?\n                                                        this.props.gruntman.do(\n                                                            \"task.update\", \n                                                            { uid: this.props.uid, tid: this.props.tid, query:{isFloating: !this.state.isFloating}}\n                                                        )\n                                                        // And the task!\n                                                        this.setState({isFloating: !this.state.isFloating});\n\n                                                    }}><i className=\"fas fa-globe-americas\" style={{margin: 3, color: this.state.isFloating? \"var(--task-flagged)\" : \"var(--task-textbox)\", fontSize: 15, transform: \"translate(7px, 5px)\"}} ></i></a>\n\n                                                    {/* Repeat icon that, on click, shows repeat */}\n                                                    <a onClick={this.showRepeat} className=\"task-icon\" style={{borderColor: \"var(--task-checkbox-feature-alt)\", marginRight: 20, cursor: \"pointer\"}} data-tip=\"LOCALIZE: Repeat\"><i className=\"fas fa-redo\" style={{margin: 3, color: \"var(--task-textbox)\", fontSize: 15, transform: \"translate(6.5px, 5.5px)\"}} ></i></a>\n                                                    {/* TagEditor icon that shows TagEditor on click*/}\n                                                    <a onClick={this.showTagEditor} className=\"task-icon\" style={{borderColor: \"var(--task-checkbox-feature-alt)\", marginRight: 20, cursor: \"pointer\"}} data-tip=\"LOCALIZE: Freaking TagEditor\"><i className=\"fas fa-tags\" style={{margin: 3, color: \"var(--task-textbox)\", fontSize: 15, transform: \"translate(6.5px, 5.5px)\"}}></i></a>\n                                                    {/*<div className=\"task-icon\" style={{borderColor: \"var(--task-checkbox-feature-alt)\", marginRight: 20}}><a className=\"fas fa-globe-americas\" style={{margin: 3, color: \"var(--task-textbox)\", fontSize: 13, transform: \"translate(2.5px, -0.5px)\"}}></a></div>*/}\n                                                </div>\n\n\n                                                {/* Task date set */}\n                                                <div style={{display: \"inline-block\", marginBottom: 8}}>\n\n                                                    {/* Defer date container */}\n                                                    <div style={{display: \"inline-block\", marginRight: 10, marginBottom: 5, marginLeft: 6}}>\n                                                        {/* The. Defer. Date. */}\n                                                        <i className=\"fas fa-play\" data-tip=\"LOCALIZE: Defer Date\" style={{transform: \"translateY(-1px)\", marginRight: 10, color: \"var(--task-icon)\", fontSize: 10}}></i>\n                                                        {(() => {\n                                                            {/* The. Defer. Date. Input. */}\n                                                            const DateInput = ({ value, onClick }) => { \n                                                                return (\n                                                                    <input className=\"task-datebox\" defaultValue={value} onChange={(e)=>{\n                                                                        // Register a scheduler to deal with React's onChange\n                                                                        // Search for the word FANCYCHANGE to read my spheal on this\n                                                                        // DATEHANDLING is here too. If you are looking for that, stop searching\n\n                                                                        e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                                        this.props.gruntman.registerScheduler(() => {\n                                                                            let d = chrono.parseDate(e.target.value); // NLP that date!\n                                                                            if (d) this.setState({deferDate: d}); // we we got a valid date, update the calendar UI\n                                                                            if (d) // and update the database too!\n                                                                                this.props.gruntman.do(\n                                                                                    \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{defer:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                                )\n                                                                        }, `task-defer-${this.props.tid}-update`)\n                                                                    }} onFocus={(e) => {\n                                                                        onClick();\n                                                                        e.target.focus();\n                                                                    }}\n                                                                    />\n                                                                );\n                                                            };\n                                                            const TimeInput = ({ value, onChange }) => {\n                                                                // IDK why this is needed, but it is. Sometimes it decides that it will drop the final 0?\n                                                                if (value.slice(value.length-2, value.length) === \":0\") value = value + \"0\";\n                                                                // TODO: calling complex string ops to fix an interface bug not a good idea?\n                                                                return (\n                                                                    <input\n                                                                        className=\"task-timebox\"\n                                                                        defaultValue={value}\n                                                                        onKeyPress={e => {\n                                                                            // TIMEHANDLING is here. If you are searching for that, it's here.\n                                                                            // But anyway, on change, parse the time\n                                                                            let d = chrono.parseDate(e.target.value); //TODO bad?\n                                                                            // ...and throw away the date \n                                                                            if (d && e.key === \"Enter\") onChange(d.getHours() + \":\" + d.getMinutes() + \":\" + d.getSeconds()); // TODO make this with the onChange API\n                                                                        }}\n                                                                    />\n                                                                )};\n                                                            return (\n                                                                <DatePicker\n                                                                    selected={this.state.deferDate}\n                                                                    onChange={date => {\n                                                                        // If the calendar got a new date, set it\n                                                                        this.setState({deferDate: date});\n\n                                                                        // No longer needed. State updates handle decoration udpates. Kept here for decorative purposes:\n                                                                        // and hit the DB too!\n                                                                        this.props.gruntman.do(\n                                                                            \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{defer: date, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                        )\n                                                                    }}\n                                                                    showTimeInput\n                                                                    dateFormat=\"MM/dd/yyyy h:mm aa\"\n                                                                    customTimeInput={<TimeInput />}\n                                                                    customInput={<DateInput />}\n                                                                />\n                                                            )\n                                                        })()}\n                                                    </div>\n\n                                                    <div style={{display: \"inline-block\", marginBottom: 5, marginLeft: 6}}>\n                                                        <i className=\"fas fa-stop\" data-tip=\"LOCALIZE: Due Date\" style={{transform: \"translateY(-1px)\", marginRight: 10, color: \"var(--task-icon)\", fontSize: 10}}></i>\n                                                        {(() => {\n                                                            const DateInput = ({ value, onClick }) => { \n                                                                return (\n                                                                    <input className=\"task-datebox\" defaultValue={value} onChange={(e)=>{\n                                                                        // Register a scheduler to deal with React's onChange\n                                                                        // Search for the word FANCYCHANGE to read my spheal on this\n                                                                        // Search for the word DATEHANDLING for what the heck the code actually does\n\n                                                                        e.persist(); //https://reactjs.org/docs/events.html#event-pooling\n                                                                        this.props.gruntman.registerScheduler(() => {\n                                                                            let d = chrono.parseDate(e.target.value);\n                                                                            if (d) this.setState({dueDate: d});\n                                                                            if (d)\n                                                                                this.props.gruntman.do(\n                                                                                    \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{due:d, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                                )\n\n                                                                        }, `task-due-${this.props.tid}-update`)\n                                                                    }\n                                                                        } onFocus={(e) => {\n                                                                            onClick();\n                                                                            e.target.focus();\n                                                                        }}\n                                                                    />\n                                                                );\n                                                            };\n                                                            const TimeInput = ({ value, onChange }) => {\n                                                                // IDK why this is needed, but it is. Sometimes it decides that it will drop the final 0?\n                                                                if (value.slice(value.length-2, value.length) === \":0\") value = value + \"0\";\n                                                                // TODO: calling complex string ops to fix an interface bug not a good idea?\n                                                                return (\n                                                                    <input\n                                                                        className=\"task-timebox\"\n                                                                        defaultValue={value}\n                                                                        onKeyPress={e => {\n                                                                            // Search for TIMEHANDLING for notes on time handling.\n                                                                            // But anyway, on change, parse the time\n                                                                            let d = chrono.parseDate(e.target.value); //TODO bad?\n                                                                            // ...and throw away the date \n                                                                            if (d && e.key === \"Enter\") onChange(d.getHours() + \":\" + d.getMinutes() + \":\" + d.getSeconds());\n                                                                        }}\n                                                                    />\n                                                                )};\n                                                            return (\n                                                                <DatePicker\n                                                                    selected={this.state.dueDate}\n                                                                    onChange={date => this.setState({dueDate: date})}\n                                                                    showTimeInput\n                                                                    isClearable\n                                                                    dateFormat=\"MM/dd/yyyy h:mm aa\"\n                                                                    customTimeInput={<TimeInput />}\n                                                                    customInput={<DateInput />}\n                                                                    onChange={date => {\n                                                                        // If the calendar got a new date, set it\n                                                                        this.setState({dueDate: date});\n\n                                                                        // and hit the DB too!\n                                                                        this.props.gruntman.do(\n                                                                            \"task.update\", { uid: this.props.uid, tid: this.props.tid, query:{due: date, timezone: Intl.DateTimeFormat().resolvedOptions().timeZone}}\n                                                                        )\n                                                                    }}\n                                                                />\n                                                            )\n                                                        })()}\n                                                    </div>\n                                                </div>\n                                                <div>\n                                                    {/* Task project container */}\n                                                    <span className=\"task-project-container\">\n                                                        {/* Icon */}\n                                                        <i className=\"fas fa-list-ul\" style={{margin: 3, color: \"var(--task-icon)\", fontSize: 13, marginRight: 5, transform: \"translateY(5px)\"}}></i>\n                                                        {/* Project select */}\n                                                        <Select \n                                                            options={this.props.datapack[1]}\n                                                            className='task-project'\n                                                            classNamePrefix='task-select'\n                                                            isClearable\n                                                            styles={{\n                                                                // Fixes the overlapping problem of the component\n                                                                menuPortal: provided => ({ ...provided, zIndex: \"9999 !important\" })\n                                                            }}\n                                                                                                                                                              menuPortalTarget={this.props.envelope ? this.props.envelope.current : this.me.current}\n                                                            value={this.props.datapack[1].filter(option => option.value === this.state.project)}\n                                                            onChange={(e)=>{\n                                                                {/* :point up: filter for only options with this project and set that to be the value */}\n                                                                {/* Actually update the project */}\n                                                                this.props.gruntman.do(\"task.update__project\", { uid: this.props.uid, tid: this.props.tid, oldProject: this.state.project===\"\"?undefined:this.state.project, project: (e?e.value:\"\")})\n                                                                {/* And set the state, too! */}\n                                                                this.setState({project:(e?e.value:\"\")});\n                                                            }}\n                                                        />\n                                                    </span>\n                                                    {/* Task tag container */}\n                                                    <span className=\"task-tag-container\">\n                                                        {/* Icon */}\n                                                        <i className=\"fas fa-tags\" style={{margin: 3, color: \"var(--task-icon)\", fontSize: 13, transform: \"translateY(5px)\"}}></i>\n                                                        {/* Tag select */}\n                                                        <CreatableSelect\n                                                            options={this.props.datapack[0]}\n                                                            className='task-tag'\n                                                            classNamePrefix='task-select'\n                                                            isClearable\n                                                            isMulti\n                                                            styles={{ menuPortal: base => ({ ...base, zIndex: 9999 }) }}\n                                                                                                                                              menuPortalTarget={this.props.envelope ? this.props.envelope.current : this.me.current}\n                                                            value={this.props.datapack[0].filter(option => this.state.tags.includes(option.value))}\n                                                            onChange={(newValue, actionMeta) => {\n                                                                let view = this;\n                                                                let tids = newValue?newValue.map(async function (e) { // for each tag\n                                                                    if (e.__isNew__) { // if it's a new tag\n                                                                        let tagID = (await view.props.gruntman.do( // create it!\n                                                                            \"tag.create\",\n                                                                            {\n                                                                                uid: view.props.uid,\n                                                                                name: e.label,\n                                                                            }, \n                                                                        )).id;\n                                                                        let originalTags = view.state.possibleTags; // get tags\n                                                                        originalTags.push({label: e.label, value: tagID}); // add our new tag\n                                                                        view.setState({possibleTags: originalTags}); // sax-a-boom!\n                                                                        return tagID;\n                                                                    } else\n                                                                        return e.value;\n                                                                }):[]; // find the correct tags sets, or set it to an empty set\n                                                                Promise.all(tids).then(tagIDs => {\n                                                                    this.setState({tags: tagIDs}); // set the state\n                                                                    this.props.gruntman.do(\n                                                                        \"task.update\", \n                                                                        {\n                                                                            uid: this.props.uid, \n                                                                            tid: this.props.tid, \n                                                                            query:{tags: tagIDs} // set a taskID\n                                                                        }\n                                                                    )\n                                                                });\n                                                            }}\n                                                        />\n                                                    </span>\n                                                </div>\n                                            </animated.div>\n                                        )\n                                })()}\n                            </animated.div>\n                        )}\n                    } \n                </AnimationFactory>\n            </div >\n\n\n        )\n    }\n}\n\nexport default Task;\n\n","//\"use strict\";\n\n// Initialize Firebase Application\n// TODO TODO TODO !!!! Change this on deploy\n\nlet storageType;\nlet sqliteDB;\nlet memoryDB;\nlet firebaseDB, fsRef;\nlet requestRefresh;\n\nconst { FilesystemDirectory, FilesystemEncoding, Plugins } = require('@capacitor/core');\nconst { Device, Filesystem } = Plugins;\n\nlet readiness;\n\nconst initStorage = (payload, ...features) => {\n /*   // Firebase App (the core Firebase SDK) is always required and*/\n    //// must be listed before other Firebase SDKs\n    // const firebase = require(\"firebase/app\");\n\n    let loaders = [];\n\n    if (features.includes(\"firebase\")) {\n        const obj = require(\"./../secrets.json\");\n        if (process.env.NODE_ENV === \"development\")\n            payload.firebase.initializeApp(obj.dbkeys.debug);\n        else if (process.env.NODE_ENV === \"production\")\n            payload.firebase.initializeApp(obj.dbkeys.deploy);\n        [ firebaseDB, fsRef ] = [payload.firebase.firestore(), payload.firebase.firestore];\n        firebaseDB.enablePersistence({synchronizeTabs: true}).catch(console.error);\n        loaders.push(new Promise(function(resolve) {\n            return resolve(fsRef);\n        }));\n    } \n\n    if (features.includes(\"sqlite\")) {\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        console.error(\"algobert come to the rescue!\");\n        // TODO: TODO: SQLITE 3!!\n        //const sqlite3 = require('sqlite3').verbose();   // see https://www.sqlitetutorial.net/sqlite-nodejs/connect/\n        const { FilesystemDirectory, Plugins } = require('@capacitor/core');\n        const { Device } = Plugins;\n        loaders.push((async function() {\n            const isMobile = (await Device.getInfo()).platform !== \"web\";\n            const dbRoot = isMobile ? FilesystemDirectory.Data : process.resourcesPath;\n            const dbPath = '/condution.db'; // TODO: use capacitor storage api\n            //sqliteDB = new sqlite3.Database(dbRoot+dbPath, (e)=>{if(e) console.error(e)});\n            return sqliteDB;\n        })());\n    } \n\n    if (features.includes(\"json\")) {\n        loaders.push((async function() {\n            const dbRoot = FilesystemDirectory.Data;\n            const dbPath = 'condution.json'; // TODO: use capacitor storage api\n            let contents;\n            try {\n                contents = (await Filesystem.readFile({\n                    path: dbPath,\n                    directory: dbRoot,\n                    encoding: FilesystemEncoding.UTF8\n                })).data;\n            } catch(e) {\n                contents = \"{}\";\n                await Filesystem.writeFile({\n                    path: dbPath,\n                    directory: dbRoot,\n                    data: JSON.stringify({}),\n                    encoding: FilesystemEncoding.UTF8\n                })\n            }\n            //contents = `{\"users\":{\"hard-storage-user\":{\"projects\":{\"asenuoth239p8\":{\"name\":\"bontehu\",\"is_sequential\":false,\"order\":0,\"parent\":\"\",\"top_level\":true, \"children\": []}}}}}`;\n            memoryDB = JSON.parse(contents);\n        })());\n    }\n\n    readiness = Promise.all(loaders);\n    return readiness;\n};\n\nconst useDb = (db, refresher=()=>{}) => {\n    storageType = db;\n    requestRefresh = refresher; // generate fresh refresher\n    return readiness;\n};\n\nconst [cRef, flush] = (() => {\n    //const { Plugins } = require('@capacitor/core');\n    //const { Network } = Plugins;\n\n    let cache = new Map();\n    let unsubscribeCallbacks = new Map();\n\n\n    function flush() {\n        /*\n         * Nukes the cache\n         *\n         * Used to log people out\n         *\n         * @return none\n         *\n         */\n        cache = new Map();\n        unsubscribeCallbacks = new Map();\n    }\n\n    function getFirebaseRef(path) {\n        /*\n         * Get a database reference.\n         *\n         * @param   path        A valid path array, see below.\n         * @return  reference   The generated reference\n         *\n         * Examples of valid path arrays:\n         *  [`collection/${docName}`] => DocumentReference\n         *  [\"collection\", \"docName\"] => DocumentReference\n         *  [\"collection\", \"docName\", \"collection\"] => CollectionReference\n         *  [\"collection\", [\"query\", \"params\"], [\"more\", \"params\"]] => Query\n         *  [\"collection\", [\"query\", \"params\"], \"docname\"] => DocumentReference\n         */\n        let ref = firebaseDB;\n        // special handling for first collection from root\n        console.assert(typeof path[0] === 'string');\n        if (path[0].includes('/'))\n            ref = ref.collectionGroup(path[0]);\n        else\n            ref = ref.collection(path[0]);\n        // generic handling\n        for (let nav of path.slice(1)) {\n            if (typeof nav === 'string') {\n                if (ref instanceof fsRef.DocumentReference) {\n                    ref = ref.collection(nav);\n                } else if (ref instanceof fsRef.Query) {\n                    ref = ref.doc(nav);\n                } else {\n                    throw new Error(\"Unknown reference\", ref.toString());\n                }\n            } else if (Array.isArray(nav)) {                // query, TODO shouldn't need to query\n                if (ref instanceof fsRef.Query) {\n                    ref = ref.where(...nav);\n                } else {\n                    throw new Error(\"Cannot query with\", nav.toString());\n                }\n                console.assert(ref instanceof fsRef.Query)\n            } else {\n                throw new Error(\"Cannot parse\", nav.toString());\n            }\n        }\n        return ref;\n    }\n\n    function generateRandomString() {\n        /*\n         * Generates a random string. Used for Ids.\n         * THIS IS NOT CRYPTOGRAPHICALLY SECURE\n         *\n         * @return  string  The random string\n         *\n         */\n\n        return Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2)+Math.random().toString(36).substring(2);\n    }\n\n    async function cachedRead(path) {   // TODO: make this also use hard storage, dupe for cachedSet\n        /*\n         * Get a snapshot from the cache.\n         *\n         * @param   path    The valid path to the reference\n         * @return  any     The result of calling `.get()` on the database reference\n         *\n         * Logic:\n         *  If the path is cached, return from cache.\n         *  Else, register a snapshot listener to update the cache\n         *      and return the newly cached value.\n         */\n        const TODOstring = JSON.stringify(path);        //  strigify to hash array\n        if (!cache.has(TODOstring)) {                   //  if path string isn't cached\n            // TODO: comment this out someday \\/\n            const ref = getFirebaseRef(path);           //  get the reference from the database\n            cache.set(TODOstring, ref.get());           //  save result in cache\n            unsubscribeCallbacks.set(TODOstring,        //  TODO: comment this code, someday\n                ref.onSnapshot({\n                    error: console.trace,\n                    next: (snap) => {\n                        cache.set(TODOstring, snap);\n                        requestRefresh();\n                    }\n                })\n            );\n        }\n        return await cache.get(TODOstring);\n    }\n\n    let diskJSONDB = function() {\n        const dbRoot = FilesystemDirectory.Data;\n        const dbPath = 'condution.json'; // TODO: use capacitor storage api\n        let read = async function() {\n            let contents = (await Filesystem.readFile({\n                path: dbPath,\n                directory: dbRoot,\n                encoding: FilesystemEncoding.UTF8\n            })).data;\n            memoryDB = JSON.parse(contents);\n        }\n\n        let write = async function() {\n            await Filesystem.writeFile({\n                path: dbPath,\n                directory: dbRoot,\n                data: JSON.stringify(memoryDB),\n                encoding: FilesystemEncoding.UTF8\n            })\n        }\n\n        return {read, write};\n    }()\n\n    async function storageRead(path) { \n        /*\n         * Read value in storage\n         *\n         * @param   path    The path to a reference\n         * @return  DocumentSnapshot    A snapshot of documents\n         *\n         */\n\n\n        let pointer;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Get an object pointer that's an option that\n             * looks like a noSQL object.  See JSON implimentation \n             * for tips and tricks.\n             *\n             */\n\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.some(i => {\n                pointer = pointer[i];\n                return (pointer === undefined); // https://stackoverflow.com/questions/2641347/short-circuit-array-foreach-like-calling-break\n            });\n        }\n\n        let parsed = (function parsePointer(pointer) {\n            /*\n             * Parse a dbPointerObject\n             *\n             * @param    pointer   A Javascript Object containing data\n             * @return   DocumentSnapshot   A Firebase-like Doc Snapshot\n             *\n             * TODO: also make this work for single documents, not just collections\n             */\n\n            let docRefs = [];\n            for (const docID in pointer) \n                docRefs.push({id: docID, data: ()=>Object.assign({}, pointer[docID]), exists: true}); // TODO TODO Better way to make JS objects immutable?\n            return {docs: docRefs}\n        })(pointer)\n        return parsed;\n    }\n\n    async function storageAdd(path, payload) {\n        /* \n         * Add a value\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            id = generateRandomString();\n            while (pointer[id]) id = generateRandomString();\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer[id] = payload;\n            await diskJSONDB.write();\n        }\n        return Object.assign({}, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n    async function storageDel(path) {\n        /* \n         * Sets the value of a document\n         *\n         * @param   path   Document Path\n         * @return  none\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            let task = path.pop();\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            delete pointer[task];\n            await diskJSONDB.write();\n        }\n    }\n\n    async function storageSet(path, payload) {\n        /* \n         * Sets the value of a document\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            let task = path.pop();\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer[task] = payload;\n            await diskJSONDB.write();\n        }\n        return Object.assign({}, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n    async function storageUpdate(path, payload) {\n        /* \n         * Object.assigns the value of a document\n         *\n         * @param   path   Document Path\n         * @param   payload   Object payload\n         * @return  Document Firebase-Style Document\n         * \n         */\n\n        let pointer;\n        let id;\n        if (storageType === \"sqlite3\") {\n            console.error(\"Algobert go bontehu\");\n            /*\n             * Unlike storageRead, ya just gotta impliment\n             * the whole thing. This is because the means and\n             * methods of writing for sqlite is probably \n             * extremely different compared to the JSON\n             * implimentation. Please return an ID. \n             */\n        } else if (storageType === \"json\") {\n            pointer = memoryDB;\n            path.forEach(i => {\n                if(!pointer[i]) pointer[i] = {};\n                pointer = pointer[i];\n            });\n            for (const key in payload) {\n                if (payload[key] instanceof Date) {\n                    payload[key] = {seconds: Math.round(payload[key].getTime()/1000)-5} // The function runs a bit too quickly. Bump time forward by 5 ms.\n                }\n            }\n            pointer = Object.assign(pointer, payload);\n            await diskJSONDB.write();\n        }\n        return Object.assign(payload, {id, data: payload, exists: true}); // TODO TODO Better way to make JS objects immutable?\n    }\n\n\n\n    //async function storageSet(path, value) {\n        /*\n         * Set a value in the storage.\n         *\n         * @param   path    The valid path to reference\n         * @param   value   The value to set it to\n         * @return  none\n         */\n    //    const TODOstring = JSON.stringify(path);    // stringify array, please change someday\n    //    // update storage\n    //    if (decideWhetherToUseHardStorage())\n    //\n    //    // maintain the cache\n    //    if (!cache.has(TODOstring)) {\n    //        cache.set();\n    //    }\n    //    const ref = getFirebaseRef(path);\n    //    ref.set(value);\n    //    cache.set(stringPath, value)\n    //}\n\n    function cacheRef(path) {\n        /*\n         * Get a reference wrapper that forces cache hits.\n         * This function will be exposed to the outside world.\n         *\n         * @param   path    A valid path array.\n         * @return  wrapper A wrapper object around the expected reference.\n         */\n        //console.log(getFirebaseRef(path));\n        \n        \n        return Object.assign(\n            getFirebaseRef(path),               //  default methods from firebase reference\n            { get: () => cachedRead(path) }     //  read on get, read from cache if available\n        );\n    }\n    function TODO() { console.error('bad news bears'); }\n    function storageRef(path) {\n        /*\n         * Get a reference wrapper that acts as a database blackbox.\n         *\n         * @param   path    A valid path array.\n         * @return  wrapper A wrapper object around the expected reference.\n         */\n        //console.log(ref.add, ref.doc, ref.docs);\n        return {\n            id: TODO,\n            add: (payload) => storageAdd(path, payload),\n            //doc: not here, right?,\n            //docs: not here, rgiht?, // TODO: docs.filter\n            get: () => storageRead(path),\n            set: (payload) => storageSet(path, payload),\n            update: (payload) => storageUpdate(path, payload),\n            delete: () => storageDel(path),\n        };\n    }\n\n    function dispatch(...path) {\n        /* \n         * Get the currently initialized storageRef\n         *\n         * @return  storageRef/CacheRef\n         *\n         */\n\n        switch (storageType) {\n            case \"firebase\":\n                return cacheRef(path);\n            default:\n                return storageRef(path);\n        }\n    }\n\n    return [dispatch, flush];\n})();\n\nexport default {__init__:initStorage, cRef, flush, useDb};\n\n"],"sourceRoot":""}